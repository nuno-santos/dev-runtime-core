{"encoding":"Base64","sourceCodeClasname":"NodejsProtoStub","sourceCode":"KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewoidXNlIHN0cmljdCI7KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzID09PSAib2JqZWN0IiAmJiB0eXBlb2YgbW9kdWxlICE9PSAidW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHMgPSBmKCk7fWVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kKXtkZWZpbmUoW10sZik7fWVsc2Uge3ZhciBnO2lmKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiKXtnID0gd2luZG93O31lbHNlIGlmKHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiKXtnID0gZ2xvYmFsO31lbHNlIGlmKHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIil7ZyA9IHNlbGY7fWVsc2Uge2cgPSB0aGlzO31nLk5vZGVqc1Byb3RvU3R1YiA9IGYoKTt9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmUgPT0gImZ1bmN0aW9uIiAmJiByZXF1aXJlO2lmKCF1ICYmIGEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIiArIG8gKyAiJyIpO3Rocm93IChmLmNvZGUgPSAiTU9EVUxFX05PVF9GT1VORCIsZik7fXZhciBsPW5bb10gPSB7ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKTt9LGwsbC5leHBvcnRzLGUsdCxuLHIpO31yZXR1cm4gbltvXS5leHBvcnRzO312YXIgaT10eXBlb2YgcmVxdWlyZSA9PSAiZnVuY3Rpb24iICYmIHJlcXVpcmU7Zm9yKHZhciBvPTA7byA8IHIubGVuZ3RoO28rKykgcyhyW29dKTtyZXR1cm4gczt9KSh7MTpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7IC8vdmFyIGlvID0gcmVxdWlyZSgnc29ja2V0LmlvLWNsaWVudCcpOwooZnVuY3Rpb24oZil7aWYodHlwZW9mIGV4cG9ydHMgPT09ICJvYmplY3QiICYmIHR5cGVvZiBtb2R1bGUgIT09ICJ1bmRlZmluZWQiKXttb2R1bGUuZXhwb3J0cyA9IGYoKTt9ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAiZnVuY3Rpb24iICYmIGRlZmluZS5hbWQpe2RlZmluZShbXSxmKTt9ZWxzZSB7dmFyIGc7aWYodHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCIpe2cgPSB3aW5kb3c7fWVsc2UgaWYodHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIpe2cgPSBnbG9iYWw7fWVsc2UgaWYodHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiKXtnID0gc2VsZjt9ZWxzZSB7ZyA9IHRoaXM7fWcuaW8gPSBmKCk7fX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlID09ICJmdW5jdGlvbiIgJiYgcmVxdWlyZTtpZighdSAmJiBhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIgKyBvICsgIiciKTt0aHJvdyAoZi5jb2RlID0gIk1PRFVMRV9OT1RfRk9VTkQiLGYpO312YXIgbD1uW29dID0ge2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSk7fSxsLGwuZXhwb3J0cyxlLHQsbixyKTt9cmV0dXJuIG5bb10uZXhwb3J0czt9dmFyIGk9dHlwZW9mIHJlcXVpcmUgPT0gImZ1bmN0aW9uIiAmJiByZXF1aXJlO2Zvcih2YXIgbz0wO28gPCByLmxlbmd0aDtvKyspIHMocltvXSk7cmV0dXJuIHM7fSkoezE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe3ZhciB1cmw9X2RlcmVxXygiLi91cmwiKTt2YXIgcGFyc2VyPV9kZXJlcV8oInNvY2tldC5pby1wYXJzZXIiKTt2YXIgTWFuYWdlcj1fZGVyZXFfKCIuL21hbmFnZXIiKTt2YXIgZGVidWc9X2RlcmVxXygiZGVidWciKSgic29ja2V0LmlvLWNsaWVudCIpO21vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IGxvb2t1cDt2YXIgY2FjaGU9ZXhwb3J0cy5tYW5hZ2VycyA9IHt9O2Z1bmN0aW9uIGxvb2t1cCh1cmksb3B0cyl7aWYodHlwZW9mIHVyaSA9PSAib2JqZWN0Iil7b3B0cyA9IHVyaTt1cmkgPSB1bmRlZmluZWQ7fW9wdHMgPSBvcHRzIHx8IHt9O3ZhciBwYXJzZWQ9dXJsKHVyaSk7dmFyIHNvdXJjZT1wYXJzZWQuc291cmNlO3ZhciBpZD1wYXJzZWQuaWQ7dmFyIHBhdGg9cGFyc2VkLnBhdGg7dmFyIHNhbWVOYW1lc3BhY2U9Y2FjaGVbaWRdICYmIHBhdGggaW4gY2FjaGVbaWRdLm5zcHM7dmFyIG5ld0Nvbm5lY3Rpb249b3B0cy5mb3JjZU5ldyB8fCBvcHRzWyJmb3JjZSBuZXcgY29ubmVjdGlvbiJdIHx8IGZhbHNlID09PSBvcHRzLm11bHRpcGxleCB8fCBzYW1lTmFtZXNwYWNlO3ZhciBpbztpZihuZXdDb25uZWN0aW9uKXtkZWJ1ZygiaWdub3Jpbmcgc29ja2V0IGNhY2hlIGZvciAlcyIsc291cmNlKTtpbyA9IE1hbmFnZXIoc291cmNlLG9wdHMpO31lbHNlIHtpZighY2FjaGVbaWRdKXtkZWJ1ZygibmV3IGlvIGluc3RhbmNlIGZvciAlcyIsc291cmNlKTtjYWNoZVtpZF0gPSBNYW5hZ2VyKHNvdXJjZSxvcHRzKTt9aW8gPSBjYWNoZVtpZF07fXJldHVybiBpby5zb2NrZXQocGFyc2VkLnBhdGgpO31leHBvcnRzLnByb3RvY29sID0gcGFyc2VyLnByb3RvY29sO2V4cG9ydHMuY29ubmVjdCA9IGxvb2t1cDtleHBvcnRzLk1hbmFnZXIgPSBfZGVyZXFfKCIuL21hbmFnZXIiKTtleHBvcnRzLlNvY2tldCA9IF9kZXJlcV8oIi4vc29ja2V0Iik7fSx7Ii4vbWFuYWdlciI6MiwiLi9zb2NrZXQiOjQsIi4vdXJsIjo1LGRlYnVnOjE0LCJzb2NrZXQuaW8tcGFyc2VyIjo0MX1dLDI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe3ZhciBlaW89X2RlcmVxXygiZW5naW5lLmlvLWNsaWVudCIpO3ZhciBTb2NrZXQ9X2RlcmVxXygiLi9zb2NrZXQiKTt2YXIgRW1pdHRlcj1fZGVyZXFfKCJjb21wb25lbnQtZW1pdHRlciIpO3ZhciBwYXJzZXI9X2RlcmVxXygic29ja2V0LmlvLXBhcnNlciIpO3ZhciBvbj1fZGVyZXFfKCIuL29uIik7dmFyIGJpbmQ9X2RlcmVxXygiY29tcG9uZW50LWJpbmQiKTt2YXIgZGVidWc9X2RlcmVxXygiZGVidWciKSgic29ja2V0LmlvLWNsaWVudDptYW5hZ2VyIik7dmFyIGluZGV4T2Y9X2RlcmVxXygiaW5kZXhvZiIpO3ZhciBCYWNrb2ZmPV9kZXJlcV8oImJhY2tvMiIpO3ZhciBoYXM9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTttb2R1bGUuZXhwb3J0cyA9IE1hbmFnZXI7ZnVuY3Rpb24gTWFuYWdlcih1cmksb3B0cyl7aWYoISh0aGlzIGluc3RhbmNlb2YgTWFuYWdlcikpcmV0dXJuIG5ldyBNYW5hZ2VyKHVyaSxvcHRzKTtpZih1cmkgJiYgIm9iamVjdCIgPT0gdHlwZW9mIHVyaSl7b3B0cyA9IHVyaTt1cmkgPSB1bmRlZmluZWQ7fW9wdHMgPSBvcHRzIHx8IHt9O29wdHMucGF0aCA9IG9wdHMucGF0aCB8fCAiL3NvY2tldC5pbyI7dGhpcy5uc3BzID0ge307dGhpcy5zdWJzID0gW107dGhpcy5vcHRzID0gb3B0czt0aGlzLnJlY29ubmVjdGlvbihvcHRzLnJlY29ubmVjdGlvbiAhPT0gZmFsc2UpO3RoaXMucmVjb25uZWN0aW9uQXR0ZW1wdHMob3B0cy5yZWNvbm5lY3Rpb25BdHRlbXB0cyB8fCBJbmZpbml0eSk7dGhpcy5yZWNvbm5lY3Rpb25EZWxheShvcHRzLnJlY29ubmVjdGlvbkRlbGF5IHx8IDFlMyk7dGhpcy5yZWNvbm5lY3Rpb25EZWxheU1heChvcHRzLnJlY29ubmVjdGlvbkRlbGF5TWF4IHx8IDVlMyk7dGhpcy5yYW5kb21pemF0aW9uRmFjdG9yKG9wdHMucmFuZG9taXphdGlvbkZhY3RvciB8fCAuNSk7dGhpcy5iYWNrb2ZmID0gbmV3IEJhY2tvZmYoe21pbjp0aGlzLnJlY29ubmVjdGlvbkRlbGF5KCksbWF4OnRoaXMucmVjb25uZWN0aW9uRGVsYXlNYXgoKSxqaXR0ZXI6dGhpcy5yYW5kb21pemF0aW9uRmFjdG9yKCl9KTt0aGlzLnRpbWVvdXQobnVsbCA9PSBvcHRzLnRpbWVvdXQ/MmU0Om9wdHMudGltZW91dCk7dGhpcy5yZWFkeVN0YXRlID0gImNsb3NlZCI7dGhpcy51cmkgPSB1cmk7dGhpcy5jb25uZWN0aW5nID0gW107dGhpcy5sYXN0UGluZyA9IG51bGw7dGhpcy5lbmNvZGluZyA9IGZhbHNlO3RoaXMucGFja2V0QnVmZmVyID0gW107dGhpcy5lbmNvZGVyID0gbmV3IHBhcnNlci5FbmNvZGVyKCk7dGhpcy5kZWNvZGVyID0gbmV3IHBhcnNlci5EZWNvZGVyKCk7dGhpcy5hdXRvQ29ubmVjdCA9IG9wdHMuYXV0b0Nvbm5lY3QgIT09IGZhbHNlO2lmKHRoaXMuYXV0b0Nvbm5lY3QpdGhpcy5vcGVuKCk7fU1hbmFnZXIucHJvdG90eXBlLmVtaXRBbGwgPSBmdW5jdGlvbigpe3RoaXMuZW1pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7Zm9yKHZhciBuc3AgaW4gdGhpcy5uc3BzKSB7aWYoaGFzLmNhbGwodGhpcy5uc3BzLG5zcCkpe3RoaXMubnNwc1tuc3BdLmVtaXQuYXBwbHkodGhpcy5uc3BzW25zcF0sYXJndW1lbnRzKTt9fX07TWFuYWdlci5wcm90b3R5cGUudXBkYXRlU29ja2V0SWRzID0gZnVuY3Rpb24oKXtmb3IodmFyIG5zcCBpbiB0aGlzLm5zcHMpIHtpZihoYXMuY2FsbCh0aGlzLm5zcHMsbnNwKSl7dGhpcy5uc3BzW25zcF0uaWQgPSB0aGlzLmVuZ2luZS5pZDt9fX07RW1pdHRlcihNYW5hZ2VyLnByb3RvdHlwZSk7TWFuYWdlci5wcm90b3R5cGUucmVjb25uZWN0aW9uID0gZnVuY3Rpb24odil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuX3JlY29ubmVjdGlvbjt0aGlzLl9yZWNvbm5lY3Rpb24gPSAhIXY7cmV0dXJuIHRoaXM7fTtNYW5hZ2VyLnByb3RvdHlwZS5yZWNvbm5lY3Rpb25BdHRlbXB0cyA9IGZ1bmN0aW9uKHYpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb25BdHRlbXB0czt0aGlzLl9yZWNvbm5lY3Rpb25BdHRlbXB0cyA9IHY7cmV0dXJuIHRoaXM7fTtNYW5hZ2VyLnByb3RvdHlwZS5yZWNvbm5lY3Rpb25EZWxheSA9IGZ1bmN0aW9uKHYpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb25EZWxheTt0aGlzLl9yZWNvbm5lY3Rpb25EZWxheSA9IHY7dGhpcy5iYWNrb2ZmICYmIHRoaXMuYmFja29mZi5zZXRNaW4odik7cmV0dXJuIHRoaXM7fTtNYW5hZ2VyLnByb3RvdHlwZS5yYW5kb21pemF0aW9uRmFjdG9yID0gZnVuY3Rpb24odil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuX3JhbmRvbWl6YXRpb25GYWN0b3I7dGhpcy5fcmFuZG9taXphdGlvbkZhY3RvciA9IHY7dGhpcy5iYWNrb2ZmICYmIHRoaXMuYmFja29mZi5zZXRKaXR0ZXIodik7cmV0dXJuIHRoaXM7fTtNYW5hZ2VyLnByb3RvdHlwZS5yZWNvbm5lY3Rpb25EZWxheU1heCA9IGZ1bmN0aW9uKHYpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aGlzLl9yZWNvbm5lY3Rpb25EZWxheU1heDt0aGlzLl9yZWNvbm5lY3Rpb25EZWxheU1heCA9IHY7dGhpcy5iYWNrb2ZmICYmIHRoaXMuYmFja29mZi5zZXRNYXgodik7cmV0dXJuIHRoaXM7fTtNYW5hZ2VyLnByb3RvdHlwZS50aW1lb3V0ID0gZnVuY3Rpb24odil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRoaXMuX3RpbWVvdXQ7dGhpcy5fdGltZW91dCA9IHY7cmV0dXJuIHRoaXM7fTtNYW5hZ2VyLnByb3RvdHlwZS5tYXliZVJlY29ubmVjdE9uT3BlbiA9IGZ1bmN0aW9uKCl7aWYoIXRoaXMucmVjb25uZWN0aW5nICYmIHRoaXMuX3JlY29ubmVjdGlvbiAmJiB0aGlzLmJhY2tvZmYuYXR0ZW1wdHMgPT09IDApe3RoaXMucmVjb25uZWN0KCk7fX07TWFuYWdlci5wcm90b3R5cGUub3BlbiA9IE1hbmFnZXIucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbihmbil7ZGVidWcoInJlYWR5U3RhdGUgJXMiLHRoaXMucmVhZHlTdGF0ZSk7aWYofnRoaXMucmVhZHlTdGF0ZS5pbmRleE9mKCJvcGVuIikpcmV0dXJuIHRoaXM7ZGVidWcoIm9wZW5pbmcgJXMiLHRoaXMudXJpKTt0aGlzLmVuZ2luZSA9IGVpbyh0aGlzLnVyaSx0aGlzLm9wdHMpO3ZhciBzb2NrZXQ9dGhpcy5lbmdpbmU7dmFyIHNlbGY9dGhpczt0aGlzLnJlYWR5U3RhdGUgPSAib3BlbmluZyI7dGhpcy5za2lwUmVjb25uZWN0ID0gZmFsc2U7dmFyIG9wZW5TdWI9b24oc29ja2V0LCJvcGVuIixmdW5jdGlvbigpe3NlbGYub25vcGVuKCk7Zm4gJiYgZm4oKTt9KTt2YXIgZXJyb3JTdWI9b24oc29ja2V0LCJlcnJvciIsZnVuY3Rpb24oZGF0YSl7ZGVidWcoImNvbm5lY3RfZXJyb3IiKTtzZWxmLmNsZWFudXAoKTtzZWxmLnJlYWR5U3RhdGUgPSAiY2xvc2VkIjtzZWxmLmVtaXRBbGwoImNvbm5lY3RfZXJyb3IiLGRhdGEpO2lmKGZuKXt2YXIgZXJyPW5ldyBFcnJvcigiQ29ubmVjdGlvbiBlcnJvciIpO2Vyci5kYXRhID0gZGF0YTtmbihlcnIpO31lbHNlIHtzZWxmLm1heWJlUmVjb25uZWN0T25PcGVuKCk7fX0pO2lmKGZhbHNlICE9PSB0aGlzLl90aW1lb3V0KXt2YXIgdGltZW91dD10aGlzLl90aW1lb3V0O2RlYnVnKCJjb25uZWN0IGF0dGVtcHQgd2lsbCB0aW1lb3V0IGFmdGVyICVkIix0aW1lb3V0KTt2YXIgdGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2RlYnVnKCJjb25uZWN0IGF0dGVtcHQgdGltZWQgb3V0IGFmdGVyICVkIix0aW1lb3V0KTtvcGVuU3ViLmRlc3Ryb3koKTtzb2NrZXQuY2xvc2UoKTtzb2NrZXQuZW1pdCgiZXJyb3IiLCJ0aW1lb3V0Iik7c2VsZi5lbWl0QWxsKCJjb25uZWN0X3RpbWVvdXQiLHRpbWVvdXQpO30sdGltZW91dCk7dGhpcy5zdWJzLnB1c2goe2Rlc3Ryb3k6ZnVuY3Rpb24gZGVzdHJveSgpe2NsZWFyVGltZW91dCh0aW1lcik7fX0pO310aGlzLnN1YnMucHVzaChvcGVuU3ViKTt0aGlzLnN1YnMucHVzaChlcnJvclN1Yik7cmV0dXJuIHRoaXM7fTtNYW5hZ2VyLnByb3RvdHlwZS5vbm9wZW4gPSBmdW5jdGlvbigpe2RlYnVnKCJvcGVuIik7dGhpcy5jbGVhbnVwKCk7dGhpcy5yZWFkeVN0YXRlID0gIm9wZW4iO3RoaXMuZW1pdCgib3BlbiIpO3ZhciBzb2NrZXQ9dGhpcy5lbmdpbmU7dGhpcy5zdWJzLnB1c2gob24oc29ja2V0LCJkYXRhIixiaW5kKHRoaXMsIm9uZGF0YSIpKSk7dGhpcy5zdWJzLnB1c2gob24oc29ja2V0LCJwaW5nIixiaW5kKHRoaXMsIm9ucGluZyIpKSk7dGhpcy5zdWJzLnB1c2gob24oc29ja2V0LCJwb25nIixiaW5kKHRoaXMsIm9ucG9uZyIpKSk7dGhpcy5zdWJzLnB1c2gob24oc29ja2V0LCJlcnJvciIsYmluZCh0aGlzLCJvbmVycm9yIikpKTt0aGlzLnN1YnMucHVzaChvbihzb2NrZXQsImNsb3NlIixiaW5kKHRoaXMsIm9uY2xvc2UiKSkpO3RoaXMuc3Vicy5wdXNoKG9uKHRoaXMuZGVjb2RlciwiZGVjb2RlZCIsYmluZCh0aGlzLCJvbmRlY29kZWQiKSkpO307TWFuYWdlci5wcm90b3R5cGUub25waW5nID0gZnVuY3Rpb24oKXt0aGlzLmxhc3RQaW5nID0gbmV3IERhdGUoKTt0aGlzLmVtaXRBbGwoInBpbmciKTt9O01hbmFnZXIucHJvdG90eXBlLm9ucG9uZyA9IGZ1bmN0aW9uKCl7dGhpcy5lbWl0QWxsKCJwb25nIixuZXcgRGF0ZSgpIC0gdGhpcy5sYXN0UGluZyk7fTtNYW5hZ2VyLnByb3RvdHlwZS5vbmRhdGEgPSBmdW5jdGlvbihkYXRhKXt0aGlzLmRlY29kZXIuYWRkKGRhdGEpO307TWFuYWdlci5wcm90b3R5cGUub25kZWNvZGVkID0gZnVuY3Rpb24ocGFja2V0KXt0aGlzLmVtaXQoInBhY2tldCIscGFja2V0KTt9O01hbmFnZXIucHJvdG90eXBlLm9uZXJyb3IgPSBmdW5jdGlvbihlcnIpe2RlYnVnKCJlcnJvciIsZXJyKTt0aGlzLmVtaXRBbGwoImVycm9yIixlcnIpO307TWFuYWdlci5wcm90b3R5cGUuc29ja2V0ID0gZnVuY3Rpb24obnNwKXt2YXIgc29ja2V0PXRoaXMubnNwc1tuc3BdO2lmKCFzb2NrZXQpe3NvY2tldCA9IG5ldyBTb2NrZXQodGhpcyxuc3ApO3RoaXMubnNwc1tuc3BdID0gc29ja2V0O3ZhciBzZWxmPXRoaXM7c29ja2V0Lm9uKCJjb25uZWN0aW5nIixvbkNvbm5lY3RpbmcpO3NvY2tldC5vbigiY29ubmVjdCIsZnVuY3Rpb24oKXtzb2NrZXQuaWQgPSBzZWxmLmVuZ2luZS5pZDt9KTtpZih0aGlzLmF1dG9Db25uZWN0KXtvbkNvbm5lY3RpbmcoKTt9fWZ1bmN0aW9uIG9uQ29ubmVjdGluZygpe2lmKCEgfmluZGV4T2Yoc2VsZi5jb25uZWN0aW5nLHNvY2tldCkpe3NlbGYuY29ubmVjdGluZy5wdXNoKHNvY2tldCk7fX1yZXR1cm4gc29ja2V0O307TWFuYWdlci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKHNvY2tldCl7dmFyIGluZGV4PWluZGV4T2YodGhpcy5jb25uZWN0aW5nLHNvY2tldCk7aWYofmluZGV4KXRoaXMuY29ubmVjdGluZy5zcGxpY2UoaW5kZXgsMSk7aWYodGhpcy5jb25uZWN0aW5nLmxlbmd0aClyZXR1cm47dGhpcy5jbG9zZSgpO307TWFuYWdlci5wcm90b3R5cGUucGFja2V0ID0gZnVuY3Rpb24ocGFja2V0KXtkZWJ1Zygid3JpdGluZyBwYWNrZXQgJWoiLHBhY2tldCk7dmFyIHNlbGY9dGhpcztpZighc2VsZi5lbmNvZGluZyl7c2VsZi5lbmNvZGluZyA9IHRydWU7dGhpcy5lbmNvZGVyLmVuY29kZShwYWNrZXQsZnVuY3Rpb24oZW5jb2RlZFBhY2tldHMpe2Zvcih2YXIgaT0wO2kgPCBlbmNvZGVkUGFja2V0cy5sZW5ndGg7aSsrKSB7c2VsZi5lbmdpbmUud3JpdGUoZW5jb2RlZFBhY2tldHNbaV0scGFja2V0Lm9wdGlvbnMpO31zZWxmLmVuY29kaW5nID0gZmFsc2U7c2VsZi5wcm9jZXNzUGFja2V0UXVldWUoKTt9KTt9ZWxzZSB7c2VsZi5wYWNrZXRCdWZmZXIucHVzaChwYWNrZXQpO319O01hbmFnZXIucHJvdG90eXBlLnByb2Nlc3NQYWNrZXRRdWV1ZSA9IGZ1bmN0aW9uKCl7aWYodGhpcy5wYWNrZXRCdWZmZXIubGVuZ3RoID4gMCAmJiAhdGhpcy5lbmNvZGluZyl7dmFyIHBhY2s9dGhpcy5wYWNrZXRCdWZmZXIuc2hpZnQoKTt0aGlzLnBhY2tldChwYWNrKTt9fTtNYW5hZ2VyLnByb3RvdHlwZS5jbGVhbnVwID0gZnVuY3Rpb24oKXtkZWJ1ZygiY2xlYW51cCIpO3ZhciBzdWI7d2hpbGUoc3ViID0gdGhpcy5zdWJzLnNoaWZ0KCkpIHN1Yi5kZXN0cm95KCk7dGhpcy5wYWNrZXRCdWZmZXIgPSBbXTt0aGlzLmVuY29kaW5nID0gZmFsc2U7dGhpcy5sYXN0UGluZyA9IG51bGw7dGhpcy5kZWNvZGVyLmRlc3Ryb3koKTt9O01hbmFnZXIucHJvdG90eXBlLmNsb3NlID0gTWFuYWdlci5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uKCl7ZGVidWcoImRpc2Nvbm5lY3QiKTt0aGlzLnNraXBSZWNvbm5lY3QgPSB0cnVlO3RoaXMucmVjb25uZWN0aW5nID0gZmFsc2U7aWYoIm9wZW5pbmciID09IHRoaXMucmVhZHlTdGF0ZSl7dGhpcy5jbGVhbnVwKCk7fXRoaXMuYmFja29mZi5yZXNldCgpO3RoaXMucmVhZHlTdGF0ZSA9ICJjbG9zZWQiO2lmKHRoaXMuZW5naW5lKXRoaXMuZW5naW5lLmNsb3NlKCk7fTtNYW5hZ2VyLnByb3RvdHlwZS5vbmNsb3NlID0gZnVuY3Rpb24ocmVhc29uKXtkZWJ1Zygib25jbG9zZSIpO3RoaXMuY2xlYW51cCgpO3RoaXMuYmFja29mZi5yZXNldCgpO3RoaXMucmVhZHlTdGF0ZSA9ICJjbG9zZWQiO3RoaXMuZW1pdCgiY2xvc2UiLHJlYXNvbik7aWYodGhpcy5fcmVjb25uZWN0aW9uICYmICF0aGlzLnNraXBSZWNvbm5lY3Qpe3RoaXMucmVjb25uZWN0KCk7fX07TWFuYWdlci5wcm90b3R5cGUucmVjb25uZWN0ID0gZnVuY3Rpb24oKXtpZih0aGlzLnJlY29ubmVjdGluZyB8fCB0aGlzLnNraXBSZWNvbm5lY3QpcmV0dXJuIHRoaXM7dmFyIHNlbGY9dGhpcztpZih0aGlzLmJhY2tvZmYuYXR0ZW1wdHMgPj0gdGhpcy5fcmVjb25uZWN0aW9uQXR0ZW1wdHMpe2RlYnVnKCJyZWNvbm5lY3QgZmFpbGVkIik7dGhpcy5iYWNrb2ZmLnJlc2V0KCk7dGhpcy5lbWl0QWxsKCJyZWNvbm5lY3RfZmFpbGVkIik7dGhpcy5yZWNvbm5lY3RpbmcgPSBmYWxzZTt9ZWxzZSB7dmFyIGRlbGF5PXRoaXMuYmFja29mZi5kdXJhdGlvbigpO2RlYnVnKCJ3aWxsIHdhaXQgJWRtcyBiZWZvcmUgcmVjb25uZWN0IGF0dGVtcHQiLGRlbGF5KTt0aGlzLnJlY29ubmVjdGluZyA9IHRydWU7dmFyIHRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihzZWxmLnNraXBSZWNvbm5lY3QpcmV0dXJuO2RlYnVnKCJhdHRlbXB0aW5nIHJlY29ubmVjdCIpO3NlbGYuZW1pdEFsbCgicmVjb25uZWN0X2F0dGVtcHQiLHNlbGYuYmFja29mZi5hdHRlbXB0cyk7c2VsZi5lbWl0QWxsKCJyZWNvbm5lY3RpbmciLHNlbGYuYmFja29mZi5hdHRlbXB0cyk7aWYoc2VsZi5za2lwUmVjb25uZWN0KXJldHVybjtzZWxmLm9wZW4oZnVuY3Rpb24oZXJyKXtpZihlcnIpe2RlYnVnKCJyZWNvbm5lY3QgYXR0ZW1wdCBlcnJvciIpO3NlbGYucmVjb25uZWN0aW5nID0gZmFsc2U7c2VsZi5yZWNvbm5lY3QoKTtzZWxmLmVtaXRBbGwoInJlY29ubmVjdF9lcnJvciIsZXJyLmRhdGEpO31lbHNlIHtkZWJ1ZygicmVjb25uZWN0IHN1Y2Nlc3MiKTtzZWxmLm9ucmVjb25uZWN0KCk7fX0pO30sZGVsYXkpO3RoaXMuc3Vicy5wdXNoKHtkZXN0cm95OmZ1bmN0aW9uIGRlc3Ryb3koKXtjbGVhclRpbWVvdXQodGltZXIpO319KTt9fTtNYW5hZ2VyLnByb3RvdHlwZS5vbnJlY29ubmVjdCA9IGZ1bmN0aW9uKCl7dmFyIGF0dGVtcHQ9dGhpcy5iYWNrb2ZmLmF0dGVtcHRzO3RoaXMucmVjb25uZWN0aW5nID0gZmFsc2U7dGhpcy5iYWNrb2ZmLnJlc2V0KCk7dGhpcy51cGRhdGVTb2NrZXRJZHMoKTt0aGlzLmVtaXRBbGwoInJlY29ubmVjdCIsYXR0ZW1wdCk7fTt9LHsiLi9vbiI6MywiLi9zb2NrZXQiOjQsYmFja28yOjgsImNvbXBvbmVudC1iaW5kIjoxMSwiY29tcG9uZW50LWVtaXR0ZXIiOjEyLGRlYnVnOjE0LCJlbmdpbmUuaW8tY2xpZW50IjoxNixpbmRleG9mOjMzLCJzb2NrZXQuaW8tcGFyc2VyIjo0MX1dLDM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzID0gb247ZnVuY3Rpb24gb24ob2JqLGV2LGZuKXtvYmoub24oZXYsZm4pO3JldHVybiB7ZGVzdHJveTpmdW5jdGlvbiBkZXN0cm95KCl7b2JqLnJlbW92ZUxpc3RlbmVyKGV2LGZuKTt9fTt9fSx7fV0sNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7dmFyIHBhcnNlcj1fZGVyZXFfKCJzb2NrZXQuaW8tcGFyc2VyIik7dmFyIEVtaXR0ZXI9X2RlcmVxXygiY29tcG9uZW50LWVtaXR0ZXIiKTt2YXIgdG9BcnJheT1fZGVyZXFfKCJ0by1hcnJheSIpO3ZhciBvbj1fZGVyZXFfKCIuL29uIik7dmFyIGJpbmQ9X2RlcmVxXygiY29tcG9uZW50LWJpbmQiKTt2YXIgZGVidWc9X2RlcmVxXygiZGVidWciKSgic29ja2V0LmlvLWNsaWVudDpzb2NrZXQiKTt2YXIgaGFzQmluPV9kZXJlcV8oImhhcy1iaW5hcnkiKTttb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBTb2NrZXQ7dmFyIGV2ZW50cz17Y29ubmVjdDoxLGNvbm5lY3RfZXJyb3I6MSxjb25uZWN0X3RpbWVvdXQ6MSxjb25uZWN0aW5nOjEsZGlzY29ubmVjdDoxLGVycm9yOjEscmVjb25uZWN0OjEscmVjb25uZWN0X2F0dGVtcHQ6MSxyZWNvbm5lY3RfZmFpbGVkOjEscmVjb25uZWN0X2Vycm9yOjEscmVjb25uZWN0aW5nOjEscGluZzoxLHBvbmc6MX07dmFyIGVtaXQ9RW1pdHRlci5wcm90b3R5cGUuZW1pdDtmdW5jdGlvbiBTb2NrZXQoaW8sbnNwKXt0aGlzLmlvID0gaW87dGhpcy5uc3AgPSBuc3A7dGhpcy5qc29uID0gdGhpczt0aGlzLmlkcyA9IDA7dGhpcy5hY2tzID0ge307dGhpcy5yZWNlaXZlQnVmZmVyID0gW107dGhpcy5zZW5kQnVmZmVyID0gW107dGhpcy5jb25uZWN0ZWQgPSBmYWxzZTt0aGlzLmRpc2Nvbm5lY3RlZCA9IHRydWU7aWYodGhpcy5pby5hdXRvQ29ubmVjdCl0aGlzLm9wZW4oKTt9RW1pdHRlcihTb2NrZXQucHJvdG90eXBlKTtTb2NrZXQucHJvdG90eXBlLnN1YkV2ZW50cyA9IGZ1bmN0aW9uKCl7aWYodGhpcy5zdWJzKXJldHVybjt2YXIgaW89dGhpcy5pbzt0aGlzLnN1YnMgPSBbb24oaW8sIm9wZW4iLGJpbmQodGhpcywib25vcGVuIikpLG9uKGlvLCJwYWNrZXQiLGJpbmQodGhpcywib25wYWNrZXQiKSksb24oaW8sImNsb3NlIixiaW5kKHRoaXMsIm9uY2xvc2UiKSldO307U29ja2V0LnByb3RvdHlwZS5vcGVuID0gU29ja2V0LnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24oKXtpZih0aGlzLmNvbm5lY3RlZClyZXR1cm4gdGhpczt0aGlzLnN1YkV2ZW50cygpO3RoaXMuaW8ub3BlbigpO2lmKCJvcGVuIiA9PSB0aGlzLmlvLnJlYWR5U3RhdGUpdGhpcy5vbm9wZW4oKTt0aGlzLmVtaXQoImNvbm5lY3RpbmciKTtyZXR1cm4gdGhpczt9O1NvY2tldC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKCl7dmFyIGFyZ3M9dG9BcnJheShhcmd1bWVudHMpO2FyZ3MudW5zaGlmdCgibWVzc2FnZSIpO3RoaXMuZW1pdC5hcHBseSh0aGlzLGFyZ3MpO3JldHVybiB0aGlzO307U29ja2V0LnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24oZXYpe2lmKGV2ZW50cy5oYXNPd25Qcm9wZXJ0eShldikpe2VtaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiB0aGlzO312YXIgYXJncz10b0FycmF5KGFyZ3VtZW50cyk7dmFyIHBhcnNlclR5cGU9cGFyc2VyLkVWRU5UO2lmKGhhc0JpbihhcmdzKSl7cGFyc2VyVHlwZSA9IHBhcnNlci5CSU5BUllfRVZFTlQ7fXZhciBwYWNrZXQ9e3R5cGU6cGFyc2VyVHlwZSxkYXRhOmFyZ3N9O3BhY2tldC5vcHRpb25zID0ge307cGFja2V0Lm9wdGlvbnMuY29tcHJlc3MgPSAhdGhpcy5mbGFncyB8fCBmYWxzZSAhPT0gdGhpcy5mbGFncy5jb21wcmVzcztpZigiZnVuY3Rpb24iID09IHR5cGVvZiBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0pe2RlYnVnKCJlbWl0dGluZyBwYWNrZXQgd2l0aCBhY2sgaWQgJWQiLHRoaXMuaWRzKTt0aGlzLmFja3NbdGhpcy5pZHNdID0gYXJncy5wb3AoKTtwYWNrZXQuaWQgPSB0aGlzLmlkcysrO31pZih0aGlzLmNvbm5lY3RlZCl7dGhpcy5wYWNrZXQocGFja2V0KTt9ZWxzZSB7dGhpcy5zZW5kQnVmZmVyLnB1c2gocGFja2V0KTt9ZGVsZXRlIHRoaXMuZmxhZ3M7cmV0dXJuIHRoaXM7fTtTb2NrZXQucHJvdG90eXBlLnBhY2tldCA9IGZ1bmN0aW9uKHBhY2tldCl7cGFja2V0Lm5zcCA9IHRoaXMubnNwO3RoaXMuaW8ucGFja2V0KHBhY2tldCk7fTtTb2NrZXQucHJvdG90eXBlLm9ub3BlbiA9IGZ1bmN0aW9uKCl7ZGVidWcoInRyYW5zcG9ydCBpcyBvcGVuIC0gY29ubmVjdGluZyIpO2lmKCIvIiAhPSB0aGlzLm5zcCl7dGhpcy5wYWNrZXQoe3R5cGU6cGFyc2VyLkNPTk5FQ1R9KTt9fTtTb2NrZXQucHJvdG90eXBlLm9uY2xvc2UgPSBmdW5jdGlvbihyZWFzb24pe2RlYnVnKCJjbG9zZSAoJXMpIixyZWFzb24pO3RoaXMuY29ubmVjdGVkID0gZmFsc2U7dGhpcy5kaXNjb25uZWN0ZWQgPSB0cnVlO2RlbGV0ZSB0aGlzLmlkO3RoaXMuZW1pdCgiZGlzY29ubmVjdCIscmVhc29uKTt9O1NvY2tldC5wcm90b3R5cGUub25wYWNrZXQgPSBmdW5jdGlvbihwYWNrZXQpe2lmKHBhY2tldC5uc3AgIT0gdGhpcy5uc3ApcmV0dXJuO3N3aXRjaChwYWNrZXQudHlwZSl7Y2FzZSBwYXJzZXIuQ09OTkVDVDp0aGlzLm9uY29ubmVjdCgpO2JyZWFrO2Nhc2UgcGFyc2VyLkVWRU5UOnRoaXMub25ldmVudChwYWNrZXQpO2JyZWFrO2Nhc2UgcGFyc2VyLkJJTkFSWV9FVkVOVDp0aGlzLm9uZXZlbnQocGFja2V0KTticmVhaztjYXNlIHBhcnNlci5BQ0s6dGhpcy5vbmFjayhwYWNrZXQpO2JyZWFrO2Nhc2UgcGFyc2VyLkJJTkFSWV9BQ0s6dGhpcy5vbmFjayhwYWNrZXQpO2JyZWFrO2Nhc2UgcGFyc2VyLkRJU0NPTk5FQ1Q6dGhpcy5vbmRpc2Nvbm5lY3QoKTticmVhaztjYXNlIHBhcnNlci5FUlJPUjp0aGlzLmVtaXQoImVycm9yIixwYWNrZXQuZGF0YSk7YnJlYWs7fX07U29ja2V0LnByb3RvdHlwZS5vbmV2ZW50ID0gZnVuY3Rpb24ocGFja2V0KXt2YXIgYXJncz1wYWNrZXQuZGF0YSB8fCBbXTtkZWJ1ZygiZW1pdHRpbmcgZXZlbnQgJWoiLGFyZ3MpO2lmKG51bGwgIT0gcGFja2V0LmlkKXtkZWJ1ZygiYXR0YWNoaW5nIGFjayBjYWxsYmFjayB0byBldmVudCIpO2FyZ3MucHVzaCh0aGlzLmFjayhwYWNrZXQuaWQpKTt9aWYodGhpcy5jb25uZWN0ZWQpe2VtaXQuYXBwbHkodGhpcyxhcmdzKTt9ZWxzZSB7dGhpcy5yZWNlaXZlQnVmZmVyLnB1c2goYXJncyk7fX07U29ja2V0LnByb3RvdHlwZS5hY2sgPSBmdW5jdGlvbihpZCl7dmFyIHNlbGY9dGhpczt2YXIgc2VudD1mYWxzZTtyZXR1cm4gZnVuY3Rpb24oKXtpZihzZW50KXJldHVybjtzZW50ID0gdHJ1ZTt2YXIgYXJncz10b0FycmF5KGFyZ3VtZW50cyk7ZGVidWcoInNlbmRpbmcgYWNrICVqIixhcmdzKTt2YXIgdHlwZT1oYXNCaW4oYXJncyk/cGFyc2VyLkJJTkFSWV9BQ0s6cGFyc2VyLkFDSztzZWxmLnBhY2tldCh7dHlwZTp0eXBlLGlkOmlkLGRhdGE6YXJnc30pO307fTtTb2NrZXQucHJvdG90eXBlLm9uYWNrID0gZnVuY3Rpb24ocGFja2V0KXt2YXIgYWNrPXRoaXMuYWNrc1twYWNrZXQuaWRdO2lmKCJmdW5jdGlvbiIgPT0gdHlwZW9mIGFjayl7ZGVidWcoImNhbGxpbmcgYWNrICVzIHdpdGggJWoiLHBhY2tldC5pZCxwYWNrZXQuZGF0YSk7YWNrLmFwcGx5KHRoaXMscGFja2V0LmRhdGEpO2RlbGV0ZSB0aGlzLmFja3NbcGFja2V0LmlkXTt9ZWxzZSB7ZGVidWcoImJhZCBhY2sgJXMiLHBhY2tldC5pZCk7fX07U29ja2V0LnByb3RvdHlwZS5vbmNvbm5lY3QgPSBmdW5jdGlvbigpe3RoaXMuY29ubmVjdGVkID0gdHJ1ZTt0aGlzLmRpc2Nvbm5lY3RlZCA9IGZhbHNlO3RoaXMuZW1pdCgiY29ubmVjdCIpO3RoaXMuZW1pdEJ1ZmZlcmVkKCk7fTtTb2NrZXQucHJvdG90eXBlLmVtaXRCdWZmZXJlZCA9IGZ1bmN0aW9uKCl7dmFyIGk7Zm9yKGkgPSAwO2kgPCB0aGlzLnJlY2VpdmVCdWZmZXIubGVuZ3RoO2krKykge2VtaXQuYXBwbHkodGhpcyx0aGlzLnJlY2VpdmVCdWZmZXJbaV0pO310aGlzLnJlY2VpdmVCdWZmZXIgPSBbXTtmb3IoaSA9IDA7aSA8IHRoaXMuc2VuZEJ1ZmZlci5sZW5ndGg7aSsrKSB7dGhpcy5wYWNrZXQodGhpcy5zZW5kQnVmZmVyW2ldKTt9dGhpcy5zZW5kQnVmZmVyID0gW107fTtTb2NrZXQucHJvdG90eXBlLm9uZGlzY29ubmVjdCA9IGZ1bmN0aW9uKCl7ZGVidWcoInNlcnZlciBkaXNjb25uZWN0ICglcykiLHRoaXMubnNwKTt0aGlzLmRlc3Ryb3koKTt0aGlzLm9uY2xvc2UoImlvIHNlcnZlciBkaXNjb25uZWN0Iik7fTtTb2NrZXQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpe2lmKHRoaXMuc3Vicyl7Zm9yKHZhciBpPTA7aSA8IHRoaXMuc3Vicy5sZW5ndGg7aSsrKSB7dGhpcy5zdWJzW2ldLmRlc3Ryb3koKTt9dGhpcy5zdWJzID0gbnVsbDt9dGhpcy5pby5kZXN0cm95KHRoaXMpO307U29ja2V0LnByb3RvdHlwZS5jbG9zZSA9IFNvY2tldC5wcm90b3R5cGUuZGlzY29ubmVjdCA9IGZ1bmN0aW9uKCl7aWYodGhpcy5jb25uZWN0ZWQpe2RlYnVnKCJwZXJmb3JtaW5nIGRpc2Nvbm5lY3QgKCVzKSIsdGhpcy5uc3ApO3RoaXMucGFja2V0KHt0eXBlOnBhcnNlci5ESVNDT05ORUNUfSk7fXRoaXMuZGVzdHJveSgpO2lmKHRoaXMuY29ubmVjdGVkKXt0aGlzLm9uY2xvc2UoImlvIGNsaWVudCBkaXNjb25uZWN0Iik7fXJldHVybiB0aGlzO307U29ja2V0LnByb3RvdHlwZS5jb21wcmVzcyA9IGZ1bmN0aW9uKGNvbXByZXNzKXt0aGlzLmZsYWdzID0gdGhpcy5mbGFncyB8fCB7fTt0aGlzLmZsYWdzLmNvbXByZXNzID0gY29tcHJlc3M7cmV0dXJuIHRoaXM7fTt9LHsiLi9vbiI6MywiY29tcG9uZW50LWJpbmQiOjExLCJjb21wb25lbnQtZW1pdHRlciI6MTIsZGVidWc6MTQsImhhcy1iaW5hcnkiOjMxLCJzb2NrZXQuaW8tcGFyc2VyIjo0MSwidG8tYXJyYXkiOjQ0fV0sNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7dmFyIHBhcnNldXJpPV9kZXJlcV8oInBhcnNldXJpIik7dmFyIGRlYnVnPV9kZXJlcV8oImRlYnVnIikoInNvY2tldC5pby1jbGllbnQ6dXJsIik7bW9kdWxlLmV4cG9ydHMgPSB1cmw7ZnVuY3Rpb24gdXJsKHVyaSxsb2Mpe3ZhciBvYmo9dXJpO3ZhciBsb2M9bG9jIHx8IGdsb2JhbC5sb2NhdGlvbjtpZihudWxsID09IHVyaSl1cmkgPSBsb2MucHJvdG9jb2wgKyAiLy8iICsgbG9jLmhvc3Q7aWYoInN0cmluZyIgPT0gdHlwZW9mIHVyaSl7aWYoIi8iID09IHVyaS5jaGFyQXQoMCkpe2lmKCIvIiA9PSB1cmkuY2hhckF0KDEpKXt1cmkgPSBsb2MucHJvdG9jb2wgKyB1cmk7fWVsc2Uge3VyaSA9IGxvYy5ob3N0ICsgdXJpO319aWYoIS9eKGh0dHBzP3x3c3M/KTpcL1wvLy50ZXN0KHVyaSkpe2RlYnVnKCJwcm90b2NvbC1sZXNzIHVybCAlcyIsdXJpKTtpZigidW5kZWZpbmVkIiAhPSB0eXBlb2YgbG9jKXt1cmkgPSBsb2MucHJvdG9jb2wgKyAiLy8iICsgdXJpO31lbHNlIHt1cmkgPSAiaHR0cHM6Ly8iICsgdXJpO319ZGVidWcoInBhcnNlICVzIix1cmkpO29iaiA9IHBhcnNldXJpKHVyaSk7fWlmKCFvYmoucG9ydCl7aWYoL14oaHR0cHx3cykkLy50ZXN0KG9iai5wcm90b2NvbCkpe29iai5wb3J0ID0gIjgwIjt9ZWxzZSBpZigvXihodHRwfHdzKXMkLy50ZXN0KG9iai5wcm90b2NvbCkpe29iai5wb3J0ID0gIjQ0MyI7fX1vYmoucGF0aCA9IG9iai5wYXRoIHx8ICIvIjt2YXIgaXB2Nj1vYmouaG9zdC5pbmRleE9mKCI6IikgIT09IC0xO3ZhciBob3N0PWlwdjY/IlsiICsgb2JqLmhvc3QgKyAiXSI6b2JqLmhvc3Q7b2JqLmlkID0gb2JqLnByb3RvY29sICsgIjovLyIgKyBob3N0ICsgIjoiICsgb2JqLnBvcnQ7b2JqLmhyZWYgPSBvYmoucHJvdG9jb2wgKyAiOi8vIiArIGhvc3QgKyAobG9jICYmIGxvYy5wb3J0ID09IG9iai5wb3J0PyIiOiI6IiArIG9iai5wb3J0KTtyZXR1cm4gb2JqO319KS5jYWxsKHRoaXMsdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCI/d2luZG93OnR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiP2dsb2JhbDp7fSk7fSx7ZGVidWc6MTQscGFyc2V1cmk6Mzl9XSw2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cyA9IGFmdGVyO2Z1bmN0aW9uIGFmdGVyKGNvdW50LGNhbGxiYWNrLGVycl9jYil7dmFyIGJhaWw9ZmFsc2U7ZXJyX2NiID0gZXJyX2NiIHx8IG5vb3A7cHJveHkuY291bnQgPSBjb3VudDtyZXR1cm4gY291bnQgPT09IDA/Y2FsbGJhY2soKTpwcm94eTtmdW5jdGlvbiBwcm94eShlcnIscmVzdWx0KXtpZihwcm94eS5jb3VudCA8PSAwKXt0aHJvdyBuZXcgRXJyb3IoImFmdGVyIGNhbGxlZCB0b28gbWFueSB0aW1lcyIpO30tLXByb3h5LmNvdW50O2lmKGVycil7YmFpbCA9IHRydWU7Y2FsbGJhY2soZXJyKTtjYWxsYmFjayA9IGVycl9jYjt9ZWxzZSBpZihwcm94eS5jb3VudCA9PT0gMCAmJiAhYmFpbCl7Y2FsbGJhY2sobnVsbCxyZXN1bHQpO319fWZ1bmN0aW9uIG5vb3AoKXt9fSx7fV0sNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcnJheWJ1ZmZlcixzdGFydCxlbmQpe3ZhciBieXRlcz1hcnJheWJ1ZmZlci5ieXRlTGVuZ3RoO3N0YXJ0ID0gc3RhcnQgfHwgMDtlbmQgPSBlbmQgfHwgYnl0ZXM7aWYoYXJyYXlidWZmZXIuc2xpY2Upe3JldHVybiBhcnJheWJ1ZmZlci5zbGljZShzdGFydCxlbmQpO31pZihzdGFydCA8IDApe3N0YXJ0ICs9IGJ5dGVzO31pZihlbmQgPCAwKXtlbmQgKz0gYnl0ZXM7fWlmKGVuZCA+IGJ5dGVzKXtlbmQgPSBieXRlczt9aWYoc3RhcnQgPj0gYnl0ZXMgfHwgc3RhcnQgPj0gZW5kIHx8IGJ5dGVzID09PSAwKXtyZXR1cm4gbmV3IEFycmF5QnVmZmVyKDApO312YXIgYWJ2PW5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKTt2YXIgcmVzdWx0PW5ldyBVaW50OEFycmF5KGVuZCAtIHN0YXJ0KTtmb3IodmFyIGk9c3RhcnQsaWk9MDtpIDwgZW5kO2krKyxpaSsrKSB7cmVzdWx0W2lpXSA9IGFidltpXTt9cmV0dXJuIHJlc3VsdC5idWZmZXI7fTt9LHt9XSw4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cyA9IEJhY2tvZmY7ZnVuY3Rpb24gQmFja29mZihvcHRzKXtvcHRzID0gb3B0cyB8fCB7fTt0aGlzLm1zID0gb3B0cy5taW4gfHwgMTAwO3RoaXMubWF4ID0gb3B0cy5tYXggfHwgMWU0O3RoaXMuZmFjdG9yID0gb3B0cy5mYWN0b3IgfHwgMjt0aGlzLmppdHRlciA9IG9wdHMuaml0dGVyID4gMCAmJiBvcHRzLmppdHRlciA8PSAxP29wdHMuaml0dGVyOjA7dGhpcy5hdHRlbXB0cyA9IDA7fUJhY2tvZmYucHJvdG90eXBlLmR1cmF0aW9uID0gZnVuY3Rpb24oKXt2YXIgbXM9dGhpcy5tcyAqIE1hdGgucG93KHRoaXMuZmFjdG9yLHRoaXMuYXR0ZW1wdHMrKyk7aWYodGhpcy5qaXR0ZXIpe3ZhciByYW5kPU1hdGgucmFuZG9tKCk7dmFyIGRldmlhdGlvbj1NYXRoLmZsb29yKHJhbmQgKiB0aGlzLmppdHRlciAqIG1zKTttcyA9IChNYXRoLmZsb29yKHJhbmQgKiAxMCkgJiAxKSA9PSAwP21zIC0gZGV2aWF0aW9uOm1zICsgZGV2aWF0aW9uO31yZXR1cm4gTWF0aC5taW4obXMsdGhpcy5tYXgpIHwgMDt9O0JhY2tvZmYucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24oKXt0aGlzLmF0dGVtcHRzID0gMDt9O0JhY2tvZmYucHJvdG90eXBlLnNldE1pbiA9IGZ1bmN0aW9uKG1pbil7dGhpcy5tcyA9IG1pbjt9O0JhY2tvZmYucHJvdG90eXBlLnNldE1heCA9IGZ1bmN0aW9uKG1heCl7dGhpcy5tYXggPSBtYXg7fTtCYWNrb2ZmLnByb3RvdHlwZS5zZXRKaXR0ZXIgPSBmdW5jdGlvbihqaXR0ZXIpe3RoaXMuaml0dGVyID0gaml0dGVyO307fSx7fV0sOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGNoYXJzKXsidXNlIHN0cmljdCI7ZXhwb3J0cy5lbmNvZGUgPSBmdW5jdGlvbihhcnJheWJ1ZmZlcil7dmFyIGJ5dGVzPW5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSxpLGxlbj1ieXRlcy5idWZmZXIuYnl0ZUxlbmd0aCxiYXNlNjQ9IiI7Zm9yKGkgPSAwO2kgPCBsZW47aSArPSAzKSB7YmFzZTY0ICs9IGNoYXJzW2J5dGVzLmJ1ZmZlcltpXSA+PiAyXTtiYXNlNjQgKz0gY2hhcnNbKGJ5dGVzLmJ1ZmZlcltpXSAmIDMpIDw8IDQgfCBieXRlcy5idWZmZXJbaSArIDFdID4+IDRdO2Jhc2U2NCArPSBjaGFyc1soYnl0ZXMuYnVmZmVyW2kgKyAxXSAmIDE1KSA8PCAyIHwgYnl0ZXMuYnVmZmVyW2kgKyAyXSA+PiA2XTtiYXNlNjQgKz0gY2hhcnNbYnl0ZXMuYnVmZmVyW2kgKyAyXSAmIDYzXTt9aWYobGVuICUgMyA9PT0gMil7YmFzZTY0ID0gYmFzZTY0LnN1YnN0cmluZygwLGJhc2U2NC5sZW5ndGggLSAxKSArICI9Ijt9ZWxzZSBpZihsZW4gJSAzID09PSAxKXtiYXNlNjQgPSBiYXNlNjQuc3Vic3RyaW5nKDAsYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09Ijt9cmV0dXJuIGJhc2U2NDt9O2V4cG9ydHMuZGVjb2RlID0gZnVuY3Rpb24oYmFzZTY0KXt2YXIgYnVmZmVyTGVuZ3RoPWJhc2U2NC5sZW5ndGggKiAuNzUsbGVuPWJhc2U2NC5sZW5ndGgsaSxwPTAsZW5jb2RlZDEsZW5jb2RlZDIsZW5jb2RlZDMsZW5jb2RlZDQ7aWYoYmFzZTY0W2Jhc2U2NC5sZW5ndGggLSAxXSA9PT0gIj0iKXtidWZmZXJMZW5ndGgtLTtpZihiYXNlNjRbYmFzZTY0Lmxlbmd0aCAtIDJdID09PSAiPSIpe2J1ZmZlckxlbmd0aC0tO319dmFyIGFycmF5YnVmZmVyPW5ldyBBcnJheUJ1ZmZlcihidWZmZXJMZW5ndGgpLGJ5dGVzPW5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKTtmb3IoaSA9IDA7aSA8IGxlbjtpICs9IDQpIHtlbmNvZGVkMSA9IGNoYXJzLmluZGV4T2YoYmFzZTY0W2ldKTtlbmNvZGVkMiA9IGNoYXJzLmluZGV4T2YoYmFzZTY0W2kgKyAxXSk7ZW5jb2RlZDMgPSBjaGFycy5pbmRleE9mKGJhc2U2NFtpICsgMl0pO2VuY29kZWQ0ID0gY2hhcnMuaW5kZXhPZihiYXNlNjRbaSArIDNdKTtieXRlc1twKytdID0gZW5jb2RlZDEgPDwgMiB8IGVuY29kZWQyID4+IDQ7Ynl0ZXNbcCsrXSA9IChlbmNvZGVkMiAmIDE1KSA8PCA0IHwgZW5jb2RlZDMgPj4gMjtieXRlc1twKytdID0gKGVuY29kZWQzICYgMykgPDwgNiB8IGVuY29kZWQ0ICYgNjM7fXJldHVybiBhcnJheWJ1ZmZlcjt9O30pKCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIik7fSx7fV0sMTA6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpe3ZhciBCbG9iQnVpbGRlcj1nbG9iYWwuQmxvYkJ1aWxkZXIgfHwgZ2xvYmFsLldlYktpdEJsb2JCdWlsZGVyIHx8IGdsb2JhbC5NU0Jsb2JCdWlsZGVyIHx8IGdsb2JhbC5Nb3pCbG9iQnVpbGRlcjt2YXIgYmxvYlN1cHBvcnRlZD0oZnVuY3Rpb24oKXt0cnl7dmFyIGE9bmV3IEJsb2IoWyJoaSJdKTtyZXR1cm4gYS5zaXplID09PSAyO31jYXRjaChlKSB7cmV0dXJuIGZhbHNlO319KSgpO3ZhciBibG9iU3VwcG9ydHNBcnJheUJ1ZmZlclZpZXc9YmxvYlN1cHBvcnRlZCAmJiAoZnVuY3Rpb24oKXt0cnl7dmFyIGI9bmV3IEJsb2IoW25ldyBVaW50OEFycmF5KFsxLDJdKV0pO3JldHVybiBiLnNpemUgPT09IDI7fWNhdGNoKGUpIHtyZXR1cm4gZmFsc2U7fX0pKCk7dmFyIGJsb2JCdWlsZGVyU3VwcG9ydGVkPUJsb2JCdWlsZGVyICYmIEJsb2JCdWlsZGVyLnByb3RvdHlwZS5hcHBlbmQgJiYgQmxvYkJ1aWxkZXIucHJvdG90eXBlLmdldEJsb2I7ZnVuY3Rpb24gbWFwQXJyYXlCdWZmZXJWaWV3cyhhcnkpe2Zvcih2YXIgaT0wO2kgPCBhcnkubGVuZ3RoO2krKykge3ZhciBjaHVuaz1hcnlbaV07aWYoY2h1bmsuYnVmZmVyIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpe3ZhciBidWY9Y2h1bmsuYnVmZmVyO2lmKGNodW5rLmJ5dGVMZW5ndGggIT09IGJ1Zi5ieXRlTGVuZ3RoKXt2YXIgY29weT1uZXcgVWludDhBcnJheShjaHVuay5ieXRlTGVuZ3RoKTtjb3B5LnNldChuZXcgVWludDhBcnJheShidWYsY2h1bmsuYnl0ZU9mZnNldCxjaHVuay5ieXRlTGVuZ3RoKSk7YnVmID0gY29weS5idWZmZXI7fWFyeVtpXSA9IGJ1Zjt9fX1mdW5jdGlvbiBCbG9iQnVpbGRlckNvbnN0cnVjdG9yKGFyeSxvcHRpb25zKXtvcHRpb25zID0gb3B0aW9ucyB8fCB7fTt2YXIgYmI9bmV3IEJsb2JCdWlsZGVyKCk7bWFwQXJyYXlCdWZmZXJWaWV3cyhhcnkpO2Zvcih2YXIgaT0wO2kgPCBhcnkubGVuZ3RoO2krKykge2JiLmFwcGVuZChhcnlbaV0pO31yZXR1cm4gb3B0aW9ucy50eXBlP2JiLmdldEJsb2Iob3B0aW9ucy50eXBlKTpiYi5nZXRCbG9iKCk7fWZ1bmN0aW9uIEJsb2JDb25zdHJ1Y3Rvcihhcnksb3B0aW9ucyl7bWFwQXJyYXlCdWZmZXJWaWV3cyhhcnkpO3JldHVybiBuZXcgQmxvYihhcnksb3B0aW9ucyB8fCB7fSk7fW1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7aWYoYmxvYlN1cHBvcnRlZCl7cmV0dXJuIGJsb2JTdXBwb3J0c0FycmF5QnVmZmVyVmlldz9nbG9iYWwuQmxvYjpCbG9iQ29uc3RydWN0b3I7fWVsc2UgaWYoYmxvYkJ1aWxkZXJTdXBwb3J0ZWQpe3JldHVybiBCbG9iQnVpbGRlckNvbnN0cnVjdG9yO31lbHNlIHtyZXR1cm4gdW5kZWZpbmVkO319KSgpO30pLmNhbGwodGhpcyx0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIj93aW5kb3c6dHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCI/Z2xvYmFsOnt9KTt9LHt9XSwxMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7dmFyIHNsaWNlPVtdLnNsaWNlO21vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob2JqLGZuKXtpZigic3RyaW5nIiA9PSB0eXBlb2YgZm4pZm4gPSBvYmpbZm5dO2lmKCJmdW5jdGlvbiIgIT0gdHlwZW9mIGZuKXRocm93IG5ldyBFcnJvcigiYmluZCgpIHJlcXVpcmVzIGEgZnVuY3Rpb24iKTt2YXIgYXJncz1zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZm4uYXBwbHkob2JqLGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO307fTt9LHt9XSwxMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHMgPSBFbWl0dGVyO2Z1bmN0aW9uIEVtaXR0ZXIob2JqKXtpZihvYmopcmV0dXJuIG1peGluKG9iaik7fWZ1bmN0aW9uIG1peGluKG9iail7Zm9yKHZhciBrZXkgaW4gRW1pdHRlci5wcm90b3R5cGUpIHtvYmpba2V5XSA9IEVtaXR0ZXIucHJvdG90eXBlW2tleV07fXJldHVybiBvYmo7fUVtaXR0ZXIucHJvdG90eXBlLm9uID0gRW1pdHRlci5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50LGZuKXt0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307KHRoaXMuX2NhbGxiYWNrc1siJCIgKyBldmVudF0gPSB0aGlzLl9jYWxsYmFja3NbIiQiICsgZXZlbnRdIHx8IFtdKS5wdXNoKGZuKTtyZXR1cm4gdGhpczt9O0VtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbihldmVudCxmbil7ZnVuY3Rpb24gb24oKXt0aGlzLm9mZihldmVudCxvbik7Zm4uYXBwbHkodGhpcyxhcmd1bWVudHMpO31vbi5mbiA9IGZuO3RoaXMub24oZXZlbnQsb24pO3JldHVybiB0aGlzO307RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQsZm4pe3RoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtpZigwID09IGFyZ3VtZW50cy5sZW5ndGgpe3RoaXMuX2NhbGxiYWNrcyA9IHt9O3JldHVybiB0aGlzO312YXIgY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrc1siJCIgKyBldmVudF07aWYoIWNhbGxiYWNrcylyZXR1cm4gdGhpcztpZigxID09IGFyZ3VtZW50cy5sZW5ndGgpe2RlbGV0ZSB0aGlzLl9jYWxsYmFja3NbIiQiICsgZXZlbnRdO3JldHVybiB0aGlzO312YXIgY2I7Zm9yKHZhciBpPTA7aSA8IGNhbGxiYWNrcy5sZW5ndGg7aSsrKSB7Y2IgPSBjYWxsYmFja3NbaV07aWYoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbil7Y2FsbGJhY2tzLnNwbGljZShpLDEpO2JyZWFrO319cmV0dXJuIHRoaXM7fTtFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24oZXZlbnQpe3RoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTt2YXIgYXJncz1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxjYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzWyIkIiArIGV2ZW50XTtpZihjYWxsYmFja3Mpe2NhbGxiYWNrcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtmb3IodmFyIGk9MCxsZW49Y2FsbGJhY2tzLmxlbmd0aDtpIDwgbGVuOysraSkge2NhbGxiYWNrc1tpXS5hcHBseSh0aGlzLGFyZ3MpO319cmV0dXJuIHRoaXM7fTtFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCl7dGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O3JldHVybiB0aGlzLl9jYWxsYmFja3NbIiQiICsgZXZlbnRdIHx8IFtdO307RW1pdHRlci5wcm90b3R5cGUuaGFzTGlzdGVuZXJzID0gZnVuY3Rpb24oZXZlbnQpe3JldHVybiAhIXRoaXMubGlzdGVuZXJzKGV2ZW50KS5sZW5ndGg7fTt9LHt9XSwxMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhLGIpe3ZhciBmbj1mdW5jdGlvbiBmbigpe307Zm4ucHJvdG90eXBlID0gYi5wcm90b3R5cGU7YS5wcm90b3R5cGUgPSBuZXcgZm4oKTthLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGE7fTt9LHt9XSwxNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX2RlcmVxXygiLi9kZWJ1ZyIpO2V4cG9ydHMubG9nID0gbG9nO2V4cG9ydHMuZm9ybWF0QXJncyA9IGZvcm1hdEFyZ3M7ZXhwb3J0cy5zYXZlID0gc2F2ZTtleHBvcnRzLmxvYWQgPSBsb2FkO2V4cG9ydHMudXNlQ29sb3JzID0gdXNlQ29sb3JzO2V4cG9ydHMuc3RvcmFnZSA9ICJ1bmRlZmluZWQiICE9IHR5cGVvZiBjaHJvbWUgJiYgInVuZGVmaW5lZCIgIT0gdHlwZW9mIGNocm9tZS5zdG9yYWdlP2Nocm9tZS5zdG9yYWdlLmxvY2FsOmxvY2Fsc3RvcmFnZSgpO2V4cG9ydHMuY29sb3JzID0gWyJsaWdodHNlYWdyZWVuIiwiZm9yZXN0Z3JlZW4iLCJnb2xkZW5yb2QiLCJkb2RnZXJibHVlIiwiZGFya29yY2hpZCIsImNyaW1zb24iXTtmdW5jdGlvbiB1c2VDb2xvcnMoKXtyZXR1cm4gIldlYmtpdEFwcGVhcmFuY2UiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZSB8fCB3aW5kb3cuY29uc29sZSAmJiAoY29uc29sZS5maXJlYnVnIHx8IGNvbnNvbGUuZXhjZXB0aW9uICYmIGNvbnNvbGUudGFibGUpIHx8IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5tYXRjaCgvZmlyZWZveFwvKFxkKykvKSAmJiBwYXJzZUludChSZWdFeHAuJDEsMTApID49IDMxO31leHBvcnRzLmZvcm1hdHRlcnMuaiA9IGZ1bmN0aW9uKHYpe3JldHVybiBKU09OLnN0cmluZ2lmeSh2KTt9O2Z1bmN0aW9uIGZvcm1hdEFyZ3MoKXt2YXIgYXJncz1hcmd1bWVudHM7dmFyIHVzZUNvbG9ycz10aGlzLnVzZUNvbG9yczthcmdzWzBdID0gKHVzZUNvbG9ycz8iJWMiOiIiKSArIHRoaXMubmFtZXNwYWNlICsgKHVzZUNvbG9ycz8iICVjIjoiICIpICsgYXJnc1swXSArICh1c2VDb2xvcnM/IiVjICI6IiAiKSArICIrIiArIGV4cG9ydHMuaHVtYW5pemUodGhpcy5kaWZmKTtpZighdXNlQ29sb3JzKXJldHVybiBhcmdzO3ZhciBjPSJjb2xvcjogIiArIHRoaXMuY29sb3I7YXJncyA9IFthcmdzWzBdLGMsImNvbG9yOiBpbmhlcml0Il0uY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MsMSkpO3ZhciBpbmRleD0wO3ZhciBsYXN0Qz0wO2FyZ3NbMF0ucmVwbGFjZSgvJVthLXolXS9nLGZ1bmN0aW9uKG1hdGNoKXtpZigiJSUiID09PSBtYXRjaClyZXR1cm47aW5kZXgrKztpZigiJWMiID09PSBtYXRjaCl7bGFzdEMgPSBpbmRleDt9fSk7YXJncy5zcGxpY2UobGFzdEMsMCxjKTtyZXR1cm4gYXJnczt9ZnVuY3Rpb24gbG9nKCl7cmV0dXJuICJvYmplY3QiID09PSB0eXBlb2YgY29uc29sZSAmJiBjb25zb2xlLmxvZyAmJiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbChjb25zb2xlLmxvZyxjb25zb2xlLGFyZ3VtZW50cyk7fWZ1bmN0aW9uIHNhdmUobmFtZXNwYWNlcyl7dHJ5e2lmKG51bGwgPT0gbmFtZXNwYWNlcyl7ZXhwb3J0cy5zdG9yYWdlLnJlbW92ZUl0ZW0oImRlYnVnIik7fWVsc2Uge2V4cG9ydHMuc3RvcmFnZS5kZWJ1ZyA9IG5hbWVzcGFjZXM7fX1jYXRjaChlKSB7fX1mdW5jdGlvbiBsb2FkKCl7dmFyIHI7dHJ5e3IgPSBleHBvcnRzLnN0b3JhZ2UuZGVidWc7fWNhdGNoKGUpIHt9cmV0dXJuIHI7fWV4cG9ydHMuZW5hYmxlKGxvYWQoKSk7ZnVuY3Rpb24gbG9jYWxzdG9yYWdlKCl7dHJ5e3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlO31jYXRjaChlKSB7fX19LHsiLi9kZWJ1ZyI6MTV9XSwxNTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gZGVidWc7ZXhwb3J0cy5jb2VyY2UgPSBjb2VyY2U7ZXhwb3J0cy5kaXNhYmxlID0gZGlzYWJsZTtleHBvcnRzLmVuYWJsZSA9IGVuYWJsZTtleHBvcnRzLmVuYWJsZWQgPSBlbmFibGVkO2V4cG9ydHMuaHVtYW5pemUgPSBfZGVyZXFfKCJtcyIpO2V4cG9ydHMubmFtZXMgPSBbXTtleHBvcnRzLnNraXBzID0gW107ZXhwb3J0cy5mb3JtYXR0ZXJzID0ge307dmFyIHByZXZDb2xvcj0wO3ZhciBwcmV2VGltZTtmdW5jdGlvbiBzZWxlY3RDb2xvcigpe3JldHVybiBleHBvcnRzLmNvbG9yc1twcmV2Q29sb3IrKyAlIGV4cG9ydHMuY29sb3JzLmxlbmd0aF07fWZ1bmN0aW9uIGRlYnVnKG5hbWVzcGFjZSl7ZnVuY3Rpb24gZGlzYWJsZWQoKXt9ZGlzYWJsZWQuZW5hYmxlZCA9IGZhbHNlO2Z1bmN0aW9uIGVuYWJsZWQoKXt2YXIgc2VsZj1lbmFibGVkO3ZhciBjdXJyPStuZXcgRGF0ZSgpO3ZhciBtcz1jdXJyIC0gKHByZXZUaW1lIHx8IGN1cnIpO3NlbGYuZGlmZiA9IG1zO3NlbGYucHJldiA9IHByZXZUaW1lO3NlbGYuY3VyciA9IGN1cnI7cHJldlRpbWUgPSBjdXJyO2lmKG51bGwgPT0gc2VsZi51c2VDb2xvcnMpc2VsZi51c2VDb2xvcnMgPSBleHBvcnRzLnVzZUNvbG9ycygpO2lmKG51bGwgPT0gc2VsZi5jb2xvciAmJiBzZWxmLnVzZUNvbG9ycylzZWxmLmNvbG9yID0gc2VsZWN0Q29sb3IoKTt2YXIgYXJncz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO2FyZ3NbMF0gPSBleHBvcnRzLmNvZXJjZShhcmdzWzBdKTtpZigic3RyaW5nIiAhPT0gdHlwZW9mIGFyZ3NbMF0pe2FyZ3MgPSBbIiVvIl0uY29uY2F0KGFyZ3MpO312YXIgaW5kZXg9MDthcmdzWzBdID0gYXJnc1swXS5yZXBsYWNlKC8lKFthLXolXSkvZyxmdW5jdGlvbihtYXRjaCxmb3JtYXQpe2lmKG1hdGNoID09PSAiJSUiKXJldHVybiBtYXRjaDtpbmRleCsrO3ZhciBmb3JtYXR0ZXI9ZXhwb3J0cy5mb3JtYXR0ZXJzW2Zvcm1hdF07aWYoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGZvcm1hdHRlcil7dmFyIHZhbD1hcmdzW2luZGV4XTttYXRjaCA9IGZvcm1hdHRlci5jYWxsKHNlbGYsdmFsKTthcmdzLnNwbGljZShpbmRleCwxKTtpbmRleC0tO31yZXR1cm4gbWF0Y2g7fSk7aWYoImZ1bmN0aW9uIiA9PT0gdHlwZW9mIGV4cG9ydHMuZm9ybWF0QXJncyl7YXJncyA9IGV4cG9ydHMuZm9ybWF0QXJncy5hcHBseShzZWxmLGFyZ3MpO312YXIgbG9nRm49ZW5hYmxlZC5sb2cgfHwgZXhwb3J0cy5sb2cgfHwgY29uc29sZS5sb2cuYmluZChjb25zb2xlKTtsb2dGbi5hcHBseShzZWxmLGFyZ3MpO31lbmFibGVkLmVuYWJsZWQgPSB0cnVlO3ZhciBmbj1leHBvcnRzLmVuYWJsZWQobmFtZXNwYWNlKT9lbmFibGVkOmRpc2FibGVkO2ZuLm5hbWVzcGFjZSA9IG5hbWVzcGFjZTtyZXR1cm4gZm47fWZ1bmN0aW9uIGVuYWJsZShuYW1lc3BhY2VzKXtleHBvcnRzLnNhdmUobmFtZXNwYWNlcyk7dmFyIHNwbGl0PShuYW1lc3BhY2VzIHx8ICIiKS5zcGxpdCgvW1xzLF0rLyk7dmFyIGxlbj1zcGxpdC5sZW5ndGg7Zm9yKHZhciBpPTA7aSA8IGxlbjtpKyspIHtpZighc3BsaXRbaV0pY29udGludWU7bmFtZXNwYWNlcyA9IHNwbGl0W2ldLnJlcGxhY2UoL1wqL2csIi4qPyIpO2lmKG5hbWVzcGFjZXNbMF0gPT09ICItIil7ZXhwb3J0cy5za2lwcy5wdXNoKG5ldyBSZWdFeHAoIl4iICsgbmFtZXNwYWNlcy5zdWJzdHIoMSkgKyAiJCIpKTt9ZWxzZSB7ZXhwb3J0cy5uYW1lcy5wdXNoKG5ldyBSZWdFeHAoIl4iICsgbmFtZXNwYWNlcyArICIkIikpO319fWZ1bmN0aW9uIGRpc2FibGUoKXtleHBvcnRzLmVuYWJsZSgiIik7fWZ1bmN0aW9uIGVuYWJsZWQobmFtZSl7dmFyIGksbGVuO2ZvcihpID0gMCxsZW4gPSBleHBvcnRzLnNraXBzLmxlbmd0aDtpIDwgbGVuO2krKykge2lmKGV4cG9ydHMuc2tpcHNbaV0udGVzdChuYW1lKSl7cmV0dXJuIGZhbHNlO319Zm9yKGkgPSAwLGxlbiA9IGV4cG9ydHMubmFtZXMubGVuZ3RoO2kgPCBsZW47aSsrKSB7aWYoZXhwb3J0cy5uYW1lc1tpXS50ZXN0KG5hbWUpKXtyZXR1cm4gdHJ1ZTt9fXJldHVybiBmYWxzZTt9ZnVuY3Rpb24gY29lcmNlKHZhbCl7aWYodmFsIGluc3RhbmNlb2YgRXJyb3IpcmV0dXJuIHZhbC5zdGFjayB8fCB2YWwubWVzc2FnZTtyZXR1cm4gdmFsO319LHttczozNn1dLDE2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cyA9IF9kZXJlcV8oIi4vbGliLyIpO30seyIuL2xpYi8iOjE3fV0sMTc6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzID0gX2RlcmVxXygiLi9zb2NrZXQiKTttb2R1bGUuZXhwb3J0cy5wYXJzZXIgPSBfZGVyZXFfKCJlbmdpbmUuaW8tcGFyc2VyIik7fSx7Ii4vc29ja2V0IjoxOCwiZW5naW5lLmlvLXBhcnNlciI6Mjd9XSwxODpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7dmFyIHRyYW5zcG9ydHM9X2RlcmVxXygiLi90cmFuc3BvcnRzIik7dmFyIEVtaXR0ZXI9X2RlcmVxXygiY29tcG9uZW50LWVtaXR0ZXIiKTt2YXIgZGVidWc9X2RlcmVxXygiZGVidWciKSgiZW5naW5lLmlvLWNsaWVudDpzb2NrZXQiKTt2YXIgaW5kZXg9X2RlcmVxXygiaW5kZXhvZiIpO3ZhciBwYXJzZXI9X2RlcmVxXygiZW5naW5lLmlvLXBhcnNlciIpO3ZhciBwYXJzZXVyaT1fZGVyZXFfKCJwYXJzZXVyaSIpO3ZhciBwYXJzZWpzb249X2RlcmVxXygicGFyc2Vqc29uIik7dmFyIHBhcnNlcXM9X2RlcmVxXygicGFyc2VxcyIpO21vZHVsZS5leHBvcnRzID0gU29ja2V0O2Z1bmN0aW9uIG5vb3AoKXt9ZnVuY3Rpb24gU29ja2V0KHVyaSxvcHRzKXtpZighKHRoaXMgaW5zdGFuY2VvZiBTb2NrZXQpKXJldHVybiBuZXcgU29ja2V0KHVyaSxvcHRzKTtvcHRzID0gb3B0cyB8fCB7fTtpZih1cmkgJiYgIm9iamVjdCIgPT0gdHlwZW9mIHVyaSl7b3B0cyA9IHVyaTt1cmkgPSBudWxsO31pZih1cmkpe3VyaSA9IHBhcnNldXJpKHVyaSk7b3B0cy5ob3N0bmFtZSA9IHVyaS5ob3N0O29wdHMuc2VjdXJlID0gdXJpLnByb3RvY29sID09ICJodHRwcyIgfHwgdXJpLnByb3RvY29sID09ICJ3c3MiO29wdHMucG9ydCA9IHVyaS5wb3J0O2lmKHVyaS5xdWVyeSlvcHRzLnF1ZXJ5ID0gdXJpLnF1ZXJ5O31lbHNlIGlmKG9wdHMuaG9zdCl7b3B0cy5ob3N0bmFtZSA9IHBhcnNldXJpKG9wdHMuaG9zdCkuaG9zdDt9dGhpcy5zZWN1cmUgPSBudWxsICE9IG9wdHMuc2VjdXJlP29wdHMuc2VjdXJlOmdsb2JhbC5sb2NhdGlvbiAmJiAiaHR0cHM6IiA9PSBsb2NhdGlvbi5wcm90b2NvbDtpZihvcHRzLmhvc3RuYW1lICYmICFvcHRzLnBvcnQpe29wdHMucG9ydCA9IHRoaXMuc2VjdXJlPyI0NDMiOiI4MCI7fXRoaXMuYWdlbnQgPSBvcHRzLmFnZW50IHx8IGZhbHNlO3RoaXMuaG9zdG5hbWUgPSBvcHRzLmhvc3RuYW1lIHx8IChnbG9iYWwubG9jYXRpb24/bG9jYXRpb24uaG9zdG5hbWU6ImxvY2FsaG9zdCIpO3RoaXMucG9ydCA9IG9wdHMucG9ydCB8fCAoZ2xvYmFsLmxvY2F0aW9uICYmIGxvY2F0aW9uLnBvcnQ/bG9jYXRpb24ucG9ydDp0aGlzLnNlY3VyZT80NDM6ODApO3RoaXMucXVlcnkgPSBvcHRzLnF1ZXJ5IHx8IHt9O2lmKCJzdHJpbmciID09IHR5cGVvZiB0aGlzLnF1ZXJ5KXRoaXMucXVlcnkgPSBwYXJzZXFzLmRlY29kZSh0aGlzLnF1ZXJ5KTt0aGlzLnVwZ3JhZGUgPSBmYWxzZSAhPT0gb3B0cy51cGdyYWRlO3RoaXMucGF0aCA9IChvcHRzLnBhdGggfHwgIi9lbmdpbmUuaW8iKS5yZXBsYWNlKC9cLyQvLCIiKSArICIvIjt0aGlzLmZvcmNlSlNPTlAgPSAhIW9wdHMuZm9yY2VKU09OUDt0aGlzLmpzb25wID0gZmFsc2UgIT09IG9wdHMuanNvbnA7dGhpcy5mb3JjZUJhc2U2NCA9ICEhb3B0cy5mb3JjZUJhc2U2NDt0aGlzLmVuYWJsZXNYRFIgPSAhIW9wdHMuZW5hYmxlc1hEUjt0aGlzLnRpbWVzdGFtcFBhcmFtID0gb3B0cy50aW1lc3RhbXBQYXJhbSB8fCAidCI7dGhpcy50aW1lc3RhbXBSZXF1ZXN0cyA9IG9wdHMudGltZXN0YW1wUmVxdWVzdHM7dGhpcy50cmFuc3BvcnRzID0gb3B0cy50cmFuc3BvcnRzIHx8IFsicG9sbGluZyIsIndlYnNvY2tldCJdO3RoaXMucmVhZHlTdGF0ZSA9ICIiO3RoaXMud3JpdGVCdWZmZXIgPSBbXTt0aGlzLnBvbGljeVBvcnQgPSBvcHRzLnBvbGljeVBvcnQgfHwgODQzO3RoaXMucmVtZW1iZXJVcGdyYWRlID0gb3B0cy5yZW1lbWJlclVwZ3JhZGUgfHwgZmFsc2U7dGhpcy5iaW5hcnlUeXBlID0gbnVsbDt0aGlzLm9ubHlCaW5hcnlVcGdyYWRlcyA9IG9wdHMub25seUJpbmFyeVVwZ3JhZGVzO3RoaXMucGVyTWVzc2FnZURlZmxhdGUgPSBmYWxzZSAhPT0gb3B0cy5wZXJNZXNzYWdlRGVmbGF0ZT9vcHRzLnBlck1lc3NhZ2VEZWZsYXRlIHx8IHt9OmZhbHNlO2lmKHRydWUgPT09IHRoaXMucGVyTWVzc2FnZURlZmxhdGUpdGhpcy5wZXJNZXNzYWdlRGVmbGF0ZSA9IHt9O2lmKHRoaXMucGVyTWVzc2FnZURlZmxhdGUgJiYgbnVsbCA9PSB0aGlzLnBlck1lc3NhZ2VEZWZsYXRlLnRocmVzaG9sZCl7dGhpcy5wZXJNZXNzYWdlRGVmbGF0ZS50aHJlc2hvbGQgPSAxMDI0O310aGlzLnBmeCA9IG9wdHMucGZ4IHx8IG51bGw7dGhpcy5rZXkgPSBvcHRzLmtleSB8fCBudWxsO3RoaXMucGFzc3BocmFzZSA9IG9wdHMucGFzc3BocmFzZSB8fCBudWxsO3RoaXMuY2VydCA9IG9wdHMuY2VydCB8fCBudWxsO3RoaXMuY2EgPSBvcHRzLmNhIHx8IG51bGw7dGhpcy5jaXBoZXJzID0gb3B0cy5jaXBoZXJzIHx8IG51bGw7dGhpcy5yZWplY3RVbmF1dGhvcml6ZWQgPSBvcHRzLnJlamVjdFVuYXV0aG9yaXplZCA9PT0gdW5kZWZpbmVkP251bGw6b3B0cy5yZWplY3RVbmF1dGhvcml6ZWQ7dmFyIGZyZWVHbG9iYWw9dHlwZW9mIGdsb2JhbCA9PSAib2JqZWN0IiAmJiBnbG9iYWw7aWYoZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwpe2lmKG9wdHMuZXh0cmFIZWFkZXJzICYmIE9iamVjdC5rZXlzKG9wdHMuZXh0cmFIZWFkZXJzKS5sZW5ndGggPiAwKXt0aGlzLmV4dHJhSGVhZGVycyA9IG9wdHMuZXh0cmFIZWFkZXJzO319dGhpcy5vcGVuKCk7fVNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgPSBmYWxzZTtFbWl0dGVyKFNvY2tldC5wcm90b3R5cGUpO1NvY2tldC5wcm90b2NvbCA9IHBhcnNlci5wcm90b2NvbDtTb2NrZXQuU29ja2V0ID0gU29ja2V0O1NvY2tldC5UcmFuc3BvcnQgPSBfZGVyZXFfKCIuL3RyYW5zcG9ydCIpO1NvY2tldC50cmFuc3BvcnRzID0gX2RlcmVxXygiLi90cmFuc3BvcnRzIik7U29ja2V0LnBhcnNlciA9IF9kZXJlcV8oImVuZ2luZS5pby1wYXJzZXIiKTtTb2NrZXQucHJvdG90eXBlLmNyZWF0ZVRyYW5zcG9ydCA9IGZ1bmN0aW9uKG5hbWUpe2RlYnVnKCdjcmVhdGluZyB0cmFuc3BvcnQgIiVzIicsbmFtZSk7dmFyIHF1ZXJ5PWNsb25lKHRoaXMucXVlcnkpO3F1ZXJ5LkVJTyA9IHBhcnNlci5wcm90b2NvbDtxdWVyeS50cmFuc3BvcnQgPSBuYW1lO2lmKHRoaXMuaWQpcXVlcnkuc2lkID0gdGhpcy5pZDt2YXIgdHJhbnNwb3J0PW5ldyB0cmFuc3BvcnRzW25hbWVdKHthZ2VudDp0aGlzLmFnZW50LGhvc3RuYW1lOnRoaXMuaG9zdG5hbWUscG9ydDp0aGlzLnBvcnQsc2VjdXJlOnRoaXMuc2VjdXJlLHBhdGg6dGhpcy5wYXRoLHF1ZXJ5OnF1ZXJ5LGZvcmNlSlNPTlA6dGhpcy5mb3JjZUpTT05QLGpzb25wOnRoaXMuanNvbnAsZm9yY2VCYXNlNjQ6dGhpcy5mb3JjZUJhc2U2NCxlbmFibGVzWERSOnRoaXMuZW5hYmxlc1hEUix0aW1lc3RhbXBSZXF1ZXN0czp0aGlzLnRpbWVzdGFtcFJlcXVlc3RzLHRpbWVzdGFtcFBhcmFtOnRoaXMudGltZXN0YW1wUGFyYW0scG9saWN5UG9ydDp0aGlzLnBvbGljeVBvcnQsc29ja2V0OnRoaXMscGZ4OnRoaXMucGZ4LGtleTp0aGlzLmtleSxwYXNzcGhyYXNlOnRoaXMucGFzc3BocmFzZSxjZXJ0OnRoaXMuY2VydCxjYTp0aGlzLmNhLGNpcGhlcnM6dGhpcy5jaXBoZXJzLHJlamVjdFVuYXV0aG9yaXplZDp0aGlzLnJlamVjdFVuYXV0aG9yaXplZCxwZXJNZXNzYWdlRGVmbGF0ZTp0aGlzLnBlck1lc3NhZ2VEZWZsYXRlLGV4dHJhSGVhZGVyczp0aGlzLmV4dHJhSGVhZGVyc30pO3JldHVybiB0cmFuc3BvcnQ7fTtmdW5jdGlvbiBjbG9uZShvYmope3ZhciBvPXt9O2Zvcih2YXIgaSBpbiBvYmopIHtpZihvYmouaGFzT3duUHJvcGVydHkoaSkpe29baV0gPSBvYmpbaV07fX1yZXR1cm4gbzt9U29ja2V0LnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24oKXt2YXIgdHJhbnNwb3J0O2lmKHRoaXMucmVtZW1iZXJVcGdyYWRlICYmIFNvY2tldC5wcmlvcldlYnNvY2tldFN1Y2Nlc3MgJiYgdGhpcy50cmFuc3BvcnRzLmluZGV4T2YoIndlYnNvY2tldCIpICE9IC0xKXt0cmFuc3BvcnQgPSAid2Vic29ja2V0Ijt9ZWxzZSBpZigwID09PSB0aGlzLnRyYW5zcG9ydHMubGVuZ3RoKXt2YXIgc2VsZj10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLmVtaXQoImVycm9yIiwiTm8gdHJhbnNwb3J0cyBhdmFpbGFibGUiKTt9LDApO3JldHVybjt9ZWxzZSB7dHJhbnNwb3J0ID0gdGhpcy50cmFuc3BvcnRzWzBdO310aGlzLnJlYWR5U3RhdGUgPSAib3BlbmluZyI7dHJ5e3RyYW5zcG9ydCA9IHRoaXMuY3JlYXRlVHJhbnNwb3J0KHRyYW5zcG9ydCk7fWNhdGNoKGUpIHt0aGlzLnRyYW5zcG9ydHMuc2hpZnQoKTt0aGlzLm9wZW4oKTtyZXR1cm47fXRyYW5zcG9ydC5vcGVuKCk7dGhpcy5zZXRUcmFuc3BvcnQodHJhbnNwb3J0KTt9O1NvY2tldC5wcm90b3R5cGUuc2V0VHJhbnNwb3J0ID0gZnVuY3Rpb24odHJhbnNwb3J0KXtkZWJ1Zygic2V0dGluZyB0cmFuc3BvcnQgJXMiLHRyYW5zcG9ydC5uYW1lKTt2YXIgc2VsZj10aGlzO2lmKHRoaXMudHJhbnNwb3J0KXtkZWJ1ZygiY2xlYXJpbmcgZXhpc3RpbmcgdHJhbnNwb3J0ICVzIix0aGlzLnRyYW5zcG9ydC5uYW1lKTt0aGlzLnRyYW5zcG9ydC5yZW1vdmVBbGxMaXN0ZW5lcnMoKTt9dGhpcy50cmFuc3BvcnQgPSB0cmFuc3BvcnQ7dHJhbnNwb3J0Lm9uKCJkcmFpbiIsZnVuY3Rpb24oKXtzZWxmLm9uRHJhaW4oKTt9KS5vbigicGFja2V0IixmdW5jdGlvbihwYWNrZXQpe3NlbGYub25QYWNrZXQocGFja2V0KTt9KS5vbigiZXJyb3IiLGZ1bmN0aW9uKGUpe3NlbGYub25FcnJvcihlKTt9KS5vbigiY2xvc2UiLGZ1bmN0aW9uKCl7c2VsZi5vbkNsb3NlKCJ0cmFuc3BvcnQgY2xvc2UiKTt9KTt9O1NvY2tldC5wcm90b3R5cGUucHJvYmUgPSBmdW5jdGlvbihuYW1lKXtkZWJ1ZygncHJvYmluZyB0cmFuc3BvcnQgIiVzIicsbmFtZSk7dmFyIHRyYW5zcG9ydD10aGlzLmNyZWF0ZVRyYW5zcG9ydChuYW1lLHtwcm9iZToxfSksZmFpbGVkPWZhbHNlLHNlbGY9dGhpcztTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gZmFsc2U7ZnVuY3Rpb24gb25UcmFuc3BvcnRPcGVuKCl7aWYoc2VsZi5vbmx5QmluYXJ5VXBncmFkZXMpe3ZhciB1cGdyYWRlTG9zZXNCaW5hcnk9IXRoaXMuc3VwcG9ydHNCaW5hcnkgJiYgc2VsZi50cmFuc3BvcnQuc3VwcG9ydHNCaW5hcnk7ZmFpbGVkID0gZmFpbGVkIHx8IHVwZ3JhZGVMb3Nlc0JpbmFyeTt9aWYoZmFpbGVkKXJldHVybjtkZWJ1ZygncHJvYmUgdHJhbnNwb3J0ICIlcyIgb3BlbmVkJyxuYW1lKTt0cmFuc3BvcnQuc2VuZChbe3R5cGU6InBpbmciLGRhdGE6InByb2JlIn1dKTt0cmFuc3BvcnQub25jZSgicGFja2V0IixmdW5jdGlvbihtc2cpe2lmKGZhaWxlZClyZXR1cm47aWYoInBvbmciID09IG1zZy50eXBlICYmICJwcm9iZSIgPT0gbXNnLmRhdGEpe2RlYnVnKCdwcm9iZSB0cmFuc3BvcnQgIiVzIiBwb25nJyxuYW1lKTtzZWxmLnVwZ3JhZGluZyA9IHRydWU7c2VsZi5lbWl0KCJ1cGdyYWRpbmciLHRyYW5zcG9ydCk7aWYoIXRyYW5zcG9ydClyZXR1cm47U29ja2V0LnByaW9yV2Vic29ja2V0U3VjY2VzcyA9ICJ3ZWJzb2NrZXQiID09IHRyYW5zcG9ydC5uYW1lO2RlYnVnKCdwYXVzaW5nIGN1cnJlbnQgdHJhbnNwb3J0ICIlcyInLHNlbGYudHJhbnNwb3J0Lm5hbWUpO3NlbGYudHJhbnNwb3J0LnBhdXNlKGZ1bmN0aW9uKCl7aWYoZmFpbGVkKXJldHVybjtpZigiY2xvc2VkIiA9PSBzZWxmLnJlYWR5U3RhdGUpcmV0dXJuO2RlYnVnKCJjaGFuZ2luZyB0cmFuc3BvcnQgYW5kIHNlbmRpbmcgdXBncmFkZSBwYWNrZXQiKTtjbGVhbnVwKCk7c2VsZi5zZXRUcmFuc3BvcnQodHJhbnNwb3J0KTt0cmFuc3BvcnQuc2VuZChbe3R5cGU6InVwZ3JhZGUifV0pO3NlbGYuZW1pdCgidXBncmFkZSIsdHJhbnNwb3J0KTt0cmFuc3BvcnQgPSBudWxsO3NlbGYudXBncmFkaW5nID0gZmFsc2U7c2VsZi5mbHVzaCgpO30pO31lbHNlIHtkZWJ1ZygncHJvYmUgdHJhbnNwb3J0ICIlcyIgZmFpbGVkJyxuYW1lKTt2YXIgZXJyPW5ldyBFcnJvcigicHJvYmUgZXJyb3IiKTtlcnIudHJhbnNwb3J0ID0gdHJhbnNwb3J0Lm5hbWU7c2VsZi5lbWl0KCJ1cGdyYWRlRXJyb3IiLGVycik7fX0pO31mdW5jdGlvbiBmcmVlemVUcmFuc3BvcnQoKXtpZihmYWlsZWQpcmV0dXJuO2ZhaWxlZCA9IHRydWU7Y2xlYW51cCgpO3RyYW5zcG9ydC5jbG9zZSgpO3RyYW5zcG9ydCA9IG51bGw7fWZ1bmN0aW9uIG9uZXJyb3IoZXJyKXt2YXIgZXJyb3I9bmV3IEVycm9yKCJwcm9iZSBlcnJvcjogIiArIGVycik7ZXJyb3IudHJhbnNwb3J0ID0gdHJhbnNwb3J0Lm5hbWU7ZnJlZXplVHJhbnNwb3J0KCk7ZGVidWcoJ3Byb2JlIHRyYW5zcG9ydCAiJXMiIGZhaWxlZCBiZWNhdXNlIG9mIGVycm9yOiAlcycsbmFtZSxlcnIpO3NlbGYuZW1pdCgidXBncmFkZUVycm9yIixlcnJvcik7fWZ1bmN0aW9uIG9uVHJhbnNwb3J0Q2xvc2UoKXtvbmVycm9yKCJ0cmFuc3BvcnQgY2xvc2VkIik7fWZ1bmN0aW9uIG9uY2xvc2UoKXtvbmVycm9yKCJzb2NrZXQgY2xvc2VkIik7fWZ1bmN0aW9uIG9udXBncmFkZSh0byl7aWYodHJhbnNwb3J0ICYmIHRvLm5hbWUgIT0gdHJhbnNwb3J0Lm5hbWUpe2RlYnVnKCciJXMiIHdvcmtzIC0gYWJvcnRpbmcgIiVzIicsdG8ubmFtZSx0cmFuc3BvcnQubmFtZSk7ZnJlZXplVHJhbnNwb3J0KCk7fX1mdW5jdGlvbiBjbGVhbnVwKCl7dHJhbnNwb3J0LnJlbW92ZUxpc3RlbmVyKCJvcGVuIixvblRyYW5zcG9ydE9wZW4pO3RyYW5zcG9ydC5yZW1vdmVMaXN0ZW5lcigiZXJyb3IiLG9uZXJyb3IpO3RyYW5zcG9ydC5yZW1vdmVMaXN0ZW5lcigiY2xvc2UiLG9uVHJhbnNwb3J0Q2xvc2UpO3NlbGYucmVtb3ZlTGlzdGVuZXIoImNsb3NlIixvbmNsb3NlKTtzZWxmLnJlbW92ZUxpc3RlbmVyKCJ1cGdyYWRpbmciLG9udXBncmFkZSk7fXRyYW5zcG9ydC5vbmNlKCJvcGVuIixvblRyYW5zcG9ydE9wZW4pO3RyYW5zcG9ydC5vbmNlKCJlcnJvciIsb25lcnJvcik7dHJhbnNwb3J0Lm9uY2UoImNsb3NlIixvblRyYW5zcG9ydENsb3NlKTt0aGlzLm9uY2UoImNsb3NlIixvbmNsb3NlKTt0aGlzLm9uY2UoInVwZ3JhZGluZyIsb251cGdyYWRlKTt0cmFuc3BvcnQub3BlbigpO307U29ja2V0LnByb3RvdHlwZS5vbk9wZW4gPSBmdW5jdGlvbigpe2RlYnVnKCJzb2NrZXQgb3BlbiIpO3RoaXMucmVhZHlTdGF0ZSA9ICJvcGVuIjtTb2NrZXQucHJpb3JXZWJzb2NrZXRTdWNjZXNzID0gIndlYnNvY2tldCIgPT0gdGhpcy50cmFuc3BvcnQubmFtZTt0aGlzLmVtaXQoIm9wZW4iKTt0aGlzLmZsdXNoKCk7aWYoIm9wZW4iID09IHRoaXMucmVhZHlTdGF0ZSAmJiB0aGlzLnVwZ3JhZGUgJiYgdGhpcy50cmFuc3BvcnQucGF1c2Upe2RlYnVnKCJzdGFydGluZyB1cGdyYWRlIHByb2JlcyIpO2Zvcih2YXIgaT0wLGw9dGhpcy51cGdyYWRlcy5sZW5ndGg7aSA8IGw7aSsrKSB7dGhpcy5wcm9iZSh0aGlzLnVwZ3JhZGVzW2ldKTt9fX07U29ja2V0LnByb3RvdHlwZS5vblBhY2tldCA9IGZ1bmN0aW9uKHBhY2tldCl7aWYoIm9wZW5pbmciID09IHRoaXMucmVhZHlTdGF0ZSB8fCAib3BlbiIgPT0gdGhpcy5yZWFkeVN0YXRlKXtkZWJ1Zygnc29ja2V0IHJlY2VpdmU6IHR5cGUgIiVzIiwgZGF0YSAiJXMiJyxwYWNrZXQudHlwZSxwYWNrZXQuZGF0YSk7dGhpcy5lbWl0KCJwYWNrZXQiLHBhY2tldCk7dGhpcy5lbWl0KCJoZWFydGJlYXQiKTtzd2l0Y2gocGFja2V0LnR5cGUpe2Nhc2UgIm9wZW4iOnRoaXMub25IYW5kc2hha2UocGFyc2Vqc29uKHBhY2tldC5kYXRhKSk7YnJlYWs7Y2FzZSAicG9uZyI6dGhpcy5zZXRQaW5nKCk7dGhpcy5lbWl0KCJwb25nIik7YnJlYWs7Y2FzZSAiZXJyb3IiOnZhciBlcnI9bmV3IEVycm9yKCJzZXJ2ZXIgZXJyb3IiKTtlcnIuY29kZSA9IHBhY2tldC5kYXRhO3RoaXMub25FcnJvcihlcnIpO2JyZWFrO2Nhc2UgIm1lc3NhZ2UiOnRoaXMuZW1pdCgiZGF0YSIscGFja2V0LmRhdGEpO3RoaXMuZW1pdCgibWVzc2FnZSIscGFja2V0LmRhdGEpO2JyZWFrO319ZWxzZSB7ZGVidWcoJ3BhY2tldCByZWNlaXZlZCB3aXRoIHNvY2tldCByZWFkeVN0YXRlICIlcyInLHRoaXMucmVhZHlTdGF0ZSk7fX07U29ja2V0LnByb3RvdHlwZS5vbkhhbmRzaGFrZSA9IGZ1bmN0aW9uKGRhdGEpe3RoaXMuZW1pdCgiaGFuZHNoYWtlIixkYXRhKTt0aGlzLmlkID0gZGF0YS5zaWQ7dGhpcy50cmFuc3BvcnQucXVlcnkuc2lkID0gZGF0YS5zaWQ7dGhpcy51cGdyYWRlcyA9IHRoaXMuZmlsdGVyVXBncmFkZXMoZGF0YS51cGdyYWRlcyk7dGhpcy5waW5nSW50ZXJ2YWwgPSBkYXRhLnBpbmdJbnRlcnZhbDt0aGlzLnBpbmdUaW1lb3V0ID0gZGF0YS5waW5nVGltZW91dDt0aGlzLm9uT3BlbigpO2lmKCJjbG9zZWQiID09IHRoaXMucmVhZHlTdGF0ZSlyZXR1cm47dGhpcy5zZXRQaW5nKCk7dGhpcy5yZW1vdmVMaXN0ZW5lcigiaGVhcnRiZWF0Iix0aGlzLm9uSGVhcnRiZWF0KTt0aGlzLm9uKCJoZWFydGJlYXQiLHRoaXMub25IZWFydGJlYXQpO307U29ja2V0LnByb3RvdHlwZS5vbkhlYXJ0YmVhdCA9IGZ1bmN0aW9uKHRpbWVvdXQpe2NsZWFyVGltZW91dCh0aGlzLnBpbmdUaW1lb3V0VGltZXIpO3ZhciBzZWxmPXRoaXM7c2VsZi5waW5nVGltZW91dFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpe2lmKCJjbG9zZWQiID09IHNlbGYucmVhZHlTdGF0ZSlyZXR1cm47c2VsZi5vbkNsb3NlKCJwaW5nIHRpbWVvdXQiKTt9LHRpbWVvdXQgfHwgc2VsZi5waW5nSW50ZXJ2YWwgKyBzZWxmLnBpbmdUaW1lb3V0KTt9O1NvY2tldC5wcm90b3R5cGUuc2V0UGluZyA9IGZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpcztjbGVhclRpbWVvdXQoc2VsZi5waW5nSW50ZXJ2YWxUaW1lcik7c2VsZi5waW5nSW50ZXJ2YWxUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtkZWJ1Zygid3JpdGluZyBwaW5nIHBhY2tldCAtIGV4cGVjdGluZyBwb25nIHdpdGhpbiAlc21zIixzZWxmLnBpbmdUaW1lb3V0KTtzZWxmLnBpbmcoKTtzZWxmLm9uSGVhcnRiZWF0KHNlbGYucGluZ1RpbWVvdXQpO30sc2VsZi5waW5nSW50ZXJ2YWwpO307U29ja2V0LnByb3RvdHlwZS5waW5nID0gZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO3RoaXMuc2VuZFBhY2tldCgicGluZyIsZnVuY3Rpb24oKXtzZWxmLmVtaXQoInBpbmciKTt9KTt9O1NvY2tldC5wcm90b3R5cGUub25EcmFpbiA9IGZ1bmN0aW9uKCl7dGhpcy53cml0ZUJ1ZmZlci5zcGxpY2UoMCx0aGlzLnByZXZCdWZmZXJMZW4pO3RoaXMucHJldkJ1ZmZlckxlbiA9IDA7aWYoMCA9PT0gdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpe3RoaXMuZW1pdCgiZHJhaW4iKTt9ZWxzZSB7dGhpcy5mbHVzaCgpO319O1NvY2tldC5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbigpe2lmKCJjbG9zZWQiICE9IHRoaXMucmVhZHlTdGF0ZSAmJiB0aGlzLnRyYW5zcG9ydC53cml0YWJsZSAmJiAhdGhpcy51cGdyYWRpbmcgJiYgdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpe2RlYnVnKCJmbHVzaGluZyAlZCBwYWNrZXRzIGluIHNvY2tldCIsdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGgpO3RoaXMudHJhbnNwb3J0LnNlbmQodGhpcy53cml0ZUJ1ZmZlcik7dGhpcy5wcmV2QnVmZmVyTGVuID0gdGhpcy53cml0ZUJ1ZmZlci5sZW5ndGg7dGhpcy5lbWl0KCJmbHVzaCIpO319O1NvY2tldC5wcm90b3R5cGUud3JpdGUgPSBTb2NrZXQucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbihtc2csb3B0aW9ucyxmbil7dGhpcy5zZW5kUGFja2V0KCJtZXNzYWdlIixtc2csb3B0aW9ucyxmbik7cmV0dXJuIHRoaXM7fTtTb2NrZXQucHJvdG90eXBlLnNlbmRQYWNrZXQgPSBmdW5jdGlvbih0eXBlLGRhdGEsb3B0aW9ucyxmbil7aWYoImZ1bmN0aW9uIiA9PSB0eXBlb2YgZGF0YSl7Zm4gPSBkYXRhO2RhdGEgPSB1bmRlZmluZWQ7fWlmKCJmdW5jdGlvbiIgPT0gdHlwZW9mIG9wdGlvbnMpe2ZuID0gb3B0aW9ucztvcHRpb25zID0gbnVsbDt9aWYoImNsb3NpbmciID09IHRoaXMucmVhZHlTdGF0ZSB8fCAiY2xvc2VkIiA9PSB0aGlzLnJlYWR5U3RhdGUpe3JldHVybjt9b3B0aW9ucyA9IG9wdGlvbnMgfHwge307b3B0aW9ucy5jb21wcmVzcyA9IGZhbHNlICE9PSBvcHRpb25zLmNvbXByZXNzO3ZhciBwYWNrZXQ9e3R5cGU6dHlwZSxkYXRhOmRhdGEsb3B0aW9uczpvcHRpb25zfTt0aGlzLmVtaXQoInBhY2tldENyZWF0ZSIscGFja2V0KTt0aGlzLndyaXRlQnVmZmVyLnB1c2gocGFja2V0KTtpZihmbil0aGlzLm9uY2UoImZsdXNoIixmbik7dGhpcy5mbHVzaCgpO307U29ja2V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCl7aWYoIm9wZW5pbmciID09IHRoaXMucmVhZHlTdGF0ZSB8fCAib3BlbiIgPT0gdGhpcy5yZWFkeVN0YXRlKXt0aGlzLnJlYWR5U3RhdGUgPSAiY2xvc2luZyI7dmFyIHNlbGY9dGhpcztpZih0aGlzLndyaXRlQnVmZmVyLmxlbmd0aCl7dGhpcy5vbmNlKCJkcmFpbiIsZnVuY3Rpb24oKXtpZih0aGlzLnVwZ3JhZGluZyl7d2FpdEZvclVwZ3JhZGUoKTt9ZWxzZSB7Y2xvc2UoKTt9fSk7fWVsc2UgaWYodGhpcy51cGdyYWRpbmcpe3dhaXRGb3JVcGdyYWRlKCk7fWVsc2Uge2Nsb3NlKCk7fX1mdW5jdGlvbiBjbG9zZSgpe3NlbGYub25DbG9zZSgiZm9yY2VkIGNsb3NlIik7ZGVidWcoInNvY2tldCBjbG9zaW5nIC0gdGVsbGluZyB0cmFuc3BvcnQgdG8gY2xvc2UiKTtzZWxmLnRyYW5zcG9ydC5jbG9zZSgpO31mdW5jdGlvbiBjbGVhbnVwQW5kQ2xvc2UoKXtzZWxmLnJlbW92ZUxpc3RlbmVyKCJ1cGdyYWRlIixjbGVhbnVwQW5kQ2xvc2UpO3NlbGYucmVtb3ZlTGlzdGVuZXIoInVwZ3JhZGVFcnJvciIsY2xlYW51cEFuZENsb3NlKTtjbG9zZSgpO31mdW5jdGlvbiB3YWl0Rm9yVXBncmFkZSgpe3NlbGYub25jZSgidXBncmFkZSIsY2xlYW51cEFuZENsb3NlKTtzZWxmLm9uY2UoInVwZ3JhZGVFcnJvciIsY2xlYW51cEFuZENsb3NlKTt9cmV0dXJuIHRoaXM7fTtTb2NrZXQucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbihlcnIpe2RlYnVnKCJzb2NrZXQgZXJyb3IgJWoiLGVycik7U29ja2V0LnByaW9yV2Vic29ja2V0U3VjY2VzcyA9IGZhbHNlO3RoaXMuZW1pdCgiZXJyb3IiLGVycik7dGhpcy5vbkNsb3NlKCJ0cmFuc3BvcnQgZXJyb3IiLGVycik7fTtTb2NrZXQucHJvdG90eXBlLm9uQ2xvc2UgPSBmdW5jdGlvbihyZWFzb24sZGVzYyl7aWYoIm9wZW5pbmciID09IHRoaXMucmVhZHlTdGF0ZSB8fCAib3BlbiIgPT0gdGhpcy5yZWFkeVN0YXRlIHx8ICJjbG9zaW5nIiA9PSB0aGlzLnJlYWR5U3RhdGUpe2RlYnVnKCdzb2NrZXQgY2xvc2Ugd2l0aCByZWFzb246ICIlcyInLHJlYXNvbik7dmFyIHNlbGY9dGhpcztjbGVhclRpbWVvdXQodGhpcy5waW5nSW50ZXJ2YWxUaW1lcik7Y2xlYXJUaW1lb3V0KHRoaXMucGluZ1RpbWVvdXRUaW1lcik7dGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCJjbG9zZSIpO3RoaXMudHJhbnNwb3J0LmNsb3NlKCk7dGhpcy50cmFuc3BvcnQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7dGhpcy5yZWFkeVN0YXRlID0gImNsb3NlZCI7dGhpcy5pZCA9IG51bGw7dGhpcy5lbWl0KCJjbG9zZSIscmVhc29uLGRlc2MpO3NlbGYud3JpdGVCdWZmZXIgPSBbXTtzZWxmLnByZXZCdWZmZXJMZW4gPSAwO319O1NvY2tldC5wcm90b3R5cGUuZmlsdGVyVXBncmFkZXMgPSBmdW5jdGlvbih1cGdyYWRlcyl7dmFyIGZpbHRlcmVkVXBncmFkZXM9W107Zm9yKHZhciBpPTAsaj11cGdyYWRlcy5sZW5ndGg7aSA8IGo7aSsrKSB7aWYofmluZGV4KHRoaXMudHJhbnNwb3J0cyx1cGdyYWRlc1tpXSkpZmlsdGVyZWRVcGdyYWRlcy5wdXNoKHVwZ3JhZGVzW2ldKTt9cmV0dXJuIGZpbHRlcmVkVXBncmFkZXM7fTt9KS5jYWxsKHRoaXMsdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCI/d2luZG93OnR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiP2dsb2JhbDp7fSk7fSx7Ii4vdHJhbnNwb3J0IjoxOSwiLi90cmFuc3BvcnRzIjoyMCwiY29tcG9uZW50LWVtaXR0ZXIiOjI2LGRlYnVnOjE0LCJlbmdpbmUuaW8tcGFyc2VyIjoyNyxpbmRleG9mOjMzLHBhcnNlanNvbjozNyxwYXJzZXFzOjM4LHBhcnNldXJpOjM5fV0sMTk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe3ZhciBwYXJzZXI9X2RlcmVxXygiZW5naW5lLmlvLXBhcnNlciIpO3ZhciBFbWl0dGVyPV9kZXJlcV8oImNvbXBvbmVudC1lbWl0dGVyIik7bW9kdWxlLmV4cG9ydHMgPSBUcmFuc3BvcnQ7ZnVuY3Rpb24gVHJhbnNwb3J0KG9wdHMpe3RoaXMucGF0aCA9IG9wdHMucGF0aDt0aGlzLmhvc3RuYW1lID0gb3B0cy5ob3N0bmFtZTt0aGlzLnBvcnQgPSBvcHRzLnBvcnQ7dGhpcy5zZWN1cmUgPSBvcHRzLnNlY3VyZTt0aGlzLnF1ZXJ5ID0gb3B0cy5xdWVyeTt0aGlzLnRpbWVzdGFtcFBhcmFtID0gb3B0cy50aW1lc3RhbXBQYXJhbTt0aGlzLnRpbWVzdGFtcFJlcXVlc3RzID0gb3B0cy50aW1lc3RhbXBSZXF1ZXN0czt0aGlzLnJlYWR5U3RhdGUgPSAiIjt0aGlzLmFnZW50ID0gb3B0cy5hZ2VudCB8fCBmYWxzZTt0aGlzLnNvY2tldCA9IG9wdHMuc29ja2V0O3RoaXMuZW5hYmxlc1hEUiA9IG9wdHMuZW5hYmxlc1hEUjt0aGlzLnBmeCA9IG9wdHMucGZ4O3RoaXMua2V5ID0gb3B0cy5rZXk7dGhpcy5wYXNzcGhyYXNlID0gb3B0cy5wYXNzcGhyYXNlO3RoaXMuY2VydCA9IG9wdHMuY2VydDt0aGlzLmNhID0gb3B0cy5jYTt0aGlzLmNpcGhlcnMgPSBvcHRzLmNpcGhlcnM7dGhpcy5yZWplY3RVbmF1dGhvcml6ZWQgPSBvcHRzLnJlamVjdFVuYXV0aG9yaXplZDt0aGlzLmV4dHJhSGVhZGVycyA9IG9wdHMuZXh0cmFIZWFkZXJzO31FbWl0dGVyKFRyYW5zcG9ydC5wcm90b3R5cGUpO1RyYW5zcG9ydC5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uKG1zZyxkZXNjKXt2YXIgZXJyPW5ldyBFcnJvcihtc2cpO2Vyci50eXBlID0gIlRyYW5zcG9ydEVycm9yIjtlcnIuZGVzY3JpcHRpb24gPSBkZXNjO3RoaXMuZW1pdCgiZXJyb3IiLGVycik7cmV0dXJuIHRoaXM7fTtUcmFuc3BvcnQucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbigpe2lmKCJjbG9zZWQiID09IHRoaXMucmVhZHlTdGF0ZSB8fCAiIiA9PSB0aGlzLnJlYWR5U3RhdGUpe3RoaXMucmVhZHlTdGF0ZSA9ICJvcGVuaW5nIjt0aGlzLmRvT3BlbigpO31yZXR1cm4gdGhpczt9O1RyYW5zcG9ydC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpe2lmKCJvcGVuaW5nIiA9PSB0aGlzLnJlYWR5U3RhdGUgfHwgIm9wZW4iID09IHRoaXMucmVhZHlTdGF0ZSl7dGhpcy5kb0Nsb3NlKCk7dGhpcy5vbkNsb3NlKCk7fXJldHVybiB0aGlzO307VHJhbnNwb3J0LnByb3RvdHlwZS5zZW5kID0gZnVuY3Rpb24ocGFja2V0cyl7aWYoIm9wZW4iID09IHRoaXMucmVhZHlTdGF0ZSl7dGhpcy53cml0ZShwYWNrZXRzKTt9ZWxzZSB7dGhyb3cgbmV3IEVycm9yKCJUcmFuc3BvcnQgbm90IG9wZW4iKTt9fTtUcmFuc3BvcnQucHJvdG90eXBlLm9uT3BlbiA9IGZ1bmN0aW9uKCl7dGhpcy5yZWFkeVN0YXRlID0gIm9wZW4iO3RoaXMud3JpdGFibGUgPSB0cnVlO3RoaXMuZW1pdCgib3BlbiIpO307VHJhbnNwb3J0LnByb3RvdHlwZS5vbkRhdGEgPSBmdW5jdGlvbihkYXRhKXt2YXIgcGFja2V0PXBhcnNlci5kZWNvZGVQYWNrZXQoZGF0YSx0aGlzLnNvY2tldC5iaW5hcnlUeXBlKTt0aGlzLm9uUGFja2V0KHBhY2tldCk7fTtUcmFuc3BvcnQucHJvdG90eXBlLm9uUGFja2V0ID0gZnVuY3Rpb24ocGFja2V0KXt0aGlzLmVtaXQoInBhY2tldCIscGFja2V0KTt9O1RyYW5zcG9ydC5wcm90b3R5cGUub25DbG9zZSA9IGZ1bmN0aW9uKCl7dGhpcy5yZWFkeVN0YXRlID0gImNsb3NlZCI7dGhpcy5lbWl0KCJjbG9zZSIpO307fSx7ImNvbXBvbmVudC1lbWl0dGVyIjoyNiwiZW5naW5lLmlvLXBhcnNlciI6Mjd9XSwyMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7dmFyIFhNTEh0dHBSZXF1ZXN0PV9kZXJlcV8oInhtbGh0dHByZXF1ZXN0LXNzbCIpO3ZhciBYSFI9X2RlcmVxXygiLi9wb2xsaW5nLXhociIpO3ZhciBKU09OUD1fZGVyZXFfKCIuL3BvbGxpbmctanNvbnAiKTt2YXIgd2Vic29ja2V0PV9kZXJlcV8oIi4vd2Vic29ja2V0Iik7ZXhwb3J0cy5wb2xsaW5nID0gcG9sbGluZztleHBvcnRzLndlYnNvY2tldCA9IHdlYnNvY2tldDtmdW5jdGlvbiBwb2xsaW5nKG9wdHMpe3ZhciB4aHI7dmFyIHhkPWZhbHNlO3ZhciB4cz1mYWxzZTt2YXIganNvbnA9ZmFsc2UgIT09IG9wdHMuanNvbnA7aWYoZ2xvYmFsLmxvY2F0aW9uKXt2YXIgaXNTU0w9Imh0dHBzOiIgPT0gbG9jYXRpb24ucHJvdG9jb2w7dmFyIHBvcnQ9bG9jYXRpb24ucG9ydDtpZighcG9ydCl7cG9ydCA9IGlzU1NMPzQ0Mzo4MDt9eGQgPSBvcHRzLmhvc3RuYW1lICE9IGxvY2F0aW9uLmhvc3RuYW1lIHx8IHBvcnQgIT0gb3B0cy5wb3J0O3hzID0gb3B0cy5zZWN1cmUgIT0gaXNTU0w7fW9wdHMueGRvbWFpbiA9IHhkO29wdHMueHNjaGVtZSA9IHhzO3hociA9IG5ldyBYTUxIdHRwUmVxdWVzdChvcHRzKTtpZigib3BlbiIgaW4geGhyICYmICFvcHRzLmZvcmNlSlNPTlApe3JldHVybiBuZXcgWEhSKG9wdHMpO31lbHNlIHtpZighanNvbnApdGhyb3cgbmV3IEVycm9yKCJKU09OUCBkaXNhYmxlZCIpO3JldHVybiBuZXcgSlNPTlAob3B0cyk7fX19KS5jYWxsKHRoaXMsdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCI/d2luZG93OnR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiP2dsb2JhbDp7fSk7fSx7Ii4vcG9sbGluZy1qc29ucCI6MjEsIi4vcG9sbGluZy14aHIiOjIyLCIuL3dlYnNvY2tldCI6MjQsInhtbGh0dHByZXF1ZXN0LXNzbCI6MjV9XSwyMTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7dmFyIFBvbGxpbmc9X2RlcmVxXygiLi9wb2xsaW5nIik7dmFyIGluaGVyaXQ9X2RlcmVxXygiY29tcG9uZW50LWluaGVyaXQiKTttb2R1bGUuZXhwb3J0cyA9IEpTT05QUG9sbGluZzt2YXIgck5ld2xpbmU9L1xuL2c7dmFyIHJFc2NhcGVkTmV3bGluZT0vXFxuL2c7dmFyIGNhbGxiYWNrczt2YXIgaW5kZXg9MDtmdW5jdGlvbiBlbXB0eSgpe31mdW5jdGlvbiBKU09OUFBvbGxpbmcob3B0cyl7UG9sbGluZy5jYWxsKHRoaXMsb3B0cyk7dGhpcy5xdWVyeSA9IHRoaXMucXVlcnkgfHwge307aWYoIWNhbGxiYWNrcyl7aWYoIWdsb2JhbC5fX19laW8pZ2xvYmFsLl9fX2VpbyA9IFtdO2NhbGxiYWNrcyA9IGdsb2JhbC5fX19laW87fXRoaXMuaW5kZXggPSBjYWxsYmFja3MubGVuZ3RoO3ZhciBzZWxmPXRoaXM7Y2FsbGJhY2tzLnB1c2goZnVuY3Rpb24obXNnKXtzZWxmLm9uRGF0YShtc2cpO30pO3RoaXMucXVlcnkuaiA9IHRoaXMuaW5kZXg7aWYoZ2xvYmFsLmRvY3VtZW50ICYmIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKXtnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcigiYmVmb3JldW5sb2FkIixmdW5jdGlvbigpe2lmKHNlbGYuc2NyaXB0KXNlbGYuc2NyaXB0Lm9uZXJyb3IgPSBlbXB0eTt9LGZhbHNlKTt9fWluaGVyaXQoSlNPTlBQb2xsaW5nLFBvbGxpbmcpO0pTT05QUG9sbGluZy5wcm90b3R5cGUuc3VwcG9ydHNCaW5hcnkgPSBmYWxzZTtKU09OUFBvbGxpbmcucHJvdG90eXBlLmRvQ2xvc2UgPSBmdW5jdGlvbigpe2lmKHRoaXMuc2NyaXB0KXt0aGlzLnNjcmlwdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc2NyaXB0KTt0aGlzLnNjcmlwdCA9IG51bGw7fWlmKHRoaXMuZm9ybSl7dGhpcy5mb3JtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5mb3JtKTt0aGlzLmZvcm0gPSBudWxsO3RoaXMuaWZyYW1lID0gbnVsbDt9UG9sbGluZy5wcm90b3R5cGUuZG9DbG9zZS5jYWxsKHRoaXMpO307SlNPTlBQb2xsaW5nLnByb3RvdHlwZS5kb1BvbGwgPSBmdW5jdGlvbigpe3ZhciBzZWxmPXRoaXM7dmFyIHNjcmlwdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTtpZih0aGlzLnNjcmlwdCl7dGhpcy5zY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNjcmlwdCk7dGhpcy5zY3JpcHQgPSBudWxsO31zY3JpcHQuYXN5bmMgPSB0cnVlO3NjcmlwdC5zcmMgPSB0aGlzLnVyaSgpO3NjcmlwdC5vbmVycm9yID0gZnVuY3Rpb24oZSl7c2VsZi5vbkVycm9yKCJqc29ucCBwb2xsIGVycm9yIixlKTt9O3ZhciBpbnNlcnRBdD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2NyaXB0IilbMF07aW5zZXJ0QXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc2NyaXB0LGluc2VydEF0KTt0aGlzLnNjcmlwdCA9IHNjcmlwdDt2YXIgaXNVQWdlY2tvPSJ1bmRlZmluZWQiICE9IHR5cGVvZiBuYXZpZ2F0b3IgJiYgL2dlY2tvL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtpZihpc1VBZ2Vja28pe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgaWZyYW1lPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlmcmFtZSIpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaWZyYW1lKTtkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGlmcmFtZSk7fSwxMDApO319O0pTT05QUG9sbGluZy5wcm90b3R5cGUuZG9Xcml0ZSA9IGZ1bmN0aW9uKGRhdGEsZm4pe3ZhciBzZWxmPXRoaXM7aWYoIXRoaXMuZm9ybSl7dmFyIGZvcm09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZm9ybSIpO3ZhciBhcmVhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIik7dmFyIGlkPXRoaXMuaWZyYW1lSWQgPSAiZWlvX2lmcmFtZV8iICsgdGhpcy5pbmRleDt2YXIgaWZyYW1lO2Zvcm0uY2xhc3NOYW1lID0gInNvY2tldGlvIjtmb3JtLnN0eWxlLnBvc2l0aW9uID0gImFic29sdXRlIjtmb3JtLnN0eWxlLnRvcCA9ICItMTAwMHB4Ijtmb3JtLnN0eWxlLmxlZnQgPSAiLTEwMDBweCI7Zm9ybS50YXJnZXQgPSBpZDtmb3JtLm1ldGhvZCA9ICJQT1NUIjtmb3JtLnNldEF0dHJpYnV0ZSgiYWNjZXB0LWNoYXJzZXQiLCJ1dGYtOCIpO2FyZWEubmFtZSA9ICJkIjtmb3JtLmFwcGVuZENoaWxkKGFyZWEpO2RvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZm9ybSk7dGhpcy5mb3JtID0gZm9ybTt0aGlzLmFyZWEgPSBhcmVhO310aGlzLmZvcm0uYWN0aW9uID0gdGhpcy51cmkoKTtmdW5jdGlvbiBjb21wbGV0ZSgpe2luaXRJZnJhbWUoKTtmbigpO31mdW5jdGlvbiBpbml0SWZyYW1lKCl7aWYoc2VsZi5pZnJhbWUpe3RyeXtzZWxmLmZvcm0ucmVtb3ZlQ2hpbGQoc2VsZi5pZnJhbWUpO31jYXRjaChlKSB7c2VsZi5vbkVycm9yKCJqc29ucCBwb2xsaW5nIGlmcmFtZSByZW1vdmFsIGVycm9yIixlKTt9fXRyeXt2YXIgaHRtbD0nPGlmcmFtZSBzcmM9ImphdmFzY3JpcHQ6MCIgbmFtZT0iJyArIHNlbGYuaWZyYW1lSWQgKyAnIj4nO2lmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaHRtbCk7fWNhdGNoKGUpIHtpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpZnJhbWUiKTtpZnJhbWUubmFtZSA9IHNlbGYuaWZyYW1lSWQ7aWZyYW1lLnNyYyA9ICJqYXZhc2NyaXB0OjAiO31pZnJhbWUuaWQgPSBzZWxmLmlmcmFtZUlkO3NlbGYuZm9ybS5hcHBlbmRDaGlsZChpZnJhbWUpO3NlbGYuaWZyYW1lID0gaWZyYW1lO31pbml0SWZyYW1lKCk7ZGF0YSA9IGRhdGEucmVwbGFjZShyRXNjYXBlZE5ld2xpbmUsIlxcXG4iKTt0aGlzLmFyZWEudmFsdWUgPSBkYXRhLnJlcGxhY2Uock5ld2xpbmUsIlxcbiIpO3RyeXt0aGlzLmZvcm0uc3VibWl0KCk7fWNhdGNoKGUpIHt9aWYodGhpcy5pZnJhbWUuYXR0YWNoRXZlbnQpe3RoaXMuaWZyYW1lLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCl7aWYoc2VsZi5pZnJhbWUucmVhZHlTdGF0ZSA9PSAiY29tcGxldGUiKXtjb21wbGV0ZSgpO319O31lbHNlIHt0aGlzLmlmcmFtZS5vbmxvYWQgPSBjb21wbGV0ZTt9fTt9KS5jYWxsKHRoaXMsdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCI/d2luZG93OnR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiP2dsb2JhbDp7fSk7fSx7Ii4vcG9sbGluZyI6MjMsImNvbXBvbmVudC1pbmhlcml0IjoxM31dLDIyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24oZ2xvYmFsKXt2YXIgWE1MSHR0cFJlcXVlc3Q9X2RlcmVxXygieG1saHR0cHJlcXVlc3Qtc3NsIik7dmFyIFBvbGxpbmc9X2RlcmVxXygiLi9wb2xsaW5nIik7dmFyIEVtaXR0ZXI9X2RlcmVxXygiY29tcG9uZW50LWVtaXR0ZXIiKTt2YXIgaW5oZXJpdD1fZGVyZXFfKCJjb21wb25lbnQtaW5oZXJpdCIpO3ZhciBkZWJ1Zz1fZGVyZXFfKCJkZWJ1ZyIpKCJlbmdpbmUuaW8tY2xpZW50OnBvbGxpbmcteGhyIik7bW9kdWxlLmV4cG9ydHMgPSBYSFI7bW9kdWxlLmV4cG9ydHMuUmVxdWVzdCA9IFJlcXVlc3Q7ZnVuY3Rpb24gZW1wdHkoKXt9ZnVuY3Rpb24gWEhSKG9wdHMpe1BvbGxpbmcuY2FsbCh0aGlzLG9wdHMpO2lmKGdsb2JhbC5sb2NhdGlvbil7dmFyIGlzU1NMPSJodHRwczoiID09IGxvY2F0aW9uLnByb3RvY29sO3ZhciBwb3J0PWxvY2F0aW9uLnBvcnQ7aWYoIXBvcnQpe3BvcnQgPSBpc1NTTD80NDM6ODA7fXRoaXMueGQgPSBvcHRzLmhvc3RuYW1lICE9IGdsb2JhbC5sb2NhdGlvbi5ob3N0bmFtZSB8fCBwb3J0ICE9IG9wdHMucG9ydDt0aGlzLnhzID0gb3B0cy5zZWN1cmUgIT0gaXNTU0w7fWVsc2Uge3RoaXMuZXh0cmFIZWFkZXJzID0gb3B0cy5leHRyYUhlYWRlcnM7fX1pbmhlcml0KFhIUixQb2xsaW5nKTtYSFIucHJvdG90eXBlLnN1cHBvcnRzQmluYXJ5ID0gdHJ1ZTtYSFIucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbihvcHRzKXtvcHRzID0gb3B0cyB8fCB7fTtvcHRzLnVyaSA9IHRoaXMudXJpKCk7b3B0cy54ZCA9IHRoaXMueGQ7b3B0cy54cyA9IHRoaXMueHM7b3B0cy5hZ2VudCA9IHRoaXMuYWdlbnQgfHwgZmFsc2U7b3B0cy5zdXBwb3J0c0JpbmFyeSA9IHRoaXMuc3VwcG9ydHNCaW5hcnk7b3B0cy5lbmFibGVzWERSID0gdGhpcy5lbmFibGVzWERSO29wdHMucGZ4ID0gdGhpcy5wZng7b3B0cy5rZXkgPSB0aGlzLmtleTtvcHRzLnBhc3NwaHJhc2UgPSB0aGlzLnBhc3NwaHJhc2U7b3B0cy5jZXJ0ID0gdGhpcy5jZXJ0O29wdHMuY2EgPSB0aGlzLmNhO29wdHMuY2lwaGVycyA9IHRoaXMuY2lwaGVycztvcHRzLnJlamVjdFVuYXV0aG9yaXplZCA9IHRoaXMucmVqZWN0VW5hdXRob3JpemVkO29wdHMuZXh0cmFIZWFkZXJzID0gdGhpcy5leHRyYUhlYWRlcnM7cmV0dXJuIG5ldyBSZXF1ZXN0KG9wdHMpO307WEhSLnByb3RvdHlwZS5kb1dyaXRlID0gZnVuY3Rpb24oZGF0YSxmbil7dmFyIGlzQmluYXJ5PXR5cGVvZiBkYXRhICE9PSAic3RyaW5nIiAmJiBkYXRhICE9PSB1bmRlZmluZWQ7dmFyIHJlcT10aGlzLnJlcXVlc3Qoe21ldGhvZDoiUE9TVCIsZGF0YTpkYXRhLGlzQmluYXJ5OmlzQmluYXJ5fSk7dmFyIHNlbGY9dGhpcztyZXEub24oInN1Y2Nlc3MiLGZuKTtyZXEub24oImVycm9yIixmdW5jdGlvbihlcnIpe3NlbGYub25FcnJvcigieGhyIHBvc3QgZXJyb3IiLGVycik7fSk7dGhpcy5zZW5kWGhyID0gcmVxO307WEhSLnByb3RvdHlwZS5kb1BvbGwgPSBmdW5jdGlvbigpe2RlYnVnKCJ4aHIgcG9sbCIpO3ZhciByZXE9dGhpcy5yZXF1ZXN0KCk7dmFyIHNlbGY9dGhpcztyZXEub24oImRhdGEiLGZ1bmN0aW9uKGRhdGEpe3NlbGYub25EYXRhKGRhdGEpO30pO3JlcS5vbigiZXJyb3IiLGZ1bmN0aW9uKGVycil7c2VsZi5vbkVycm9yKCJ4aHIgcG9sbCBlcnJvciIsZXJyKTt9KTt0aGlzLnBvbGxYaHIgPSByZXE7fTtmdW5jdGlvbiBSZXF1ZXN0KG9wdHMpe3RoaXMubWV0aG9kID0gb3B0cy5tZXRob2QgfHwgIkdFVCI7dGhpcy51cmkgPSBvcHRzLnVyaTt0aGlzLnhkID0gISFvcHRzLnhkO3RoaXMueHMgPSAhIW9wdHMueHM7dGhpcy5hc3luYyA9IGZhbHNlICE9PSBvcHRzLmFzeW5jO3RoaXMuZGF0YSA9IHVuZGVmaW5lZCAhPSBvcHRzLmRhdGE/b3B0cy5kYXRhOm51bGw7dGhpcy5hZ2VudCA9IG9wdHMuYWdlbnQ7dGhpcy5pc0JpbmFyeSA9IG9wdHMuaXNCaW5hcnk7dGhpcy5zdXBwb3J0c0JpbmFyeSA9IG9wdHMuc3VwcG9ydHNCaW5hcnk7dGhpcy5lbmFibGVzWERSID0gb3B0cy5lbmFibGVzWERSO3RoaXMucGZ4ID0gb3B0cy5wZng7dGhpcy5rZXkgPSBvcHRzLmtleTt0aGlzLnBhc3NwaHJhc2UgPSBvcHRzLnBhc3NwaHJhc2U7dGhpcy5jZXJ0ID0gb3B0cy5jZXJ0O3RoaXMuY2EgPSBvcHRzLmNhO3RoaXMuY2lwaGVycyA9IG9wdHMuY2lwaGVyczt0aGlzLnJlamVjdFVuYXV0aG9yaXplZCA9IG9wdHMucmVqZWN0VW5hdXRob3JpemVkO3RoaXMuZXh0cmFIZWFkZXJzID0gb3B0cy5leHRyYUhlYWRlcnM7dGhpcy5jcmVhdGUoKTt9RW1pdHRlcihSZXF1ZXN0LnByb3RvdHlwZSk7UmVxdWVzdC5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24oKXt2YXIgb3B0cz17YWdlbnQ6dGhpcy5hZ2VudCx4ZG9tYWluOnRoaXMueGQseHNjaGVtZTp0aGlzLnhzLGVuYWJsZXNYRFI6dGhpcy5lbmFibGVzWERSfTtvcHRzLnBmeCA9IHRoaXMucGZ4O29wdHMua2V5ID0gdGhpcy5rZXk7b3B0cy5wYXNzcGhyYXNlID0gdGhpcy5wYXNzcGhyYXNlO29wdHMuY2VydCA9IHRoaXMuY2VydDtvcHRzLmNhID0gdGhpcy5jYTtvcHRzLmNpcGhlcnMgPSB0aGlzLmNpcGhlcnM7b3B0cy5yZWplY3RVbmF1dGhvcml6ZWQgPSB0aGlzLnJlamVjdFVuYXV0aG9yaXplZDt2YXIgeGhyPXRoaXMueGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KG9wdHMpO3ZhciBzZWxmPXRoaXM7dHJ5e2RlYnVnKCJ4aHIgb3BlbiAlczogJXMiLHRoaXMubWV0aG9kLHRoaXMudXJpKTt4aHIub3Blbih0aGlzLm1ldGhvZCx0aGlzLnVyaSx0aGlzLmFzeW5jKTt0cnl7aWYodGhpcy5leHRyYUhlYWRlcnMpe3hoci5zZXREaXNhYmxlSGVhZGVyQ2hlY2sodHJ1ZSk7Zm9yKHZhciBpIGluIHRoaXMuZXh0cmFIZWFkZXJzKSB7aWYodGhpcy5leHRyYUhlYWRlcnMuaGFzT3duUHJvcGVydHkoaSkpe3hoci5zZXRSZXF1ZXN0SGVhZGVyKGksdGhpcy5leHRyYUhlYWRlcnNbaV0pO319fX1jYXRjaChlKSB7fWlmKHRoaXMuc3VwcG9ydHNCaW5hcnkpe3hoci5yZXNwb25zZVR5cGUgPSAiYXJyYXlidWZmZXIiO31pZigiUE9TVCIgPT0gdGhpcy5tZXRob2Qpe3RyeXtpZih0aGlzLmlzQmluYXJ5KXt4aHIuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC10eXBlIiwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIik7fWVsc2Uge3hoci5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LXR5cGUiLCJ0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLTgiKTt9fWNhdGNoKGUpIHt9fWlmKCJ3aXRoQ3JlZGVudGlhbHMiIGluIHhocil7eGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7fWlmKHRoaXMuaGFzWERSKCkpe3hoci5vbmxvYWQgPSBmdW5jdGlvbigpe3NlbGYub25Mb2FkKCk7fTt4aHIub25lcnJvciA9IGZ1bmN0aW9uKCl7c2VsZi5vbkVycm9yKHhoci5yZXNwb25zZVRleHQpO307fWVsc2Uge3hoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpe2lmKDQgIT0geGhyLnJlYWR5U3RhdGUpcmV0dXJuO2lmKDIwMCA9PSB4aHIuc3RhdHVzIHx8IDEyMjMgPT0geGhyLnN0YXR1cyl7c2VsZi5vbkxvYWQoKTt9ZWxzZSB7c2V0VGltZW91dChmdW5jdGlvbigpe3NlbGYub25FcnJvcih4aHIuc3RhdHVzKTt9LDApO319O31kZWJ1ZygieGhyIGRhdGEgJXMiLHRoaXMuZGF0YSk7eGhyLnNlbmQodGhpcy5kYXRhKTt9Y2F0Y2goZSkge3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLm9uRXJyb3IoZSk7fSwwKTtyZXR1cm47fWlmKGdsb2JhbC5kb2N1bWVudCl7dGhpcy5pbmRleCA9IFJlcXVlc3QucmVxdWVzdHNDb3VudCsrO1JlcXVlc3QucmVxdWVzdHNbdGhpcy5pbmRleF0gPSB0aGlzO319O1JlcXVlc3QucHJvdG90eXBlLm9uU3VjY2VzcyA9IGZ1bmN0aW9uKCl7dGhpcy5lbWl0KCJzdWNjZXNzIik7dGhpcy5jbGVhbnVwKCk7fTtSZXF1ZXN0LnByb3RvdHlwZS5vbkRhdGEgPSBmdW5jdGlvbihkYXRhKXt0aGlzLmVtaXQoImRhdGEiLGRhdGEpO3RoaXMub25TdWNjZXNzKCk7fTtSZXF1ZXN0LnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24oZXJyKXt0aGlzLmVtaXQoImVycm9yIixlcnIpO3RoaXMuY2xlYW51cCh0cnVlKTt9O1JlcXVlc3QucHJvdG90eXBlLmNsZWFudXAgPSBmdW5jdGlvbihmcm9tRXJyb3Ipe2lmKCJ1bmRlZmluZWQiID09IHR5cGVvZiB0aGlzLnhociB8fCBudWxsID09PSB0aGlzLnhocil7cmV0dXJuO31pZih0aGlzLmhhc1hEUigpKXt0aGlzLnhoci5vbmxvYWQgPSB0aGlzLnhoci5vbmVycm9yID0gZW1wdHk7fWVsc2Uge3RoaXMueGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGVtcHR5O31pZihmcm9tRXJyb3Ipe3RyeXt0aGlzLnhoci5hYm9ydCgpO31jYXRjaChlKSB7fX1pZihnbG9iYWwuZG9jdW1lbnQpe2RlbGV0ZSBSZXF1ZXN0LnJlcXVlc3RzW3RoaXMuaW5kZXhdO310aGlzLnhociA9IG51bGw7fTtSZXF1ZXN0LnByb3RvdHlwZS5vbkxvYWQgPSBmdW5jdGlvbigpe3ZhciBkYXRhO3RyeXt2YXIgY29udGVudFR5cGU7dHJ5e2NvbnRlbnRUeXBlID0gdGhpcy54aHIuZ2V0UmVzcG9uc2VIZWFkZXIoIkNvbnRlbnQtVHlwZSIpLnNwbGl0KCI7IilbMF07fWNhdGNoKGUpIHt9aWYoY29udGVudFR5cGUgPT09ICJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW0iKXtkYXRhID0gdGhpcy54aHIucmVzcG9uc2U7fWVsc2Uge2lmKCF0aGlzLnN1cHBvcnRzQmluYXJ5KXtkYXRhID0gdGhpcy54aHIucmVzcG9uc2VUZXh0O31lbHNlIHt0cnl7ZGF0YSA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheSh0aGlzLnhoci5yZXNwb25zZSkpO31jYXRjaChlKSB7dmFyIHVpOEFycj1uZXcgVWludDhBcnJheSh0aGlzLnhoci5yZXNwb25zZSk7dmFyIGRhdGFBcnJheT1bXTtmb3IodmFyIGlkeD0wLGxlbmd0aD11aThBcnIubGVuZ3RoO2lkeCA8IGxlbmd0aDtpZHgrKykge2RhdGFBcnJheS5wdXNoKHVpOEFycltpZHhdKTt9ZGF0YSA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxkYXRhQXJyYXkpO319fX1jYXRjaChlKSB7dGhpcy5vbkVycm9yKGUpO31pZihudWxsICE9IGRhdGEpe3RoaXMub25EYXRhKGRhdGEpO319O1JlcXVlc3QucHJvdG90eXBlLmhhc1hEUiA9IGZ1bmN0aW9uKCl7cmV0dXJuICJ1bmRlZmluZWQiICE9PSB0eXBlb2YgZ2xvYmFsLlhEb21haW5SZXF1ZXN0ICYmICF0aGlzLnhzICYmIHRoaXMuZW5hYmxlc1hEUjt9O1JlcXVlc3QucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24oKXt0aGlzLmNsZWFudXAoKTt9O2lmKGdsb2JhbC5kb2N1bWVudCl7UmVxdWVzdC5yZXF1ZXN0c0NvdW50ID0gMDtSZXF1ZXN0LnJlcXVlc3RzID0ge307aWYoZ2xvYmFsLmF0dGFjaEV2ZW50KXtnbG9iYWwuYXR0YWNoRXZlbnQoIm9udW5sb2FkIix1bmxvYWRIYW5kbGVyKTt9ZWxzZSBpZihnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcil7Z2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoImJlZm9yZXVubG9hZCIsdW5sb2FkSGFuZGxlcixmYWxzZSk7fX1mdW5jdGlvbiB1bmxvYWRIYW5kbGVyKCl7Zm9yKHZhciBpIGluIFJlcXVlc3QucmVxdWVzdHMpIHtpZihSZXF1ZXN0LnJlcXVlc3RzLmhhc093blByb3BlcnR5KGkpKXtSZXF1ZXN0LnJlcXVlc3RzW2ldLmFib3J0KCk7fX19fSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIj9nbG9iYWw6e30pO30seyIuL3BvbGxpbmciOjIzLCJjb21wb25lbnQtZW1pdHRlciI6MjYsImNvbXBvbmVudC1pbmhlcml0IjoxMyxkZWJ1ZzoxNCwieG1saHR0cHJlcXVlc3Qtc3NsIjoyNX1dLDIzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXt2YXIgVHJhbnNwb3J0PV9kZXJlcV8oIi4uL3RyYW5zcG9ydCIpO3ZhciBwYXJzZXFzPV9kZXJlcV8oInBhcnNlcXMiKTt2YXIgcGFyc2VyPV9kZXJlcV8oImVuZ2luZS5pby1wYXJzZXIiKTt2YXIgaW5oZXJpdD1fZGVyZXFfKCJjb21wb25lbnQtaW5oZXJpdCIpO3ZhciB5ZWFzdD1fZGVyZXFfKCJ5ZWFzdCIpO3ZhciBkZWJ1Zz1fZGVyZXFfKCJkZWJ1ZyIpKCJlbmdpbmUuaW8tY2xpZW50OnBvbGxpbmciKTttb2R1bGUuZXhwb3J0cyA9IFBvbGxpbmc7dmFyIGhhc1hIUjI9KGZ1bmN0aW9uKCl7dmFyIFhNTEh0dHBSZXF1ZXN0PV9kZXJlcV8oInhtbGh0dHByZXF1ZXN0LXNzbCIpO3ZhciB4aHI9bmV3IFhNTEh0dHBSZXF1ZXN0KHt4ZG9tYWluOmZhbHNlfSk7cmV0dXJuIG51bGwgIT0geGhyLnJlc3BvbnNlVHlwZTt9KSgpO2Z1bmN0aW9uIFBvbGxpbmcob3B0cyl7dmFyIGZvcmNlQmFzZTY0PW9wdHMgJiYgb3B0cy5mb3JjZUJhc2U2NDtpZighaGFzWEhSMiB8fCBmb3JjZUJhc2U2NCl7dGhpcy5zdXBwb3J0c0JpbmFyeSA9IGZhbHNlO31UcmFuc3BvcnQuY2FsbCh0aGlzLG9wdHMpO31pbmhlcml0KFBvbGxpbmcsVHJhbnNwb3J0KTtQb2xsaW5nLnByb3RvdHlwZS5uYW1lID0gInBvbGxpbmciO1BvbGxpbmcucHJvdG90eXBlLmRvT3BlbiA9IGZ1bmN0aW9uKCl7dGhpcy5wb2xsKCk7fTtQb2xsaW5nLnByb3RvdHlwZS5wYXVzZSA9IGZ1bmN0aW9uKG9uUGF1c2Upe3ZhciBwZW5kaW5nPTA7dmFyIHNlbGY9dGhpczt0aGlzLnJlYWR5U3RhdGUgPSAicGF1c2luZyI7ZnVuY3Rpb24gcGF1c2UoKXtkZWJ1ZygicGF1c2VkIik7c2VsZi5yZWFkeVN0YXRlID0gInBhdXNlZCI7b25QYXVzZSgpO31pZih0aGlzLnBvbGxpbmcgfHwgIXRoaXMud3JpdGFibGUpe3ZhciB0b3RhbD0wO2lmKHRoaXMucG9sbGluZyl7ZGVidWcoIndlIGFyZSBjdXJyZW50bHkgcG9sbGluZyAtIHdhaXRpbmcgdG8gcGF1c2UiKTt0b3RhbCsrO3RoaXMub25jZSgicG9sbENvbXBsZXRlIixmdW5jdGlvbigpe2RlYnVnKCJwcmUtcGF1c2UgcG9sbGluZyBjb21wbGV0ZSIpOy0tdG90YWwgfHwgcGF1c2UoKTt9KTt9aWYoIXRoaXMud3JpdGFibGUpe2RlYnVnKCJ3ZSBhcmUgY3VycmVudGx5IHdyaXRpbmcgLSB3YWl0aW5nIHRvIHBhdXNlIik7dG90YWwrKzt0aGlzLm9uY2UoImRyYWluIixmdW5jdGlvbigpe2RlYnVnKCJwcmUtcGF1c2Ugd3JpdGluZyBjb21wbGV0ZSIpOy0tdG90YWwgfHwgcGF1c2UoKTt9KTt9fWVsc2Uge3BhdXNlKCk7fX07UG9sbGluZy5wcm90b3R5cGUucG9sbCA9IGZ1bmN0aW9uKCl7ZGVidWcoInBvbGxpbmciKTt0aGlzLnBvbGxpbmcgPSB0cnVlO3RoaXMuZG9Qb2xsKCk7dGhpcy5lbWl0KCJwb2xsIik7fTtQb2xsaW5nLnByb3RvdHlwZS5vbkRhdGEgPSBmdW5jdGlvbihkYXRhKXt2YXIgc2VsZj10aGlzO2RlYnVnKCJwb2xsaW5nIGdvdCBkYXRhICVzIixkYXRhKTt2YXIgY2FsbGJhY2s9ZnVuY3Rpb24gY2FsbGJhY2socGFja2V0LGluZGV4LHRvdGFsKXtpZigib3BlbmluZyIgPT0gc2VsZi5yZWFkeVN0YXRlKXtzZWxmLm9uT3BlbigpO31pZigiY2xvc2UiID09IHBhY2tldC50eXBlKXtzZWxmLm9uQ2xvc2UoKTtyZXR1cm4gZmFsc2U7fXNlbGYub25QYWNrZXQocGFja2V0KTt9O3BhcnNlci5kZWNvZGVQYXlsb2FkKGRhdGEsdGhpcy5zb2NrZXQuYmluYXJ5VHlwZSxjYWxsYmFjayk7aWYoImNsb3NlZCIgIT0gdGhpcy5yZWFkeVN0YXRlKXt0aGlzLnBvbGxpbmcgPSBmYWxzZTt0aGlzLmVtaXQoInBvbGxDb21wbGV0ZSIpO2lmKCJvcGVuIiA9PSB0aGlzLnJlYWR5U3RhdGUpe3RoaXMucG9sbCgpO31lbHNlIHtkZWJ1ZygnaWdub3JpbmcgcG9sbCAtIHRyYW5zcG9ydCBzdGF0ZSAiJXMiJyx0aGlzLnJlYWR5U3RhdGUpO319fTtQb2xsaW5nLnByb3RvdHlwZS5kb0Nsb3NlID0gZnVuY3Rpb24oKXt2YXIgc2VsZj10aGlzO2Z1bmN0aW9uIGNsb3NlKCl7ZGVidWcoIndyaXRpbmcgY2xvc2UgcGFja2V0Iik7c2VsZi53cml0ZShbe3R5cGU6ImNsb3NlIn1dKTt9aWYoIm9wZW4iID09IHRoaXMucmVhZHlTdGF0ZSl7ZGVidWcoInRyYW5zcG9ydCBvcGVuIC0gY2xvc2luZyIpO2Nsb3NlKCk7fWVsc2Uge2RlYnVnKCJ0cmFuc3BvcnQgbm90IG9wZW4gLSBkZWZlcnJpbmcgY2xvc2UiKTt0aGlzLm9uY2UoIm9wZW4iLGNsb3NlKTt9fTtQb2xsaW5nLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKHBhY2tldHMpe3ZhciBzZWxmPXRoaXM7dGhpcy53cml0YWJsZSA9IGZhbHNlO3ZhciBjYWxsYmFja2ZuPWZ1bmN0aW9uIGNhbGxiYWNrZm4oKXtzZWxmLndyaXRhYmxlID0gdHJ1ZTtzZWxmLmVtaXQoImRyYWluIik7fTt2YXIgc2VsZj10aGlzO3BhcnNlci5lbmNvZGVQYXlsb2FkKHBhY2tldHMsdGhpcy5zdXBwb3J0c0JpbmFyeSxmdW5jdGlvbihkYXRhKXtzZWxmLmRvV3JpdGUoZGF0YSxjYWxsYmFja2ZuKTt9KTt9O1BvbGxpbmcucHJvdG90eXBlLnVyaSA9IGZ1bmN0aW9uKCl7dmFyIHF1ZXJ5PXRoaXMucXVlcnkgfHwge307dmFyIHNjaGVtYT10aGlzLnNlY3VyZT8iaHR0cHMiOiJodHRwIjt2YXIgcG9ydD0iIjtpZihmYWxzZSAhPT0gdGhpcy50aW1lc3RhbXBSZXF1ZXN0cyl7cXVlcnlbdGhpcy50aW1lc3RhbXBQYXJhbV0gPSB5ZWFzdCgpO31pZighdGhpcy5zdXBwb3J0c0JpbmFyeSAmJiAhcXVlcnkuc2lkKXtxdWVyeS5iNjQgPSAxO31xdWVyeSA9IHBhcnNlcXMuZW5jb2RlKHF1ZXJ5KTtpZih0aGlzLnBvcnQgJiYgKCJodHRwcyIgPT0gc2NoZW1hICYmIHRoaXMucG9ydCAhPSA0NDMgfHwgImh0dHAiID09IHNjaGVtYSAmJiB0aGlzLnBvcnQgIT0gODApKXtwb3J0ID0gIjoiICsgdGhpcy5wb3J0O31pZihxdWVyeS5sZW5ndGgpe3F1ZXJ5ID0gIj8iICsgcXVlcnk7fXZhciBpcHY2PXRoaXMuaG9zdG5hbWUuaW5kZXhPZigiOiIpICE9PSAtMTtyZXR1cm4gc2NoZW1hICsgIjovLyIgKyAoaXB2Nj8iWyIgKyB0aGlzLmhvc3RuYW1lICsgIl0iOnRoaXMuaG9zdG5hbWUpICsgcG9ydCArIHRoaXMucGF0aCArIHF1ZXJ5O307fSx7Ii4uL3RyYW5zcG9ydCI6MTksImNvbXBvbmVudC1pbmhlcml0IjoxMyxkZWJ1ZzoxNCwiZW5naW5lLmlvLXBhcnNlciI6MjcscGFyc2VxczozOCwieG1saHR0cHJlcXVlc3Qtc3NsIjoyNSx5ZWFzdDo0Nn1dLDI0OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24oZ2xvYmFsKXt2YXIgVHJhbnNwb3J0PV9kZXJlcV8oIi4uL3RyYW5zcG9ydCIpO3ZhciBwYXJzZXI9X2RlcmVxXygiZW5naW5lLmlvLXBhcnNlciIpO3ZhciBwYXJzZXFzPV9kZXJlcV8oInBhcnNlcXMiKTt2YXIgaW5oZXJpdD1fZGVyZXFfKCJjb21wb25lbnQtaW5oZXJpdCIpO3ZhciB5ZWFzdD1fZGVyZXFfKCJ5ZWFzdCIpO3ZhciBkZWJ1Zz1fZGVyZXFfKCJkZWJ1ZyIpKCJlbmdpbmUuaW8tY2xpZW50OndlYnNvY2tldCIpO3ZhciBCcm93c2VyV2ViU29ja2V0PWdsb2JhbC5XZWJTb2NrZXQgfHwgZ2xvYmFsLk1veldlYlNvY2tldDt2YXIgV2ViU29ja2V0PUJyb3dzZXJXZWJTb2NrZXQgfHwgKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiP251bGw6X2RlcmVxXygid3MiKSk7bW9kdWxlLmV4cG9ydHMgPSBXUztmdW5jdGlvbiBXUyhvcHRzKXt2YXIgZm9yY2VCYXNlNjQ9b3B0cyAmJiBvcHRzLmZvcmNlQmFzZTY0O2lmKGZvcmNlQmFzZTY0KXt0aGlzLnN1cHBvcnRzQmluYXJ5ID0gZmFsc2U7fXRoaXMucGVyTWVzc2FnZURlZmxhdGUgPSBvcHRzLnBlck1lc3NhZ2VEZWZsYXRlO1RyYW5zcG9ydC5jYWxsKHRoaXMsb3B0cyk7fWluaGVyaXQoV1MsVHJhbnNwb3J0KTtXUy5wcm90b3R5cGUubmFtZSA9ICJ3ZWJzb2NrZXQiO1dTLnByb3RvdHlwZS5zdXBwb3J0c0JpbmFyeSA9IHRydWU7V1MucHJvdG90eXBlLmRvT3BlbiA9IGZ1bmN0aW9uKCl7aWYoIXRoaXMuY2hlY2soKSl7cmV0dXJuO312YXIgc2VsZj10aGlzO3ZhciB1cmk9dGhpcy51cmkoKTt2YXIgcHJvdG9jb2xzPXZvaWQgMDt2YXIgb3B0cz17YWdlbnQ6dGhpcy5hZ2VudCxwZXJNZXNzYWdlRGVmbGF0ZTp0aGlzLnBlck1lc3NhZ2VEZWZsYXRlfTtvcHRzLnBmeCA9IHRoaXMucGZ4O29wdHMua2V5ID0gdGhpcy5rZXk7b3B0cy5wYXNzcGhyYXNlID0gdGhpcy5wYXNzcGhyYXNlO29wdHMuY2VydCA9IHRoaXMuY2VydDtvcHRzLmNhID0gdGhpcy5jYTtvcHRzLmNpcGhlcnMgPSB0aGlzLmNpcGhlcnM7b3B0cy5yZWplY3RVbmF1dGhvcml6ZWQgPSB0aGlzLnJlamVjdFVuYXV0aG9yaXplZDtpZih0aGlzLmV4dHJhSGVhZGVycyl7b3B0cy5oZWFkZXJzID0gdGhpcy5leHRyYUhlYWRlcnM7fXRoaXMud3MgPSBCcm93c2VyV2ViU29ja2V0P25ldyBXZWJTb2NrZXQodXJpKTpuZXcgV2ViU29ja2V0KHVyaSxwcm90b2NvbHMsb3B0cyk7aWYodGhpcy53cy5iaW5hcnlUeXBlID09PSB1bmRlZmluZWQpe3RoaXMuc3VwcG9ydHNCaW5hcnkgPSBmYWxzZTt9aWYodGhpcy53cy5zdXBwb3J0cyAmJiB0aGlzLndzLnN1cHBvcnRzLmJpbmFyeSl7dGhpcy5zdXBwb3J0c0JpbmFyeSA9IHRydWU7dGhpcy53cy5iaW5hcnlUeXBlID0gImJ1ZmZlciI7fWVsc2Uge3RoaXMud3MuYmluYXJ5VHlwZSA9ICJhcnJheWJ1ZmZlciI7fXRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTt9O1dTLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uKCl7dmFyIHNlbGY9dGhpczt0aGlzLndzLm9ub3BlbiA9IGZ1bmN0aW9uKCl7c2VsZi5vbk9wZW4oKTt9O3RoaXMud3Mub25jbG9zZSA9IGZ1bmN0aW9uKCl7c2VsZi5vbkNsb3NlKCk7fTt0aGlzLndzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2KXtzZWxmLm9uRGF0YShldi5kYXRhKTt9O3RoaXMud3Mub25lcnJvciA9IGZ1bmN0aW9uKGUpe3NlbGYub25FcnJvcigid2Vic29ja2V0IGVycm9yIixlKTt9O307aWYoInVuZGVmaW5lZCIgIT0gdHlwZW9mIG5hdmlnYXRvciAmJiAvaVBhZHxpUGhvbmV8aVBvZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpe1dTLnByb3RvdHlwZS5vbkRhdGEgPSBmdW5jdGlvbihkYXRhKXt2YXIgc2VsZj10aGlzO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtUcmFuc3BvcnQucHJvdG90eXBlLm9uRGF0YS5jYWxsKHNlbGYsZGF0YSk7fSwwKTt9O31XUy5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbihwYWNrZXRzKXt2YXIgc2VsZj10aGlzO3RoaXMud3JpdGFibGUgPSBmYWxzZTt2YXIgdG90YWw9cGFja2V0cy5sZW5ndGg7Zm9yKHZhciBpPTAsbD10b3RhbDtpIDwgbDtpKyspIHsoZnVuY3Rpb24ocGFja2V0KXtwYXJzZXIuZW5jb2RlUGFja2V0KHBhY2tldCxzZWxmLnN1cHBvcnRzQmluYXJ5LGZ1bmN0aW9uKGRhdGEpe2lmKCFCcm93c2VyV2ViU29ja2V0KXt2YXIgb3B0cz17fTtpZihwYWNrZXQub3B0aW9ucyl7b3B0cy5jb21wcmVzcyA9IHBhY2tldC5vcHRpb25zLmNvbXByZXNzO31pZihzZWxmLnBlck1lc3NhZ2VEZWZsYXRlKXt2YXIgbGVuPSJzdHJpbmciID09IHR5cGVvZiBkYXRhP2dsb2JhbC5CdWZmZXIuYnl0ZUxlbmd0aChkYXRhKTpkYXRhLmxlbmd0aDtpZihsZW4gPCBzZWxmLnBlck1lc3NhZ2VEZWZsYXRlLnRocmVzaG9sZCl7b3B0cy5jb21wcmVzcyA9IGZhbHNlO319fXRyeXtpZihCcm93c2VyV2ViU29ja2V0KXtzZWxmLndzLnNlbmQoZGF0YSk7fWVsc2Uge3NlbGYud3Muc2VuZChkYXRhLG9wdHMpO319Y2F0Y2goZSkge2RlYnVnKCJ3ZWJzb2NrZXQgY2xvc2VkIGJlZm9yZSBvbmNsb3NlIGV2ZW50Iik7fS0tdG90YWwgfHwgZG9uZSgpO30pO30pKHBhY2tldHNbaV0pO31mdW5jdGlvbiBkb25lKCl7c2VsZi5lbWl0KCJmbHVzaCIpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtzZWxmLndyaXRhYmxlID0gdHJ1ZTtzZWxmLmVtaXQoImRyYWluIik7fSwwKTt9fTtXUy5wcm90b3R5cGUub25DbG9zZSA9IGZ1bmN0aW9uKCl7VHJhbnNwb3J0LnByb3RvdHlwZS5vbkNsb3NlLmNhbGwodGhpcyk7fTtXUy5wcm90b3R5cGUuZG9DbG9zZSA9IGZ1bmN0aW9uKCl7aWYodHlwZW9mIHRoaXMud3MgIT09ICJ1bmRlZmluZWQiKXt0aGlzLndzLmNsb3NlKCk7fX07V1MucHJvdG90eXBlLnVyaSA9IGZ1bmN0aW9uKCl7dmFyIHF1ZXJ5PXRoaXMucXVlcnkgfHwge307dmFyIHNjaGVtYT10aGlzLnNlY3VyZT8id3NzIjoid3MiO3ZhciBwb3J0PSIiO2lmKHRoaXMucG9ydCAmJiAoIndzcyIgPT0gc2NoZW1hICYmIHRoaXMucG9ydCAhPSA0NDMgfHwgIndzIiA9PSBzY2hlbWEgJiYgdGhpcy5wb3J0ICE9IDgwKSl7cG9ydCA9ICI6IiArIHRoaXMucG9ydDt9aWYodGhpcy50aW1lc3RhbXBSZXF1ZXN0cyl7cXVlcnlbdGhpcy50aW1lc3RhbXBQYXJhbV0gPSB5ZWFzdCgpO31pZighdGhpcy5zdXBwb3J0c0JpbmFyeSl7cXVlcnkuYjY0ID0gMTt9cXVlcnkgPSBwYXJzZXFzLmVuY29kZShxdWVyeSk7aWYocXVlcnkubGVuZ3RoKXtxdWVyeSA9ICI/IiArIHF1ZXJ5O312YXIgaXB2Nj10aGlzLmhvc3RuYW1lLmluZGV4T2YoIjoiKSAhPT0gLTE7cmV0dXJuIHNjaGVtYSArICI6Ly8iICsgKGlwdjY/IlsiICsgdGhpcy5ob3N0bmFtZSArICJdIjp0aGlzLmhvc3RuYW1lKSArIHBvcnQgKyB0aGlzLnBhdGggKyBxdWVyeTt9O1dTLnByb3RvdHlwZS5jaGVjayA9IGZ1bmN0aW9uKCl7cmV0dXJuICEhV2ViU29ja2V0ICYmICEoIl9faW5pdGlhbGl6ZSIgaW4gV2ViU29ja2V0ICYmIHRoaXMubmFtZSA9PT0gV1MucHJvdG90eXBlLm5hbWUpO307fSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIj9nbG9iYWw6e30pO30seyIuLi90cmFuc3BvcnQiOjE5LCJjb21wb25lbnQtaW5oZXJpdCI6MTMsZGVidWc6MTQsImVuZ2luZS5pby1wYXJzZXIiOjI3LHBhcnNlcXM6Mzgsd3M6dW5kZWZpbmVkLHllYXN0OjQ2fV0sMjU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe3ZhciBoYXNDT1JTPV9kZXJlcV8oImhhcy1jb3JzIik7bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcHRzKXt2YXIgeGRvbWFpbj1vcHRzLnhkb21haW47dmFyIHhzY2hlbWU9b3B0cy54c2NoZW1lO3ZhciBlbmFibGVzWERSPW9wdHMuZW5hYmxlc1hEUjt0cnl7aWYoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICYmICgheGRvbWFpbiB8fCBoYXNDT1JTKSl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpO319Y2F0Y2goZSkge310cnl7aWYoInVuZGVmaW5lZCIgIT0gdHlwZW9mIFhEb21haW5SZXF1ZXN0ICYmICF4c2NoZW1lICYmIGVuYWJsZXNYRFIpe3JldHVybiBuZXcgWERvbWFpblJlcXVlc3QoKTt9fWNhdGNoKGUpIHt9aWYoIXhkb21haW4pe3RyeXtyZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoIk1pY3Jvc29mdC5YTUxIVFRQIik7fWNhdGNoKGUpIHt9fX07fSx7Imhhcy1jb3JzIjozMn1dLDI2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cyA9IEVtaXR0ZXI7ZnVuY3Rpb24gRW1pdHRlcihvYmope2lmKG9iailyZXR1cm4gbWl4aW4ob2JqKTt9ZnVuY3Rpb24gbWl4aW4ob2JqKXtmb3IodmFyIGtleSBpbiBFbWl0dGVyLnByb3RvdHlwZSkge29ialtrZXldID0gRW1pdHRlci5wcm90b3R5cGVba2V5XTt9cmV0dXJuIG9iajt9RW1pdHRlci5wcm90b3R5cGUub24gPSBFbWl0dGVyLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gZnVuY3Rpb24oZXZlbnQsZm4pe3RoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTsodGhpcy5fY2FsbGJhY2tzW2V2ZW50XSA9IHRoaXMuX2NhbGxiYWNrc1tldmVudF0gfHwgW10pLnB1c2goZm4pO3JldHVybiB0aGlzO307RW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uKGV2ZW50LGZuKXt2YXIgc2VsZj10aGlzO3RoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCB7fTtmdW5jdGlvbiBvbigpe3NlbGYub2ZmKGV2ZW50LG9uKTtmbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fW9uLmZuID0gZm47dGhpcy5vbihldmVudCxvbik7cmV0dXJuIHRoaXM7fTtFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lciA9IEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUFsbExpc3RlbmVycyA9IEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSBmdW5jdGlvbihldmVudCxmbil7dGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O2lmKDAgPT0gYXJndW1lbnRzLmxlbmd0aCl7dGhpcy5fY2FsbGJhY2tzID0ge307cmV0dXJuIHRoaXM7fXZhciBjYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzW2V2ZW50XTtpZighY2FsbGJhY2tzKXJldHVybiB0aGlzO2lmKDEgPT0gYXJndW1lbnRzLmxlbmd0aCl7ZGVsZXRlIHRoaXMuX2NhbGxiYWNrc1tldmVudF07cmV0dXJuIHRoaXM7fXZhciBjYjtmb3IodmFyIGk9MDtpIDwgY2FsbGJhY2tzLmxlbmd0aDtpKyspIHtjYiA9IGNhbGxiYWNrc1tpXTtpZihjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKXtjYWxsYmFja3Muc3BsaWNlKGksMSk7YnJlYWs7fX1yZXR1cm4gdGhpczt9O0VtaXR0ZXIucHJvdG90eXBlLmVtaXQgPSBmdW5jdGlvbihldmVudCl7dGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O3ZhciBhcmdzPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGNhbGxiYWNrcz10aGlzLl9jYWxsYmFja3NbZXZlbnRdO2lmKGNhbGxiYWNrcyl7Y2FsbGJhY2tzID0gY2FsbGJhY2tzLnNsaWNlKDApO2Zvcih2YXIgaT0wLGxlbj1jYWxsYmFja3MubGVuZ3RoO2kgPCBsZW47KytpKSB7Y2FsbGJhY2tzW2ldLmFwcGx5KHRoaXMsYXJncyk7fX1yZXR1cm4gdGhpczt9O0VtaXR0ZXIucHJvdG90eXBlLmxpc3RlbmVycyA9IGZ1bmN0aW9uKGV2ZW50KXt0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307cmV0dXJuIHRoaXMuX2NhbGxiYWNrc1tldmVudF0gfHwgW107fTtFbWl0dGVyLnByb3RvdHlwZS5oYXNMaXN0ZW5lcnMgPSBmdW5jdGlvbihldmVudCl7cmV0dXJuICEhdGhpcy5saXN0ZW5lcnMoZXZlbnQpLmxlbmd0aDt9O30se31dLDI3OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24oZ2xvYmFsKXt2YXIga2V5cz1fZGVyZXFfKCIuL2tleXMiKTt2YXIgaGFzQmluYXJ5PV9kZXJlcV8oImhhcy1iaW5hcnkiKTt2YXIgc2xpY2VCdWZmZXI9X2RlcmVxXygiYXJyYXlidWZmZXIuc2xpY2UiKTt2YXIgYmFzZTY0ZW5jb2Rlcj1fZGVyZXFfKCJiYXNlNjQtYXJyYXlidWZmZXIiKTt2YXIgYWZ0ZXI9X2RlcmVxXygiYWZ0ZXIiKTt2YXIgdXRmOD1fZGVyZXFfKCJ1dGY4Iik7dmFyIGlzQW5kcm9pZD1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpO3ZhciBpc1BoYW50b21KUz0vUGhhbnRvbUpTL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTt2YXIgZG9udFNlbmRCbG9icz1pc0FuZHJvaWQgfHwgaXNQaGFudG9tSlM7ZXhwb3J0cy5wcm90b2NvbCA9IDM7dmFyIHBhY2tldHM9ZXhwb3J0cy5wYWNrZXRzID0ge29wZW46MCxjbG9zZToxLHBpbmc6Mixwb25nOjMsbWVzc2FnZTo0LHVwZ3JhZGU6NSxub29wOjZ9O3ZhciBwYWNrZXRzbGlzdD1rZXlzKHBhY2tldHMpO3ZhciBlcnI9e3R5cGU6ImVycm9yIixkYXRhOiJwYXJzZXIgZXJyb3IifTt2YXIgQmxvYj1fZGVyZXFfKCJibG9iIik7ZXhwb3J0cy5lbmNvZGVQYWNrZXQgPSBmdW5jdGlvbihwYWNrZXQsc3VwcG9ydHNCaW5hcnksdXRmOGVuY29kZSxjYWxsYmFjayl7aWYoImZ1bmN0aW9uIiA9PSB0eXBlb2Ygc3VwcG9ydHNCaW5hcnkpe2NhbGxiYWNrID0gc3VwcG9ydHNCaW5hcnk7c3VwcG9ydHNCaW5hcnkgPSBmYWxzZTt9aWYoImZ1bmN0aW9uIiA9PSB0eXBlb2YgdXRmOGVuY29kZSl7Y2FsbGJhY2sgPSB1dGY4ZW5jb2RlO3V0ZjhlbmNvZGUgPSBudWxsO312YXIgZGF0YT1wYWNrZXQuZGF0YSA9PT0gdW5kZWZpbmVkP3VuZGVmaW5lZDpwYWNrZXQuZGF0YS5idWZmZXIgfHwgcGFja2V0LmRhdGE7aWYoZ2xvYmFsLkFycmF5QnVmZmVyICYmIGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil7cmV0dXJuIGVuY29kZUFycmF5QnVmZmVyKHBhY2tldCxzdXBwb3J0c0JpbmFyeSxjYWxsYmFjayk7fWVsc2UgaWYoQmxvYiAmJiBkYXRhIGluc3RhbmNlb2YgZ2xvYmFsLkJsb2Ipe3JldHVybiBlbmNvZGVCbG9iKHBhY2tldCxzdXBwb3J0c0JpbmFyeSxjYWxsYmFjayk7fWlmKGRhdGEgJiYgZGF0YS5iYXNlNjQpe3JldHVybiBlbmNvZGVCYXNlNjRPYmplY3QocGFja2V0LGNhbGxiYWNrKTt9dmFyIGVuY29kZWQ9cGFja2V0c1twYWNrZXQudHlwZV07aWYodW5kZWZpbmVkICE9PSBwYWNrZXQuZGF0YSl7ZW5jb2RlZCArPSB1dGY4ZW5jb2RlP3V0ZjguZW5jb2RlKFN0cmluZyhwYWNrZXQuZGF0YSkpOlN0cmluZyhwYWNrZXQuZGF0YSk7fXJldHVybiBjYWxsYmFjaygiIiArIGVuY29kZWQpO307ZnVuY3Rpb24gZW5jb2RlQmFzZTY0T2JqZWN0KHBhY2tldCxjYWxsYmFjayl7dmFyIG1lc3NhZ2U9ImIiICsgZXhwb3J0cy5wYWNrZXRzW3BhY2tldC50eXBlXSArIHBhY2tldC5kYXRhLmRhdGE7cmV0dXJuIGNhbGxiYWNrKG1lc3NhZ2UpO31mdW5jdGlvbiBlbmNvZGVBcnJheUJ1ZmZlcihwYWNrZXQsc3VwcG9ydHNCaW5hcnksY2FsbGJhY2spe2lmKCFzdXBwb3J0c0JpbmFyeSl7cmV0dXJuIGV4cG9ydHMuZW5jb2RlQmFzZTY0UGFja2V0KHBhY2tldCxjYWxsYmFjayk7fXZhciBkYXRhPXBhY2tldC5kYXRhO3ZhciBjb250ZW50QXJyYXk9bmV3IFVpbnQ4QXJyYXkoZGF0YSk7dmFyIHJlc3VsdEJ1ZmZlcj1uZXcgVWludDhBcnJheSgxICsgZGF0YS5ieXRlTGVuZ3RoKTtyZXN1bHRCdWZmZXJbMF0gPSBwYWNrZXRzW3BhY2tldC50eXBlXTtmb3IodmFyIGk9MDtpIDwgY29udGVudEFycmF5Lmxlbmd0aDtpKyspIHtyZXN1bHRCdWZmZXJbaSArIDFdID0gY29udGVudEFycmF5W2ldO31yZXR1cm4gY2FsbGJhY2socmVzdWx0QnVmZmVyLmJ1ZmZlcik7fWZ1bmN0aW9uIGVuY29kZUJsb2JBc0FycmF5QnVmZmVyKHBhY2tldCxzdXBwb3J0c0JpbmFyeSxjYWxsYmFjayl7aWYoIXN1cHBvcnRzQmluYXJ5KXtyZXR1cm4gZXhwb3J0cy5lbmNvZGVCYXNlNjRQYWNrZXQocGFja2V0LGNhbGxiYWNrKTt9dmFyIGZyPW5ldyBGaWxlUmVhZGVyKCk7ZnIub25sb2FkID0gZnVuY3Rpb24oKXtwYWNrZXQuZGF0YSA9IGZyLnJlc3VsdDtleHBvcnRzLmVuY29kZVBhY2tldChwYWNrZXQsc3VwcG9ydHNCaW5hcnksdHJ1ZSxjYWxsYmFjayk7fTtyZXR1cm4gZnIucmVhZEFzQXJyYXlCdWZmZXIocGFja2V0LmRhdGEpO31mdW5jdGlvbiBlbmNvZGVCbG9iKHBhY2tldCxzdXBwb3J0c0JpbmFyeSxjYWxsYmFjayl7aWYoIXN1cHBvcnRzQmluYXJ5KXtyZXR1cm4gZXhwb3J0cy5lbmNvZGVCYXNlNjRQYWNrZXQocGFja2V0LGNhbGxiYWNrKTt9aWYoZG9udFNlbmRCbG9icyl7cmV0dXJuIGVuY29kZUJsb2JBc0FycmF5QnVmZmVyKHBhY2tldCxzdXBwb3J0c0JpbmFyeSxjYWxsYmFjayk7fXZhciBsZW5ndGg9bmV3IFVpbnQ4QXJyYXkoMSk7bGVuZ3RoWzBdID0gcGFja2V0c1twYWNrZXQudHlwZV07dmFyIGJsb2I9bmV3IEJsb2IoW2xlbmd0aC5idWZmZXIscGFja2V0LmRhdGFdKTtyZXR1cm4gY2FsbGJhY2soYmxvYik7fWV4cG9ydHMuZW5jb2RlQmFzZTY0UGFja2V0ID0gZnVuY3Rpb24ocGFja2V0LGNhbGxiYWNrKXt2YXIgbWVzc2FnZT0iYiIgKyBleHBvcnRzLnBhY2tldHNbcGFja2V0LnR5cGVdO2lmKEJsb2IgJiYgcGFja2V0LmRhdGEgaW5zdGFuY2VvZiBnbG9iYWwuQmxvYil7dmFyIGZyPW5ldyBGaWxlUmVhZGVyKCk7ZnIub25sb2FkID0gZnVuY3Rpb24oKXt2YXIgYjY0PWZyLnJlc3VsdC5zcGxpdCgiLCIpWzFdO2NhbGxiYWNrKG1lc3NhZ2UgKyBiNjQpO307cmV0dXJuIGZyLnJlYWRBc0RhdGFVUkwocGFja2V0LmRhdGEpO312YXIgYjY0ZGF0YTt0cnl7YjY0ZGF0YSA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheShwYWNrZXQuZGF0YSkpO31jYXRjaChlKSB7dmFyIHR5cGVkPW5ldyBVaW50OEFycmF5KHBhY2tldC5kYXRhKTt2YXIgYmFzaWM9bmV3IEFycmF5KHR5cGVkLmxlbmd0aCk7Zm9yKHZhciBpPTA7aSA8IHR5cGVkLmxlbmd0aDtpKyspIHtiYXNpY1tpXSA9IHR5cGVkW2ldO31iNjRkYXRhID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGJhc2ljKTt9bWVzc2FnZSArPSBnbG9iYWwuYnRvYShiNjRkYXRhKTtyZXR1cm4gY2FsbGJhY2sobWVzc2FnZSk7fTtleHBvcnRzLmRlY29kZVBhY2tldCA9IGZ1bmN0aW9uKGRhdGEsYmluYXJ5VHlwZSx1dGY4ZGVjb2RlKXtpZih0eXBlb2YgZGF0YSA9PSAic3RyaW5nIiB8fCBkYXRhID09PSB1bmRlZmluZWQpe2lmKGRhdGEuY2hhckF0KDApID09ICJiIil7cmV0dXJuIGV4cG9ydHMuZGVjb2RlQmFzZTY0UGFja2V0KGRhdGEuc3Vic3RyKDEpLGJpbmFyeVR5cGUpO31pZih1dGY4ZGVjb2RlKXt0cnl7ZGF0YSA9IHV0ZjguZGVjb2RlKGRhdGEpO31jYXRjaChlKSB7cmV0dXJuIGVycjt9fXZhciB0eXBlPWRhdGEuY2hhckF0KDApO2lmKE51bWJlcih0eXBlKSAhPSB0eXBlIHx8ICFwYWNrZXRzbGlzdFt0eXBlXSl7cmV0dXJuIGVycjt9aWYoZGF0YS5sZW5ndGggPiAxKXtyZXR1cm4ge3R5cGU6cGFja2V0c2xpc3RbdHlwZV0sZGF0YTpkYXRhLnN1YnN0cmluZygxKX07fWVsc2Uge3JldHVybiB7dHlwZTpwYWNrZXRzbGlzdFt0eXBlXX07fX12YXIgYXNBcnJheT1uZXcgVWludDhBcnJheShkYXRhKTt2YXIgdHlwZT1hc0FycmF5WzBdO3ZhciByZXN0PXNsaWNlQnVmZmVyKGRhdGEsMSk7aWYoQmxvYiAmJiBiaW5hcnlUeXBlID09PSAiYmxvYiIpe3Jlc3QgPSBuZXcgQmxvYihbcmVzdF0pO31yZXR1cm4ge3R5cGU6cGFja2V0c2xpc3RbdHlwZV0sZGF0YTpyZXN0fTt9O2V4cG9ydHMuZGVjb2RlQmFzZTY0UGFja2V0ID0gZnVuY3Rpb24obXNnLGJpbmFyeVR5cGUpe3ZhciB0eXBlPXBhY2tldHNsaXN0W21zZy5jaGFyQXQoMCldO2lmKCFnbG9iYWwuQXJyYXlCdWZmZXIpe3JldHVybiB7dHlwZTp0eXBlLGRhdGE6e2Jhc2U2NDp0cnVlLGRhdGE6bXNnLnN1YnN0cigxKX19O312YXIgZGF0YT1iYXNlNjRlbmNvZGVyLmRlY29kZShtc2cuc3Vic3RyKDEpKTtpZihiaW5hcnlUeXBlID09PSAiYmxvYiIgJiYgQmxvYil7ZGF0YSA9IG5ldyBCbG9iKFtkYXRhXSk7fXJldHVybiB7dHlwZTp0eXBlLGRhdGE6ZGF0YX07fTtleHBvcnRzLmVuY29kZVBheWxvYWQgPSBmdW5jdGlvbihwYWNrZXRzLHN1cHBvcnRzQmluYXJ5LGNhbGxiYWNrKXtpZih0eXBlb2Ygc3VwcG9ydHNCaW5hcnkgPT0gImZ1bmN0aW9uIil7Y2FsbGJhY2sgPSBzdXBwb3J0c0JpbmFyeTtzdXBwb3J0c0JpbmFyeSA9IG51bGw7fXZhciBpc0JpbmFyeT1oYXNCaW5hcnkocGFja2V0cyk7aWYoc3VwcG9ydHNCaW5hcnkgJiYgaXNCaW5hcnkpe2lmKEJsb2IgJiYgIWRvbnRTZW5kQmxvYnMpe3JldHVybiBleHBvcnRzLmVuY29kZVBheWxvYWRBc0Jsb2IocGFja2V0cyxjYWxsYmFjayk7fXJldHVybiBleHBvcnRzLmVuY29kZVBheWxvYWRBc0FycmF5QnVmZmVyKHBhY2tldHMsY2FsbGJhY2spO31pZighcGFja2V0cy5sZW5ndGgpe3JldHVybiBjYWxsYmFjaygiMDoiKTt9ZnVuY3Rpb24gc2V0TGVuZ3RoSGVhZGVyKG1lc3NhZ2Upe3JldHVybiBtZXNzYWdlLmxlbmd0aCArICI6IiArIG1lc3NhZ2U7fWZ1bmN0aW9uIGVuY29kZU9uZShwYWNrZXQsZG9uZUNhbGxiYWNrKXtleHBvcnRzLmVuY29kZVBhY2tldChwYWNrZXQsIWlzQmluYXJ5P2ZhbHNlOnN1cHBvcnRzQmluYXJ5LHRydWUsZnVuY3Rpb24obWVzc2FnZSl7ZG9uZUNhbGxiYWNrKG51bGwsc2V0TGVuZ3RoSGVhZGVyKG1lc3NhZ2UpKTt9KTt9bWFwKHBhY2tldHMsZW5jb2RlT25lLGZ1bmN0aW9uKGVycixyZXN1bHRzKXtyZXR1cm4gY2FsbGJhY2socmVzdWx0cy5qb2luKCIiKSk7fSk7fTtmdW5jdGlvbiBtYXAoYXJ5LGVhY2gsZG9uZSl7dmFyIHJlc3VsdD1uZXcgQXJyYXkoYXJ5Lmxlbmd0aCk7dmFyIG5leHQ9YWZ0ZXIoYXJ5Lmxlbmd0aCxkb25lKTt2YXIgZWFjaFdpdGhJbmRleD1mdW5jdGlvbiBlYWNoV2l0aEluZGV4KGksZWwsY2Ipe2VhY2goZWwsZnVuY3Rpb24oZXJyb3IsbXNnKXtyZXN1bHRbaV0gPSBtc2c7Y2IoZXJyb3IscmVzdWx0KTt9KTt9O2Zvcih2YXIgaT0wO2kgPCBhcnkubGVuZ3RoO2krKykge2VhY2hXaXRoSW5kZXgoaSxhcnlbaV0sbmV4dCk7fX1leHBvcnRzLmRlY29kZVBheWxvYWQgPSBmdW5jdGlvbihkYXRhLGJpbmFyeVR5cGUsY2FsbGJhY2spe2lmKHR5cGVvZiBkYXRhICE9ICJzdHJpbmciKXtyZXR1cm4gZXhwb3J0cy5kZWNvZGVQYXlsb2FkQXNCaW5hcnkoZGF0YSxiaW5hcnlUeXBlLGNhbGxiYWNrKTt9aWYodHlwZW9mIGJpbmFyeVR5cGUgPT09ICJmdW5jdGlvbiIpe2NhbGxiYWNrID0gYmluYXJ5VHlwZTtiaW5hcnlUeXBlID0gbnVsbDt9dmFyIHBhY2tldDtpZihkYXRhID09ICIiKXtyZXR1cm4gY2FsbGJhY2soZXJyLDAsMSk7fXZhciBsZW5ndGg9IiIsbixtc2c7Zm9yKHZhciBpPTAsbD1kYXRhLmxlbmd0aDtpIDwgbDtpKyspIHt2YXIgY2hyPWRhdGEuY2hhckF0KGkpO2lmKCI6IiAhPSBjaHIpe2xlbmd0aCArPSBjaHI7fWVsc2Uge2lmKCIiID09IGxlbmd0aCB8fCBsZW5ndGggIT0gKG4gPSBOdW1iZXIobGVuZ3RoKSkpe3JldHVybiBjYWxsYmFjayhlcnIsMCwxKTt9bXNnID0gZGF0YS5zdWJzdHIoaSArIDEsbik7aWYobGVuZ3RoICE9IG1zZy5sZW5ndGgpe3JldHVybiBjYWxsYmFjayhlcnIsMCwxKTt9aWYobXNnLmxlbmd0aCl7cGFja2V0ID0gZXhwb3J0cy5kZWNvZGVQYWNrZXQobXNnLGJpbmFyeVR5cGUsdHJ1ZSk7aWYoZXJyLnR5cGUgPT0gcGFja2V0LnR5cGUgJiYgZXJyLmRhdGEgPT0gcGFja2V0LmRhdGEpe3JldHVybiBjYWxsYmFjayhlcnIsMCwxKTt9dmFyIHJldD1jYWxsYmFjayhwYWNrZXQsaSArIG4sbCk7aWYoZmFsc2UgPT09IHJldClyZXR1cm47fWkgKz0gbjtsZW5ndGggPSAiIjt9fWlmKGxlbmd0aCAhPSAiIil7cmV0dXJuIGNhbGxiYWNrKGVyciwwLDEpO319O2V4cG9ydHMuZW5jb2RlUGF5bG9hZEFzQXJyYXlCdWZmZXIgPSBmdW5jdGlvbihwYWNrZXRzLGNhbGxiYWNrKXtpZighcGFja2V0cy5sZW5ndGgpe3JldHVybiBjYWxsYmFjayhuZXcgQXJyYXlCdWZmZXIoMCkpO31mdW5jdGlvbiBlbmNvZGVPbmUocGFja2V0LGRvbmVDYWxsYmFjayl7ZXhwb3J0cy5lbmNvZGVQYWNrZXQocGFja2V0LHRydWUsdHJ1ZSxmdW5jdGlvbihkYXRhKXtyZXR1cm4gZG9uZUNhbGxiYWNrKG51bGwsZGF0YSk7fSk7fW1hcChwYWNrZXRzLGVuY29kZU9uZSxmdW5jdGlvbihlcnIsZW5jb2RlZFBhY2tldHMpe3ZhciB0b3RhbExlbmd0aD1lbmNvZGVkUGFja2V0cy5yZWR1Y2UoZnVuY3Rpb24oYWNjLHApe3ZhciBsZW47aWYodHlwZW9mIHAgPT09ICJzdHJpbmciKXtsZW4gPSBwLmxlbmd0aDt9ZWxzZSB7bGVuID0gcC5ieXRlTGVuZ3RoO31yZXR1cm4gYWNjICsgbGVuLnRvU3RyaW5nKCkubGVuZ3RoICsgbGVuICsgMjt9LDApO3ZhciByZXN1bHRBcnJheT1uZXcgVWludDhBcnJheSh0b3RhbExlbmd0aCk7dmFyIGJ1ZmZlckluZGV4PTA7ZW5jb2RlZFBhY2tldHMuZm9yRWFjaChmdW5jdGlvbihwKXt2YXIgaXNTdHJpbmc9dHlwZW9mIHAgPT09ICJzdHJpbmciO3ZhciBhYj1wO2lmKGlzU3RyaW5nKXt2YXIgdmlldz1uZXcgVWludDhBcnJheShwLmxlbmd0aCk7Zm9yKHZhciBpPTA7aSA8IHAubGVuZ3RoO2krKykge3ZpZXdbaV0gPSBwLmNoYXJDb2RlQXQoaSk7fWFiID0gdmlldy5idWZmZXI7fWlmKGlzU3RyaW5nKXtyZXN1bHRBcnJheVtidWZmZXJJbmRleCsrXSA9IDA7fWVsc2Uge3Jlc3VsdEFycmF5W2J1ZmZlckluZGV4KytdID0gMTt9dmFyIGxlblN0cj1hYi5ieXRlTGVuZ3RoLnRvU3RyaW5nKCk7Zm9yKHZhciBpPTA7aSA8IGxlblN0ci5sZW5ndGg7aSsrKSB7cmVzdWx0QXJyYXlbYnVmZmVySW5kZXgrK10gPSBwYXJzZUludChsZW5TdHJbaV0pO31yZXN1bHRBcnJheVtidWZmZXJJbmRleCsrXSA9IDI1NTt2YXIgdmlldz1uZXcgVWludDhBcnJheShhYik7Zm9yKHZhciBpPTA7aSA8IHZpZXcubGVuZ3RoO2krKykge3Jlc3VsdEFycmF5W2J1ZmZlckluZGV4KytdID0gdmlld1tpXTt9fSk7cmV0dXJuIGNhbGxiYWNrKHJlc3VsdEFycmF5LmJ1ZmZlcik7fSk7fTtleHBvcnRzLmVuY29kZVBheWxvYWRBc0Jsb2IgPSBmdW5jdGlvbihwYWNrZXRzLGNhbGxiYWNrKXtmdW5jdGlvbiBlbmNvZGVPbmUocGFja2V0LGRvbmVDYWxsYmFjayl7ZXhwb3J0cy5lbmNvZGVQYWNrZXQocGFja2V0LHRydWUsdHJ1ZSxmdW5jdGlvbihlbmNvZGVkKXt2YXIgYmluYXJ5SWRlbnRpZmllcj1uZXcgVWludDhBcnJheSgxKTtiaW5hcnlJZGVudGlmaWVyWzBdID0gMTtpZih0eXBlb2YgZW5jb2RlZCA9PT0gInN0cmluZyIpe3ZhciB2aWV3PW5ldyBVaW50OEFycmF5KGVuY29kZWQubGVuZ3RoKTtmb3IodmFyIGk9MDtpIDwgZW5jb2RlZC5sZW5ndGg7aSsrKSB7dmlld1tpXSA9IGVuY29kZWQuY2hhckNvZGVBdChpKTt9ZW5jb2RlZCA9IHZpZXcuYnVmZmVyO2JpbmFyeUlkZW50aWZpZXJbMF0gPSAwO312YXIgbGVuPWVuY29kZWQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcj9lbmNvZGVkLmJ5dGVMZW5ndGg6ZW5jb2RlZC5zaXplO3ZhciBsZW5TdHI9bGVuLnRvU3RyaW5nKCk7dmFyIGxlbmd0aEFyeT1uZXcgVWludDhBcnJheShsZW5TdHIubGVuZ3RoICsgMSk7Zm9yKHZhciBpPTA7aSA8IGxlblN0ci5sZW5ndGg7aSsrKSB7bGVuZ3RoQXJ5W2ldID0gcGFyc2VJbnQobGVuU3RyW2ldKTt9bGVuZ3RoQXJ5W2xlblN0ci5sZW5ndGhdID0gMjU1O2lmKEJsb2Ipe3ZhciBibG9iPW5ldyBCbG9iKFtiaW5hcnlJZGVudGlmaWVyLmJ1ZmZlcixsZW5ndGhBcnkuYnVmZmVyLGVuY29kZWRdKTtkb25lQ2FsbGJhY2sobnVsbCxibG9iKTt9fSk7fW1hcChwYWNrZXRzLGVuY29kZU9uZSxmdW5jdGlvbihlcnIscmVzdWx0cyl7cmV0dXJuIGNhbGxiYWNrKG5ldyBCbG9iKHJlc3VsdHMpKTt9KTt9O2V4cG9ydHMuZGVjb2RlUGF5bG9hZEFzQmluYXJ5ID0gZnVuY3Rpb24oZGF0YSxiaW5hcnlUeXBlLGNhbGxiYWNrKXtpZih0eXBlb2YgYmluYXJ5VHlwZSA9PT0gImZ1bmN0aW9uIil7Y2FsbGJhY2sgPSBiaW5hcnlUeXBlO2JpbmFyeVR5cGUgPSBudWxsO312YXIgYnVmZmVyVGFpbD1kYXRhO3ZhciBidWZmZXJzPVtdO3ZhciBudW1iZXJUb29Mb25nPWZhbHNlO3doaWxlKGJ1ZmZlclRhaWwuYnl0ZUxlbmd0aCA+IDApIHt2YXIgdGFpbEFycmF5PW5ldyBVaW50OEFycmF5KGJ1ZmZlclRhaWwpO3ZhciBpc1N0cmluZz10YWlsQXJyYXlbMF0gPT09IDA7dmFyIG1zZ0xlbmd0aD0iIjtmb3IodmFyIGk9MTs7aSsrKSB7aWYodGFpbEFycmF5W2ldID09IDI1NSlicmVhaztpZihtc2dMZW5ndGgubGVuZ3RoID4gMzEwKXtudW1iZXJUb29Mb25nID0gdHJ1ZTticmVhazt9bXNnTGVuZ3RoICs9IHRhaWxBcnJheVtpXTt9aWYobnVtYmVyVG9vTG9uZylyZXR1cm4gY2FsbGJhY2soZXJyLDAsMSk7YnVmZmVyVGFpbCA9IHNsaWNlQnVmZmVyKGJ1ZmZlclRhaWwsMiArIG1zZ0xlbmd0aC5sZW5ndGgpO21zZ0xlbmd0aCA9IHBhcnNlSW50KG1zZ0xlbmd0aCk7dmFyIG1zZz1zbGljZUJ1ZmZlcihidWZmZXJUYWlsLDAsbXNnTGVuZ3RoKTtpZihpc1N0cmluZyl7dHJ5e21zZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxuZXcgVWludDhBcnJheShtc2cpKTt9Y2F0Y2goZSkge3ZhciB0eXBlZD1uZXcgVWludDhBcnJheShtc2cpO21zZyA9ICIiO2Zvcih2YXIgaT0wO2kgPCB0eXBlZC5sZW5ndGg7aSsrKSB7bXNnICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodHlwZWRbaV0pO319fWJ1ZmZlcnMucHVzaChtc2cpO2J1ZmZlclRhaWwgPSBzbGljZUJ1ZmZlcihidWZmZXJUYWlsLG1zZ0xlbmd0aCk7fXZhciB0b3RhbD1idWZmZXJzLmxlbmd0aDtidWZmZXJzLmZvckVhY2goZnVuY3Rpb24oYnVmZmVyLGkpe2NhbGxiYWNrKGV4cG9ydHMuZGVjb2RlUGFja2V0KGJ1ZmZlcixiaW5hcnlUeXBlLHRydWUpLGksdG90YWwpO30pO307fSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIj9nbG9iYWw6e30pO30seyIuL2tleXMiOjI4LGFmdGVyOjYsImFycmF5YnVmZmVyLnNsaWNlIjo3LCJiYXNlNjQtYXJyYXlidWZmZXIiOjksYmxvYjoxMCwiaGFzLWJpbmFyeSI6MjksdXRmODo0NX1dLDI4OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXttb2R1bGUuZXhwb3J0cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIGtleXMob2JqKXt2YXIgYXJyPVtdO3ZhciBoYXM9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmb3IodmFyIGkgaW4gb2JqKSB7aWYoaGFzLmNhbGwob2JqLGkpKXthcnIucHVzaChpKTt9fXJldHVybiBhcnI7fTt9LHt9XSwyOTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7dmFyIGlzQXJyYXk9X2RlcmVxXygiaXNhcnJheSIpO21vZHVsZS5leHBvcnRzID0gaGFzQmluYXJ5O2Z1bmN0aW9uIGhhc0JpbmFyeShkYXRhKXtmdW5jdGlvbiBfaGFzQmluYXJ5KG9iail7aWYoIW9iailyZXR1cm4gZmFsc2U7aWYoZ2xvYmFsLkJ1ZmZlciAmJiBnbG9iYWwuQnVmZmVyLmlzQnVmZmVyKG9iaikgfHwgZ2xvYmFsLkFycmF5QnVmZmVyICYmIG9iaiBpbnN0YW5jZW9mIEFycmF5QnVmZmVyIHx8IGdsb2JhbC5CbG9iICYmIG9iaiBpbnN0YW5jZW9mIEJsb2IgfHwgZ2xvYmFsLkZpbGUgJiYgb2JqIGluc3RhbmNlb2YgRmlsZSl7cmV0dXJuIHRydWU7fWlmKGlzQXJyYXkob2JqKSl7Zm9yKHZhciBpPTA7aSA8IG9iai5sZW5ndGg7aSsrKSB7aWYoX2hhc0JpbmFyeShvYmpbaV0pKXtyZXR1cm4gdHJ1ZTt9fX1lbHNlIGlmKG9iaiAmJiAib2JqZWN0IiA9PSB0eXBlb2Ygb2JqKXtpZihvYmoudG9KU09OKXtvYmogPSBvYmoudG9KU09OKCk7fWZvcih2YXIga2V5IGluIG9iaikge2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosa2V5KSAmJiBfaGFzQmluYXJ5KG9ialtrZXldKSl7cmV0dXJuIHRydWU7fX19cmV0dXJuIGZhbHNlO31yZXR1cm4gX2hhc0JpbmFyeShkYXRhKTt9fSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIj9nbG9iYWw6e30pO30se2lzYXJyYXk6MzR9XSwzMDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24oKXtyZXR1cm4gdGhpczt9KSgpO30se31dLDMxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24oZ2xvYmFsKXt2YXIgaXNBcnJheT1fZGVyZXFfKCJpc2FycmF5Iik7bW9kdWxlLmV4cG9ydHMgPSBoYXNCaW5hcnk7ZnVuY3Rpb24gaGFzQmluYXJ5KGRhdGEpe2Z1bmN0aW9uIF9oYXNCaW5hcnkob2JqKXtpZighb2JqKXJldHVybiBmYWxzZTtpZihnbG9iYWwuQnVmZmVyICYmIGdsb2JhbC5CdWZmZXIuaXNCdWZmZXIgJiYgZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IGdsb2JhbC5BcnJheUJ1ZmZlciAmJiBvYmogaW5zdGFuY2VvZiBBcnJheUJ1ZmZlciB8fCBnbG9iYWwuQmxvYiAmJiBvYmogaW5zdGFuY2VvZiBCbG9iIHx8IGdsb2JhbC5GaWxlICYmIG9iaiBpbnN0YW5jZW9mIEZpbGUpe3JldHVybiB0cnVlO31pZihpc0FycmF5KG9iaikpe2Zvcih2YXIgaT0wO2kgPCBvYmoubGVuZ3RoO2krKykge2lmKF9oYXNCaW5hcnkob2JqW2ldKSl7cmV0dXJuIHRydWU7fX19ZWxzZSBpZihvYmogJiYgIm9iamVjdCIgPT0gdHlwZW9mIG9iail7aWYob2JqLnRvSlNPTiAmJiAiZnVuY3Rpb24iID09IHR5cGVvZiBvYmoudG9KU09OKXtvYmogPSBvYmoudG9KU09OKCk7fWZvcih2YXIga2V5IGluIG9iaikge2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosa2V5KSAmJiBfaGFzQmluYXJ5KG9ialtrZXldKSl7cmV0dXJuIHRydWU7fX19cmV0dXJuIGZhbHNlO31yZXR1cm4gX2hhc0JpbmFyeShkYXRhKTt9fSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIj9nbG9iYWw6e30pO30se2lzYXJyYXk6MzR9XSwzMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7dmFyIGdsb2JhbD1fZGVyZXFfKCJnbG9iYWwiKTt0cnl7bW9kdWxlLmV4cG9ydHMgPSAiWE1MSHR0cFJlcXVlc3QiIGluIGdsb2JhbCAmJiAid2l0aENyZWRlbnRpYWxzIiBpbiBuZXcgZ2xvYmFsLlhNTEh0dHBSZXF1ZXN0KCk7fWNhdGNoKGVycikge21vZHVsZS5leHBvcnRzID0gZmFsc2U7fX0se2dsb2JhbDozMH1dLDMzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXt2YXIgaW5kZXhPZj1bXS5pbmRleE9mO21vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXJyLG9iail7aWYoaW5kZXhPZilyZXR1cm4gYXJyLmluZGV4T2Yob2JqKTtmb3IodmFyIGk9MDtpIDwgYXJyLmxlbmd0aDsrK2kpIHtpZihhcnJbaV0gPT09IG9iailyZXR1cm4gaTt9cmV0dXJuIC0xO307fSx7fV0sMzQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe21vZHVsZS5leHBvcnRzID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbihhcnIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyKSA9PSAiW29iamVjdCBBcnJheV0iO307fSx7fV0sMzU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpeyhmdW5jdGlvbigpe3ZhciBpc0xvYWRlcj10eXBlb2YgZGVmaW5lID09PSAiZnVuY3Rpb24iICYmIGRlZmluZS5hbWQ7dmFyIG9iamVjdFR5cGVzPXsiZnVuY3Rpb24iOnRydWUsb2JqZWN0OnRydWV9O3ZhciBmcmVlRXhwb3J0cz1vYmplY3RUeXBlc1t0eXBlb2YgZXhwb3J0c10gJiYgZXhwb3J0cyAmJiAhZXhwb3J0cy5ub2RlVHlwZSAmJiBleHBvcnRzO3ZhciByb290PW9iamVjdFR5cGVzW3R5cGVvZiB3aW5kb3ddICYmIHdpbmRvdyB8fCB0aGlzLGZyZWVHbG9iYWw9ZnJlZUV4cG9ydHMgJiYgb2JqZWN0VHlwZXNbdHlwZW9mIG1vZHVsZV0gJiYgbW9kdWxlICYmICFtb2R1bGUubm9kZVR5cGUgJiYgdHlwZW9mIGdsb2JhbCA9PSAib2JqZWN0IiAmJiBnbG9iYWw7aWYoZnJlZUdsb2JhbCAmJiAoZnJlZUdsb2JhbFsiZ2xvYmFsIl0gPT09IGZyZWVHbG9iYWwgfHwgZnJlZUdsb2JhbFsid2luZG93Il0gPT09IGZyZWVHbG9iYWwgfHwgZnJlZUdsb2JhbFsic2VsZiJdID09PSBmcmVlR2xvYmFsKSl7cm9vdCA9IGZyZWVHbG9iYWw7fWZ1bmN0aW9uIHJ1bkluQ29udGV4dChjb250ZXh0LGV4cG9ydHMpe2NvbnRleHQgfHwgKGNvbnRleHQgPSByb290WyJPYmplY3QiXSgpKTtleHBvcnRzIHx8IChleHBvcnRzID0gcm9vdFsiT2JqZWN0Il0oKSk7dmFyIE51bWJlcj1jb250ZXh0WyJOdW1iZXIiXSB8fCByb290WyJOdW1iZXIiXSxTdHJpbmc9Y29udGV4dFsiU3RyaW5nIl0gfHwgcm9vdFsiU3RyaW5nIl0sT2JqZWN0PWNvbnRleHRbIk9iamVjdCJdIHx8IHJvb3RbIk9iamVjdCJdLERhdGU9Y29udGV4dFsiRGF0ZSJdIHx8IHJvb3RbIkRhdGUiXSxTeW50YXhFcnJvcj1jb250ZXh0WyJTeW50YXhFcnJvciJdIHx8IHJvb3RbIlN5bnRheEVycm9yIl0sVHlwZUVycm9yPWNvbnRleHRbIlR5cGVFcnJvciJdIHx8IHJvb3RbIlR5cGVFcnJvciJdLE1hdGg9Y29udGV4dFsiTWF0aCJdIHx8IHJvb3RbIk1hdGgiXSxuYXRpdmVKU09OPWNvbnRleHRbIkpTT04iXSB8fCByb290WyJKU09OIl07aWYodHlwZW9mIG5hdGl2ZUpTT04gPT0gIm9iamVjdCIgJiYgbmF0aXZlSlNPTil7ZXhwb3J0cy5zdHJpbmdpZnkgPSBuYXRpdmVKU09OLnN0cmluZ2lmeTtleHBvcnRzLnBhcnNlID0gbmF0aXZlSlNPTi5wYXJzZTt9dmFyIG9iamVjdFByb3RvPU9iamVjdC5wcm90b3R5cGUsZ2V0Q2xhc3M9b2JqZWN0UHJvdG8udG9TdHJpbmcsaXNQcm9wZXJ0eSxmb3JFYWNoLHVuZGVmO3ZhciBpc0V4dGVuZGVkPW5ldyBEYXRlKC0weGM3ODJiNWI4MDBjZWMpO3RyeXtpc0V4dGVuZGVkID0gaXNFeHRlbmRlZC5nZXRVVENGdWxsWWVhcigpID09IC0xMDkyNTIgJiYgaXNFeHRlbmRlZC5nZXRVVENNb250aCgpID09PSAwICYmIGlzRXh0ZW5kZWQuZ2V0VVRDRGF0ZSgpID09PSAxICYmIGlzRXh0ZW5kZWQuZ2V0VVRDSG91cnMoKSA9PSAxMCAmJiBpc0V4dGVuZGVkLmdldFVUQ01pbnV0ZXMoKSA9PSAzNyAmJiBpc0V4dGVuZGVkLmdldFVUQ1NlY29uZHMoKSA9PSA2ICYmIGlzRXh0ZW5kZWQuZ2V0VVRDTWlsbGlzZWNvbmRzKCkgPT0gNzA4O31jYXRjaChleGNlcHRpb24pIHt9ZnVuY3Rpb24gaGFzKG5hbWUpe2lmKGhhc1tuYW1lXSAhPT0gdW5kZWYpe3JldHVybiBoYXNbbmFtZV07fXZhciBpc1N1cHBvcnRlZDtpZihuYW1lID09ICJidWctc3RyaW5nLWNoYXItaW5kZXgiKXtpc1N1cHBvcnRlZCA9ICJhIlswXSAhPSAiYSI7fWVsc2UgaWYobmFtZSA9PSAianNvbiIpe2lzU3VwcG9ydGVkID0gaGFzKCJqc29uLXN0cmluZ2lmeSIpICYmIGhhcygianNvbi1wYXJzZSIpO31lbHNlIHt2YXIgdmFsdWUsc2VyaWFsaXplZD0ie1wiYVwiOlsxLHRydWUsZmFsc2UsbnVsbCxcIlxcdTAwMDBcXGJcXG5cXGZcXHJcXHRcIl19IjtpZihuYW1lID09ICJqc29uLXN0cmluZ2lmeSIpe3ZhciBzdHJpbmdpZnk9ZXhwb3J0cy5zdHJpbmdpZnksc3RyaW5naWZ5U3VwcG9ydGVkPXR5cGVvZiBzdHJpbmdpZnkgPT0gImZ1bmN0aW9uIiAmJiBpc0V4dGVuZGVkO2lmKHN0cmluZ2lmeVN1cHBvcnRlZCl7KHZhbHVlID0gZnVuY3Rpb24oKXtyZXR1cm4gMTt9KS50b0pTT04gPSB2YWx1ZTt0cnl7c3RyaW5naWZ5U3VwcG9ydGVkID0gc3RyaW5naWZ5KDApID09PSAiMCIgJiYgc3RyaW5naWZ5KG5ldyBOdW1iZXIoKSkgPT09ICIwIiAmJiBzdHJpbmdpZnkobmV3IFN0cmluZygpKSA9PSAnIiInICYmIHN0cmluZ2lmeShnZXRDbGFzcykgPT09IHVuZGVmICYmIHN0cmluZ2lmeSh1bmRlZikgPT09IHVuZGVmICYmIHN0cmluZ2lmeSgpID09PSB1bmRlZiAmJiBzdHJpbmdpZnkodmFsdWUpID09PSAiMSIgJiYgc3RyaW5naWZ5KFt2YWx1ZV0pID09ICJbMV0iICYmIHN0cmluZ2lmeShbdW5kZWZdKSA9PSAiW251bGxdIiAmJiBzdHJpbmdpZnkobnVsbCkgPT0gIm51bGwiICYmIHN0cmluZ2lmeShbdW5kZWYsZ2V0Q2xhc3MsbnVsbF0pID09ICJbbnVsbCxudWxsLG51bGxdIiAmJiBzdHJpbmdpZnkoe2E6W3ZhbHVlLHRydWUsZmFsc2UsbnVsbCwiXHgwMFxiXG5cZlxyCSJdfSkgPT0gc2VyaWFsaXplZCAmJiBzdHJpbmdpZnkobnVsbCx2YWx1ZSkgPT09ICIxIiAmJiBzdHJpbmdpZnkoWzEsMl0sbnVsbCwxKSA9PSAiW1xuIDEsXG4gMlxuXSIgJiYgc3RyaW5naWZ5KG5ldyBEYXRlKC04NjRlMTMpKSA9PSAnIi0yNzE4MjEtMDQtMjBUMDA6MDA6MDAuMDAwWiInICYmIHN0cmluZ2lmeShuZXcgRGF0ZSg4NjRlMTMpKSA9PSAnIisyNzU3NjAtMDktMTNUMDA6MDA6MDAuMDAwWiInICYmIHN0cmluZ2lmeShuZXcgRGF0ZSgtNjIxOTg3NTUyZTUpKSA9PSAnIi0wMDAwMDEtMDEtMDFUMDA6MDA6MDAuMDAwWiInICYmIHN0cmluZ2lmeShuZXcgRGF0ZSgtMSkpID09ICciMTk2OS0xMi0zMVQyMzo1OTo1OS45OTlaIic7fWNhdGNoKGV4Y2VwdGlvbikge3N0cmluZ2lmeVN1cHBvcnRlZCA9IGZhbHNlO319aXNTdXBwb3J0ZWQgPSBzdHJpbmdpZnlTdXBwb3J0ZWQ7fWlmKG5hbWUgPT0gImpzb24tcGFyc2UiKXt2YXIgcGFyc2U9ZXhwb3J0cy5wYXJzZTtpZih0eXBlb2YgcGFyc2UgPT0gImZ1bmN0aW9uIil7dHJ5e2lmKHBhcnNlKCIwIikgPT09IDAgJiYgIXBhcnNlKGZhbHNlKSl7dmFsdWUgPSBwYXJzZShzZXJpYWxpemVkKTt2YXIgcGFyc2VTdXBwb3J0ZWQ9dmFsdWVbImEiXS5sZW5ndGggPT0gNSAmJiB2YWx1ZVsiYSJdWzBdID09PSAxO2lmKHBhcnNlU3VwcG9ydGVkKXt0cnl7cGFyc2VTdXBwb3J0ZWQgPSAhcGFyc2UoJyIJIicpO31jYXRjaChleGNlcHRpb24pIHt9aWYocGFyc2VTdXBwb3J0ZWQpe3RyeXtwYXJzZVN1cHBvcnRlZCA9IHBhcnNlKCIwMSIpICE9PSAxO31jYXRjaChleGNlcHRpb24pIHt9fWlmKHBhcnNlU3VwcG9ydGVkKXt0cnl7cGFyc2VTdXBwb3J0ZWQgPSBwYXJzZSgiMS4iKSAhPT0gMTt9Y2F0Y2goZXhjZXB0aW9uKSB7fX19fX1jYXRjaChleGNlcHRpb24pIHtwYXJzZVN1cHBvcnRlZCA9IGZhbHNlO319aXNTdXBwb3J0ZWQgPSBwYXJzZVN1cHBvcnRlZDt9fXJldHVybiBoYXNbbmFtZV0gPSAhIWlzU3VwcG9ydGVkO31pZighaGFzKCJqc29uIikpe3ZhciBmdW5jdGlvbkNsYXNzPSJbb2JqZWN0IEZ1bmN0aW9uXSIsZGF0ZUNsYXNzPSJbb2JqZWN0IERhdGVdIixudW1iZXJDbGFzcz0iW29iamVjdCBOdW1iZXJdIixzdHJpbmdDbGFzcz0iW29iamVjdCBTdHJpbmddIixhcnJheUNsYXNzPSJbb2JqZWN0IEFycmF5XSIsYm9vbGVhbkNsYXNzPSJbb2JqZWN0IEJvb2xlYW5dIjt2YXIgY2hhckluZGV4QnVnZ3k9aGFzKCJidWctc3RyaW5nLWNoYXItaW5kZXgiKTtpZighaXNFeHRlbmRlZCl7dmFyIGZsb29yPU1hdGguZmxvb3I7dmFyIE1vbnRocz1bMCwzMSw1OSw5MCwxMjAsMTUxLDE4MSwyMTIsMjQzLDI3MywzMDQsMzM0XTt2YXIgZ2V0RGF5PWZ1bmN0aW9uIGdldERheSh5ZWFyLG1vbnRoKXtyZXR1cm4gTW9udGhzW21vbnRoXSArIDM2NSAqICh5ZWFyIC0gMTk3MCkgKyBmbG9vcigoeWVhciAtIDE5NjkgKyAobW9udGggPSArKG1vbnRoID4gMSkpKSAvIDQpIC0gZmxvb3IoKHllYXIgLSAxOTAxICsgbW9udGgpIC8gMTAwKSArIGZsb29yKCh5ZWFyIC0gMTYwMSArIG1vbnRoKSAvIDQwMCk7fTt9aWYoIShpc1Byb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHkpKXtpc1Byb3BlcnR5ID0gZnVuY3Rpb24ocHJvcGVydHkpe3ZhciBtZW1iZXJzPXt9LGNvbnN0cnVjdG9yO2lmKChtZW1iZXJzLl9fcHJvdG9fXyA9IG51bGwsbWVtYmVycy5fX3Byb3RvX18gPSB7dG9TdHJpbmc6MX0sbWVtYmVycykudG9TdHJpbmcgIT0gZ2V0Q2xhc3Mpe2lzUHJvcGVydHkgPSBmdW5jdGlvbihwcm9wZXJ0eSl7dmFyIG9yaWdpbmFsPXRoaXMuX19wcm90b19fLHJlc3VsdD0ocHJvcGVydHkgaW4gKHRoaXMuX19wcm90b19fID0gbnVsbCx0aGlzKSk7dGhpcy5fX3Byb3RvX18gPSBvcmlnaW5hbDtyZXR1cm4gcmVzdWx0O307fWVsc2Uge2NvbnN0cnVjdG9yID0gbWVtYmVycy5jb25zdHJ1Y3Rvcjtpc1Byb3BlcnR5ID0gZnVuY3Rpb24ocHJvcGVydHkpe3ZhciBwYXJlbnQ9KHRoaXMuY29uc3RydWN0b3IgfHwgY29uc3RydWN0b3IpLnByb3RvdHlwZTtyZXR1cm4gcHJvcGVydHkgaW4gdGhpcyAmJiAhKHByb3BlcnR5IGluIHBhcmVudCAmJiB0aGlzW3Byb3BlcnR5XSA9PT0gcGFyZW50W3Byb3BlcnR5XSk7fTt9bWVtYmVycyA9IG51bGw7cmV0dXJuIGlzUHJvcGVydHkuY2FsbCh0aGlzLHByb3BlcnR5KTt9O31mb3JFYWNoID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrKXt2YXIgc2l6ZT0wLFByb3BlcnRpZXMsbWVtYmVycyxwcm9wZXJ0eTsoUHJvcGVydGllcyA9IGZ1bmN0aW9uKCl7dGhpcy52YWx1ZU9mID0gMDt9KS5wcm90b3R5cGUudmFsdWVPZiA9IDA7bWVtYmVycyA9IG5ldyBQcm9wZXJ0aWVzKCk7Zm9yKHByb3BlcnR5IGluIG1lbWJlcnMpIHtpZihpc1Byb3BlcnR5LmNhbGwobWVtYmVycyxwcm9wZXJ0eSkpe3NpemUrKzt9fVByb3BlcnRpZXMgPSBtZW1iZXJzID0gbnVsbDtpZighc2l6ZSl7bWVtYmVycyA9IFsidmFsdWVPZiIsInRvU3RyaW5nIiwidG9Mb2NhbGVTdHJpbmciLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImlzUHJvdG90eXBlT2YiLCJoYXNPd25Qcm9wZXJ0eSIsImNvbnN0cnVjdG9yIl07Zm9yRWFjaCA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjayl7dmFyIGlzRnVuY3Rpb249Z2V0Q2xhc3MuY2FsbChvYmplY3QpID09IGZ1bmN0aW9uQ2xhc3MscHJvcGVydHksbGVuZ3RoO3ZhciBoYXNQcm9wZXJ0eT0haXNGdW5jdGlvbiAmJiB0eXBlb2Ygb2JqZWN0LmNvbnN0cnVjdG9yICE9ICJmdW5jdGlvbiIgJiYgb2JqZWN0VHlwZXNbdHlwZW9mIG9iamVjdC5oYXNPd25Qcm9wZXJ0eV0gJiYgb2JqZWN0Lmhhc093blByb3BlcnR5IHx8IGlzUHJvcGVydHk7Zm9yKHByb3BlcnR5IGluIG9iamVjdCkge2lmKCEoaXNGdW5jdGlvbiAmJiBwcm9wZXJ0eSA9PSAicHJvdG90eXBlIikgJiYgaGFzUHJvcGVydHkuY2FsbChvYmplY3QscHJvcGVydHkpKXtjYWxsYmFjayhwcm9wZXJ0eSk7fX1mb3IobGVuZ3RoID0gbWVtYmVycy5sZW5ndGg7cHJvcGVydHkgPSBtZW1iZXJzWy0tbGVuZ3RoXTtoYXNQcm9wZXJ0eS5jYWxsKG9iamVjdCxwcm9wZXJ0eSkgJiYgY2FsbGJhY2socHJvcGVydHkpKTt9O31lbHNlIGlmKHNpemUgPT0gMil7Zm9yRWFjaCA9IGZ1bmN0aW9uKG9iamVjdCxjYWxsYmFjayl7dmFyIG1lbWJlcnM9e30saXNGdW5jdGlvbj1nZXRDbGFzcy5jYWxsKG9iamVjdCkgPT0gZnVuY3Rpb25DbGFzcyxwcm9wZXJ0eTtmb3IocHJvcGVydHkgaW4gb2JqZWN0KSB7aWYoIShpc0Z1bmN0aW9uICYmIHByb3BlcnR5ID09ICJwcm90b3R5cGUiKSAmJiAhaXNQcm9wZXJ0eS5jYWxsKG1lbWJlcnMscHJvcGVydHkpICYmIChtZW1iZXJzW3Byb3BlcnR5XSA9IDEpICYmIGlzUHJvcGVydHkuY2FsbChvYmplY3QscHJvcGVydHkpKXtjYWxsYmFjayhwcm9wZXJ0eSk7fX19O31lbHNlIHtmb3JFYWNoID0gZnVuY3Rpb24ob2JqZWN0LGNhbGxiYWNrKXt2YXIgaXNGdW5jdGlvbj1nZXRDbGFzcy5jYWxsKG9iamVjdCkgPT0gZnVuY3Rpb25DbGFzcyxwcm9wZXJ0eSxpc0NvbnN0cnVjdG9yO2Zvcihwcm9wZXJ0eSBpbiBvYmplY3QpIHtpZighKGlzRnVuY3Rpb24gJiYgcHJvcGVydHkgPT0gInByb3RvdHlwZSIpICYmIGlzUHJvcGVydHkuY2FsbChvYmplY3QscHJvcGVydHkpICYmICEoaXNDb25zdHJ1Y3RvciA9IHByb3BlcnR5ID09PSAiY29uc3RydWN0b3IiKSl7Y2FsbGJhY2socHJvcGVydHkpO319aWYoaXNDb25zdHJ1Y3RvciB8fCBpc1Byb3BlcnR5LmNhbGwob2JqZWN0LHByb3BlcnR5ID0gImNvbnN0cnVjdG9yIikpe2NhbGxiYWNrKHByb3BlcnR5KTt9fTt9cmV0dXJuIGZvckVhY2gob2JqZWN0LGNhbGxiYWNrKTt9O2lmKCFoYXMoImpzb24tc3RyaW5naWZ5Iikpe3ZhciBFc2NhcGVzPXs5MjoiXFxcXCIsMzQ6J1xcIicsODoiXFxiIiwxMjoiXFxmIiwxMDoiXFxuIiwxMzoiXFxyIiw5OiJcXHQifTt2YXIgbGVhZGluZ1plcm9lcz0iMDAwMDAwIjt2YXIgdG9QYWRkZWRTdHJpbmc9ZnVuY3Rpb24gdG9QYWRkZWRTdHJpbmcod2lkdGgsdmFsdWUpe3JldHVybiAobGVhZGluZ1plcm9lcyArICh2YWx1ZSB8fCAwKSkuc2xpY2UoLXdpZHRoKTt9O3ZhciB1bmljb2RlUHJlZml4PSJcXHUwMCI7dmFyIHF1b3RlPWZ1bmN0aW9uIHF1b3RlKHZhbHVlKXt2YXIgcmVzdWx0PSciJyxpbmRleD0wLGxlbmd0aD12YWx1ZS5sZW5ndGgsdXNlQ2hhckluZGV4PSFjaGFySW5kZXhCdWdneSB8fCBsZW5ndGggPiAxMDt2YXIgc3ltYm9scz11c2VDaGFySW5kZXggJiYgKGNoYXJJbmRleEJ1Z2d5P3ZhbHVlLnNwbGl0KCIiKTp2YWx1ZSk7Zm9yKDtpbmRleCA8IGxlbmd0aDtpbmRleCsrKSB7dmFyIGNoYXJDb2RlPXZhbHVlLmNoYXJDb2RlQXQoaW5kZXgpO3N3aXRjaChjaGFyQ29kZSl7Y2FzZSA4OmNhc2UgOTpjYXNlIDEwOmNhc2UgMTI6Y2FzZSAxMzpjYXNlIDM0OmNhc2UgOTI6cmVzdWx0ICs9IEVzY2FwZXNbY2hhckNvZGVdO2JyZWFrO2RlZmF1bHQ6aWYoY2hhckNvZGUgPCAzMil7cmVzdWx0ICs9IHVuaWNvZGVQcmVmaXggKyB0b1BhZGRlZFN0cmluZygyLGNoYXJDb2RlLnRvU3RyaW5nKDE2KSk7YnJlYWs7fXJlc3VsdCArPSB1c2VDaGFySW5kZXg/c3ltYm9sc1tpbmRleF06dmFsdWUuY2hhckF0KGluZGV4KTt9fXJldHVybiByZXN1bHQgKyAnIic7fTt2YXIgc2VyaWFsaXplPWZ1bmN0aW9uIHNlcmlhbGl6ZShwcm9wZXJ0eSxvYmplY3QsY2FsbGJhY2sscHJvcGVydGllcyx3aGl0ZXNwYWNlLGluZGVudGF0aW9uLHN0YWNrKXt2YXIgdmFsdWUsY2xhc3NOYW1lLHllYXIsbW9udGgsZGF0ZSx0aW1lLGhvdXJzLG1pbnV0ZXMsc2Vjb25kcyxtaWxsaXNlY29uZHMscmVzdWx0cyxlbGVtZW50LGluZGV4LGxlbmd0aCxwcmVmaXgscmVzdWx0O3RyeXt2YWx1ZSA9IG9iamVjdFtwcm9wZXJ0eV07fWNhdGNoKGV4Y2VwdGlvbikge31pZih0eXBlb2YgdmFsdWUgPT0gIm9iamVjdCIgJiYgdmFsdWUpe2NsYXNzTmFtZSA9IGdldENsYXNzLmNhbGwodmFsdWUpO2lmKGNsYXNzTmFtZSA9PSBkYXRlQ2xhc3MgJiYgIWlzUHJvcGVydHkuY2FsbCh2YWx1ZSwidG9KU09OIikpe2lmKHZhbHVlID4gLTEgLyAwICYmIHZhbHVlIDwgMSAvIDApe2lmKGdldERheSl7ZGF0ZSA9IGZsb29yKHZhbHVlIC8gODY0ZTUpO2Zvcih5ZWFyID0gZmxvb3IoZGF0ZSAvIDM2NS4yNDI1KSArIDE5NzAgLSAxO2dldERheSh5ZWFyICsgMSwwKSA8PSBkYXRlO3llYXIrKyk7Zm9yKG1vbnRoID0gZmxvb3IoKGRhdGUgLSBnZXREYXkoeWVhciwwKSkgLyAzMC40Mik7Z2V0RGF5KHllYXIsbW9udGggKyAxKSA8PSBkYXRlO21vbnRoKyspO2RhdGUgPSAxICsgZGF0ZSAtIGdldERheSh5ZWFyLG1vbnRoKTt0aW1lID0gKHZhbHVlICUgODY0ZTUgKyA4NjRlNSkgJSA4NjRlNTtob3VycyA9IGZsb29yKHRpbWUgLyAzNmU1KSAlIDI0O21pbnV0ZXMgPSBmbG9vcih0aW1lIC8gNmU0KSAlIDYwO3NlY29uZHMgPSBmbG9vcih0aW1lIC8gMWUzKSAlIDYwO21pbGxpc2Vjb25kcyA9IHRpbWUgJSAxZTM7fWVsc2Uge3llYXIgPSB2YWx1ZS5nZXRVVENGdWxsWWVhcigpO21vbnRoID0gdmFsdWUuZ2V0VVRDTW9udGgoKTtkYXRlID0gdmFsdWUuZ2V0VVRDRGF0ZSgpO2hvdXJzID0gdmFsdWUuZ2V0VVRDSG91cnMoKTttaW51dGVzID0gdmFsdWUuZ2V0VVRDTWludXRlcygpO3NlY29uZHMgPSB2YWx1ZS5nZXRVVENTZWNvbmRzKCk7bWlsbGlzZWNvbmRzID0gdmFsdWUuZ2V0VVRDTWlsbGlzZWNvbmRzKCk7fXZhbHVlID0gKHllYXIgPD0gMCB8fCB5ZWFyID49IDFlND8oeWVhciA8IDA/Ii0iOiIrIikgKyB0b1BhZGRlZFN0cmluZyg2LHllYXIgPCAwPy15ZWFyOnllYXIpOnRvUGFkZGVkU3RyaW5nKDQseWVhcikpICsgIi0iICsgdG9QYWRkZWRTdHJpbmcoMixtb250aCArIDEpICsgIi0iICsgdG9QYWRkZWRTdHJpbmcoMixkYXRlKSArICJUIiArIHRvUGFkZGVkU3RyaW5nKDIsaG91cnMpICsgIjoiICsgdG9QYWRkZWRTdHJpbmcoMixtaW51dGVzKSArICI6IiArIHRvUGFkZGVkU3RyaW5nKDIsc2Vjb25kcykgKyAiLiIgKyB0b1BhZGRlZFN0cmluZygzLG1pbGxpc2Vjb25kcykgKyAiWiI7fWVsc2Uge3ZhbHVlID0gbnVsbDt9fWVsc2UgaWYodHlwZW9mIHZhbHVlLnRvSlNPTiA9PSAiZnVuY3Rpb24iICYmIChjbGFzc05hbWUgIT0gbnVtYmVyQ2xhc3MgJiYgY2xhc3NOYW1lICE9IHN0cmluZ0NsYXNzICYmIGNsYXNzTmFtZSAhPSBhcnJheUNsYXNzIHx8IGlzUHJvcGVydHkuY2FsbCh2YWx1ZSwidG9KU09OIikpKXt2YWx1ZSA9IHZhbHVlLnRvSlNPTihwcm9wZXJ0eSk7fX1pZihjYWxsYmFjayl7dmFsdWUgPSBjYWxsYmFjay5jYWxsKG9iamVjdCxwcm9wZXJ0eSx2YWx1ZSk7fWlmKHZhbHVlID09PSBudWxsKXtyZXR1cm4gIm51bGwiO31jbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHZhbHVlKTtpZihjbGFzc05hbWUgPT0gYm9vbGVhbkNsYXNzKXtyZXR1cm4gIiIgKyB2YWx1ZTt9ZWxzZSBpZihjbGFzc05hbWUgPT0gbnVtYmVyQ2xhc3Mpe3JldHVybiB2YWx1ZSA+IC0xIC8gMCAmJiB2YWx1ZSA8IDEgLyAwPyIiICsgdmFsdWU6Im51bGwiO31lbHNlIGlmKGNsYXNzTmFtZSA9PSBzdHJpbmdDbGFzcyl7cmV0dXJuIHF1b3RlKCIiICsgdmFsdWUpO31pZih0eXBlb2YgdmFsdWUgPT0gIm9iamVjdCIpe2ZvcihsZW5ndGggPSBzdGFjay5sZW5ndGg7bGVuZ3RoLS07KSB7aWYoc3RhY2tbbGVuZ3RoXSA9PT0gdmFsdWUpe3Rocm93IFR5cGVFcnJvcigpO319c3RhY2sucHVzaCh2YWx1ZSk7cmVzdWx0cyA9IFtdO3ByZWZpeCA9IGluZGVudGF0aW9uO2luZGVudGF0aW9uICs9IHdoaXRlc3BhY2U7aWYoY2xhc3NOYW1lID09IGFycmF5Q2xhc3Mpe2ZvcihpbmRleCA9IDAsbGVuZ3RoID0gdmFsdWUubGVuZ3RoO2luZGV4IDwgbGVuZ3RoO2luZGV4KyspIHtlbGVtZW50ID0gc2VyaWFsaXplKGluZGV4LHZhbHVlLGNhbGxiYWNrLHByb3BlcnRpZXMsd2hpdGVzcGFjZSxpbmRlbnRhdGlvbixzdGFjayk7cmVzdWx0cy5wdXNoKGVsZW1lbnQgPT09IHVuZGVmPyJudWxsIjplbGVtZW50KTt9cmVzdWx0ID0gcmVzdWx0cy5sZW5ndGg/d2hpdGVzcGFjZT8iW1xuIiArIGluZGVudGF0aW9uICsgcmVzdWx0cy5qb2luKCIsXG4iICsgaW5kZW50YXRpb24pICsgIlxuIiArIHByZWZpeCArICJdIjoiWyIgKyByZXN1bHRzLmpvaW4oIiwiKSArICJdIjoiW10iO31lbHNlIHtmb3JFYWNoKHByb3BlcnRpZXMgfHwgdmFsdWUsZnVuY3Rpb24ocHJvcGVydHkpe3ZhciBlbGVtZW50PXNlcmlhbGl6ZShwcm9wZXJ0eSx2YWx1ZSxjYWxsYmFjayxwcm9wZXJ0aWVzLHdoaXRlc3BhY2UsaW5kZW50YXRpb24sc3RhY2spO2lmKGVsZW1lbnQgIT09IHVuZGVmKXtyZXN1bHRzLnB1c2gocXVvdGUocHJvcGVydHkpICsgIjoiICsgKHdoaXRlc3BhY2U/IiAiOiIiKSArIGVsZW1lbnQpO319KTtyZXN1bHQgPSByZXN1bHRzLmxlbmd0aD93aGl0ZXNwYWNlPyJ7XG4iICsgaW5kZW50YXRpb24gKyByZXN1bHRzLmpvaW4oIixcbiIgKyBpbmRlbnRhdGlvbikgKyAiXG4iICsgcHJlZml4ICsgIn0iOiJ7IiArIHJlc3VsdHMuam9pbigiLCIpICsgIn0iOiJ7fSI7fXN0YWNrLnBvcCgpO3JldHVybiByZXN1bHQ7fX07ZXhwb3J0cy5zdHJpbmdpZnkgPSBmdW5jdGlvbihzb3VyY2UsZmlsdGVyLHdpZHRoKXt2YXIgd2hpdGVzcGFjZSxjYWxsYmFjayxwcm9wZXJ0aWVzLGNsYXNzTmFtZTtpZihvYmplY3RUeXBlc1t0eXBlb2YgZmlsdGVyXSAmJiBmaWx0ZXIpe2lmKChjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKGZpbHRlcikpID09IGZ1bmN0aW9uQ2xhc3Mpe2NhbGxiYWNrID0gZmlsdGVyO31lbHNlIGlmKGNsYXNzTmFtZSA9PSBhcnJheUNsYXNzKXtwcm9wZXJ0aWVzID0ge307Zm9yKHZhciBpbmRleD0wLGxlbmd0aD1maWx0ZXIubGVuZ3RoLHZhbHVlO2luZGV4IDwgbGVuZ3RoO3ZhbHVlID0gZmlsdGVyW2luZGV4KytdLChjbGFzc05hbWUgPSBnZXRDbGFzcy5jYWxsKHZhbHVlKSxjbGFzc05hbWUgPT0gc3RyaW5nQ2xhc3MgfHwgY2xhc3NOYW1lID09IG51bWJlckNsYXNzKSAmJiAocHJvcGVydGllc1t2YWx1ZV0gPSAxKSk7fX1pZih3aWR0aCl7aWYoKGNsYXNzTmFtZSA9IGdldENsYXNzLmNhbGwod2lkdGgpKSA9PSBudW1iZXJDbGFzcyl7aWYoKHdpZHRoIC09IHdpZHRoICUgMSkgPiAwKXtmb3Iod2hpdGVzcGFjZSA9ICIiLHdpZHRoID4gMTAgJiYgKHdpZHRoID0gMTApO3doaXRlc3BhY2UubGVuZ3RoIDwgd2lkdGg7d2hpdGVzcGFjZSArPSAiICIpO319ZWxzZSBpZihjbGFzc05hbWUgPT0gc3RyaW5nQ2xhc3Mpe3doaXRlc3BhY2UgPSB3aWR0aC5sZW5ndGggPD0gMTA/d2lkdGg6d2lkdGguc2xpY2UoMCwxMCk7fX1yZXR1cm4gc2VyaWFsaXplKCIiLCh2YWx1ZSA9IHt9LHZhbHVlWyIiXSA9IHNvdXJjZSx2YWx1ZSksY2FsbGJhY2sscHJvcGVydGllcyx3aGl0ZXNwYWNlLCIiLFtdKTt9O31pZighaGFzKCJqc29uLXBhcnNlIikpe3ZhciBmcm9tQ2hhckNvZGU9U3RyaW5nLmZyb21DaGFyQ29kZTt2YXIgVW5lc2NhcGVzPXs5MjoiXFwiLDM0OiciJyw0NzoiLyIsOTg6IlxiIiwxMTY6IgkiLDExMDoiXG4iLDEwMjoiXGYiLDExNDoiXHIifTt2YXIgSW5kZXgsU291cmNlO3ZhciBhYm9ydD1mdW5jdGlvbiBhYm9ydCgpe0luZGV4ID0gU291cmNlID0gbnVsbDt0aHJvdyBTeW50YXhFcnJvcigpO307dmFyIGxleD1mdW5jdGlvbiBsZXgoKXt2YXIgc291cmNlPVNvdXJjZSxsZW5ndGg9c291cmNlLmxlbmd0aCx2YWx1ZSxiZWdpbixwb3NpdGlvbixpc1NpZ25lZCxjaGFyQ29kZTt3aGlsZShJbmRleCA8IGxlbmd0aCkge2NoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpO3N3aXRjaChjaGFyQ29kZSl7Y2FzZSA5OmNhc2UgMTA6Y2FzZSAxMzpjYXNlIDMyOkluZGV4Kys7YnJlYWs7Y2FzZSAxMjM6Y2FzZSAxMjU6Y2FzZSA5MTpjYXNlIDkzOmNhc2UgNTg6Y2FzZSA0NDp2YWx1ZSA9IGNoYXJJbmRleEJ1Z2d5P3NvdXJjZS5jaGFyQXQoSW5kZXgpOnNvdXJjZVtJbmRleF07SW5kZXgrKztyZXR1cm4gdmFsdWU7Y2FzZSAzNDpmb3IodmFsdWUgPSAiQCIsSW5kZXgrKztJbmRleCA8IGxlbmd0aDspIHtjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtpZihjaGFyQ29kZSA8IDMyKXthYm9ydCgpO31lbHNlIGlmKGNoYXJDb2RlID09IDkyKXtjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KCsrSW5kZXgpO3N3aXRjaChjaGFyQ29kZSl7Y2FzZSA5MjpjYXNlIDM0OmNhc2UgNDc6Y2FzZSA5ODpjYXNlIDExNjpjYXNlIDExMDpjYXNlIDEwMjpjYXNlIDExNDp2YWx1ZSArPSBVbmVzY2FwZXNbY2hhckNvZGVdO0luZGV4Kys7YnJlYWs7Y2FzZSAxMTc6YmVnaW4gPSArK0luZGV4O2Zvcihwb3NpdGlvbiA9IEluZGV4ICsgNDtJbmRleCA8IHBvc2l0aW9uO0luZGV4KyspIHtjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtpZighKGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3IHx8IGNoYXJDb2RlID49IDk3ICYmIGNoYXJDb2RlIDw9IDEwMiB8fCBjaGFyQ29kZSA+PSA2NSAmJiBjaGFyQ29kZSA8PSA3MCkpe2Fib3J0KCk7fX12YWx1ZSArPSBmcm9tQ2hhckNvZGUoIjB4IiArIHNvdXJjZS5zbGljZShiZWdpbixJbmRleCkpO2JyZWFrO2RlZmF1bHQ6YWJvcnQoKTt9fWVsc2Uge2lmKGNoYXJDb2RlID09IDM0KXticmVhazt9Y2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCk7YmVnaW4gPSBJbmRleDt3aGlsZShjaGFyQ29kZSA+PSAzMiAmJiBjaGFyQ29kZSAhPSA5MiAmJiBjaGFyQ29kZSAhPSAzNCkge2NoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoKytJbmRleCk7fXZhbHVlICs9IHNvdXJjZS5zbGljZShiZWdpbixJbmRleCk7fX1pZihzb3VyY2UuY2hhckNvZGVBdChJbmRleCkgPT0gMzQpe0luZGV4Kys7cmV0dXJuIHZhbHVlO31hYm9ydCgpO2RlZmF1bHQ6YmVnaW4gPSBJbmRleDtpZihjaGFyQ29kZSA9PSA0NSl7aXNTaWduZWQgPSB0cnVlO2NoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoKytJbmRleCk7fWlmKGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KXtpZihjaGFyQ29kZSA9PSA0OCAmJiAoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChJbmRleCArIDEpLGNoYXJDb2RlID49IDQ4ICYmIGNoYXJDb2RlIDw9IDU3KSl7YWJvcnQoKTt9aXNTaWduZWQgPSBmYWxzZTtmb3IoO0luZGV4IDwgbGVuZ3RoICYmIChjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KSxjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nyk7SW5kZXgrKyk7aWYoc291cmNlLmNoYXJDb2RlQXQoSW5kZXgpID09IDQ2KXtwb3NpdGlvbiA9ICsrSW5kZXg7Zm9yKDtwb3NpdGlvbiA8IGxlbmd0aCAmJiAoY2hhckNvZGUgPSBzb3VyY2UuY2hhckNvZGVBdChwb3NpdGlvbiksY2hhckNvZGUgPj0gNDggJiYgY2hhckNvZGUgPD0gNTcpO3Bvc2l0aW9uKyspO2lmKHBvc2l0aW9uID09IEluZGV4KXthYm9ydCgpO31JbmRleCA9IHBvc2l0aW9uO31jaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KEluZGV4KTtpZihjaGFyQ29kZSA9PSAxMDEgfHwgY2hhckNvZGUgPT0gNjkpe2NoYXJDb2RlID0gc291cmNlLmNoYXJDb2RlQXQoKytJbmRleCk7aWYoY2hhckNvZGUgPT0gNDMgfHwgY2hhckNvZGUgPT0gNDUpe0luZGV4Kys7fWZvcihwb3NpdGlvbiA9IEluZGV4O3Bvc2l0aW9uIDwgbGVuZ3RoICYmIChjaGFyQ29kZSA9IHNvdXJjZS5jaGFyQ29kZUF0KHBvc2l0aW9uKSxjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nyk7cG9zaXRpb24rKyk7aWYocG9zaXRpb24gPT0gSW5kZXgpe2Fib3J0KCk7fUluZGV4ID0gcG9zaXRpb247fXJldHVybiArc291cmNlLnNsaWNlKGJlZ2luLEluZGV4KTt9aWYoaXNTaWduZWQpe2Fib3J0KCk7fWlmKHNvdXJjZS5zbGljZShJbmRleCxJbmRleCArIDQpID09ICJ0cnVlIil7SW5kZXggKz0gNDtyZXR1cm4gdHJ1ZTt9ZWxzZSBpZihzb3VyY2Uuc2xpY2UoSW5kZXgsSW5kZXggKyA1KSA9PSAiZmFsc2UiKXtJbmRleCArPSA1O3JldHVybiBmYWxzZTt9ZWxzZSBpZihzb3VyY2Uuc2xpY2UoSW5kZXgsSW5kZXggKyA0KSA9PSAibnVsbCIpe0luZGV4ICs9IDQ7cmV0dXJuIG51bGw7fWFib3J0KCk7fX1yZXR1cm4gIiQiO307dmFyIGdldD1mdW5jdGlvbiBnZXQodmFsdWUpe3ZhciByZXN1bHRzLGhhc01lbWJlcnM7aWYodmFsdWUgPT0gIiQiKXthYm9ydCgpO31pZih0eXBlb2YgdmFsdWUgPT0gInN0cmluZyIpe2lmKChjaGFySW5kZXhCdWdneT92YWx1ZS5jaGFyQXQoMCk6dmFsdWVbMF0pID09ICJAIil7cmV0dXJuIHZhbHVlLnNsaWNlKDEpO31pZih2YWx1ZSA9PSAiWyIpe3Jlc3VsdHMgPSBbXTtmb3IoOztoYXNNZW1iZXJzIHx8IChoYXNNZW1iZXJzID0gdHJ1ZSkpIHt2YWx1ZSA9IGxleCgpO2lmKHZhbHVlID09ICJdIil7YnJlYWs7fWlmKGhhc01lbWJlcnMpe2lmKHZhbHVlID09ICIsIil7dmFsdWUgPSBsZXgoKTtpZih2YWx1ZSA9PSAiXSIpe2Fib3J0KCk7fX1lbHNlIHthYm9ydCgpO319aWYodmFsdWUgPT0gIiwiKXthYm9ydCgpO31yZXN1bHRzLnB1c2goZ2V0KHZhbHVlKSk7fXJldHVybiByZXN1bHRzO31lbHNlIGlmKHZhbHVlID09ICJ7Iil7cmVzdWx0cyA9IHt9O2Zvcig7O2hhc01lbWJlcnMgfHwgKGhhc01lbWJlcnMgPSB0cnVlKSkge3ZhbHVlID0gbGV4KCk7aWYodmFsdWUgPT0gIn0iKXticmVhazt9aWYoaGFzTWVtYmVycyl7aWYodmFsdWUgPT0gIiwiKXt2YWx1ZSA9IGxleCgpO2lmKHZhbHVlID09ICJ9Iil7YWJvcnQoKTt9fWVsc2Uge2Fib3J0KCk7fX1pZih2YWx1ZSA9PSAiLCIgfHwgdHlwZW9mIHZhbHVlICE9ICJzdHJpbmciIHx8IChjaGFySW5kZXhCdWdneT92YWx1ZS5jaGFyQXQoMCk6dmFsdWVbMF0pICE9ICJAIiB8fCBsZXgoKSAhPSAiOiIpe2Fib3J0KCk7fXJlc3VsdHNbdmFsdWUuc2xpY2UoMSldID0gZ2V0KGxleCgpKTt9cmV0dXJuIHJlc3VsdHM7fWFib3J0KCk7fXJldHVybiB2YWx1ZTt9O3ZhciB1cGRhdGU9ZnVuY3Rpb24gdXBkYXRlKHNvdXJjZSxwcm9wZXJ0eSxjYWxsYmFjayl7dmFyIGVsZW1lbnQ9d2Fsayhzb3VyY2UscHJvcGVydHksY2FsbGJhY2spO2lmKGVsZW1lbnQgPT09IHVuZGVmKXtkZWxldGUgc291cmNlW3Byb3BlcnR5XTt9ZWxzZSB7c291cmNlW3Byb3BlcnR5XSA9IGVsZW1lbnQ7fX07dmFyIHdhbGs9ZnVuY3Rpb24gd2Fsayhzb3VyY2UscHJvcGVydHksY2FsbGJhY2spe3ZhciB2YWx1ZT1zb3VyY2VbcHJvcGVydHldLGxlbmd0aDtpZih0eXBlb2YgdmFsdWUgPT0gIm9iamVjdCIgJiYgdmFsdWUpe2lmKGdldENsYXNzLmNhbGwodmFsdWUpID09IGFycmF5Q2xhc3Mpe2ZvcihsZW5ndGggPSB2YWx1ZS5sZW5ndGg7bGVuZ3RoLS07KSB7dXBkYXRlKHZhbHVlLGxlbmd0aCxjYWxsYmFjayk7fX1lbHNlIHtmb3JFYWNoKHZhbHVlLGZ1bmN0aW9uKHByb3BlcnR5KXt1cGRhdGUodmFsdWUscHJvcGVydHksY2FsbGJhY2spO30pO319cmV0dXJuIGNhbGxiYWNrLmNhbGwoc291cmNlLHByb3BlcnR5LHZhbHVlKTt9O2V4cG9ydHMucGFyc2UgPSBmdW5jdGlvbihzb3VyY2UsY2FsbGJhY2spe3ZhciByZXN1bHQsdmFsdWU7SW5kZXggPSAwO1NvdXJjZSA9ICIiICsgc291cmNlO3Jlc3VsdCA9IGdldChsZXgoKSk7aWYobGV4KCkgIT0gIiQiKXthYm9ydCgpO31JbmRleCA9IFNvdXJjZSA9IG51bGw7cmV0dXJuIGNhbGxiYWNrICYmIGdldENsYXNzLmNhbGwoY2FsbGJhY2spID09IGZ1bmN0aW9uQ2xhc3M/d2FsaygodmFsdWUgPSB7fSx2YWx1ZVsiIl0gPSByZXN1bHQsdmFsdWUpLCIiLGNhbGxiYWNrKTpyZXN1bHQ7fTt9fWV4cG9ydHNbInJ1bkluQ29udGV4dCJdID0gcnVuSW5Db250ZXh0O3JldHVybiBleHBvcnRzO31pZihmcmVlRXhwb3J0cyAmJiAhaXNMb2FkZXIpe3J1bkluQ29udGV4dChyb290LGZyZWVFeHBvcnRzKTt9ZWxzZSB7dmFyIG5hdGl2ZUpTT049cm9vdC5KU09OLHByZXZpb3VzSlNPTj1yb290WyJKU09OMyJdLGlzUmVzdG9yZWQ9ZmFsc2U7dmFyIEpTT04zPXJ1bkluQ29udGV4dChyb290LHJvb3RbIkpTT04zIl0gPSB7bm9Db25mbGljdDpmdW5jdGlvbiBub0NvbmZsaWN0KCl7aWYoIWlzUmVzdG9yZWQpe2lzUmVzdG9yZWQgPSB0cnVlO3Jvb3QuSlNPTiA9IG5hdGl2ZUpTT047cm9vdFsiSlNPTjMiXSA9IHByZXZpb3VzSlNPTjtuYXRpdmVKU09OID0gcHJldmlvdXNKU09OID0gbnVsbDt9cmV0dXJuIEpTT04zO319KTtyb290LkpTT04gPSB7cGFyc2U6SlNPTjMucGFyc2Usc3RyaW5naWZ5OkpTT04zLnN0cmluZ2lmeX07fWlmKGlzTG9hZGVyKXtkZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gSlNPTjM7fSk7fX0pLmNhbGwodGhpcyk7fSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIj9nbG9iYWw6e30pO30se31dLDM2OltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXt2YXIgcz0xZTM7dmFyIG09cyAqIDYwO3ZhciBoPW0gKiA2MDt2YXIgZD1oICogMjQ7dmFyIHk9ZCAqIDM2NS4yNTttb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHZhbCxvcHRpb25zKXtvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtpZigic3RyaW5nIiA9PSB0eXBlb2YgdmFsKXJldHVybiBwYXJzZSh2YWwpO3JldHVybiBvcHRpb25zLmxvbmc/bG9uZyh2YWwpOnNob3J0KHZhbCk7fTtmdW5jdGlvbiBwYXJzZShzdHIpe3N0ciA9ICIiICsgc3RyO2lmKHN0ci5sZW5ndGggPiAxZTQpcmV0dXJuO3ZhciBtYXRjaD0vXigoPzpcZCspP1wuP1xkKykgKihtaWxsaXNlY29uZHM/fG1zZWNzP3xtc3xzZWNvbmRzP3xzZWNzP3xzfG1pbnV0ZXM/fG1pbnM/fG18aG91cnM/fGhycz98aHxkYXlzP3xkfHllYXJzP3x5cnM/fHkpPyQvaS5leGVjKHN0cik7aWYoIW1hdGNoKXJldHVybjt2YXIgbj1wYXJzZUZsb2F0KG1hdGNoWzFdKTt2YXIgdHlwZT0obWF0Y2hbMl0gfHwgIm1zIikudG9Mb3dlckNhc2UoKTtzd2l0Y2godHlwZSl7Y2FzZSAieWVhcnMiOmNhc2UgInllYXIiOmNhc2UgInlycyI6Y2FzZSAieXIiOmNhc2UgInkiOnJldHVybiBuICogeTtjYXNlICJkYXlzIjpjYXNlICJkYXkiOmNhc2UgImQiOnJldHVybiBuICogZDtjYXNlICJob3VycyI6Y2FzZSAiaG91ciI6Y2FzZSAiaHJzIjpjYXNlICJociI6Y2FzZSAiaCI6cmV0dXJuIG4gKiBoO2Nhc2UgIm1pbnV0ZXMiOmNhc2UgIm1pbnV0ZSI6Y2FzZSAibWlucyI6Y2FzZSAibWluIjpjYXNlICJtIjpyZXR1cm4gbiAqIG07Y2FzZSAic2Vjb25kcyI6Y2FzZSAic2Vjb25kIjpjYXNlICJzZWNzIjpjYXNlICJzZWMiOmNhc2UgInMiOnJldHVybiBuICogcztjYXNlICJtaWxsaXNlY29uZHMiOmNhc2UgIm1pbGxpc2Vjb25kIjpjYXNlICJtc2VjcyI6Y2FzZSAibXNlYyI6Y2FzZSAibXMiOnJldHVybiBuO319ZnVuY3Rpb24gc2hvcnQobXMpe2lmKG1zID49IGQpcmV0dXJuIE1hdGgucm91bmQobXMgLyBkKSArICJkIjtpZihtcyA+PSBoKXJldHVybiBNYXRoLnJvdW5kKG1zIC8gaCkgKyAiaCI7aWYobXMgPj0gbSlyZXR1cm4gTWF0aC5yb3VuZChtcyAvIG0pICsgIm0iO2lmKG1zID49IHMpcmV0dXJuIE1hdGgucm91bmQobXMgLyBzKSArICJzIjtyZXR1cm4gbXMgKyAibXMiO31mdW5jdGlvbiBsb25nKG1zKXtyZXR1cm4gcGx1cmFsKG1zLGQsImRheSIpIHx8IHBsdXJhbChtcyxoLCJob3VyIikgfHwgcGx1cmFsKG1zLG0sIm1pbnV0ZSIpIHx8IHBsdXJhbChtcyxzLCJzZWNvbmQiKSB8fCBtcyArICIgbXMiO31mdW5jdGlvbiBwbHVyYWwobXMsbixuYW1lKXtpZihtcyA8IG4pcmV0dXJuO2lmKG1zIDwgbiAqIDEuNSlyZXR1cm4gTWF0aC5mbG9vcihtcyAvIG4pICsgIiAiICsgbmFtZTtyZXR1cm4gTWF0aC5jZWlsKG1zIC8gbikgKyAiICIgKyBuYW1lICsgInMiO319LHt9XSwzNzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7KGZ1bmN0aW9uKGdsb2JhbCl7dmFyIHJ2YWxpZGNoYXJzPS9eW1xdLDp7fVxzXSokLzt2YXIgcnZhbGlkZXNjYXBlPS9cXCg/OlsiXFxcL2JmbnJ0XXx1WzAtOWEtZkEtRl17NH0pL2c7dmFyIHJ2YWxpZHRva2Vucz0vIlteIlxcXG5ccl0qInx0cnVlfGZhbHNlfG51bGx8LT9cZCsoPzpcLlxkKik/KD86W2VFXVsrXC1dP1xkKyk/L2c7dmFyIHJ2YWxpZGJyYWNlcz0vKD86Xnw6fCwpKD86XHMqXFspKy9nO3ZhciBydHJpbUxlZnQ9L15ccysvO3ZhciBydHJpbVJpZ2h0PS9ccyskLzttb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNlanNvbihkYXRhKXtpZigic3RyaW5nIiAhPSB0eXBlb2YgZGF0YSB8fCAhZGF0YSl7cmV0dXJuIG51bGw7fWRhdGEgPSBkYXRhLnJlcGxhY2UocnRyaW1MZWZ0LCIiKS5yZXBsYWNlKHJ0cmltUmlnaHQsIiIpO2lmKGdsb2JhbC5KU09OICYmIEpTT04ucGFyc2Upe3JldHVybiBKU09OLnBhcnNlKGRhdGEpO31pZihydmFsaWRjaGFycy50ZXN0KGRhdGEucmVwbGFjZShydmFsaWRlc2NhcGUsIkAiKS5yZXBsYWNlKHJ2YWxpZHRva2VucywiXSIpLnJlcGxhY2UocnZhbGlkYnJhY2VzLCIiKSkpe3JldHVybiBuZXcgRnVuY3Rpb24oInJldHVybiAiICsgZGF0YSkoKTt9fTt9KS5jYWxsKHRoaXMsdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiP3NlbGY6dHlwZW9mIHdpbmRvdyAhPT0gInVuZGVmaW5lZCI/d2luZG93OnR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiP2dsb2JhbDp7fSk7fSx7fV0sMzg6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe2V4cG9ydHMuZW5jb2RlID0gZnVuY3Rpb24ob2JqKXt2YXIgc3RyPSIiO2Zvcih2YXIgaSBpbiBvYmopIHtpZihvYmouaGFzT3duUHJvcGVydHkoaSkpe2lmKHN0ci5sZW5ndGgpc3RyICs9ICImIjtzdHIgKz0gZW5jb2RlVVJJQ29tcG9uZW50KGkpICsgIj0iICsgZW5jb2RlVVJJQ29tcG9uZW50KG9ialtpXSk7fX1yZXR1cm4gc3RyO307ZXhwb3J0cy5kZWNvZGUgPSBmdW5jdGlvbihxcyl7dmFyIHFyeT17fTt2YXIgcGFpcnM9cXMuc3BsaXQoIiYiKTtmb3IodmFyIGk9MCxsPXBhaXJzLmxlbmd0aDtpIDwgbDtpKyspIHt2YXIgcGFpcj1wYWlyc1tpXS5zcGxpdCgiPSIpO3FyeVtkZWNvZGVVUklDb21wb25lbnQocGFpclswXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pO31yZXR1cm4gcXJ5O307fSx7fV0sMzk6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe3ZhciByZT0vXig/Oig/IVteOkBdKzpbXjpAXC9dKkApKGh0dHB8aHR0cHN8d3N8d3NzKTpcL1wvKT8oKD86KChbXjpAXSopKD86OihbXjpAXSopKT8pP0ApPygoPzpbYS1mMC05XXswLDR9Oil7Miw3fVthLWYwLTldezAsNH18W146XC8/I10qKSg/OjooXGQqKSk/KSgoKFwvKD86W14/I10oPyFbXj8jXC9dKlwuW14/I1wvLl0rKD86Wz8jXXwkKSkpKlwvPyk/KFtePyNcL10qKSkoPzpcPyhbXiNdKikpPyg/OiMoLiopKT8pLzt2YXIgcGFydHM9WyJzb3VyY2UiLCJwcm90b2NvbCIsImF1dGhvcml0eSIsInVzZXJJbmZvIiwidXNlciIsInBhc3N3b3JkIiwiaG9zdCIsInBvcnQiLCJyZWxhdGl2ZSIsInBhdGgiLCJkaXJlY3RvcnkiLCJmaWxlIiwicXVlcnkiLCJhbmNob3IiXTttb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNldXJpKHN0cil7dmFyIHNyYz1zdHIsYj1zdHIuaW5kZXhPZigiWyIpLGU9c3RyLmluZGV4T2YoIl0iKTtpZihiICE9IC0xICYmIGUgIT0gLTEpe3N0ciA9IHN0ci5zdWJzdHJpbmcoMCxiKSArIHN0ci5zdWJzdHJpbmcoYixlKS5yZXBsYWNlKC86L2csIjsiKSArIHN0ci5zdWJzdHJpbmcoZSxzdHIubGVuZ3RoKTt9dmFyIG09cmUuZXhlYyhzdHIgfHwgIiIpLHVyaT17fSxpPTE0O3doaWxlKGktLSkge3VyaVtwYXJ0c1tpXV0gPSBtW2ldIHx8ICIiO31pZihiICE9IC0xICYmIGUgIT0gLTEpe3VyaS5zb3VyY2UgPSBzcmM7dXJpLmhvc3QgPSB1cmkuaG9zdC5zdWJzdHJpbmcoMSx1cmkuaG9zdC5sZW5ndGggLSAxKS5yZXBsYWNlKC87L2csIjoiKTt1cmkuYXV0aG9yaXR5ID0gdXJpLmF1dGhvcml0eS5yZXBsYWNlKCJbIiwiIikucmVwbGFjZSgiXSIsIiIpLnJlcGxhY2UoLzsvZywiOiIpO3VyaS5pcHY2dXJpID0gdHJ1ZTt9cmV0dXJuIHVyaTt9O30se31dLDQwOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24oZ2xvYmFsKXt2YXIgaXNBcnJheT1fZGVyZXFfKCJpc2FycmF5Iik7dmFyIGlzQnVmPV9kZXJlcV8oIi4vaXMtYnVmZmVyIik7ZXhwb3J0cy5kZWNvbnN0cnVjdFBhY2tldCA9IGZ1bmN0aW9uKHBhY2tldCl7dmFyIGJ1ZmZlcnM9W107dmFyIHBhY2tldERhdGE9cGFja2V0LmRhdGE7ZnVuY3Rpb24gX2RlY29uc3RydWN0UGFja2V0KGRhdGEpe2lmKCFkYXRhKXJldHVybiBkYXRhO2lmKGlzQnVmKGRhdGEpKXt2YXIgcGxhY2Vob2xkZXI9e19wbGFjZWhvbGRlcjp0cnVlLG51bTpidWZmZXJzLmxlbmd0aH07YnVmZmVycy5wdXNoKGRhdGEpO3JldHVybiBwbGFjZWhvbGRlcjt9ZWxzZSBpZihpc0FycmF5KGRhdGEpKXt2YXIgbmV3RGF0YT1uZXcgQXJyYXkoZGF0YS5sZW5ndGgpO2Zvcih2YXIgaT0wO2kgPCBkYXRhLmxlbmd0aDtpKyspIHtuZXdEYXRhW2ldID0gX2RlY29uc3RydWN0UGFja2V0KGRhdGFbaV0pO31yZXR1cm4gbmV3RGF0YTt9ZWxzZSBpZigib2JqZWN0IiA9PSB0eXBlb2YgZGF0YSAmJiAhKGRhdGEgaW5zdGFuY2VvZiBEYXRlKSl7dmFyIG5ld0RhdGE9e307Zm9yKHZhciBrZXkgaW4gZGF0YSkge25ld0RhdGFba2V5XSA9IF9kZWNvbnN0cnVjdFBhY2tldChkYXRhW2tleV0pO31yZXR1cm4gbmV3RGF0YTt9cmV0dXJuIGRhdGE7fXZhciBwYWNrPXBhY2tldDtwYWNrLmRhdGEgPSBfZGVjb25zdHJ1Y3RQYWNrZXQocGFja2V0RGF0YSk7cGFjay5hdHRhY2htZW50cyA9IGJ1ZmZlcnMubGVuZ3RoO3JldHVybiB7cGFja2V0OnBhY2ssYnVmZmVyczpidWZmZXJzfTt9O2V4cG9ydHMucmVjb25zdHJ1Y3RQYWNrZXQgPSBmdW5jdGlvbihwYWNrZXQsYnVmZmVycyl7dmFyIGN1clBsYWNlSG9sZGVyPTA7ZnVuY3Rpb24gX3JlY29uc3RydWN0UGFja2V0KGRhdGEpe2lmKGRhdGEgJiYgZGF0YS5fcGxhY2Vob2xkZXIpe3ZhciBidWY9YnVmZmVyc1tkYXRhLm51bV07cmV0dXJuIGJ1Zjt9ZWxzZSBpZihpc0FycmF5KGRhdGEpKXtmb3IodmFyIGk9MDtpIDwgZGF0YS5sZW5ndGg7aSsrKSB7ZGF0YVtpXSA9IF9yZWNvbnN0cnVjdFBhY2tldChkYXRhW2ldKTt9cmV0dXJuIGRhdGE7fWVsc2UgaWYoZGF0YSAmJiAib2JqZWN0IiA9PSB0eXBlb2YgZGF0YSl7Zm9yKHZhciBrZXkgaW4gZGF0YSkge2RhdGFba2V5XSA9IF9yZWNvbnN0cnVjdFBhY2tldChkYXRhW2tleV0pO31yZXR1cm4gZGF0YTt9cmV0dXJuIGRhdGE7fXBhY2tldC5kYXRhID0gX3JlY29uc3RydWN0UGFja2V0KHBhY2tldC5kYXRhKTtwYWNrZXQuYXR0YWNobWVudHMgPSB1bmRlZmluZWQ7cmV0dXJuIHBhY2tldDt9O2V4cG9ydHMucmVtb3ZlQmxvYnMgPSBmdW5jdGlvbihkYXRhLGNhbGxiYWNrKXtmdW5jdGlvbiBfcmVtb3ZlQmxvYnMob2JqLGN1cktleSxjb250YWluaW5nT2JqZWN0KXtpZighb2JqKXJldHVybiBvYmo7aWYoZ2xvYmFsLkJsb2IgJiYgb2JqIGluc3RhbmNlb2YgQmxvYiB8fCBnbG9iYWwuRmlsZSAmJiBvYmogaW5zdGFuY2VvZiBGaWxlKXtwZW5kaW5nQmxvYnMrKzt2YXIgZmlsZVJlYWRlcj1uZXcgRmlsZVJlYWRlcigpO2ZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKXtpZihjb250YWluaW5nT2JqZWN0KXtjb250YWluaW5nT2JqZWN0W2N1cktleV0gPSB0aGlzLnJlc3VsdDt9ZWxzZSB7YmxvYmxlc3NEYXRhID0gdGhpcy5yZXN1bHQ7fWlmKCEgLS1wZW5kaW5nQmxvYnMpe2NhbGxiYWNrKGJsb2JsZXNzRGF0YSk7fX07ZmlsZVJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihvYmopO31lbHNlIGlmKGlzQXJyYXkob2JqKSl7Zm9yKHZhciBpPTA7aSA8IG9iai5sZW5ndGg7aSsrKSB7X3JlbW92ZUJsb2JzKG9ialtpXSxpLG9iaik7fX1lbHNlIGlmKG9iaiAmJiAib2JqZWN0IiA9PSB0eXBlb2Ygb2JqICYmICFpc0J1ZihvYmopKXtmb3IodmFyIGtleSBpbiBvYmopIHtfcmVtb3ZlQmxvYnMob2JqW2tleV0sa2V5LG9iaik7fX19dmFyIHBlbmRpbmdCbG9icz0wO3ZhciBibG9ibGVzc0RhdGE9ZGF0YTtfcmVtb3ZlQmxvYnMoYmxvYmxlc3NEYXRhKTtpZighcGVuZGluZ0Jsb2JzKXtjYWxsYmFjayhibG9ibGVzc0RhdGEpO319O30pLmNhbGwodGhpcyx0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIj93aW5kb3c6dHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCI/Z2xvYmFsOnt9KTt9LHsiLi9pcy1idWZmZXIiOjQyLGlzYXJyYXk6MzR9XSw0MTpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7dmFyIGRlYnVnPV9kZXJlcV8oImRlYnVnIikoInNvY2tldC5pby1wYXJzZXIiKTt2YXIganNvbj1fZGVyZXFfKCJqc29uMyIpO3ZhciBpc0FycmF5PV9kZXJlcV8oImlzYXJyYXkiKTt2YXIgRW1pdHRlcj1fZGVyZXFfKCJjb21wb25lbnQtZW1pdHRlciIpO3ZhciBiaW5hcnk9X2RlcmVxXygiLi9iaW5hcnkiKTt2YXIgaXNCdWY9X2RlcmVxXygiLi9pcy1idWZmZXIiKTtleHBvcnRzLnByb3RvY29sID0gNDtleHBvcnRzLnR5cGVzID0gWyJDT05ORUNUIiwiRElTQ09OTkVDVCIsIkVWRU5UIiwiQklOQVJZX0VWRU5UIiwiQUNLIiwiQklOQVJZX0FDSyIsIkVSUk9SIl07ZXhwb3J0cy5DT05ORUNUID0gMDtleHBvcnRzLkRJU0NPTk5FQ1QgPSAxO2V4cG9ydHMuRVZFTlQgPSAyO2V4cG9ydHMuQUNLID0gMztleHBvcnRzLkVSUk9SID0gNDtleHBvcnRzLkJJTkFSWV9FVkVOVCA9IDU7ZXhwb3J0cy5CSU5BUllfQUNLID0gNjtleHBvcnRzLkVuY29kZXIgPSBFbmNvZGVyO2V4cG9ydHMuRGVjb2RlciA9IERlY29kZXI7ZnVuY3Rpb24gRW5jb2Rlcigpe31FbmNvZGVyLnByb3RvdHlwZS5lbmNvZGUgPSBmdW5jdGlvbihvYmosY2FsbGJhY2spe2RlYnVnKCJlbmNvZGluZyBwYWNrZXQgJWoiLG9iaik7aWYoZXhwb3J0cy5CSU5BUllfRVZFTlQgPT0gb2JqLnR5cGUgfHwgZXhwb3J0cy5CSU5BUllfQUNLID09IG9iai50eXBlKXtlbmNvZGVBc0JpbmFyeShvYmosY2FsbGJhY2spO31lbHNlIHt2YXIgZW5jb2Rpbmc9ZW5jb2RlQXNTdHJpbmcob2JqKTtjYWxsYmFjayhbZW5jb2RpbmddKTt9fTtmdW5jdGlvbiBlbmNvZGVBc1N0cmluZyhvYmope3ZhciBzdHI9IiI7dmFyIG5zcD1mYWxzZTtzdHIgKz0gb2JqLnR5cGU7aWYoZXhwb3J0cy5CSU5BUllfRVZFTlQgPT0gb2JqLnR5cGUgfHwgZXhwb3J0cy5CSU5BUllfQUNLID09IG9iai50eXBlKXtzdHIgKz0gb2JqLmF0dGFjaG1lbnRzO3N0ciArPSAiLSI7fWlmKG9iai5uc3AgJiYgIi8iICE9IG9iai5uc3Ape25zcCA9IHRydWU7c3RyICs9IG9iai5uc3A7fWlmKG51bGwgIT0gb2JqLmlkKXtpZihuc3Ape3N0ciArPSAiLCI7bnNwID0gZmFsc2U7fXN0ciArPSBvYmouaWQ7fWlmKG51bGwgIT0gb2JqLmRhdGEpe2lmKG5zcClzdHIgKz0gIiwiO3N0ciArPSBqc29uLnN0cmluZ2lmeShvYmouZGF0YSk7fWRlYnVnKCJlbmNvZGVkICVqIGFzICVzIixvYmosc3RyKTtyZXR1cm4gc3RyO31mdW5jdGlvbiBlbmNvZGVBc0JpbmFyeShvYmosY2FsbGJhY2spe2Z1bmN0aW9uIHdyaXRlRW5jb2RpbmcoYmxvYmxlc3NEYXRhKXt2YXIgZGVjb25zdHJ1Y3Rpb249YmluYXJ5LmRlY29uc3RydWN0UGFja2V0KGJsb2JsZXNzRGF0YSk7dmFyIHBhY2s9ZW5jb2RlQXNTdHJpbmcoZGVjb25zdHJ1Y3Rpb24ucGFja2V0KTt2YXIgYnVmZmVycz1kZWNvbnN0cnVjdGlvbi5idWZmZXJzO2J1ZmZlcnMudW5zaGlmdChwYWNrKTtjYWxsYmFjayhidWZmZXJzKTt9YmluYXJ5LnJlbW92ZUJsb2JzKG9iaix3cml0ZUVuY29kaW5nKTt9ZnVuY3Rpb24gRGVjb2Rlcigpe3RoaXMucmVjb25zdHJ1Y3RvciA9IG51bGw7fUVtaXR0ZXIoRGVjb2Rlci5wcm90b3R5cGUpO0RlY29kZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKG9iail7dmFyIHBhY2tldDtpZigic3RyaW5nIiA9PSB0eXBlb2Ygb2JqKXtwYWNrZXQgPSBkZWNvZGVTdHJpbmcob2JqKTtpZihleHBvcnRzLkJJTkFSWV9FVkVOVCA9PSBwYWNrZXQudHlwZSB8fCBleHBvcnRzLkJJTkFSWV9BQ0sgPT0gcGFja2V0LnR5cGUpe3RoaXMucmVjb25zdHJ1Y3RvciA9IG5ldyBCaW5hcnlSZWNvbnN0cnVjdG9yKHBhY2tldCk7aWYodGhpcy5yZWNvbnN0cnVjdG9yLnJlY29uUGFjay5hdHRhY2htZW50cyA9PT0gMCl7dGhpcy5lbWl0KCJkZWNvZGVkIixwYWNrZXQpO319ZWxzZSB7dGhpcy5lbWl0KCJkZWNvZGVkIixwYWNrZXQpO319ZWxzZSBpZihpc0J1ZihvYmopIHx8IG9iai5iYXNlNjQpe2lmKCF0aGlzLnJlY29uc3RydWN0b3Ipe3Rocm93IG5ldyBFcnJvcigiZ290IGJpbmFyeSBkYXRhIHdoZW4gbm90IHJlY29uc3RydWN0aW5nIGEgcGFja2V0Iik7fWVsc2Uge3BhY2tldCA9IHRoaXMucmVjb25zdHJ1Y3Rvci50YWtlQmluYXJ5RGF0YShvYmopO2lmKHBhY2tldCl7dGhpcy5yZWNvbnN0cnVjdG9yID0gbnVsbDt0aGlzLmVtaXQoImRlY29kZWQiLHBhY2tldCk7fX19ZWxzZSB7dGhyb3cgbmV3IEVycm9yKCJVbmtub3duIHR5cGU6ICIgKyBvYmopO319O2Z1bmN0aW9uIGRlY29kZVN0cmluZyhzdHIpe3ZhciBwPXt9O3ZhciBpPTA7cC50eXBlID0gTnVtYmVyKHN0ci5jaGFyQXQoMCkpO2lmKG51bGwgPT0gZXhwb3J0cy50eXBlc1twLnR5cGVdKXJldHVybiBlcnJvcigpO2lmKGV4cG9ydHMuQklOQVJZX0VWRU5UID09IHAudHlwZSB8fCBleHBvcnRzLkJJTkFSWV9BQ0sgPT0gcC50eXBlKXt2YXIgYnVmPSIiO3doaWxlKHN0ci5jaGFyQXQoKytpKSAhPSAiLSIpIHtidWYgKz0gc3RyLmNoYXJBdChpKTtpZihpID09IHN0ci5sZW5ndGgpYnJlYWs7fWlmKGJ1ZiAhPSBOdW1iZXIoYnVmKSB8fCBzdHIuY2hhckF0KGkpICE9ICItIil7dGhyb3cgbmV3IEVycm9yKCJJbGxlZ2FsIGF0dGFjaG1lbnRzIik7fXAuYXR0YWNobWVudHMgPSBOdW1iZXIoYnVmKTt9aWYoIi8iID09IHN0ci5jaGFyQXQoaSArIDEpKXtwLm5zcCA9ICIiO3doaWxlKCsraSkge3ZhciBjPXN0ci5jaGFyQXQoaSk7aWYoIiwiID09IGMpYnJlYWs7cC5uc3AgKz0gYztpZihpID09IHN0ci5sZW5ndGgpYnJlYWs7fX1lbHNlIHtwLm5zcCA9ICIvIjt9dmFyIG5leHQ9c3RyLmNoYXJBdChpICsgMSk7aWYoIiIgIT09IG5leHQgJiYgTnVtYmVyKG5leHQpID09IG5leHQpe3AuaWQgPSAiIjt3aGlsZSgrK2kpIHt2YXIgYz1zdHIuY2hhckF0KGkpO2lmKG51bGwgPT0gYyB8fCBOdW1iZXIoYykgIT0gYyl7LS1pO2JyZWFrO31wLmlkICs9IHN0ci5jaGFyQXQoaSk7aWYoaSA9PSBzdHIubGVuZ3RoKWJyZWFrO31wLmlkID0gTnVtYmVyKHAuaWQpO31pZihzdHIuY2hhckF0KCsraSkpe3RyeXtwLmRhdGEgPSBqc29uLnBhcnNlKHN0ci5zdWJzdHIoaSkpO31jYXRjaChlKSB7cmV0dXJuIGVycm9yKCk7fX1kZWJ1ZygiZGVjb2RlZCAlcyBhcyAlaiIsc3RyLHApO3JldHVybiBwO31EZWNvZGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKXtpZih0aGlzLnJlY29uc3RydWN0b3Ipe3RoaXMucmVjb25zdHJ1Y3Rvci5maW5pc2hlZFJlY29uc3RydWN0aW9uKCk7fX07ZnVuY3Rpb24gQmluYXJ5UmVjb25zdHJ1Y3RvcihwYWNrZXQpe3RoaXMucmVjb25QYWNrID0gcGFja2V0O3RoaXMuYnVmZmVycyA9IFtdO31CaW5hcnlSZWNvbnN0cnVjdG9yLnByb3RvdHlwZS50YWtlQmluYXJ5RGF0YSA9IGZ1bmN0aW9uKGJpbkRhdGEpe3RoaXMuYnVmZmVycy5wdXNoKGJpbkRhdGEpO2lmKHRoaXMuYnVmZmVycy5sZW5ndGggPT0gdGhpcy5yZWNvblBhY2suYXR0YWNobWVudHMpe3ZhciBwYWNrZXQ9YmluYXJ5LnJlY29uc3RydWN0UGFja2V0KHRoaXMucmVjb25QYWNrLHRoaXMuYnVmZmVycyk7dGhpcy5maW5pc2hlZFJlY29uc3RydWN0aW9uKCk7cmV0dXJuIHBhY2tldDt9cmV0dXJuIG51bGw7fTtCaW5hcnlSZWNvbnN0cnVjdG9yLnByb3RvdHlwZS5maW5pc2hlZFJlY29uc3RydWN0aW9uID0gZnVuY3Rpb24oKXt0aGlzLnJlY29uUGFjayA9IG51bGw7dGhpcy5idWZmZXJzID0gW107fTtmdW5jdGlvbiBlcnJvcihkYXRhKXtyZXR1cm4ge3R5cGU6ZXhwb3J0cy5FUlJPUixkYXRhOiJwYXJzZXIgZXJyb3IifTt9fSx7Ii4vYmluYXJ5Ijo0MCwiLi9pcy1idWZmZXIiOjQyLCJjb21wb25lbnQtZW1pdHRlciI6NDMsZGVidWc6MTQsaXNhcnJheTozNCxqc29uMzozNX1dLDQyOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXsoZnVuY3Rpb24oZ2xvYmFsKXttb2R1bGUuZXhwb3J0cyA9IGlzQnVmO2Z1bmN0aW9uIGlzQnVmKG9iail7cmV0dXJuIGdsb2JhbC5CdWZmZXIgJiYgZ2xvYmFsLkJ1ZmZlci5pc0J1ZmZlcihvYmopIHx8IGdsb2JhbC5BcnJheUJ1ZmZlciAmJiBvYmogaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcjt9fSkuY2FsbCh0aGlzLHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIj9zZWxmOnR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiP3dpbmRvdzp0eXBlb2YgZ2xvYmFsICE9PSAidW5kZWZpbmVkIj9nbG9iYWw6e30pO30se31dLDQzOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXthcmd1bWVudHNbNF1bMjZdWzBdLmFwcGx5KGV4cG9ydHMsYXJndW1lbnRzKTt9LHtkdXA6MjZ9XSw0NDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7bW9kdWxlLmV4cG9ydHMgPSB0b0FycmF5O2Z1bmN0aW9uIHRvQXJyYXkobGlzdCxpbmRleCl7dmFyIGFycmF5PVtdO2luZGV4ID0gaW5kZXggfHwgMDtmb3IodmFyIGk9aW5kZXggfHwgMDtpIDwgbGlzdC5sZW5ndGg7aSsrKSB7YXJyYXlbaSAtIGluZGV4XSA9IGxpc3RbaV07fXJldHVybiBhcnJheTt9fSx7fV0sNDU6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpeyhmdW5jdGlvbihnbG9iYWwpeyhmdW5jdGlvbihyb290KXt2YXIgZnJlZUV4cG9ydHM9dHlwZW9mIGV4cG9ydHMgPT0gIm9iamVjdCIgJiYgZXhwb3J0czt2YXIgZnJlZU1vZHVsZT10eXBlb2YgbW9kdWxlID09ICJvYmplY3QiICYmIG1vZHVsZSAmJiBtb2R1bGUuZXhwb3J0cyA9PSBmcmVlRXhwb3J0cyAmJiBtb2R1bGU7dmFyIGZyZWVHbG9iYWw9dHlwZW9mIGdsb2JhbCA9PSAib2JqZWN0IiAmJiBnbG9iYWw7aWYoZnJlZUdsb2JhbC5nbG9iYWwgPT09IGZyZWVHbG9iYWwgfHwgZnJlZUdsb2JhbC53aW5kb3cgPT09IGZyZWVHbG9iYWwpe3Jvb3QgPSBmcmVlR2xvYmFsO312YXIgc3RyaW5nRnJvbUNoYXJDb2RlPVN0cmluZy5mcm9tQ2hhckNvZGU7ZnVuY3Rpb24gdWNzMmRlY29kZShzdHJpbmcpe3ZhciBvdXRwdXQ9W107dmFyIGNvdW50ZXI9MDt2YXIgbGVuZ3RoPXN0cmluZy5sZW5ndGg7dmFyIHZhbHVlO3ZhciBleHRyYTt3aGlsZShjb3VudGVyIDwgbGVuZ3RoKSB7dmFsdWUgPSBzdHJpbmcuY2hhckNvZGVBdChjb3VudGVyKyspO2lmKHZhbHVlID49IDU1Mjk2ICYmIHZhbHVlIDw9IDU2MzE5ICYmIGNvdW50ZXIgPCBsZW5ndGgpe2V4dHJhID0gc3RyaW5nLmNoYXJDb2RlQXQoY291bnRlcisrKTtpZigoZXh0cmEgJiA2NDUxMikgPT0gNTYzMjApe291dHB1dC5wdXNoKCgodmFsdWUgJiAxMDIzKSA8PCAxMCkgKyAoZXh0cmEgJiAxMDIzKSArIDY1NTM2KTt9ZWxzZSB7b3V0cHV0LnB1c2godmFsdWUpO2NvdW50ZXItLTt9fWVsc2Uge291dHB1dC5wdXNoKHZhbHVlKTt9fXJldHVybiBvdXRwdXQ7fWZ1bmN0aW9uIHVjczJlbmNvZGUoYXJyYXkpe3ZhciBsZW5ndGg9YXJyYXkubGVuZ3RoO3ZhciBpbmRleD0tMTt2YXIgdmFsdWU7dmFyIG91dHB1dD0iIjt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7dmFsdWUgPSBhcnJheVtpbmRleF07aWYodmFsdWUgPiA2NTUzNSl7dmFsdWUgLT0gNjU1MzY7b3V0cHV0ICs9IHN0cmluZ0Zyb21DaGFyQ29kZSh2YWx1ZSA+Pj4gMTAgJiAxMDIzIHwgNTUyOTYpO3ZhbHVlID0gNTYzMjAgfCB2YWx1ZSAmIDEwMjM7fW91dHB1dCArPSBzdHJpbmdGcm9tQ2hhckNvZGUodmFsdWUpO31yZXR1cm4gb3V0cHV0O31mdW5jdGlvbiBjaGVja1NjYWxhclZhbHVlKGNvZGVQb2ludCl7aWYoY29kZVBvaW50ID49IDU1Mjk2ICYmIGNvZGVQb2ludCA8PSA1NzM0Myl7dGhyb3cgRXJyb3IoIkxvbmUgc3Vycm9nYXRlIFUrIiArIGNvZGVQb2ludC50b1N0cmluZygxNikudG9VcHBlckNhc2UoKSArICIgaXMgbm90IGEgc2NhbGFyIHZhbHVlIik7fX1mdW5jdGlvbiBjcmVhdGVCeXRlKGNvZGVQb2ludCxzaGlmdCl7cmV0dXJuIHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQgPj4gc2hpZnQgJiA2MyB8IDEyOCk7fWZ1bmN0aW9uIGVuY29kZUNvZGVQb2ludChjb2RlUG9pbnQpe2lmKChjb2RlUG9pbnQgJiA0Mjk0OTY3MTY4KSA9PSAwKXtyZXR1cm4gc3RyaW5nRnJvbUNoYXJDb2RlKGNvZGVQb2ludCk7fXZhciBzeW1ib2w9IiI7aWYoKGNvZGVQb2ludCAmIDQyOTQ5NjUyNDgpID09IDApe3N5bWJvbCA9IHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQgPj4gNiAmIDMxIHwgMTkyKTt9ZWxzZSBpZigoY29kZVBvaW50ICYgNDI5NDkwMTc2MCkgPT0gMCl7Y2hlY2tTY2FsYXJWYWx1ZShjb2RlUG9pbnQpO3N5bWJvbCA9IHN0cmluZ0Zyb21DaGFyQ29kZShjb2RlUG9pbnQgPj4gMTIgJiAxNSB8IDIyNCk7c3ltYm9sICs9IGNyZWF0ZUJ5dGUoY29kZVBvaW50LDYpO31lbHNlIGlmKChjb2RlUG9pbnQgJiA0MjkyODcwMTQ0KSA9PSAwKXtzeW1ib2wgPSBzdHJpbmdGcm9tQ2hhckNvZGUoY29kZVBvaW50ID4+IDE4ICYgNyB8IDI0MCk7c3ltYm9sICs9IGNyZWF0ZUJ5dGUoY29kZVBvaW50LDEyKTtzeW1ib2wgKz0gY3JlYXRlQnl0ZShjb2RlUG9pbnQsNik7fXN5bWJvbCArPSBzdHJpbmdGcm9tQ2hhckNvZGUoY29kZVBvaW50ICYgNjMgfCAxMjgpO3JldHVybiBzeW1ib2w7fWZ1bmN0aW9uIHV0ZjhlbmNvZGUoc3RyaW5nKXt2YXIgY29kZVBvaW50cz11Y3MyZGVjb2RlKHN0cmluZyk7dmFyIGxlbmd0aD1jb2RlUG9pbnRzLmxlbmd0aDt2YXIgaW5kZXg9LTE7dmFyIGNvZGVQb2ludDt2YXIgYnl0ZVN0cmluZz0iIjt3aGlsZSgrK2luZGV4IDwgbGVuZ3RoKSB7Y29kZVBvaW50ID0gY29kZVBvaW50c1tpbmRleF07Ynl0ZVN0cmluZyArPSBlbmNvZGVDb2RlUG9pbnQoY29kZVBvaW50KTt9cmV0dXJuIGJ5dGVTdHJpbmc7fWZ1bmN0aW9uIHJlYWRDb250aW51YXRpb25CeXRlKCl7aWYoYnl0ZUluZGV4ID49IGJ5dGVDb3VudCl7dGhyb3cgRXJyb3IoIkludmFsaWQgYnl0ZSBpbmRleCIpO312YXIgY29udGludWF0aW9uQnl0ZT1ieXRlQXJyYXlbYnl0ZUluZGV4XSAmIDI1NTtieXRlSW5kZXgrKztpZigoY29udGludWF0aW9uQnl0ZSAmIDE5MikgPT0gMTI4KXtyZXR1cm4gY29udGludWF0aW9uQnl0ZSAmIDYzO310aHJvdyBFcnJvcigiSW52YWxpZCBjb250aW51YXRpb24gYnl0ZSIpO31mdW5jdGlvbiBkZWNvZGVTeW1ib2woKXt2YXIgYnl0ZTE7dmFyIGJ5dGUyO3ZhciBieXRlMzt2YXIgYnl0ZTQ7dmFyIGNvZGVQb2ludDtpZihieXRlSW5kZXggPiBieXRlQ291bnQpe3Rocm93IEVycm9yKCJJbnZhbGlkIGJ5dGUgaW5kZXgiKTt9aWYoYnl0ZUluZGV4ID09IGJ5dGVDb3VudCl7cmV0dXJuIGZhbHNlO31ieXRlMSA9IGJ5dGVBcnJheVtieXRlSW5kZXhdICYgMjU1O2J5dGVJbmRleCsrO2lmKChieXRlMSAmIDEyOCkgPT0gMCl7cmV0dXJuIGJ5dGUxO31pZigoYnl0ZTEgJiAyMjQpID09IDE5Mil7dmFyIGJ5dGUyPXJlYWRDb250aW51YXRpb25CeXRlKCk7Y29kZVBvaW50ID0gKGJ5dGUxICYgMzEpIDw8IDYgfCBieXRlMjtpZihjb2RlUG9pbnQgPj0gMTI4KXtyZXR1cm4gY29kZVBvaW50O31lbHNlIHt0aHJvdyBFcnJvcigiSW52YWxpZCBjb250aW51YXRpb24gYnl0ZSIpO319aWYoKGJ5dGUxICYgMjQwKSA9PSAyMjQpe2J5dGUyID0gcmVhZENvbnRpbnVhdGlvbkJ5dGUoKTtieXRlMyA9IHJlYWRDb250aW51YXRpb25CeXRlKCk7Y29kZVBvaW50ID0gKGJ5dGUxICYgMTUpIDw8IDEyIHwgYnl0ZTIgPDwgNiB8IGJ5dGUzO2lmKGNvZGVQb2ludCA+PSAyMDQ4KXtjaGVja1NjYWxhclZhbHVlKGNvZGVQb2ludCk7cmV0dXJuIGNvZGVQb2ludDt9ZWxzZSB7dGhyb3cgRXJyb3IoIkludmFsaWQgY29udGludWF0aW9uIGJ5dGUiKTt9fWlmKChieXRlMSAmIDI0OCkgPT0gMjQwKXtieXRlMiA9IHJlYWRDb250aW51YXRpb25CeXRlKCk7Ynl0ZTMgPSByZWFkQ29udGludWF0aW9uQnl0ZSgpO2J5dGU0ID0gcmVhZENvbnRpbnVhdGlvbkJ5dGUoKTtjb2RlUG9pbnQgPSAoYnl0ZTEgJiAxNSkgPDwgMTggfCBieXRlMiA8PCAxMiB8IGJ5dGUzIDw8IDYgfCBieXRlNDtpZihjb2RlUG9pbnQgPj0gNjU1MzYgJiYgY29kZVBvaW50IDw9IDExMTQxMTEpe3JldHVybiBjb2RlUG9pbnQ7fX10aHJvdyBFcnJvcigiSW52YWxpZCBVVEYtOCBkZXRlY3RlZCIpO312YXIgYnl0ZUFycmF5O3ZhciBieXRlQ291bnQ7dmFyIGJ5dGVJbmRleDtmdW5jdGlvbiB1dGY4ZGVjb2RlKGJ5dGVTdHJpbmcpe2J5dGVBcnJheSA9IHVjczJkZWNvZGUoYnl0ZVN0cmluZyk7Ynl0ZUNvdW50ID0gYnl0ZUFycmF5Lmxlbmd0aDtieXRlSW5kZXggPSAwO3ZhciBjb2RlUG9pbnRzPVtdO3ZhciB0bXA7d2hpbGUoKHRtcCA9IGRlY29kZVN5bWJvbCgpKSAhPT0gZmFsc2UpIHtjb2RlUG9pbnRzLnB1c2godG1wKTt9cmV0dXJuIHVjczJlbmNvZGUoY29kZVBvaW50cyk7fXZhciB1dGY4PXt2ZXJzaW9uOiIyLjAuMCIsZW5jb2RlOnV0ZjhlbmNvZGUsZGVjb2RlOnV0ZjhkZWNvZGV9O2lmKHR5cGVvZiBkZWZpbmUgPT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgZGVmaW5lLmFtZCA9PSAib2JqZWN0IiAmJiBkZWZpbmUuYW1kKXtkZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gdXRmODt9KTt9ZWxzZSBpZihmcmVlRXhwb3J0cyAmJiAhZnJlZUV4cG9ydHMubm9kZVR5cGUpe2lmKGZyZWVNb2R1bGUpe2ZyZWVNb2R1bGUuZXhwb3J0cyA9IHV0Zjg7fWVsc2Uge3ZhciBvYmplY3Q9e307dmFyIGhhc093blByb3BlcnR5PW9iamVjdC5oYXNPd25Qcm9wZXJ0eTtmb3IodmFyIGtleSBpbiB1dGY4KSB7aGFzT3duUHJvcGVydHkuY2FsbCh1dGY4LGtleSkgJiYgKGZyZWVFeHBvcnRzW2tleV0gPSB1dGY4W2tleV0pO319fWVsc2Uge3Jvb3QudXRmOCA9IHV0Zjg7fX0pKHRoaXMpO30pLmNhbGwodGhpcyx0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCI/c2VsZjp0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIj93aW5kb3c6dHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCI/Z2xvYmFsOnt9KTt9LHt9XSw0NjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7InVzZSBzdHJpY3QiO3ZhciBhbHBoYWJldD0iMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXotXyIuc3BsaXQoIiIpLGxlbmd0aD02NCxtYXA9e30sc2VlZD0wLGk9MCxwcmV2O2Z1bmN0aW9uIGVuY29kZShudW0pe3ZhciBlbmNvZGVkPSIiO2RvIHtlbmNvZGVkID0gYWxwaGFiZXRbbnVtICUgbGVuZ3RoXSArIGVuY29kZWQ7bnVtID0gTWF0aC5mbG9vcihudW0gLyBsZW5ndGgpO313aGlsZShudW0gPiAwKTtyZXR1cm4gZW5jb2RlZDt9ZnVuY3Rpb24gZGVjb2RlKHN0cil7dmFyIGRlY29kZWQ9MDtmb3IoaSA9IDA7aSA8IHN0ci5sZW5ndGg7aSsrKSB7ZGVjb2RlZCA9IGRlY29kZWQgKiBsZW5ndGggKyBtYXBbc3RyLmNoYXJBdChpKV07fXJldHVybiBkZWNvZGVkO31mdW5jdGlvbiB5ZWFzdCgpe3ZhciBub3c9ZW5jb2RlKCtuZXcgRGF0ZSgpKTtpZihub3cgIT09IHByZXYpcmV0dXJuIHNlZWQgPSAwLHByZXYgPSBub3c7cmV0dXJuIG5vdyArICIuIiArIGVuY29kZShzZWVkKyspO31mb3IoO2kgPCBsZW5ndGg7aSsrKSBtYXBbYWxwaGFiZXRbaV1dID0gaTt5ZWFzdC5lbmNvZGUgPSBlbmNvZGU7eWVhc3QuZGVjb2RlID0gZGVjb2RlO21vZHVsZS5leHBvcnRzID0geWVhc3Q7fSx7fV19LHt9LFsxXSkoMSk7fSk7J3VzZSBzdHJpY3QnO09iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCdfX2VzTW9kdWxlJyx7dmFsdWU6dHJ1ZX0pO3ZhciBfY3JlYXRlQ2xhc3M9KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQscHJvcHMpe2Zvcih2YXIgaT0wO2kgPCBwcm9wcy5sZW5ndGg7aSsrKSB7dmFyIGRlc2NyaXB0b3I9cHJvcHNbaV07ZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO2Rlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtpZigndmFsdWUnIGluIGRlc2NyaXB0b3IpZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCxkZXNjcmlwdG9yLmtleSxkZXNjcmlwdG9yKTt9fXJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3Rvcixwcm90b1Byb3BzLHN0YXRpY1Byb3BzKXtpZihwcm90b1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLHByb3RvUHJvcHMpO2lmKHN0YXRpY1Byb3BzKWRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3Isc3RhdGljUHJvcHMpO3JldHVybiBDb25zdHJ1Y3Rvcjt9O30pKCk7ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLENvbnN0cnVjdG9yKXtpZighKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTt9fXZhciBOb2RlanNQcm90b1N0dWI9KGZ1bmN0aW9uKCl7IC8qKgogICAqIE5vZGVqcyBQcm90b1N0dWIgY3JlYXRpb24KICAgKiBAcGFyYW0gIHtzdHJpbmd9IHJ1bnRpbWVQcm90b1N0dWJVUkwgLSBVUkwgdXNlZCBpbnRlcm5hbGx5IGZvciBtZXNzYWdlIGRlbGl2ZXJ5IHBvaW50LiBOb3QgdXNlZCBmb3IgTWVzc2FnZU5vZGUgZGVsaXZlci4KICAgKiBAcGFyYW0gIHtNaW5pQnVzfSBidXMgLSBNaW5pQnVzIHVzZWQgdG8gc2VuZC9yZWNlaXZlIG1lc3NhZ2VzLiBOb3JtYWxseSBjb25uZWN0ZWQgdG8gdGhlIE1lc3NhZ2VCdXMuCiAgICogQHBhcmFtICB7T2JqZWN0fSBjb25maWcgLSBNYW5kYXRvcnkgZmllbGRzIGFyZTogInVybCIgb2YgdGhlIE1lc3NhZ2VOb2RlIGFkZHJlc3MgYW5kICJydW50aW1lVVJMIi4KICAgKiBAcmV0dXJuIHtOb2RlanNQcm90b1N0dWJ9CiAgICovZnVuY3Rpb24gTm9kZWpzUHJvdG9TdHViKHJ1bnRpbWVQcm90b1N0dWJVUkwsYnVzLGNvbmZpZyl7X2NsYXNzQ2FsbENoZWNrKHRoaXMsTm9kZWpzUHJvdG9TdHViKTt2YXIgX3RoaXM9dGhpczt0aGlzLl9pZCA9IDA7dGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7dGhpcy5fYnVzID0gYnVzO3RoaXMuX2NvbmZpZyA9IGNvbmZpZzt0aGlzLl9idXMuYWRkTGlzdGVuZXIoJyonLGZ1bmN0aW9uKG1zZyl7X3RoaXMuX29wZW4oZnVuY3Rpb24oKXtfdGhpcy5fc29jay5lbWl0KCdtZXNzYWdlJyxKU09OLnN0cmluZ2lmeShtc2cpKTt9KTt9KTt9IC8qKgogICAqIEdldCB0aGUgY29uZmlndXJhdGlvbiBmb3IgdGhpcyBQcm90b1N0dWIKICAgKiBAcmV0dXJuIHtPYmplY3R9IC0gTWFuZGF0b3J5IGZpZWxkcyBhcmU6ICJ1cmwiIG9mIHRoZSBNZXNzYWdlTm9kZSBhZGRyZXNzIGFuZCAicnVudGltZVVSTCIuCiAgICovX2NyZWF0ZUNsYXNzKE5vZGVqc1Byb3RvU3R1Yixbe2tleTonY29ubmVjdCcsIC8qKgogICAgICogVHJ5IHRvIG9wZW4gdGhlIGNvbm5lY3Rpb24gdG8gdGhlIE1lc3NhZ2VOb2RlLiBDb25uZWN0aW9uIGlzIGF1dG8gbWFuYWdlZCwgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIHRoaXMgZXhwbGljaXRseS4KICAgICAqIEhvd2V2ZXIsIGlmICJkaXNjb25uZWN0KCkiIGlzIGNhbGxlZCwgaXQncyBuZWNlc3NhcnkgdG8gY2FsbCB0aGlzIHRvIGVuYWJsZSBjb25uZWN0aW9ucyBhZ2Fpbi4KICAgICAqIEEgc3RhdHVzIG1lc3NhZ2UgaXMgc2VudCB0byAicnVudGltZVByb3RvU3R1YlVSTC9zdGF0dXMiLCBjb250YWluaW5nIHRoZSB2YWx1ZSAiY29ubmVjdGVkIiBpZiBzdWNjZXNzZnVsLCBvciAiZGlzY29ubmVjdGVkIiBpZiBzb21lIGVycm9yIG9jY3Vycy4KICAgICAqL3ZhbHVlOmZ1bmN0aW9uIGNvbm5lY3QoKXt2YXIgX3RoaXM9dGhpcztfdGhpcy5fb3BlbihmdW5jdGlvbigpe30pO30gLyoqCiAgICAgKiBJdCB3aWxsIGRpc2Nvbm5lY3QgYW5kIG9yZGVyIHRvIHN0YXkgZGlzY29ubmVjdGVkLiBSZWNvbm5lY3Rpb24gdHJpZXMsIHdpbGwgbm90IGJlIGF0dGVtcHRlZCwgdW5sZXNzICJjb25uZWN0KCkiIGlzIGNhbGxlZC4KICAgICAqIEEgc3RhdHVzIG1lc3NhZ2UgaXMgc2VudCB0byAicnVudGltZVByb3RvU3R1YlVSTC9zdGF0dXMiIHdpdGggdmFsdWUgImRpc2Nvbm5lY3RlZCIuCiAgICAgKi99LHtrZXk6J2Rpc2Nvbm5lY3QnLHZhbHVlOmZ1bmN0aW9uIGRpc2Nvbm5lY3QoKXt2YXIgX3RoaXM9dGhpcztpZihfdGhpcy5fc29jayl7X3RoaXMuX3NlbmRDbG9zZSgpO319fSx7a2V5Oidwb3N0TWVzc2FnZScsdmFsdWU6ZnVuY3Rpb24gcG9zdE1lc3NhZ2UobXNnKXt0aGlzLl9zb2NrLnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7fX0se2tleTonX3NlbmRPcGVuJyx2YWx1ZTpmdW5jdGlvbiBfc2VuZE9wZW4oY2FsbGJhY2spe3ZhciBfdGhpcz10aGlzO190aGlzLl9pZCsrO3ZhciBtc2c9e2hlYWRlcjp7aWQ6X3RoaXMuX2lkLHR5cGU6J29wZW4nLGZyb206X3RoaXMuX2NvbmZpZy5ydW50aW1lVVJMLHRvOidtbjovc2Vzc2lvbicsdG9rZW5JRDonPz8nfX07IC8vcmVnaXN0ZXIgYW5kIHdhaXQgZm9yIG9wZW4gcmVwbHkuLi4KdmFyIGhhc1Jlc3BvbnNlPWZhbHNlO190aGlzLl9zZXNzaW9uQ2FsbGJhY2sgPSBmdW5jdGlvbihyZXBseSl7aWYocmVwbHkuaGVhZGVyLnR5cGUgPT09ICdyZXBseScgJiByZXBseS5oZWFkZXIuaWQgPT09IG1zZy5oZWFkZXIuaWQpe2hhc1Jlc3BvbnNlID0gdHJ1ZTtpZihyZXBseS5ib2R5LmNvZGUgPT09ICdvaycpe190aGlzLl9zZW5kU3RhdHVzKCdjb25uZWN0ZWQnKTtjYWxsYmFjaygpO31lbHNlIHtfdGhpcy5fc2VuZFN0YXR1cygnZGlzY29ubmVjdGVkJyxyZXBseS5ib2R5LmRlc2MpO319fTtfdGhpcy5fc29jay5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZighaGFzUmVzcG9uc2UpeyAvL25vIHJlc3BvbnNlIGFmdGVyIHggc2Vjb25kcy4uLgpfdGhpcy5fc2VuZFN0YXR1cygnZGlzY29ubmVjdGVkJywnVGltZW91dCBmcm9tIG1uOi9zZXNzaW9uJyk7fX0sMzAwMCk7fX0se2tleTonX3NlbmRDbG9zZScsdmFsdWU6ZnVuY3Rpb24gX3NlbmRDbG9zZSgpe3ZhciBfdGhpcz10aGlzO190aGlzLl9pZCsrO3ZhciBtc2c9e2hlYWRlcjp7aWQ6X3RoaXMuX2lkLHR5cGU6J2Nsb3NlJyxmcm9tOl90aGlzLl9jb25maWcucnVudGltZVVSTCx0bzonbW46L3Nlc3Npb24nLHRva2VuSUQ6Jz8/J319O190aGlzLl9zb2NrLnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7fX0se2tleTonX3NlbmRTdGF0dXMnLHZhbHVlOmZ1bmN0aW9uIF9zZW5kU3RhdHVzKHZhbHVlLHJlYXNvbil7dmFyIF90aGlzPXRoaXM7dmFyIG1zZz17aGVhZGVyOnt0eXBlOid1cGRhdGUnLGZyb206X3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwsdG86X3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgKyAnL3N0YXR1cyd9LGJvZHk6e3ZhbHVlOnZhbHVlfX07aWYocmVhc29uKXttc2cuYm9keS5kZXNjID0gcmVhc29uO31fdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZyk7fX0se2tleTonX3dhaXRSZWFkeScsdmFsdWU6ZnVuY3Rpb24gX3dhaXRSZWFkeShjYWxsYmFjayl7dmFyIF90aGlzPXRoaXM7aWYoX3RoaXMuX3NvY2sucmVhZHlTdGF0ZSA9PT0gMSl7Y2FsbGJhY2soKTt9ZWxzZSB7c2V0VGltZW91dChmdW5jdGlvbigpe190aGlzLl93YWl0UmVhZHkoY2FsbGJhY2spO30pO319fSx7a2V5Oidfb3BlbicsdmFsdWU6ZnVuY3Rpb24gX29wZW4oY2FsbGJhY2spe3ZhciBfdGhpcz10aGlzO2lmKCFfdGhpcy5fc29jayl7X3RoaXMuX3NvY2sgPSBpbyhfdGhpcy5fY29uZmlnLnVybCx7Zm9yY2VOZXc6dHJ1ZX0pO190aGlzLl9zb2NrLm9uKCdjb25uZWN0JyxmdW5jdGlvbigpe190aGlzLl9zZW5kT3BlbihmdW5jdGlvbigpe2NhbGxiYWNrKCk7fSk7fSk7X3RoaXMuX3NvY2sub24oJ21lc3NhZ2UnLGZ1bmN0aW9uKG1zZyl7aWYodHlwZW9mIG1zZyAhPT0gJ29iamVjdCcpe3RyeXttc2cgPSBKU09OLnBhcnNlKG1zZyk7fWNhdGNoKGUpIHttc2cgPSB7fTt9fWlmKG1zZy5oYXNPd25Qcm9wZXJ0eSgnaGVhZGVyJykgJiYgbXNnLmhlYWRlci5oYXNPd25Qcm9wZXJ0eSgnZnJvbScpICYmIG1zZy5oZWFkZXIuZnJvbSA9PT0gJ21uOi9zZXNzaW9uJyl7aWYoX3RoaXMuX3Nlc3Npb25DYWxsYmFjayl7X3RoaXMuX3Nlc3Npb25DYWxsYmFjayhtc2cpO319ZWxzZSB7X3RoaXMuX2J1cy5wb3N0TWVzc2FnZShtc2cpO319KTtfdGhpcy5fc29jay5vbignZGlzY29ubmVjdCcsZnVuY3Rpb24ocmVhc29uKXtfdGhpcy5fc2VuZFN0YXR1cygnZGlzY29ubmVjdGVkJyxyZWFzb24pO2RlbGV0ZSBfdGhpcy5fc29jazt9KTt9ZWxzZSB7X3RoaXMuX3dhaXRSZWFkeShjYWxsYmFjayk7fX19LHtrZXk6J2NvbmZpZycsZ2V0OmZ1bmN0aW9uIGdldCgpe3JldHVybiB0aGlzLl9jb25maWc7fX1dKTtyZXR1cm4gTm9kZWpzUHJvdG9TdHViO30pKCk7ZXhwb3J0c1snZGVmYXVsdCddID0gTm9kZWpzUHJvdG9TdHViO21vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddO30se31dfSx7fSxbMV0pKDEpO30pOwoKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dfSx7fSxbMV0pKDEpCn0pOw==","signature":"","sourceCodeClassName":"NodejsProtoStub"}
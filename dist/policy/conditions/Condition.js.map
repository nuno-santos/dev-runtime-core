{"version":3,"sources":["policy/conditions/Condition.js"],"names":["_Operators","require","Condition","attribute","operator","params","_classCallCheck3","default","this","operators","_Operators2","context","message","value","tempParam","dataObjectURL","to","split","pop","runtimeRegistry","getPreAuthSubscribers","policyEngine","getGroup"],"mappings":"0XAAAA,WAAAC,QAAA,+DAEMC,qBAEJ,QAAAA,GAAYC,EAAWC,EAAUC,IAAQ,EAAAC,iBAAAC,SAAAC,KAAAN,GACvCM,KAAKL,UAAYA,EACjBK,KAAKJ,SAAWA,EAChBI,KAAKH,OAASA,EACdG,KAAKC,UAAY,GAAAC,aAAAH,8EAGNI,EAASC,GACpBD,EAAQH,KAAKL,YAAeS,QAASA,EACrC,IAAIC,GAAQF,EAAQH,KAAKL,WACrBW,EAAA,MACJ,IAAsB,OAAlBN,KAAKJ,SACP,GAAoB,kBAAhBI,KAAKH,OAA4B,CACnC,GAAIU,GAAgBH,EAAQI,GAAGC,MAAM,IACrCF,GAAcG,MACdH,EAAgBA,EAAc,GAAK,KAAOA,EAAc,GACxDD,EAAYH,EAAQQ,gBAAgBC,sBAAsBL,OAE1DD,GAAYH,EAAQU,aAAaC,SAASd,KAAKH,OAGnD,OAAKS,GAGIN,KAAKC,UAAUD,KAAKJ,WAAWU,EAAWD,IAF1CL,KAAKC,UAAUD,KAAKJ,WAAWI,KAAKH,OAAQQ,6BAQ1CX","file":"policy/conditions/Condition.js","sourcesContent":["import Operators from '../Operators';\n\nclass Condition {\n\n  constructor(attribute, operator, params) {\n    this.attribute = attribute;\n    this.operator = operator;\n    this.params = params;\n    this.operators = new Operators();\n  }\n\n  isApplicable(context, message) {\n    context[this.attribute] = { message: message };\n    let value = context[this.attribute];\n    let tempParam;\n    if (this.operator === 'in') {\n      if (this.params === 'preauthorised') {\n        let dataObjectURL = message.to.split('/');\n        dataObjectURL.pop();\n        dataObjectURL = dataObjectURL[0] + '//' + dataObjectURL[2];\n        tempParam = context.runtimeRegistry.getPreAuthSubscribers(dataObjectURL);\n      } else {\n        tempParam = context.policyEngine.getGroup(this.params);\n      }\n    }\n    if (!tempParam) {\n      return this.operators[this.operator]([this.params, value]);\n    } else {\n      return this.operators[this.operator]([tempParam, value]);\n    }\n  }\n\n}\n\nexport default Condition;\n"],"sourceRoot":"/source/"}
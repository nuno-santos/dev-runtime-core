// Runtime User Agent 

// version: 0.1.4

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.runtimeCore=e()}}(function(){return function e(t,r,n){function o(u,s){if(!r[u]){if(!t[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[u]={exports:{}};t[u][0].call(l.exports,function(e){var r=t[u][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<n.length;u++)o(n[u]);return o}({1:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,u=r;s=c=a=void 0,n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var a=s.get;return void 0===a?void 0:a.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,r=u,n=!0}},a=e("./MiniBus"),c=n(a),l=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this._registry=e}return i(t,e),u(t,[{key:"_onPostMessage",value:function(e){var t=this;t._registry.resolve(e.header.to).then(function(r){var n=t._subscriptions[r];n&&t._publishOn(n,e)})["catch"](function(e){console.log("PROTO-STUB-ERROR: ",e)})}}]),t}(c["default"]);r["default"]=l,t.exports=r["default"]},{"./MiniBus":2}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e);var t=this;t._msgId=0,t._subscriptions={},t._replyTimeOut=3e3,t._replyCallbacks={},t._registerExternalListener()}return o(e,[{key:"addListener",value:function(e,t){var r=this,n=new u(r._subscriptions,e,t),o=r._subscriptions[e];return o||(o=[],r._subscriptions[e]=o),o.push(n),n}},{key:"addReplyListener",value:function(e,t,r){var n=e+t;_this._replyCallbacks[n]=r}},{key:"removeReplyListener",value:function(e,t){var r=e+t;delete _this._replyCallbacks[r]}},{key:"postMessage",value:function(e,t){var r=this;if(e.header.id||(r._msgId++,e.header.id=r._msgId),t&&!function(){var n=e.header.from+e.header.id;r._replyCallbacks[n]=t,setTimeout(function(){delete r._replyCallbacks[n];var o={header:{id:e.header.id,type:"reply"},body:{code:"error",desc:"Reply timeout!"}};t(o)},r._replyTimeOut)}(),!r._onReply(e)){var n=r._subscriptions[e.header.to];n?r._publishOn(n,e):r._onPostMessage(e)}return e.header.id}},{key:"bind",value:function(e,t,r){var n=this,o=this,i=o.addListener(e,function(e){r.postMessage(e)}),u=r.addListener(t,function(e){o.postMessage(e)});return{thisListener:i,targetListener:u,unbind:function(){n.thisListener.remove(),n.targetListener.remove()}}}},{key:"_publishOn",value:function(e,t){e.forEach(function(e){e._callback(t)})}},{key:"_onReply",value:function(e){var t=this;if("reply"===e.header.type){var r=e.header.to+e.header.id,n=t._replyCallbacks[r];if(delete t._replyCallbacks[r],n)return n(e),!0}return!1}},{key:"_onMessage",value:function(e){var t=this;if(!t._onReply(e)){var r=t._subscriptions[e.header.to];r?t._publishOn(r,e):(r=t._subscriptions["*"],r&&t._publishOn(r,e))}}},{key:"_onPostMessage",value:function(e){}},{key:"_registerExternalListener",value:function(){}}]),e}(),u=function(){function e(t,r,o){n(this,e);var i=this;i._subscriptions=t,i._url=r,i._callback=o}return o(e,[{key:"remove",value:function(){var e=this,t=e._subscriptions[e._url];if(t){var r=t.indexOf(e);t.splice(r,1),0===t.length&&delete e._subscriptions[e._url]}}},{key:"url",get:function(){return this._url}}]),e}();r["default"]=i,t.exports=r["default"]},{}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e)}return o(e,[{key:"registerIdentity",value:function(){}},{key:"registerWithRP",value:function(){}},{key:"loginWithRP",value:function(){}},{key:"setHypertyIdentity",value:function(){}},{key:"generateAssertion",value:function(e,t,r){}},{key:"validateAssertion",value:function(e){}},{key:"getAssertionTrustLevel",value:function(e){}}]),e}();r["default"]=i,t.exports=r["default"]},{}],4:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e)}return o(e,[{key:"addPolicies",value:function(e,t){}},{key:"removePolicies",value:function(e){}},{key:"authorise",value:function(e){}}]),e}();r["default"]=i,t.exports=r["default"]},{}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,u=r;s=c=a=void 0,n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var a=s.get;return void 0===a?void 0:a.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,r=u,n=!0}},a=e("../utils/EventEmitter"),c=n(a),l=function(e){function t(e,r,n,i){if(o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),!r)throw new Error("runtimeURL is missing.");var u=this;u.registryURL=r+"/registry/123",u.messageBus=e,u.appSandbox=n,u.runtimeURL=r,u.remoteRegistry=i,u.db={},u.DB_NAME="registry-DB",u.DB_VERSION=1,u.DB_STORE_HYPERTY="hyperty-list",u.DB_STORE_STUB="protostub-list";var a=indexedDB.open(u.DB_NAME,u.DB_VERSION);a.onsuccess=function(e){u.db=this.result},a.onerror=function(e){console.error("Request open IndexedDB error:",e.target.errorCode)},a.onupgradeneeded=function(e){var t=e.currentTarget.result.createObjectStore(u.DB_STORE_HYPERTY,{keyPath:"hyperty"});t.createIndex("pepURL","pepURL",{unique:!1}),t.createIndex("identity","identity",{unique:!1}),t.createIndex("sandbox","sandbox",{unique:!1}),t.put({hyperty:"test",pepURL:null,identity:"testID"});var r=e.currentTarget.result.createObjectStore(u.DB_STORE_STUB,{keyPath:"domainURL"});r.createIndex("protostubURL","protostubURL",{unique:!1}),r.createIndex("sandbox","sandbox",{unique:!1}),r.put({domainURL:"testStub",protostubURL:"testStubURL"})}}return i(t,e),u(t,[{key:"registerMessageBus",value:function(e){var t=this;t.messageBus=e}},{key:"registerRuntimeUA",value:function(e){var t=this;t.runtimeUA=e}},{key:"discoverRuntimeUA",value:function(){var e=this;return e.runtimeUA}},{key:"discoverMessageBus",value:function(){var e=this;return e.messageBus}},{key:"getAppSandbox",value:function(){var e=this;return e.appSandbox}},{key:"registerHyperty",value:function(e,t){var r=this,n=t.split("/"),o=n[2],i=new Promise(function(t,n){return void 0!==r.messageBus?r.resolve("hyperty-runtime://"+o).then(function(){}).then(function(){var i=r.messageBus.addListener(r.registryURL,function(o){var u=r.db.transaction(r.DB_STORE_HYPERTY,"readwrite"),s=u.objectStore(r.DB_STORE_HYPERTY),a=o.body.hypertyRuntime;s.put({hyperty:a,pepURL:null,identity:a+"/identity",sandbox:e}),u.oncomplete=function(e){r.messageBus.addListener(a+"/status",function(e){console.log("Message addListener: "+e)}),t(a),i.remove()},u.onerror=function(e){n("Error on register hyperty"),i.remove()}}),u={header:{id:1,type:"CREATE",from:r.registryURL,to:"runtime://sp1/msg-node/address-allocation"},body:{hypertyURL:"hyperty://"+o+"/hy123"}};r.messageBus.postMessage(u),setTimeout(function(){var e={header:{id:1,type:"CREATE",from:"runtime://sp1/msg-node/address-allocation",to:r.registryURL},body:{hypertyURL:"hyperty://"+o+"/hy123",hypertyRuntime:"hyperty-runtime://"+o+"/123"}};r.messageBus.postMessage(e)},500)}):void n("MessageBus not found on registerStub")});return i}},{key:"unregisterHyperty",value:function(e){var t=this,r=t.db.transaction(t.DB_STORE_HYPERTY,"readwrite"),n=new Promise(function(n,o){var i=r.objectStore(t.DB_STORE_HYPERTY),u=i.get(e);u.onerror=function(e){o("Error on delete Hyperty")},u.onsuccess=function(r){var i=u.result;if(void 0===i)o("Error hyperty not found");else{var s=t.db.transaction(t.DB_STORE_HYPERTY,"readwrite").objectStore(t.DB_STORE_HYPERTY)["delete"](e);s.onsuccess=function(e){n("Hyperty delete with success")},s.onerror=function(e){console.error("Error deleting an Hyperty"),o("Error deleting an Hyperty")}}}});return n}},{key:"discoverProtostub",value:function(e){if(!e)throw new Error("Parameter url needed");var t=this,r=new Promise(function(r,n){var o=t.db.transaction(t.DB_STORE_STUB,"readonly"),i=o.objectStore(t.DB_STORE_STUB),u=i.get(e);u.onerror=function(e){n("requestUpdate couldn' get the ProtostubURL"),console.error("hyperty not found")},u.onsuccess=function(e){var t=u.result;void 0!==t?r(t.protostubURL):n("No protostubURL was found")}});return r}},{key:"registerStub",value:function(e,t){var r,n=this,o=new Promise(function(o,i){void 0===n.messageBus&&i("MessageBus not found on registerStub");var u=n.db.transaction(n.DB_STORE_STUB,"readwrite"),s=u.objectStore(n.DB_STORE_STUB);r=t+"/protostub/123",s.put({domainURL:t,protostubURL:r,sandbox:e}),u.onerror=function(e){i("Error on registerProtostub")},u.oncomplete=function(e){o(r),n.messageBus.addListener("hyperty-runtime://"+r,function(e){e.header.resource===e.header.to+"/status"&&console.log("RuntimeProtostubURL/status message: ",e.body.value)})}});return o}},{key:"unregisterStub",value:function(e){var t=this,r=new Promise(function(r,n){var o=t.db.transaction(t.DB_STORE_STUB,"readwrite").objectStore(t.DB_STORE_STUB),i=o.get(e);i.onerror=function(e){n("Error on unregisterStub")},i.onsuccess=function(o){var u=i.result;if(void 0===u)n("Error on unregisterStub: Hyperty not found");else{var s=t.db.transaction(t.DB_STORE_STUB,"readwrite").objectStore(t.DB_STORE_STUB)["delete"](e);s.onerror=function(e){n("Error on unregisterStub: error on database")},s.onsuccess=function(e){r("ProtostubURL removed")}}}});return r}},{key:"registerPEP",value:function(e,t){var r,n=this,o=new Promise(function(e,o){var i=n.db.transaction(n.DB_STORE_HYPERTY,"readwrite").objectStore(n.DB_STORE_HYPERTY),u=i.get(t);u.onerror=function(e){console.error("URL not found"),o("Error on registerPEP")},u.onsuccess=function(n){r=t+"/pep";var s=u.result;if(void 0===s)o("Error on registerPEP");else{s.pepURL=r;var a=i.put(s);a.onerror=function(e){o("Error on update registerPEP")},a.onsuccess=function(t){e(r)}}}});return o}},{key:"unregisterPEP",value:function(e){var t=this,r=new Promise(function(r,n){var o=t.db.transaction(t.DB_STORE_HYPERTY,"readwrite").objectStore(t.DB_STORE_HYPERTY),i=o.get(e);i.onerror=function(e){n("Error on unregisterPEP")},i.onsuccess=function(e){var t=i.result;if(void 0===t)n("Error on unregisterPEP: hyperty not found");else{t.pepURL=null;var u=o.put(t);u.onerror=function(e){n("Error on unregisterPEP: error on update dabatase")},u.onsuccess=function(e){r(" PEP sucessfully deleted")}}}});return r}},{key:"onEvent",value:function(e){}},{key:"getSandbox",value:function(e){if(!e)throw new Error("Parameter url needed");var t=this,r=new Promise(function(r,n){var o=t.db.transaction(t.DB_STORE_HYPERTY,"readonly").objectStore(t.DB_STORE_HYPERTY),i=o.get(e);i.onerror=function(e){n("requestUpdate couldn't get the sandbox")},i.onsuccess=function(o){var u=i.result;void 0!==u?r(u.sandbox):!function(){var o=t.db.transaction(t.DB_STORE_STUB,"readonly").objectStore(t.DB_STORE_STUB),i=o.get(e);i.onerror=function(e){n("requestUpdate couldn't get the sandbox")},i.onsuccess=function(e){var t=i.result;void 0!==t?r(t.sandbox):n("No sandbox was found")}}()}});return r}},{key:"resolve",value:function(e){console.log("resolve "+e);var t=this,r=e.split("/"),n=r[2],o=new Promise(function(r,o){var i=t.db.transaction(t.DB_STORE_STUB,"readonly"),u=i.objectStore(t.DB_STORE_STUB),s=u.get(n);t.addEventListener("runtime:stubLoaded",function(){r(n)}),s.onsuccess=function(o){var i=s.result;void 0!==i?r(e):t.trigger("runtime:loadStub",n)},s.onerror=function(t){o("The url "+e+" doesn't exist: error on dababase")}});return o}}]),t}(c["default"]);r["default"]=l,t.exports=r["default"]},{"../utils/EventEmitter":9}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("./runtime/RuntimeUA"),i=n(o),u=e("./sandbox/Sandbox"),s=n(u),a=i["default"];r.RuntimeUA=a;var c=s["default"];r.Sandbox=c},{"./runtime/RuntimeUA":7,"./sandbox/Sandbox":8}],7:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../registry/Registry"),s=n(u),a=e("../identity/IdentityModule"),c=n(a),l=e("../policy/PolicyEngine"),f=n(l),d=e("../bus/MessageBus"),y=n(d),p=function(){function e(t){if(o(this,e),!t)throw new Error("The sandbox factory is a needed parameter");var r=this;r.sandboxFactory=t;var n="hyperty-runtime://sp1/protostub/123",i=t.createAppSandbox();r.identityModule=new c["default"],r.policyEngine=new f["default"],r.registry=new s["default"](null,n,i),r.messageBus=new y["default"](r.registry),r.registry.registerMessageBus(r.messageBus),r.registry.addEventListener("runtime:loadStub",function(e){r.loadStub(e).then(function(t){r.registry.trigger("runtime:stubLoaded",e)})["catch"](function(e){console.error("reason",e)})}),t.messageBus=r.messageBus}return i(e,[{key:"getHypertyDescriptor",value:function(e){return new Promise(function(t,r){var n=e.substr(e.lastIndexOf("/")+1),o={guid:"guid",id:"idHyperty",classname:n,description:"description of "+n,kind:"hyperty",catalogueURL:"....",sourceCode:"resources/"+n+".ES5.js",dataObject:"",type:"",messageSchema:"",configuration:"",policies:"",constraints:"",hypertyCapabilities:"",protocolCapabilities:""};t(o)})}},{key:"getHypertySourceCode",value:function(e){return new Promise(function(t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(e){var n=e.currentTarget;4===n.readyState&&(200===n.status?t(n.responseText):r(n.responseText))},n.open("GET",e,!0),n.send()})}},{key:"getHypertyRuntimeURL",value:function(){return _hypertyRuntimeURL}},{key:"discoverHiperty",value:function(e){}},{key:"registerHyperty",value:function(e,t){}},{key:"loadHyperty",value:function(e){var t=this;if(!e)throw new Error("Hyperty descriptor url parameter is needed");return new Promise(function(r,n){var o=void 0,i=void 0,u=void 0,s=void 0,a={url:"ws://193.136.93.214:9090/ws",runtimeURL:"runtime:/alice"},c=function(e){n(e)};return t.getHypertyDescriptor(e).then(function(e){console.info("1: return hyperty descriptor",e),u=e;var r=e.sourceCode;return t.getHypertySourceCode(r)}).then(function(e){console.info("2: return hyperty source code"),s=e;var t=!0;return t}).then(function(e){console.info("3: return policy engine result");var r=!0,n=void 0;return n=r?t.registry.getAppSandbox():t.registry.getSandbox(domain)}).then(function(e){return console.info("4: return the sandbox",e),e},function(e){return console.info("4.1: try to register a new sandbox",e),t.sandboxFactory.createSandbox()}).then(function(r){return console.info("5: return sandbox and register"),i=r,t.registry.registerHyperty(r,e)}).then(function(e){return console.info("6: return hyperty url, after register hyperty",e),o=e,i.deployComponent(s,o,a)}).then(function(e){console.info("7: return the status of deployed component"),t.messageBus.addListener(o,i),r("Hyperty "+u.classname+" is deployed")})["catch"](c)})}},{key:"getStubDescriptor",value:function(e){return new Promise(function(e,t){var r={guid:"guid",id:"idProtoStub",classname:"VertxProtoStub",description:"description of ProtoStub",kind:"hyperty",catalogueURL:"....",sourceCode:"resources/VertxProtoStub.js",dataObject:"",type:"",messageSchema:"",configuration:{url:"ws://193.136.93.243:9090/ws",runtimeURL:"runtime:/alice"},policies:"",constraints:"",hypertyCapabilities:"",protocolCapabilities:""};e(r)})}},{key:"getStubSourceCode",value:function(e){return new Promise(function(t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(e){var n=e.currentTarget;4===n.readyState&&(200===n.status?t(n.responseText):r(n.responseText))},n.open("GET",e,!0),n.send()})}},{key:"loadStub",value:function(e){var t=this;if(!e)throw new Error("domain parameter is needed");return new Promise(function(r,n){var o=void 0,i=void 0,u=void 0,s=void 0,a=function(e){n(e)};return t.registry.discoverProtostub(e).then(function(e){console.info("1. Proto Stub Discovered: ",e),i=e,r("Successful")},function(r){return console.info("1. Proto Stub not found:",r),t.getStubDescriptor(e)}).then(function(e){console.info("2. return the ProtoStub descriptor:",e),i=e;var r=e.sourceCode;return t.getStubSourceCode(r)}).then(function(e){console.info("3. return the ProtoStub Source Code: "),s=e;var t=!0;return t}).then(function(r){return t.registry.getSandbox(e)}).then(function(e){console.info("4. if the sandbox is registered then return the sandbox",e),o=e},function(e){return console.info("5. Sandbox was not found, creating a new one"),t.sandboxFactory.createSandbox()}).then(function(r){return console.info("6. return the sandbox instance and the register",r),o=r,t.registry.registerStub(o,e)}).then(function(e){return console.info("7. return the runtime protostub url: ",e),u=e,o.deployComponent(s,u,i.configuration)}).then(function(e){console.info("8: return deploy component for sandbox status"),t.messageBus.addListener(u,o),r("Stub  "+i.classname+"  successfully loaded")})["catch"](a)})}},{key:"checkForUpdate",value:function(e){}}]),e}();r["default"]=p,t.exports=r["default"]},{"../bus/MessageBus":1,"../identity/IdentityModule":3,"../policy/PolicyEngine":4,"../registry/Registry":5}],8:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e,t,r){for(var n=!0;n;){var o=e,i=t,u=r;s=c=a=void 0,n=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var a=s.get;return void 0===a?void 0:a.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=i,r=u,n=!0}},a=e("../bus/MiniBus"),c=n(a),l=function(e){function t(e){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return i(t,e),u(t,[{key:"deployComponent",value:function(e,t,r){}},{key:"removeComponent",value:function(e){}}]),t}(c["default"]);r["default"]=l,t.exports=r["default"]},{"../bus/MiniBus":2}],9:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){n(this,e)}return o(e,[{key:"addEventListener",value:function(e,t){var r=this;r[e]=t}},{key:"trigger",value:function(e,t){var r=this;r[e]&&r[e](t)}}]),e}();r["default"]=i,t.exports=r["default"]},{}]},{},[6])(6)});
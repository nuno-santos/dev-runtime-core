{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/babel-runtime/core-js/json/stringify.js","MessageNodeCtx.js","node_modules/babel-runtime/core-js/object/create.js","node_modules/babel-runtime/core-js/object/define-property.js","node_modules/babel-runtime/core-js/object/get-prototype-of.js","node_modules/babel-runtime/core-js/object/keys.js","node_modules/babel-runtime/core-js/object/set-prototype-of.js","node_modules/babel-runtime/core-js/symbol.js","node_modules/babel-runtime/helpers/classCallCheck.js","node_modules/babel-runtime/helpers/createClass.js","node_modules/babel-runtime/helpers/inherits.js","node_modules/babel-runtime/helpers/possibleConstructorReturn.js","node_modules/babel-runtime/helpers/typeof.js","node_modules/core-js/library/fn/json/stringify.js","node_modules/core-js/library/fn/object/create.js","node_modules/core-js/library/fn/object/define-property.js","node_modules/core-js/library/fn/object/get-prototype-of.js","node_modules/core-js/library/fn/object/keys.js","node_modules/core-js/library/fn/object/set-prototype-of.js","node_modules/core-js/library/fn/symbol/index.js","node_modules/core-js/library/modules/$.a-function.js","node_modules/core-js/library/modules/$.an-object.js","node_modules/core-js/library/modules/$.cof.js","node_modules/core-js/library/modules/$.core.js","node_modules/core-js/library/modules/$.ctx.js","node_modules/core-js/library/modules/$.defined.js","node_modules/core-js/library/modules/$.descriptors.js","node_modules/core-js/library/modules/$.enum-keys.js","node_modules/core-js/library/modules/$.export.js","node_modules/core-js/library/modules/$.fails.js","node_modules/core-js/library/modules/$.get-names.js","node_modules/core-js/library/modules/$.global.js","node_modules/core-js/library/modules/$.has.js","node_modules/core-js/library/modules/$.hide.js","node_modules/core-js/library/modules/$.iobject.js","node_modules/core-js/library/modules/$.is-array.js","node_modules/core-js/library/modules/$.is-object.js","node_modules/core-js/library/modules/$.js","node_modules/core-js/library/modules/$.keyof.js","node_modules/core-js/library/modules/$.library.js","node_modules/core-js/library/modules/$.object-sap.js","node_modules/core-js/library/modules/$.property-desc.js","node_modules/core-js/library/modules/$.redefine.js","node_modules/core-js/library/modules/$.set-proto.js","node_modules/core-js/library/modules/$.set-to-string-tag.js","node_modules/core-js/library/modules/$.shared.js","node_modules/core-js/library/modules/$.to-iobject.js","node_modules/core-js/library/modules/$.to-object.js","node_modules/core-js/library/modules/$.uid.js","node_modules/core-js/library/modules/$.wks.js","node_modules/core-js/library/modules/es6.object.get-prototype-of.js","node_modules/core-js/library/modules/es6.object.keys.js","node_modules/core-js/library/modules/es6.object.set-prototype-of.js","node_modules/core-js/library/modules/es6.symbol.js","src/policy/Context.js","src/policy/context/CommonCtx.js","src/policy/context/MessageNodeCtx.js","src/utils/utils.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","MessageNodeCtx","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","default","__esModule","core-js/library/fn/json/stringify","2","core-js/library/fn/object/create","3","core-js/library/fn/object/define-property","4","core-js/library/fn/object/get-prototype-of","5","core-js/library/fn/object/keys","6","core-js/library/fn/object/set-prototype-of","7","core-js/library/fn/symbol","8","instance","Constructor","TypeError","9","_interopRequireDefault","obj","_defineProperty","_defineProperty2","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","../core-js/object/define-property","10","_Object$create","_Object$setPrototypeOf","subClass","superClass","constructor","value","__proto__","babel-runtime/core-js/object/create","babel-runtime/core-js/object/set-prototype-of","11","_typeof2","_typeof3","ReferenceError","../helpers/typeof","12","_Symbol","babel-runtime/core-js/symbol","13","core","it","JSON","stringify","apply","arguments","../../modules/$.core","14","$","P","D","create","../../modules/$","15","desc","setDesc","16","Object","getPrototypeOf","../../modules/es6.object.get-prototype-of","17","keys","../../modules/es6.object.keys","18","setPrototypeOf","../../modules/es6.object.set-prototype-of","19","Symbol","../../modules/es6.object.to-string","../../modules/es6.symbol","20","21","isObject","./$.is-object","22","toString","slice","23","version","__e","24","aFunction","fn","that","undefined","b","c","./$.a-function","25","26","defineProperty","get","./$.fails","27","getKeys","getSymbols","symbols","isEnum","push","./$","28","ctx","PROTOTYPE","$export","type","name","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","IS_BIND","B","IS_WRAP","W","C","param","Function","./$.core","./$.ctx","./$.global","29","exec","30","toIObject","getNames","windowNames","getOwnPropertyNames","getWindowNames","./$.to-iobject","31","Math","__g","32","hasOwnProperty","33","createDesc","object","./$.descriptors","./$.property-desc","34","cof","propertyIsEnumerable","split","./$.cof","35","Array","isArray","arg","36","37","$Object","getProto","getDesc","getOwnPropertyDescriptor","setDescs","getOwnPropertySymbols","each","forEach","38","el","O","index","39","40","fails","KEY","exp","./$.export","41","bitmap","42","./$.hide","43","anObject","check","proto","set","test","buggy","./$.an-object","44","def","has","TAG","tag","stat","./$.has","./$.wks","45","SHARED","store","46","IObject","defined","./$.defined","./$.iobject","47","48","id","px","random","concat","49","uid","./$.shared","./$.uid","50","toObject","$getPrototypeOf","./$.object-sap","./$.to-object","51","$keys","52","./$.set-proto","53","54","DESCRIPTORS","redefine","$fails","shared","setToStringTag","wks","keyOf","$names","enumKeys","_create","$Symbol","$JSON","_stringify","setter","HIDDEN","SymbolRegistry","AllSymbols","useNative","ObjectProto","setSymbolDesc","protoDesc","wrap","sym","_k","isSymbol","$defineProperty","$defineProperties","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","names","result","$getOwnPropertySymbols","$stringify","replacer","$replacer","args","$$","buggyJSON","symbolStatics","for","keyFor","useSetter","useSimple","./$.enum-keys","./$.get-names","./$.is-array","./$.keyof","./$.library","./$.redefine","./$.set-to-string-tag","55","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","Context","loadPolicies","addSubscriptionPolicy","isToVerify","getApplicablePolicies","applyPolicies","authorise","babel-runtime/helpers/classCallCheck","babel-runtime/helpers/createClass","56","_getPrototypeOf","_getPrototypeOf2","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_Context2","_Context3","_utils","CommonCtx","_Context","_this2","_this","policies","groups","message","policiesResult","applicablePolicies","pdp","evaluate","body","auth","pep","enforce","date","Date","day","String","getDate","month","getMonth","getFullYear","scope","groupName","myGroups","members","now","minutes","getMinutes","parseInt","getHours","getDay","_dateAttribute","_getDate","params","_domainAttribute","divideEmail","identity","userProfile","username","domain","_sourceAttribute","_timeAttribute","_getTime","_weekdayAttribute","_getWeekDay","../../utils/utils","../Context","babel-runtime/core-js/object/get-prototype-of","babel-runtime/helpers/inherits","babel-runtime/helpers/possibleConstructorReturn","57","_CommonCtx2","_CommonCtx3","_CommonCtx","myPolicies","messageAccepted","groupAttribute","_getList","group","./CommonCtx","58","divideURL","url","re","subst","parts","replace","email","indexOfAt","indexOf","substring","emptyObject","_keys2","deepClone","parse","_stringify2","getUserURLFromEmail","userEmail","getUserEmailFromURL","userURL","convertToUserURL","identifier","dividedURL","isDataObjectURL","schemasToIgnore","splitURL","urlSchema","_keys","babel-runtime/core-js/json/stringify","babel-runtime/core-js/object/keys"],"mappings":"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","file":"MessageNodeCtx.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.MessageNodeCtx = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n},{\"core-js/library/fn/json/stringify\":13}],2:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n},{\"core-js/library/fn/object/create\":14}],3:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n},{\"core-js/library/fn/object/define-property\":15}],4:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };\n},{\"core-js/library/fn/object/get-prototype-of\":16}],5:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n},{\"core-js/library/fn/object/keys\":17}],6:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n},{\"core-js/library/fn/object/set-prototype-of\":18}],7:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n},{\"core-js/library/fn/symbol\":19}],8:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n},{}],9:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n},{\"../core-js/object/define-property\":3}],10:[function(require,module,exports){\n\"use strict\";\n\nvar _Object$create = require(\"babel-runtime/core-js/object/create\")[\"default\"];\n\nvar _Object$setPrototypeOf = require(\"babel-runtime/core-js/object/set-prototype-of\")[\"default\"];\n\nexports[\"default\"] = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = _Object$create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _Object$setPrototypeOf ? _Object$setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nexports.__esModule = true;\n},{\"babel-runtime/core-js/object/create\":2,\"babel-runtime/core-js/object/set-prototype-of\":6}],11:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n},{\"../helpers/typeof\":12}],12:[function(require,module,exports){\n\"use strict\";\n\nvar _Symbol = require(\"babel-runtime/core-js/symbol\")[\"default\"];\n\nexports[\"default\"] = function (obj) {\n  return obj && obj.constructor === _Symbol ? \"symbol\" : typeof obj;\n};\n\nexports.__esModule = true;\n},{\"babel-runtime/core-js/symbol\":7}],13:[function(require,module,exports){\nvar core = require('../../modules/$.core');\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return (core.JSON && core.JSON.stringify || JSON.stringify).apply(JSON, arguments);\n};\n},{\"../../modules/$.core\":23}],14:[function(require,module,exports){\nvar $ = require('../../modules/$');\nmodule.exports = function create(P, D){\n  return $.create(P, D);\n};\n},{\"../../modules/$\":37}],15:[function(require,module,exports){\nvar $ = require('../../modules/$');\nmodule.exports = function defineProperty(it, key, desc){\n  return $.setDesc(it, key, desc);\n};\n},{\"../../modules/$\":37}],16:[function(require,module,exports){\nrequire('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/$.core').Object.getPrototypeOf;\n},{\"../../modules/$.core\":23,\"../../modules/es6.object.get-prototype-of\":50}],17:[function(require,module,exports){\nrequire('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/$.core').Object.keys;\n},{\"../../modules/$.core\":23,\"../../modules/es6.object.keys\":51}],18:[function(require,module,exports){\nrequire('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/$.core').Object.setPrototypeOf;\n},{\"../../modules/$.core\":23,\"../../modules/es6.object.set-prototype-of\":52}],19:[function(require,module,exports){\nrequire('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nmodule.exports = require('../../modules/$.core').Symbol;\n},{\"../../modules/$.core\":23,\"../../modules/es6.object.to-string\":53,\"../../modules/es6.symbol\":54}],20:[function(require,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],21:[function(require,module,exports){\nvar isObject = require('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n},{\"./$.is-object\":36}],22:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n},{}],23:[function(require,module,exports){\nvar core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],24:[function(require,module,exports){\n// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"./$.a-function\":20}],25:[function(require,module,exports){\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n},{}],26:[function(require,module,exports){\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./$.fails\":29}],27:[function(require,module,exports){\n// all enumerable object keys, includes symbols\nvar $ = require('./$');\nmodule.exports = function(it){\n  var keys       = $.getKeys(it)\n    , getSymbols = $.getSymbols;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = $.isEnum\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))keys.push(key);\n  }\n  return keys;\n};\n},{\"./$\":37}],28:[function(require,module,exports){\nvar global    = require('./$.global')\n  , core      = require('./$.core')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;\n},{\"./$.core\":23,\"./$.ctx\":24,\"./$.global\":31}],29:[function(require,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],30:[function(require,module,exports){\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./$.to-iobject')\n  , getNames  = require('./$').getNames\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return getNames(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.get = function getOwnPropertyNames(it){\n  if(windowNames && toString.call(it) == '[object Window]')return getWindowNames(it);\n  return getNames(toIObject(it));\n};\n},{\"./$\":37,\"./$.to-iobject\":46}],31:[function(require,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],32:[function(require,module,exports){\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n},{}],33:[function(require,module,exports){\nvar $          = require('./$')\n  , createDesc = require('./$.property-desc');\nmodule.exports = require('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n},{\"./$\":37,\"./$.descriptors\":26,\"./$.property-desc\":41}],34:[function(require,module,exports){\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n},{\"./$.cof\":22}],35:[function(require,module,exports){\n// 7.2.2 IsArray(argument)\nvar cof = require('./$.cof');\nmodule.exports = Array.isArray || function(arg){\n  return cof(arg) == 'Array';\n};\n},{\"./$.cof\":22}],36:[function(require,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],37:[function(require,module,exports){\nvar $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};\n},{}],38:[function(require,module,exports){\nvar $         = require('./$')\n  , toIObject = require('./$.to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = $.getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n},{\"./$\":37,\"./$.to-iobject\":46}],39:[function(require,module,exports){\nmodule.exports = true;\n},{}],40:[function(require,module,exports){\n// most Object methods by ES6 should accept primitives\nvar $export = require('./$.export')\n  , core    = require('./$.core')\n  , fails   = require('./$.fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n},{\"./$.core\":23,\"./$.export\":28,\"./$.fails\":29}],41:[function(require,module,exports){\nmodule.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n},{}],42:[function(require,module,exports){\nmodule.exports = require('./$.hide');\n},{\"./$.hide\":33}],43:[function(require,module,exports){\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar getDesc  = require('./$').getDesc\n  , isObject = require('./$.is-object')\n  , anObject = require('./$.an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./$.ctx')(Function.call, getDesc(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n},{\"./$\":37,\"./$.an-object\":21,\"./$.ctx\":24,\"./$.is-object\":36}],44:[function(require,module,exports){\nvar def = require('./$').setDesc\n  , has = require('./$.has')\n  , TAG = require('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n},{\"./$\":37,\"./$.has\":32,\"./$.wks\":49}],45:[function(require,module,exports){\nvar global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n},{\"./$.global\":31}],46:[function(require,module,exports){\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./$.iobject')\n  , defined = require('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n},{\"./$.defined\":25,\"./$.iobject\":34}],47:[function(require,module,exports){\n// 7.1.13 ToObject(argument)\nvar defined = require('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n},{\"./$.defined\":25}],48:[function(require,module,exports){\nvar id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n},{}],49:[function(require,module,exports){\nvar store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};\n},{\"./$.global\":31,\"./$.shared\":45,\"./$.uid\":48}],50:[function(require,module,exports){\n// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./$.to-object');\n\nrequire('./$.object-sap')('getPrototypeOf', function($getPrototypeOf){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});\n},{\"./$.object-sap\":40,\"./$.to-object\":47}],51:[function(require,module,exports){\n// 19.1.2.14 Object.keys(O)\nvar toObject = require('./$.to-object');\n\nrequire('./$.object-sap')('keys', function($keys){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n},{\"./$.object-sap\":40,\"./$.to-object\":47}],52:[function(require,module,exports){\n// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./$.export');\n$export($export.S, 'Object', {setPrototypeOf: require('./$.set-proto').set});\n},{\"./$.export\":28,\"./$.set-proto\":43}],53:[function(require,module,exports){\n\n},{}],54:[function(require,module,exports){\n'use strict';\n// ECMAScript 6 symbols shim\nvar $              = require('./$')\n  , global         = require('./$.global')\n  , has            = require('./$.has')\n  , DESCRIPTORS    = require('./$.descriptors')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , $fails         = require('./$.fails')\n  , shared         = require('./$.shared')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , uid            = require('./$.uid')\n  , wks            = require('./$.wks')\n  , keyOf          = require('./$.keyof')\n  , $names         = require('./$.get-names')\n  , enumKeys       = require('./$.enum-keys')\n  , isArray        = require('./$.is-array')\n  , anObject       = require('./$.an-object')\n  , toIObject      = require('./$.to-iobject')\n  , createDesc     = require('./$.property-desc')\n  , getDesc        = $.getDesc\n  , setDesc        = $.setDesc\n  , _create        = $.create\n  , getNames       = $names.get\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , setter         = false\n  , HIDDEN         = wks('_hidden')\n  , isEnum         = $.isEnum\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , useNative      = typeof $Symbol == 'function'\n  , ObjectProto    = Object.prototype;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(setDesc({}, 'a', {\n    get: function(){ return setDesc(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = getDesc(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  setDesc(it, key, D);\n  if(protoDesc && it !== ObjectProto)setDesc(ObjectProto, key, protoDesc);\n} : setDesc;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol.prototype);\n  sym._k = tag;\n  DESCRIPTORS && setter && setSymbolDesc(ObjectProto, tag, {\n    configurable: true,\n    set: function(value){\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    }\n  });\n  return sym;\n};\n\nvar isSymbol = function(it){\n  return typeof it == 'symbol';\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(D && has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))setDesc(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return setDesc(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key);\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key]\n    ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  var D = getDesc(it = toIObject(it), key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(!has(AllSymbols, key = names[i++]) && key != HIDDEN)result.push(key);\n  return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(has(AllSymbols, key = names[i++]))result.push(AllSymbols[key]);\n  return result;\n};\nvar $stringify = function stringify(it){\n  if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n  var args = [it]\n    , i    = 1\n    , $$   = arguments\n    , replacer, $replacer;\n  while($$.length > i)args.push($$[i++]);\n  replacer = args[1];\n  if(typeof replacer == 'function')$replacer = replacer;\n  if($replacer || !isArray(replacer))replacer = function(key, value){\n    if($replacer)value = $replacer.call(this, key, value);\n    if(!isSymbol(value))return value;\n  };\n  args[1] = replacer;\n  return _stringify.apply($JSON, args);\n};\nvar buggyJSON = $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n});\n\n// 19.4.1.1 Symbol([description])\nif(!useNative){\n  $Symbol = function Symbol(){\n    if(isSymbol(this))throw TypeError('Symbol is not a constructor');\n    return wrap(uid(arguments.length > 0 ? arguments[0] : undefined));\n  };\n  redefine($Symbol.prototype, 'toString', function toString(){\n    return this._k;\n  });\n\n  isSymbol = function(it){\n    return it instanceof $Symbol;\n  };\n\n  $.create     = $create;\n  $.isEnum     = $propertyIsEnumerable;\n  $.getDesc    = $getOwnPropertyDescriptor;\n  $.setDesc    = $defineProperty;\n  $.setDescs   = $defineProperties;\n  $.getNames   = $names.get = $getOwnPropertyNames;\n  $.getSymbols = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./$.library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n}\n\nvar symbolStatics = {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    return keyOf(SymbolRegistry, key);\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n};\n// 19.4.2.2 Symbol.hasInstance\n// 19.4.2.3 Symbol.isConcatSpreadable\n// 19.4.2.4 Symbol.iterator\n// 19.4.2.6 Symbol.match\n// 19.4.2.8 Symbol.replace\n// 19.4.2.9 Symbol.search\n// 19.4.2.10 Symbol.species\n// 19.4.2.11 Symbol.split\n// 19.4.2.12 Symbol.toPrimitive\n// 19.4.2.13 Symbol.toStringTag\n// 19.4.2.14 Symbol.unscopables\n$.each.call((\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,' +\n  'species,split,toPrimitive,toStringTag,unscopables'\n).split(','), function(it){\n  var sym = wks(it);\n  symbolStatics[it] = useNative ? sym : wrap(sym);\n});\n\nsetter = true;\n\n$export($export.G + $export.W, {Symbol: $Symbol});\n\n$export($export.S, 'Symbol', symbolStatics);\n\n$export($export.S + $export.F * !useNative, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!useNative || buggyJSON), 'JSON', {stringify: $stringify});\n\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n},{\"./$\":37,\"./$.an-object\":21,\"./$.descriptors\":26,\"./$.enum-keys\":27,\"./$.export\":28,\"./$.fails\":29,\"./$.get-names\":30,\"./$.global\":31,\"./$.has\":32,\"./$.is-array\":35,\"./$.keyof\":38,\"./$.library\":39,\"./$.property-desc\":41,\"./$.redefine\":42,\"./$.set-to-string-tag\":44,\"./$.shared\":45,\"./$.to-iobject\":46,\"./$.uid\":48,\"./$.wks\":49}],55:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Context = function () {\n  function Context() {\n    (0, _classCallCheck3.default)(this, Context);\n\n    if (this.constructor === Context) {\n      throw new TypeError('Can not construct abstract class.');\n    }\n    if (this.constructor === Context.prototype.constructor) {\n      throw new TypeError('Please implement abstract method constructor.');\n    }\n  }\n\n  (0, _createClass3.default)(Context, null, [{\n    key: 'loadPolicies',\n    value: function loadPolicies() {\n      if (this === Context) {\n        throw new TypeError('Can not call static abstract method loadPolicies.');\n      } else if (this.loadPolicies === Context.loadPolicies) {\n        throw new TypeError('Please implement static abstract method loadPolicies.');\n      } else {\n        throw new TypeError('Do not call static abstract method loadPolicies from child.');\n      }\n    }\n  }, {\n    key: 'addSubscriptionPolicy',\n    value: function addSubscriptionPolicy() {\n      if (this === Context) {\n        throw new TypeError('Can not call static abstract method addSubscriptionPolicy.');\n      } else if (this.addSubscriptionPolicy === Context.addSubscriptionPolicy) {\n        throw new TypeError('Please implement static abstract method addSubscriptionPolicy.');\n      } else {\n        throw new TypeError('Do not call static abstract method addSubscriptionPolicy from child.');\n      }\n    }\n  }, {\n    key: 'isToVerify',\n    value: function isToVerify() {\n      if (this === Context) {\n        throw new TypeError('Can not call static abstract method isToVerify.');\n      } else if (this.isToVerify === Context.isToVerify) {\n        throw new TypeError('Please implement static abstract method isToVerify.');\n      } else {\n        throw new TypeError('Do not call static abstract method isToVerify from child.');\n      }\n    }\n  }, {\n    key: 'getApplicablePolicies',\n    value: function getApplicablePolicies() {\n      if (this === Context) {\n        throw new TypeError('Can not call static abstract method getApplicablePolicies.');\n      } else if (this.getApplicablePolicies === Context.getApplicablePolicies) {\n        throw new TypeError('Please implement static abstract method getApplicablePolicies.');\n      } else {\n        throw new TypeError('Do not call static abstract method getApplicablePolicies from child.');\n      }\n    }\n  }, {\n    key: 'applyPolicies',\n    value: function applyPolicies() {\n      if (this === Context) {\n        throw new TypeError('Can not call static abstract method applyPolicies.');\n      } else if (this.applyPolicies === Context.applyPolicies) {\n        throw new TypeError('Please implement static abstract method applyPolicies.');\n      } else {\n        throw new TypeError('Do not call static abstract method applyPolicies from child.');\n      }\n    }\n  }, {\n    key: 'authorise',\n    value: function authorise() {\n      if (this === Context) {\n        throw new TypeError('Can not call static abstract method authorise.');\n      } else if (this.authorise === Context.authorise) {\n        throw new TypeError('Please implement static abstract method authorise.');\n      } else {\n        throw new TypeError('Do not call static abstract method authorise from child.');\n      }\n    }\n  }]);\n  return Context;\n}();\n\nexports.default = Context;\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/helpers/classCallCheck\":8,\"babel-runtime/helpers/createClass\":9}],56:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _Context2 = require('../Context');\n\nvar _Context3 = _interopRequireDefault(_Context2);\n\nvar _utils = require('../../utils/utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n//import persistenceManager from '../../persistence/PersistenceManager';\n\nvar CommonCtx = function (_Context) {\n  (0, _inherits3.default)(CommonCtx, _Context);\n\n  function CommonCtx() {\n    (0, _classCallCheck3.default)(this, CommonCtx);\n\n    var _this2 = (0, _possibleConstructorReturn3.default)(this, (0, _getPrototypeOf2.default)(CommonCtx).call(this));\n\n    var _this = _this2;\n    _this.policies = _this.loadPolicies();\n    _this.groups = {};\n    return _this2;\n  }\n\n  (0, _createClass3.default)(CommonCtx, [{\n    key: 'applyPolicies',\n    value: function applyPolicies(message) {\n      var _this = this;\n      var policiesResult = [true, []];\n      var applicablePolicies = _this.getApplicablePolicies(message);\n      policiesResult = _this.pdp.evaluate(message, applicablePolicies);\n      message.body.auth = applicablePolicies.length !== 0;\n      _this.pep.enforce(policiesResult);\n      return { message: message, policiesResult: policiesResult };\n    }\n  }, {\n    key: '_getDate',\n    value: function _getDate() {\n      var date = new Date();\n      var day = String(date.getDate());\n      if (day.length === 1) {\n        day = '0' + day;\n      }\n\n      var month = String(date.getMonth() + 1);\n      if (month.length === 1) {\n        month = '0' + month;\n      }\n\n      return day + '/' + month + '/' + date.getFullYear();\n    }\n  }, {\n    key: '_getList',\n    value: function _getList(scope, groupName) {\n      var _this = this;\n      var myGroups = _this.groups;\n      var members = [];\n      if (myGroups[scope] !== undefined && myGroups[scope][groupName] !== undefined) {\n        members = myGroups[scope][groupName];\n      }\n      return members;\n    }\n  }, {\n    key: '_getTime',\n    value: function _getTime() {\n      var now = new Date();\n      var minutes = String(now.getMinutes());\n      if (minutes.length === 1) {\n        minutes = '0' + minutes;\n      }\n      return parseInt(String(now.getHours()) + minutes);\n    }\n  }, {\n    key: '_getWeekDay',\n    value: function _getWeekDay() {\n      return String(new Date().getDay());\n    }\n  }, {\n    key: 'date',\n    set: function set(now) {\n      var _this = this;\n      if (!now.message) {\n        _this._dateAttribute = typeof now === 'string' ? now : _this._getDate();\n      }\n    },\n    get: function get() {\n      var _this = this;\n      return _this._dateAttribute;\n    }\n  }, {\n    key: 'domain',\n    set: function set(params) {\n      var _this = this;\n      _this._domainAttribute = (0, _utils.divideEmail)(params.message.body.identity.userProfile.username).domain;\n    },\n    get: function get() {\n      var _this = this;\n      return _this._domainAttribute;\n    }\n  }, {\n    key: 'source',\n    set: function set(params) {\n      var _this = this;\n      _this._sourceAttribute = params.message.body.identity.userProfile.username;\n    },\n    get: function get() {\n      var _this = this;\n      return _this._sourceAttribute;\n    }\n  }, {\n    key: 'time',\n    set: function set(now) {\n      var _this = this;\n      if (!now.message) {\n        _this._timeAttribute = now ? now : _this._getTime();\n      }\n    },\n    get: function get() {\n      var _this = this;\n      return _this._timeAttribute;\n    }\n  }, {\n    key: 'weekday',\n    set: function set(now) {\n      var _this = this;\n      if (!now.message) {\n        _this._weekdayAttribute = now ? now : _this._getWeekDay();\n      }\n    },\n    get: function get() {\n      var _this = this;\n      return _this._weekdayAttribute;\n    }\n  }]);\n  return CommonCtx;\n}(_Context3.default);\n\nexports.default = CommonCtx;\nmodule.exports = exports['default'];\n\n},{\"../../utils/utils\":58,\"../Context\":55,\"babel-runtime/core-js/object/get-prototype-of\":4,\"babel-runtime/helpers/classCallCheck\":8,\"babel-runtime/helpers/createClass\":9,\"babel-runtime/helpers/inherits\":10,\"babel-runtime/helpers/possibleConstructorReturn\":11}],57:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = require('babel-runtime/core-js/object/get-prototype-of');\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _CommonCtx2 = require('./CommonCtx');\n\nvar _CommonCtx3 = _interopRequireDefault(_CommonCtx2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar MessageNodeCtx = function (_CommonCtx) {\n  (0, _inherits3.default)(MessageNodeCtx, _CommonCtx);\n\n  function MessageNodeCtx() {\n    (0, _classCallCheck3.default)(this, MessageNodeCtx);\n    return (0, _possibleConstructorReturn3.default)(this, (0, _getPrototypeOf2.default)(MessageNodeCtx).call(this));\n  }\n\n  (0, _createClass3.default)(MessageNodeCtx, [{\n    key: 'loadPolicies',\n    value: function loadPolicies() {\n      return {};\n    }\n\n    /**\n    * Returns the policies associated with a scope.\n    * @param   {String} scope\n    * @return  {Array}  policies\n    */\n\n    //TODO: can policies depend on the hyperty name? Domain Registry interaction\n\n  }, {\n    key: 'getApplicablePolicies',\n    value: function getApplicablePolicies() {\n      var _this = this;\n      var myPolicies = _this.policies;\n      var policies = [];\n\n      for (var i in myPolicies) {\n        policies.push.apply(policies, myPolicies[i]);\n      }\n\n      return policies;\n    }\n  }, {\n    key: 'authorise',\n    value: function authorise(message) {\n      var _this = this;\n      message.body = message.body || {};\n      var result = void 0;\n\n      var isToVerify = _this.isToVerify(message);\n      if (isToVerify) {\n\n        result = _this.applyPolicies(message);\n        var messageAccepted = result.policiesResult[0];\n        return messageAccepted;\n      } else {\n        return true;\n      }\n    }\n\n    //TODO: verify if scheme is not 'runtime', 'hyperty-runtime' or 'domain'\n\n  }, {\n    key: 'isToVerify',\n    value: function isToVerify() {\n      return true;\n    }\n  }, {\n    key: 'group',\n    set: function set(params) {\n      var _this = this;\n      _this.groupAttribute = _this._getList(params.scope, params.group);\n    },\n    get: function get() {\n      var _this = this;\n      return _this.groupAttribute;\n    }\n  }]);\n  return MessageNodeCtx;\n}(_CommonCtx3.default);\n\nexports.default = MessageNodeCtx;\nmodule.exports = exports['default'];\n\n},{\"./CommonCtx\":56,\"babel-runtime/core-js/object/get-prototype-of\":4,\"babel-runtime/helpers/classCallCheck\":8,\"babel-runtime/helpers/createClass\":9,\"babel-runtime/helpers/inherits\":10,\"babel-runtime/helpers/possibleConstructorReturn\":11}],58:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _stringify = require('babel-runtime/core-js/json/stringify');\n\nvar _stringify2 = _interopRequireDefault(_stringify);\n\nvar _keys = require('babel-runtime/core-js/object/keys');\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nexports.divideURL = divideURL;\nexports.divideEmail = divideEmail;\nexports.emptyObject = emptyObject;\nexports.deepClone = deepClone;\nexports.getUserURLFromEmail = getUserURLFromEmail;\nexports.getUserEmailFromURL = getUserEmailFromURL;\nexports.convertToUserURL = convertToUserURL;\nexports.isDataObjectURL = isDataObjectURL;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n/**\n * Support module with some functions will be useful\n * @module utils\n */\n\n/**\n * @typedef divideURL\n * @type Object\n * @property {string} type The type of URL\n * @property {string} domain The domain of URL\n * @property {string} identity The identity of URL\n */\n\n/**\n * Divide an url in type, domain and identity\n * @param  {URL.URL} url - url address\n * @return {divideURL} the result of divideURL\n */\nfunction divideURL(url) {\n\n  if (!url) throw Error('URL is needed to split');\n\n  // let re = /([a-zA-Z-]*)?:\\/\\/(?:\\.)?([-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b)*(\\/[\\/\\d\\w\\.-]*)*(?:[\\?])*(.+)*/gi;\n  var re = /([a-zA-Z-]*):\\/\\/(?:\\.)?([-a-zA-Z0-9@:%._\\+~#=]{2,256})([-a-zA-Z0-9@:%._\\+~#=\\/]*)/gi;\n  var subst = '$1,$2,$3';\n  var parts = url.replace(re, subst).split(',');\n\n  // If the url has no protocol, the default protocol set is https\n  if (parts[0] === url) {\n    parts[0] = 'https';\n    parts[1] = url;\n  }\n\n  var result = {\n    type: parts[0],\n    domain: parts[1],\n    identity: parts[2]\n  };\n\n  return result;\n}\n\nfunction divideEmail(email) {\n  var indexOfAt = email.indexOf('@');\n\n  var result = {\n    username: email.substring(0, indexOfAt),\n    domain: email.substring(indexOfAt + 1, email.length)\n  };\n\n  return result;\n}\n\n/**\n * Check if an Object is empty\n * @param  {Object} object Object to be checked\n * @return {Boolean}       status of Object, empty or not (true|false);\n */\nfunction emptyObject(object) {\n  return (0, _keys2.default)(object).length > 0 ? false : true;\n}\n\n/**\n * Make a COPY of the original data\n * @param  {Object}  obj - object to be cloned\n * @return {Object}\n */\nfunction deepClone(obj) {\n  //TODO: simple but inefficient JSON deep clone...\n  if (obj) return JSON.parse((0, _stringify2.default)(obj));\n}\n\n/**\n * Obtains the user URL that corresponds to a given email\n * @param  {string} userEmail The user email\n * @return {URL.URL} userURL The user URL\n */\nfunction getUserURLFromEmail(userEmail) {\n  var indexOfAt = userEmail.indexOf('@');\n  return 'user://' + userEmail.substring(indexOfAt + 1, userEmail.length) + '/' + userEmail.substring(0, indexOfAt);\n}\n\n/**\n * Obtains the user email that corresponds to a given URL\n * @param  {URL.URL} userURL The user URL\n * @return {string} userEmail The user email\n */\nfunction getUserEmailFromURL(userURL) {\n  var url = divideURL(userURL);\n  return url.identity.replace('/', '') + '@' + url.domain; // identity field has '/exampleID' instead of 'exampleID'\n}\n\n/**\n * Check if the user identifier is already in the URL format, if not, convert to URL format\n * @param  {string}   identifier  user identifier\n * @return {string}   userURL    the user URL\n */\nfunction convertToUserURL(identifier) {\n\n  // check if the identifier is already in the url format\n  if (identifier.substring(0, 7) === 'user://') {\n    var dividedURL = divideURL(identifier);\n\n    //check if the url is well formated\n    if (dividedURL.domain && dividedURL.identity) {\n      return identifier;\n    } else {\n      throw 'userURL with wrong format';\n    }\n\n    //if not, convert the user email to URL format\n  } else {\n      return getUserURLFromEmail(identifier);\n    }\n}\n\nfunction isDataObjectURL(url) {\n  var schemasToIgnore = ['domain-idp', 'runtime', 'domain', 'hyperty'];\n  var splitURL = url.split('://');\n  var urlSchema = splitURL[0];\n\n  return schemasToIgnore.indexOf(urlSchema) === -1;\n}\n\n},{\"babel-runtime/core-js/json/stringify\":1,\"babel-runtime/core-js/object/keys\":5}]},{},[57])(57)\n});\n\n","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","\"use strict\";\n\nvar _Object$create = require(\"babel-runtime/core-js/object/create\")[\"default\"];\n\nvar _Object$setPrototypeOf = require(\"babel-runtime/core-js/object/set-prototype-of\")[\"default\"];\n\nexports[\"default\"] = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = _Object$create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _Object$setPrototypeOf ? _Object$setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nexports.__esModule = true;","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};","\"use strict\";\n\nvar _Symbol = require(\"babel-runtime/core-js/symbol\")[\"default\"];\n\nexports[\"default\"] = function (obj) {\n  return obj && obj.constructor === _Symbol ? \"symbol\" : typeof obj;\n};\n\nexports.__esModule = true;","var core = require('../../modules/$.core');\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return (core.JSON && core.JSON.stringify || JSON.stringify).apply(JSON, arguments);\n};","var $ = require('../../modules/$');\nmodule.exports = function create(P, D){\n  return $.create(P, D);\n};","var $ = require('../../modules/$');\nmodule.exports = function defineProperty(it, key, desc){\n  return $.setDesc(it, key, desc);\n};","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/$.core').Object.getPrototypeOf;","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/$.core').Object.keys;","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/$.core').Object.setPrototypeOf;","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nmodule.exports = require('../../modules/$.core').Symbol;","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};","var isObject = require('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};","var core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef","// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});","// all enumerable object keys, includes symbols\nvar $ = require('./$');\nmodule.exports = function(it){\n  var keys       = $.getKeys(it)\n    , getSymbols = $.getSymbols;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = $.isEnum\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))keys.push(key);\n  }\n  return keys;\n};","var global    = require('./$.global')\n  , core      = require('./$.core')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./$.to-iobject')\n  , getNames  = require('./$').getNames\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return getNames(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.get = function getOwnPropertyNames(it){\n  if(windowNames && toString.call(it) == '[object Window]')return getWindowNames(it);\n  return getNames(toIObject(it));\n};","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};","var $          = require('./$')\n  , createDesc = require('./$.property-desc');\nmodule.exports = require('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};","// 7.2.2 IsArray(argument)\nvar cof = require('./$.cof');\nmodule.exports = Array.isArray || function(arg){\n  return cof(arg) == 'Array';\n};","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};","var $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};","var $         = require('./$')\n  , toIObject = require('./$.to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = $.getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};","module.exports = true;","// most Object methods by ES6 should accept primitives\nvar $export = require('./$.export')\n  , core    = require('./$.core')\n  , fails   = require('./$.fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};","module.exports = require('./$.hide');","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar getDesc  = require('./$').getDesc\n  , isObject = require('./$.is-object')\n  , anObject = require('./$.an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./$.ctx')(Function.call, getDesc(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};","var def = require('./$').setDesc\n  , has = require('./$.has')\n  , TAG = require('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};","var global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./$.iobject')\n  , defined = require('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};","// 7.1.13 ToObject(argument)\nvar defined = require('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};","var store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./$.to-object');\n\nrequire('./$.object-sap')('getPrototypeOf', function($getPrototypeOf){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./$.to-object');\n\nrequire('./$.object-sap')('keys', function($keys){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./$.export');\n$export($export.S, 'Object', {setPrototypeOf: require('./$.set-proto').set});","'use strict';\n// ECMAScript 6 symbols shim\nvar $              = require('./$')\n  , global         = require('./$.global')\n  , has            = require('./$.has')\n  , DESCRIPTORS    = require('./$.descriptors')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , $fails         = require('./$.fails')\n  , shared         = require('./$.shared')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , uid            = require('./$.uid')\n  , wks            = require('./$.wks')\n  , keyOf          = require('./$.keyof')\n  , $names         = require('./$.get-names')\n  , enumKeys       = require('./$.enum-keys')\n  , isArray        = require('./$.is-array')\n  , anObject       = require('./$.an-object')\n  , toIObject      = require('./$.to-iobject')\n  , createDesc     = require('./$.property-desc')\n  , getDesc        = $.getDesc\n  , setDesc        = $.setDesc\n  , _create        = $.create\n  , getNames       = $names.get\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , setter         = false\n  , HIDDEN         = wks('_hidden')\n  , isEnum         = $.isEnum\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , useNative      = typeof $Symbol == 'function'\n  , ObjectProto    = Object.prototype;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(setDesc({}, 'a', {\n    get: function(){ return setDesc(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = getDesc(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  setDesc(it, key, D);\n  if(protoDesc && it !== ObjectProto)setDesc(ObjectProto, key, protoDesc);\n} : setDesc;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol.prototype);\n  sym._k = tag;\n  DESCRIPTORS && setter && setSymbolDesc(ObjectProto, tag, {\n    configurable: true,\n    set: function(value){\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    }\n  });\n  return sym;\n};\n\nvar isSymbol = function(it){\n  return typeof it == 'symbol';\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(D && has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))setDesc(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return setDesc(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key);\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key]\n    ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  var D = getDesc(it = toIObject(it), key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(!has(AllSymbols, key = names[i++]) && key != HIDDEN)result.push(key);\n  return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(has(AllSymbols, key = names[i++]))result.push(AllSymbols[key]);\n  return result;\n};\nvar $stringify = function stringify(it){\n  if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n  var args = [it]\n    , i    = 1\n    , $$   = arguments\n    , replacer, $replacer;\n  while($$.length > i)args.push($$[i++]);\n  replacer = args[1];\n  if(typeof replacer == 'function')$replacer = replacer;\n  if($replacer || !isArray(replacer))replacer = function(key, value){\n    if($replacer)value = $replacer.call(this, key, value);\n    if(!isSymbol(value))return value;\n  };\n  args[1] = replacer;\n  return _stringify.apply($JSON, args);\n};\nvar buggyJSON = $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n});\n\n// 19.4.1.1 Symbol([description])\nif(!useNative){\n  $Symbol = function Symbol(){\n    if(isSymbol(this))throw TypeError('Symbol is not a constructor');\n    return wrap(uid(arguments.length > 0 ? arguments[0] : undefined));\n  };\n  redefine($Symbol.prototype, 'toString', function toString(){\n    return this._k;\n  });\n\n  isSymbol = function(it){\n    return it instanceof $Symbol;\n  };\n\n  $.create     = $create;\n  $.isEnum     = $propertyIsEnumerable;\n  $.getDesc    = $getOwnPropertyDescriptor;\n  $.setDesc    = $defineProperty;\n  $.setDescs   = $defineProperties;\n  $.getNames   = $names.get = $getOwnPropertyNames;\n  $.getSymbols = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./$.library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n}\n\nvar symbolStatics = {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    return keyOf(SymbolRegistry, key);\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n};\n// 19.4.2.2 Symbol.hasInstance\n// 19.4.2.3 Symbol.isConcatSpreadable\n// 19.4.2.4 Symbol.iterator\n// 19.4.2.6 Symbol.match\n// 19.4.2.8 Symbol.replace\n// 19.4.2.9 Symbol.search\n// 19.4.2.10 Symbol.species\n// 19.4.2.11 Symbol.split\n// 19.4.2.12 Symbol.toPrimitive\n// 19.4.2.13 Symbol.toStringTag\n// 19.4.2.14 Symbol.unscopables\n$.each.call((\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,' +\n  'species,split,toPrimitive,toStringTag,unscopables'\n).split(','), function(it){\n  var sym = wks(it);\n  symbolStatics[it] = useNative ? sym : wrap(sym);\n});\n\nsetter = true;\n\n$export($export.G + $export.W, {Symbol: $Symbol});\n\n$export($export.S, 'Symbol', symbolStatics);\n\n$export($export.S + $export.F * !useNative, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!useNative || buggyJSON), 'JSON', {stringify: $stringify});\n\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);","class Context {\n\n  constructor() {\n    if (this.constructor === Context) {\n      throw new TypeError('Can not construct abstract class.');\n    }\n    if (this.constructor === Context.prototype.constructor) {\n      throw new TypeError('Please implement abstract method constructor.');\n    }\n  }\n\n  static loadPolicies() {\n    if (this === Context) {\n      throw new TypeError('Can not call static abstract method loadPolicies.');\n    } else if (this.loadPolicies === Context.loadPolicies) {\n      throw new TypeError('Please implement static abstract method loadPolicies.');\n    } else {\n      throw new TypeError('Do not call static abstract method loadPolicies from child.');\n    }\n  }\n\n  static addSubscriptionPolicy() {\n    if (this === Context) {\n      throw new TypeError('Can not call static abstract method addSubscriptionPolicy.');\n    } else if (this.addSubscriptionPolicy === Context.addSubscriptionPolicy) {\n      throw new TypeError('Please implement static abstract method addSubscriptionPolicy.');\n    } else {\n      throw new TypeError('Do not call static abstract method addSubscriptionPolicy from child.');\n    }\n  }\n\n  static isToVerify() {\n    if (this === Context) {\n      throw new TypeError('Can not call static abstract method isToVerify.');\n    } else if (this.isToVerify === Context.isToVerify) {\n      throw new TypeError('Please implement static abstract method isToVerify.');\n    } else {\n      throw new TypeError('Do not call static abstract method isToVerify from child.');\n    }\n  }\n\n  static getApplicablePolicies() {\n    if (this === Context) {\n      throw new TypeError('Can not call static abstract method getApplicablePolicies.');\n    } else if (this.getApplicablePolicies === Context.getApplicablePolicies) {\n      throw new TypeError('Please implement static abstract method getApplicablePolicies.');\n    } else {\n      throw new TypeError('Do not call static abstract method getApplicablePolicies from child.');\n    }\n  }\n\n  static applyPolicies() {\n    if (this === Context) {\n      throw new TypeError('Can not call static abstract method applyPolicies.');\n    } else if (this.applyPolicies === Context.applyPolicies) {\n      throw new TypeError('Please implement static abstract method applyPolicies.');\n    } else {\n      throw new TypeError('Do not call static abstract method applyPolicies from child.');\n    }\n  }\n\n  static authorise() {\n    if (this === Context) {\n      throw new TypeError('Can not call static abstract method authorise.');\n    } else if (this.authorise === Context.authorise) {\n      throw new TypeError('Please implement static abstract method authorise.');\n    } else {\n      throw new TypeError('Do not call static abstract method authorise from child.');\n    }\n  }\n\n}\n\nexport default Context;\n","import Context from '../Context';\nimport {divideEmail} from '../../utils/utils';\n\n//import persistenceManager from '../../persistence/PersistenceManager';\n\nclass CommonCtx extends Context {\n\n  constructor() {\n    super();\n    let _this = this;\n    _this.policies = _this.loadPolicies();\n    _this.groups = {};\n  }\n\n  applyPolicies(message) {\n    let _this = this;\n    let policiesResult = [true, []];\n    let applicablePolicies = _this.getApplicablePolicies(message);\n    policiesResult = _this.pdp.evaluate(message, applicablePolicies);\n    message.body.auth = applicablePolicies.length !== 0;\n    _this.pep.enforce(policiesResult);\n    return { message: message, policiesResult: policiesResult };\n  }\n\n  set date(now) {\n    let _this = this;\n    if (!now.message) {\n      _this._dateAttribute = (typeof now === 'string') ? now : _this._getDate();\n    }\n  }\n\n  set domain(params) {\n    let _this = this;\n    _this._domainAttribute = divideEmail(params.message.body.identity.userProfile.username).domain;\n  }\n\n  set source(params) {\n    let _this = this;\n    _this._sourceAttribute = params.message.body.identity.userProfile.username;\n  }\n\n  set time(now) {\n    let _this = this;\n    if (!now.message) {\n      _this._timeAttribute = (now) ? now : _this._getTime();\n    }\n  }\n\n  set weekday(now) {\n    let _this = this;\n    if (!now.message) {\n      _this._weekdayAttribute = (now) ? now : _this._getWeekDay();\n    }\n  }\n\n  get date() {\n    let _this = this;\n    return _this._dateAttribute;\n  }\n\n  get domain() {\n    let _this = this;\n    return _this._domainAttribute;\n  }\n\n  get source() {\n    let _this = this;\n    return _this._sourceAttribute;\n  }\n\n  get time() {\n    let _this = this;\n    return _this._timeAttribute;\n  }\n\n  get weekday() {\n    let _this = this;\n    return _this._weekdayAttribute;\n  }\n\n  _getDate() {\n    let date = new Date();\n    let day = String(date.getDate());\n    if (day.length === 1) {\n      day = '0' + day;\n    }\n\n    let month = String(date.getMonth() + 1);\n    if (month.length === 1) {\n      month = '0' + month;\n    }\n\n    return day + '/' + month + '/' + date.getFullYear();\n  }\n\n  _getList(scope, groupName) {\n    let _this = this;\n    let myGroups = _this.groups;\n    let members = [];\n    if (myGroups[scope] !== undefined && myGroups[scope][groupName] !== undefined) {\n      members = myGroups[scope][groupName];\n    }\n    return members;\n  }\n\n  _getTime() {\n    let now = new Date();\n    let minutes = String(now.getMinutes());\n    if (minutes.length === 1) {\n      minutes = '0' + minutes;\n    }\n    return parseInt(String(now.getHours()) + minutes);\n  }\n\n  _getWeekDay() {\n    return String(new Date().getDay());\n  }\n\n}\n\nexport default CommonCtx;\n","import CommonCtx from './CommonCtx';\n\nclass MessageNodeCtx extends CommonCtx {\n\n  constructor() {\n    super();\n  }\n\n  loadPolicies() {\n    return {};\n  }\n\n  /**\n  * Returns the policies associated with a scope.\n  * @param   {String} scope\n  * @return  {Array}  policies\n  */\n\n  //TODO: can policies depend on the hyperty name? Domain Registry interaction\n  getApplicablePolicies() {\n    let _this = this;\n    let myPolicies = _this.policies;\n    let policies = [];\n\n    for (let i in myPolicies) {\n      policies.push.apply(policies, myPolicies[i]);\n    }\n\n    return policies;\n  }\n\n  set group(params) {\n    let _this = this;\n    _this.groupAttribute = _this._getList(params.scope, params.group);\n  }\n\n  get group() {\n    let _this = this;\n    return _this.groupAttribute;\n  }\n\n  authorise(message) {\n    let _this = this;\n    message.body = message.body || {};\n    let result;\n\n    let isToVerify = _this.isToVerify(message);\n    if (isToVerify) {\n\n      result = _this.applyPolicies(message);\n      let messageAccepted = result.policiesResult[0];\n      return messageAccepted;\n\n    } else {\n      return true;\n    }\n  }\n\n  //TODO: verify if scheme is not 'runtime', 'hyperty-runtime' or 'domain'\n  isToVerify() {\n    return true;\n  }\n}\n\nexport default MessageNodeCtx;\n","/**\n* Copyright 2016 PT Inovação e Sistemas SA\n* Copyright 2016 INESC-ID\n* Copyright 2016 QUOBIS NETWORKS SL\n* Copyright 2016 FRAUNHOFER-GESELLSCHAFT ZUR FOERDERUNG DER ANGEWANDTEN FORSCHUNG E.V\n* Copyright 2016 ORANGE SA\n* Copyright 2016 Deutsche Telekom AG\n* Copyright 2016 Apizee\n* Copyright 2016 TECHNISCHE UNIVERSITAT BERLIN\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n**/\n/**\n * Support module with some functions will be useful\n * @module utils\n */\n\n/**\n * @typedef divideURL\n * @type Object\n * @property {string} type The type of URL\n * @property {string} domain The domain of URL\n * @property {string} identity The identity of URL\n */\n\n/**\n * Divide an url in type, domain and identity\n * @param  {URL.URL} url - url address\n * @return {divideURL} the result of divideURL\n */\nexport function divideURL(url) {\n\n  if (!url) throw Error('URL is needed to split');\n\n  // let re = /([a-zA-Z-]*)?:\\/\\/(?:\\.)?([-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b)*(\\/[\\/\\d\\w\\.-]*)*(?:[\\?])*(.+)*/gi;\n  let re = /([a-zA-Z-]*):\\/\\/(?:\\.)?([-a-zA-Z0-9@:%._\\+~#=]{2,256})([-a-zA-Z0-9@:%._\\+~#=\\/]*)/gi;\n  let subst = '$1,$2,$3';\n  let parts = url.replace(re, subst).split(',');\n\n  // If the url has no protocol, the default protocol set is https\n  if (parts[0] === url) {\n    parts[0] = 'https';\n    parts[1] = url;\n  }\n\n  let result = {\n    type: parts[0],\n    domain: parts[1],\n    identity: parts[2]\n  };\n\n  return result;\n}\n\nexport function divideEmail(email) {\n  let indexOfAt = email.indexOf('@');\n\n  let result = {\n    username: email.substring(0, indexOfAt),\n    domain: email.substring(indexOfAt + 1, email.length)\n  };\n\n  return result;\n}\n\n/**\n * Check if an Object is empty\n * @param  {Object} object Object to be checked\n * @return {Boolean}       status of Object, empty or not (true|false);\n */\nexport function emptyObject(object) {\n  return Object.keys(object).length > 0 ? false : true;\n}\n\n/**\n * Make a COPY of the original data\n * @param  {Object}  obj - object to be cloned\n * @return {Object}\n */\nexport function deepClone(obj) {\n  //TODO: simple but inefficient JSON deep clone...\n  if (obj) return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * Obtains the user URL that corresponds to a given email\n * @param  {string} userEmail The user email\n * @return {URL.URL} userURL The user URL\n */\nexport function getUserURLFromEmail(userEmail) {\n  let indexOfAt = userEmail.indexOf('@');\n  return 'user://' + userEmail.substring(indexOfAt + 1, userEmail.length) + '/' + userEmail.substring(0, indexOfAt);\n}\n\n/**\n * Obtains the user email that corresponds to a given URL\n * @param  {URL.URL} userURL The user URL\n * @return {string} userEmail The user email\n */\nexport function getUserEmailFromURL(userURL) {\n  let url = divideURL(userURL);\n  return url.identity.replace('/', '') + '@' + url.domain; // identity field has '/exampleID' instead of 'exampleID'\n}\n\n\n/**\n * Check if the user identifier is already in the URL format, if not, convert to URL format\n * @param  {string}   identifier  user identifier\n * @return {string}   userURL    the user URL\n */\nexport function convertToUserURL(identifier) {\n\n  // check if the identifier is already in the url format\n  if (identifier.substring(0, 7) === 'user://') {\n    let dividedURL = divideURL(identifier);\n\n    //check if the url is well formated\n    if (dividedURL.domain && dividedURL.identity) {\n      return identifier;\n    } else {\n      throw 'userURL with wrong format';\n    }\n\n  //if not, convert the user email to URL format\n  } else {\n    return getUserURLFromEmail(identifier);\n  }\n}\n\nexport function isDataObjectURL(url) {\n  let schemasToIgnore = ['domain-idp', 'runtime', 'domain', 'hyperty'];\n  let splitURL = (url).split('://');\n  let urlSchema = splitURL[0];\n\n  return schemasToIgnore.indexOf(urlSchema) === -1;\n}\n"],"sourceRoot":"/source/"}
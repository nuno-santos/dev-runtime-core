// Runtime User Agent 

// version: 0.3.0

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.runtimeUA=e()}}(function(){var define,module,exports;return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return o(r?r:e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){t.exports={"default":e("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":21}],2:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":22}],3:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":23}],4:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":24}],5:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":25}],6:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":26}],7:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":27}],8:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":28}],9:[function(e,t,r){t.exports={"default":e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":29}],10:[function(e,t,r){t.exports={"default":e("core-js/library/fn/set"),__esModule:!0}},{"core-js/library/fn/set":30}],11:[function(e,t,r){t.exports={"default":e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":31}],12:[function(e,t,r){t.exports=e("./classCallCheck.js")},{"./classCallCheck.js":13}],13:[function(e,t,r){"use strict";r.__esModule=!0,r["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],14:[function(e,t,r){t.exports=e("./createClass.js")},{"./createClass.js":15}],15:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var o=e("../core-js/object/define-property"),i=n(o);r["default"]=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i["default"])(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},{"../core-js/object/define-property":4}],16:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var o=e("../core-js/object/get-prototype-of"),i=n(o),a=e("../core-js/object/get-own-property-descriptor"),s=n(a);r["default"]=function u(e,t,r){null===e&&(e=Function.prototype);var n=(0,s["default"])(e,t);if(void 0===n){var o=(0,i["default"])(e);return null===o?void 0:u(o,t,r)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(r)}},{"../core-js/object/get-own-property-descriptor":5,"../core-js/object/get-prototype-of":6}],17:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var o=e("../core-js/object/set-prototype-of"),i=n(o),a=e("../core-js/object/create"),s=n(a),u=e("../helpers/typeof"),c=n(u);r["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,c["default"])(t)));e.prototype=(0,s["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i["default"]?(0,i["default"])(e,t):e.__proto__=t)}},{"../core-js/object/create":3,"../core-js/object/set-prototype-of":8,"../helpers/typeof":20}],18:[function(e,t,r){t.exports=e("./interopRequireDefault.js")},{"./interopRequireDefault.js":19}],19:[function(e,t,r){"use strict";r.__esModule=!0,r["default"]=function(e){return e&&e.__esModule?e:{"default":e}}},{}],20:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e&&"undefined"!=typeof _Symbol&&e.constructor===_Symbol?"symbol":typeof e}r.__esModule=!0;var i=e("../core-js/symbol"),a=n(i);r["default"]=function(e){return e&&"undefined"!=typeof a["default"]&&e.constructor===a["default"]?"symbol":"undefined"==typeof e?"undefined":o(e)}},{"../core-js/symbol":11}],21:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),t.exports=e("../modules/$.core").Map},{"../modules/$.core":40,"../modules/es6.map":91,"../modules/es6.object.to-string":97,"../modules/es6.string.iterator":100,"../modules/es7.map.to-json":102,"../modules/web.dom.iterable":104}],22:[function(e,t,r){e("../../modules/es6.object.assign"),t.exports=e("../../modules/$.core").Object.assign},{"../../modules/$.core":40,"../../modules/es6.object.assign":92}],23:[function(e,t,r){var n=e("../../modules/$");t.exports=function(e,t){return n.create(e,t)}},{"../../modules/$":65}],24:[function(e,t,r){var n=e("../../modules/$");t.exports=function(e,t,r){return n.setDesc(e,t,r)}},{"../../modules/$":65}],25:[function(e,t,r){var n=e("../../modules/$");e("../../modules/es6.object.get-own-property-descriptor"),t.exports=function(e,t){return n.getDesc(e,t)}},{"../../modules/$":65,"../../modules/es6.object.get-own-property-descriptor":93}],26:[function(e,t,r){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/$.core").Object.getPrototypeOf},{"../../modules/$.core":40,"../../modules/es6.object.get-prototype-of":94}],27:[function(e,t,r){e("../../modules/es6.object.keys"),t.exports=e("../../modules/$.core").Object.keys},{"../../modules/$.core":40,"../../modules/es6.object.keys":95}],28:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":40,"../../modules/es6.object.set-prototype-of":96}],29:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/$.core").Promise},{"../modules/$.core":40,"../modules/es6.object.to-string":97,"../modules/es6.promise":98,"../modules/es6.string.iterator":100,"../modules/web.dom.iterable":104}],30:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.set"),e("../modules/es7.set.to-json"),t.exports=e("../modules/$.core").Set},{"../modules/$.core":40,"../modules/es6.object.to-string":97,"../modules/es6.set":99,"../modules/es6.string.iterator":100,"../modules/es7.set.to-json":103,"../modules/web.dom.iterable":104}],31:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),t.exports=e("../../modules/$.core").Symbol},{"../../modules/$.core":40,"../../modules/es6.object.to-string":97,"../../modules/es6.symbol":101}],32:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],33:[function(e,t,r){t.exports=function(){}},{}],34:[function(e,t,r){var n=e("./$.is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./$.is-object":58}],35:[function(e,t,r){var n=e("./$.cof"),o=e("./$.wks")("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=(t=Object(e))[o])?r:i?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},{"./$.cof":36,"./$.wks":88}],36:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],37:[function(e,t,r){"use strict";var n=e("./$"),o=e("./$.hide"),i=e("./$.redefine-all"),a=e("./$.ctx"),s=e("./$.strict-new"),u=e("./$.defined"),c=e("./$.for-of"),l=e("./$.iter-define"),f=e("./$.iter-step"),d=e("./$.uid")("id"),p=e("./$.has"),h=e("./$.is-object"),m=e("./$.set-species"),y=e("./$.descriptors"),b=Object.isExtensible||h,g=y?"_s":"size",v=0,_=function(e,t){if(!h(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!p(e,d)){if(!b(e))return"F";if(!t)return"E";o(e,d,++v)}return"O"+e[d]},w=function(e,t){var r,n=_(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,o){var l=e(function(e,i){s(e,l,t),e._i=n.create(null),e._f=void 0,e._l=void 0,e[g]=0,void 0!=i&&c(i,r,e[o],e)});return i(l.prototype,{clear:function(){for(var e=this,t=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];e._f=e._l=void 0,e[g]=0},"delete":function(e){var t=this,r=w(t,e);if(r){var n=r.n,o=r.p;delete t._i[r.i],r.r=!0,o&&(o.n=n),n&&(n.p=o),t._f==r&&(t._f=n),t._l==r&&(t._l=o),t[g]--}return!!r},forEach:function(e){for(var t,r=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!w(this,e)}}),y&&n.setDesc(l.prototype,"size",{get:function(){return u(this[g])}}),l},def:function(e,t,r){var n,o,i=w(e,t);return i?i.v=r:(e._l=i={i:o=_(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[g]++,"F"!==o&&(e._i[o]=i)),e},getEntry:w,setStrong:function(e,t,r){l(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?f(0,r.k):"values"==t?f(0,r.v):f(0,[r.k,r.v]):(e._t=void 0,f(1))},r?"entries":"values",!r,!0),m(t)}}},{"./$":65,"./$.ctx":41,"./$.defined":42,"./$.descriptors":43,"./$.for-of":48,"./$.has":51,"./$.hide":52,"./$.is-object":58,"./$.iter-define":61,"./$.iter-step":63,"./$.redefine-all":72,"./$.set-species":76,"./$.strict-new":80,"./$.uid":87}],38:[function(e,t,r){var n=e("./$.for-of"),o=e("./$.classof");t.exports=function(e){return function(){if(o(this)!=e)throw TypeError(e+"#toJSON isn't generic");var t=[];return n(this,!1,t.push,t),t}}},{"./$.classof":35,"./$.for-of":48}],39:[function(e,t,r){"use strict";var n=e("./$"),o=e("./$.global"),i=e("./$.export"),a=e("./$.fails"),s=e("./$.hide"),u=e("./$.redefine-all"),c=e("./$.for-of"),l=e("./$.strict-new"),f=e("./$.is-object"),d=e("./$.set-to-string-tag"),p=e("./$.descriptors");t.exports=function(e,t,r,h,m,y){var b=o[e],g=b,v=m?"set":"add",_=g&&g.prototype,w={};return p&&"function"==typeof g&&(y||_.forEach&&!a(function(){(new g).entries().next()}))?(g=t(function(t,r){l(t,g,e),t._c=new b,void 0!=r&&c(r,m,t[v],t)}),n.each.call("add,clear,delete,forEach,get,has,set,keys,values,entries".split(","),function(e){var t="add"==e||"set"==e;e in _&&(!y||"clear"!=e)&&s(g.prototype,e,function(r,n){if(!t&&y&&!f(r))return"get"==e?void 0:!1;var o=this._c[e](0===r?0:r,n);return t?this:o})}),"size"in _&&n.setDesc(g.prototype,"size",{get:function(){return this._c.size}})):(g=h.getConstructor(t,e,m,v),u(g.prototype,r)),d(g,e),w[e]=g,i(i.G+i.W+i.F,w),y||h.setStrong(g,e,m),g}},{"./$":65,"./$.descriptors":43,"./$.export":46,"./$.fails":47,"./$.for-of":48,"./$.global":50,"./$.hide":52,"./$.is-object":58,"./$.redefine-all":72,"./$.set-to-string-tag":77,"./$.strict-new":80}],40:[function(e,t,r){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},{}],41:[function(e,t,r){var n=e("./$.a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":32}],42:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],43:[function(e,t,r){t.exports=!e("./$.fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./$.fails":47}],44:[function(e,t,r){var n=e("./$.is-object"),o=e("./$.global").document,i=n(o)&&n(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./$.global":50,"./$.is-object":58}],45:[function(e,t,r){var n=e("./$");t.exports=function(e){var t=n.getKeys(e),r=n.getSymbols;if(r)for(var o,i=r(e),a=n.isEnum,s=0;i.length>s;)a.call(e,o=i[s++])&&t.push(o);return t}},{"./$":65}],46:[function(e,t,r){var n=e("./$.global"),o=e("./$.core"),i=e("./$.ctx"),a="prototype",s=function(e,t,r){var u,c,l,f=e&s.F,d=e&s.G,p=e&s.S,h=e&s.P,m=e&s.B,y=e&s.W,b=d?o:o[t]||(o[t]={}),g=d?n:p?n[t]:(n[t]||{})[a];d&&(r=t);for(u in r)c=!f&&g&&u in g,c&&u in b||(l=c?g[u]:r[u],b[u]=d&&"function"!=typeof g[u]?r[u]:m&&c?i(l,n):y&&g[u]==l?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[a]=e[a],t}(l):h&&"function"==typeof l?i(Function.call,l):l,h&&((b[a]||(b[a]={}))[u]=l))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},{"./$.core":40,"./$.ctx":41,"./$.global":50}],47:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],48:[function(e,t,r){var n=e("./$.ctx"),o=e("./$.iter-call"),i=e("./$.is-array-iter"),a=e("./$.an-object"),s=e("./$.to-length"),u=e("./core.get-iterator-method");t.exports=function(e,t,r,c){var l,f,d,p=u(e),h=n(r,c,t?2:1),m=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(i(p))for(l=s(e.length);l>m;m++)t?h(a(f=e[m])[0],f[1]):h(e[m]);else for(d=p.call(e);!(f=d.next()).done;)o(d,h,f.value,t)}},{"./$.an-object":34,"./$.ctx":41,"./$.is-array-iter":56,"./$.iter-call":59,"./$.to-length":85,"./core.get-iterator-method":89}],49:[function(e,t,r){var n=e("./$.to-iobject"),o=e("./$").getNames,i={}.toString,a="object"==typeof window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(t){return a.slice()}};t.exports.get=function(e){return a&&"[object Window]"==i.call(e)?s(e):o(n(e))}},{"./$":65,"./$.to-iobject":84}],50:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],51:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],52:[function(e,t,r){var n=e("./$"),o=e("./$.property-desc");t.exports=e("./$.descriptors")?function(e,t,r){return n.setDesc(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./$":65,"./$.descriptors":43,"./$.property-desc":71}],53:[function(e,t,r){t.exports=e("./$.global").document&&document.documentElement},{"./$.global":50}],54:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],55:[function(e,t,r){var n=e("./$.cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./$.cof":36}],56:[function(e,t,r){var n=e("./$.iterators"),o=e("./$.wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},{"./$.iterators":64,"./$.wks":88}],57:[function(e,t,r){var n=e("./$.cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./$.cof":36}],58:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],59:[function(e,t,r){var n=e("./$.an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(i){var a=e["return"];throw void 0!==a&&n(a.call(e)),i}}},{"./$.an-object":34}],60:[function(e,t,r){"use strict";var n=e("./$"),o=e("./$.property-desc"),i=e("./$.set-to-string-tag"),a={};e("./$.hide")(a,e("./$.wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n.create(a,{next:o(1,r)}),i(e,t+" Iterator")}},{"./$":65,"./$.hide":52,"./$.property-desc":71,"./$.set-to-string-tag":77,"./$.wks":88}],61:[function(e,t,r){"use strict";var n=e("./$.library"),o=e("./$.export"),i=e("./$.redefine"),a=e("./$.hide"),s=e("./$.has"),u=e("./$.iterators"),c=e("./$.iter-create"),l=e("./$.set-to-string-tag"),f=e("./$").getProto,d=e("./$.wks")("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",m="keys",y="values",b=function(){return this};t.exports=function(e,t,r,g,v,_,w){c(r,t,g);var k,j,$=function(e){if(!p&&e in S)return S[e];switch(e){case m:return function(){return new r(this,e)};case y:return function(){return new r(this,e)}}return function(){return new r(this,e)}},x=t+" Iterator",O=v==y,E=!1,S=e.prototype,R=S[d]||S[h]||v&&S[v],P=R||$(v);if(R){var T=f(P.call(new e));l(T,x,!0),!n&&s(S,h)&&a(T,d,b),O&&R.name!==y&&(E=!0,P=function(){return R.call(this)})}if(n&&!w||!p&&!E&&S[d]||a(S,d,P),u[t]=P,u[x]=b,v)if(k={values:O?P:$(y),keys:_?P:$(m),entries:O?$("entries"):P},w)for(j in k)j in S||i(S,j,k[j]);else o(o.P+o.F*(p||E),t,k);return k}},{"./$":65,"./$.export":46,"./$.has":51,"./$.hide":52,"./$.iter-create":60,"./$.iterators":64,"./$.library":67,"./$.redefine":73,"./$.set-to-string-tag":77,"./$.wks":88}],62:[function(e,t,r){var n=e("./$.wks")("iterator"),o=!1;try{var i=[7][n]();i["return"]=function(){o=!0},Array.from(i,function(){throw 2})}catch(a){}t.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){r=!0},i[n]=function(){return a},e(i)}catch(s){}return r}},{"./$.wks":88}],63:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],64:[function(e,t,r){t.exports={}},{}],65:[function(e,t,r){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},{}],66:[function(e,t,r){var n=e("./$"),o=e("./$.to-iobject");t.exports=function(e,t){for(var r,i=o(e),a=n.getKeys(i),s=a.length,u=0;s>u;)if(i[r=a[u++]]===t)return r}},{"./$":65,"./$.to-iobject":84}],67:[function(e,t,r){t.exports=!0},{}],68:[function(e,t,r){var n,o,i,a=e("./$.global"),s=e("./$.task").set,u=a.MutationObserver||a.WebKitMutationObserver,c=a.process,l=a.Promise,f="process"==e("./$.cof")(c),d=function(){var e,t,r;for(f&&(e=c.domain)&&(c.domain=null,e.exit());n;)t=n.domain,r=n.fn,t&&t.enter(),r(),t&&t.exit(),n=n.next;o=void 0,e&&e.enter()};if(f)i=function(){c.nextTick(d)};else if(u){var p=1,h=document.createTextNode("");new u(d).observe(h,{characterData:!0}),i=function(){h.data=p=-p}}else i=l&&l.resolve?function(){l.resolve().then(d)}:function(){s.call(a,d)};t.exports=function(e){var t={fn:e,next:void 0,domain:f&&c.domain};o&&(o.next=t),n||(n=t,i()),o=t}},{"./$.cof":36,"./$.global":50,"./$.task":82}],69:[function(e,t,r){var n=e("./$"),o=e("./$.to-object"),i=e("./$.iobject");t.exports=e("./$.fails")(function(){var e=Object.assign,t={},r={},n=Symbol(),o="abcdefghijklmnopqrst";return t[n]=7,o.split("").forEach(function(e){r[e]=e}),7!=e({},t)[n]||Object.keys(e({},r)).join("")!=o})?function(e,t){for(var r=o(e),a=arguments,s=a.length,u=1,c=n.getKeys,l=n.getSymbols,f=n.isEnum;s>u;)for(var d,p=i(a[u++]),h=l?c(p).concat(l(p)):c(p),m=h.length,y=0;m>y;)f.call(p,d=h[y++])&&(r[d]=p[d]);return r}:Object.assign},{"./$":65,"./$.fails":47,"./$.iobject":55,"./$.to-object":86}],70:[function(e,t,r){var n=e("./$.export"),o=e("./$.core"),i=e("./$.fails");t.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",a)}},{"./$.core":40,"./$.export":46,"./$.fails":47}],71:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],72:[function(e,t,r){var n=e("./$.redefine");t.exports=function(e,t){for(var r in t)n(e,r,t[r]);return e}},{"./$.redefine":73}],73:[function(e,t,r){t.exports=e("./$.hide")},{"./$.hide":52}],74:[function(e,t,r){t.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},{}],75:[function(e,t,r){var n=e("./$").getDesc,o=e("./$.is-object"),i=e("./$.an-object"),a=function(e,t){if(i(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,o){try{o=e("./$.ctx")(Function.call,n(Object.prototype,"__proto__").set,2),o(t,[]),r=!(t instanceof Array)}catch(i){r=!0}return function(e,t){return a(e,t),r?e.__proto__=t:o(e,t),e}}({},!1):void 0),check:a}},{"./$":65,"./$.an-object":34,"./$.ctx":41,"./$.is-object":58}],76:[function(e,t,r){"use strict";var n=e("./$.core"),o=e("./$"),i=e("./$.descriptors"),a=e("./$.wks")("species");t.exports=function(e){var t=n[e];i&&t&&!t[a]&&o.setDesc(t,a,{configurable:!0,get:function(){return this}})}},{"./$":65,"./$.core":40,"./$.descriptors":43,"./$.wks":88}],77:[function(e,t,r){var n=e("./$").setDesc,o=e("./$.has"),i=e("./$.wks")("toStringTag");t.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},{"./$":65,"./$.has":51,"./$.wks":88}],78:[function(e,t,r){var n=e("./$.global"),o="__core-js_shared__",i=n[o]||(n[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./$.global":50}],79:[function(e,t,r){var n=e("./$.an-object"),o=e("./$.a-function"),i=e("./$.wks")("species");t.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[i])?t:o(r)}},{"./$.a-function":32,"./$.an-object":34,"./$.wks":88}],80:[function(e,t,r){t.exports=function(e,t,r){if(!(e instanceof t))throw TypeError(r+": use the 'new' operator!");return e}},{}],81:[function(e,t,r){var n=e("./$.to-integer"),o=e("./$.defined");t.exports=function(e){return function(t,r){var i,a,s=String(o(t)),u=n(r),c=s.length;return 0>u||u>=c?e?"":void 0:(i=s.charCodeAt(u),55296>i||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):(i-55296<<10)+(a-56320)+65536)}}},{"./$.defined":42,"./$.to-integer":83}],82:[function(e,t,r){var n,o,i,a=e("./$.ctx"),s=e("./$.invoke"),u=e("./$.html"),c=e("./$.dom-create"),l=e("./$.global"),f=l.process,d=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,m=0,y={},b="onreadystatechange",g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},v=function(e){g.call(e.data)};d&&p||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++m]=function(){s("function"==typeof e?e:Function(e),t)},n(m),m},p=function(e){delete y[e]},"process"==e("./$.cof")(f)?n=function(e){f.nextTick(a(g,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=v,n=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",v,!1)):n=b in c("script")?function(e){u.appendChild(c("script"))[b]=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),t.exports={set:d,clear:p}},{"./$.cof":36,"./$.ctx":41,"./$.dom-create":44,"./$.global":50,"./$.html":53,"./$.invoke":54}],83:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],84:[function(e,t,r){var n=e("./$.iobject"),o=e("./$.defined");t.exports=function(e){return n(o(e))}},{"./$.defined":42,"./$.iobject":55}],85:[function(e,t,r){var n=e("./$.to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./$.to-integer":83}],86:[function(e,t,r){var n=e("./$.defined");t.exports=function(e){return Object(n(e))}},{"./$.defined":42}],87:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],88:[function(e,t,r){var n=e("./$.shared")("wks"),o=e("./$.uid"),i=e("./$.global").Symbol;t.exports=function(e){return n[e]||(n[e]=i&&i[e]||(i||o)("Symbol."+e))}},{"./$.global":50,"./$.shared":78,"./$.uid":87}],89:[function(e,t,r){var n=e("./$.classof"),o=e("./$.wks")("iterator"),i=e("./$.iterators");t.exports=e("./$.core").getIteratorMethod=function(e){return void 0!=e?e[o]||e["@@iterator"]||i[n(e)]:void 0}},{"./$.classof":35,"./$.core":40,"./$.iterators":64,"./$.wks":88}],90:[function(e,t,r){"use strict";var n=e("./$.add-to-unscopables"),o=e("./$.iter-step"),i=e("./$.iterators"),a=e("./$.to-iobject");t.exports=e("./$.iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},{"./$.add-to-unscopables":33,"./$.iter-define":61,"./$.iter-step":63,"./$.iterators":64,"./$.to-iobject":84}],91:[function(e,t,r){"use strict";var n=e("./$.collection-strong");e("./$.collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(this,e);return t&&t.v},set:function(e,t){return n.def(this,0===e?0:e,t)}},n,!0)},{"./$.collection":39,"./$.collection-strong":37}],92:[function(e,t,r){var n=e("./$.export");n(n.S+n.F,"Object",{assign:e("./$.object-assign")})},{"./$.export":46,"./$.object-assign":69}],93:[function(e,t,r){var n=e("./$.to-iobject");e("./$.object-sap")("getOwnPropertyDescriptor",function(e){return function(t,r){return e(n(t),r)}})},{"./$.object-sap":70,"./$.to-iobject":84}],94:[function(e,t,r){var n=e("./$.to-object");e("./$.object-sap")("getPrototypeOf",function(e){return function(t){return e(n(t))}})},{"./$.object-sap":70,"./$.to-object":86}],95:[function(e,t,r){var n=e("./$.to-object");e("./$.object-sap")("keys",function(e){return function(t){return e(n(t))}})},{"./$.object-sap":70,"./$.to-object":86}],96:[function(e,t,r){var n=e("./$.export");n(n.S,"Object",{setPrototypeOf:e("./$.set-proto").set})},{"./$.export":46,"./$.set-proto":75}],97:[function(e,t,r){},{}],98:[function(e,t,r){"use strict";var n,o=e("./$"),i=e("./$.library"),a=e("./$.global"),s=e("./$.ctx"),u=e("./$.classof"),c=e("./$.export"),l=e("./$.is-object"),f=e("./$.an-object"),d=e("./$.a-function"),p=e("./$.strict-new"),h=e("./$.for-of"),m=e("./$.set-proto").set,y=e("./$.same-value"),b=e("./$.wks")("species"),g=e("./$.species-constructor"),v=e("./$.microtask"),_="Promise",w=a.process,k="process"==u(w),j=a[_],$=function(e){var t=new j(function(){});return e&&(t.constructor=Object),j.resolve(t)===t},x=function(){function t(e){var r=new j(e);return m(r,t.prototype),r}var r=!1;try{if(r=j&&j.resolve&&$(),m(t,j),t.prototype=o.create(j.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(r=!1),r&&e("./$.descriptors")){var n=!1;j.resolve(o.setDesc({},"then",{get:function(){n=!0}})),r=n}}catch(i){r=!1}return r}(),O=function(e,t){return i&&e===j&&t===n?!0:y(e,t)},E=function(e){var t=f(e)[b];return void 0!=t?t:e},S=function(e){var t;return l(e)&&"function"==typeof(t=e.then)?t:!1},R=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=d(t),this.reject=d(r)},P=function(e){try{e()}catch(t){return{error:t}}},T=function(e,t){if(!e.n){e.n=!0;var r=e.c;v(function(){for(var n=e.v,o=1==e.s,i=0,s=function(t){var r,i,a=o?t.ok:t.fail,s=t.resolve,u=t.reject;try{a?(o||(e.h=!0),r=a===!0?n:a(n),r===t.promise?u(TypeError("Promise-chain cycle")):(i=S(r))?i.call(r,s,u):s(r)):u(n)}catch(c){u(c)}};r.length>i;)s(r[i++]);r.length=0,e.n=!1,t&&setTimeout(function(){var t,r,o=e.p;M(o)&&(k?w.emit("unhandledRejection",n,o):(t=a.onunhandledrejection)?t({promise:o,reason:n}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",n)),e.a=void 0},1)})}},M=function(e){var t,r=e._d,n=r.a||r.c,o=0;if(r.h)return!1;for(;n.length>o;)if(t=n[o++],t.fail||!M(t.promise))return!1;return!0},C=function(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,t.a=t.c.slice(),T(t,!0))},A=function(e){var t,r=this;if(!r.d){r.d=!0,r=r.r||r;try{if(r.p===e)throw TypeError("Promise can't be resolved itself");(t=S(e))?v(function(){var n={r:r,d:!1};try{t.call(e,s(A,n,1),s(C,n,1))}catch(o){C.call(n,o)}}):(r.v=e,r.s=1,T(r,!1))}catch(n){C.call({r:r,d:!1},n)}}};x||(j=function(e){d(e);var t=this._d={p:p(this,j,_),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{e(s(A,t,1),s(C,t,1))}catch(r){C.call(t,r)}},e("./$.redefine-all")(j.prototype,{then:function(e,t){var r=new R(g(this,j)),n=r.promise,o=this._d;return r.ok="function"==typeof e?e:!0,r.fail="function"==typeof t&&t,o.c.push(r),o.a&&o.a.push(r),o.s&&T(o,!1),n},"catch":function(e){return this.then(void 0,e)}})),c(c.G+c.W+c.F*!x,{Promise:j}),e("./$.set-to-string-tag")(j,_),e("./$.set-species")(_),n=e("./$.core")[_],c(c.S+c.F*!x,_,{reject:function(e){var t=new R(this),r=t.reject;return r(e),t.promise}}),c(c.S+c.F*(!x||$(!0)),_,{resolve:function(e){if(e instanceof j&&O(e.constructor,this))return e;var t=new R(this),r=t.resolve;return r(e),t.promise}}),c(c.S+c.F*!(x&&e("./$.iter-detect")(function(e){j.all(e)["catch"](function(){})})),_,{all:function(e){var t=E(this),r=new R(t),n=r.resolve,i=r.reject,a=[],s=P(function(){h(e,!1,a.push,a);var r=a.length,s=Array(r);r?o.each.call(a,function(e,o){var a=!1;t.resolve(e).then(function(e){a||(a=!0,s[o]=e,--r||n(s))},i)}):n(s)});return s&&i(s.error),r.promise},race:function(e){var t=E(this),r=new R(t),n=r.reject,o=P(function(){h(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o&&n(o.error),r.promise}})},{"./$":65,"./$.a-function":32,"./$.an-object":34,"./$.classof":35,"./$.core":40,"./$.ctx":41,"./$.descriptors":43,"./$.export":46,"./$.for-of":48,"./$.global":50,"./$.is-object":58,"./$.iter-detect":62,"./$.library":67,"./$.microtask":68,"./$.redefine-all":72,"./$.same-value":74,"./$.set-proto":75,"./$.set-species":76,"./$.set-to-string-tag":77,"./$.species-constructor":79,"./$.strict-new":80,"./$.wks":88}],99:[function(e,t,r){"use strict";var n=e("./$.collection-strong");e("./$.collection")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(this,e=0===e?0:e,e)}},n)},{"./$.collection":39,"./$.collection-strong":37}],100:[function(e,t,r){"use strict";var n=e("./$.string-at")(!0);e("./$.iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./$.iter-define":61,"./$.string-at":81}],101:[function(e,t,r){"use strict";var n=e("./$"),o=e("./$.global"),i=e("./$.has"),a=e("./$.descriptors"),s=e("./$.export"),u=e("./$.redefine"),c=e("./$.fails"),l=e("./$.shared"),f=e("./$.set-to-string-tag"),d=e("./$.uid"),p=e("./$.wks"),h=e("./$.keyof"),m=e("./$.get-names"),y=e("./$.enum-keys"),b=e("./$.is-array"),g=e("./$.an-object"),v=e("./$.to-iobject"),_=e("./$.property-desc"),w=n.getDesc,k=n.setDesc,j=n.create,$=m.get,x=o.Symbol,O=o.JSON,E=O&&O.stringify,S=!1,R=p("_hidden"),P=n.isEnum,T=l("symbol-registry"),M=l("symbols"),C="function"==typeof x,A=Object.prototype,L=a&&c(function(){return 7!=j(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=w(A,t);n&&delete A[t],k(e,t,r),n&&e!==A&&k(A,t,n)}:k,I=function(e){var t=M[e]=j(x.prototype);return t._k=e,a&&S&&L(A,e,{configurable:!0,set:function(t){i(this,R)&&i(this[R],e)&&(this[R][e]=!1),L(this,e,_(1,t))}}),t},N=function(e){return"symbol"==typeof e},D=function(e,t,r){return r&&i(M,t)?(r.enumerable?(i(e,R)&&e[R][t]&&(e[R][t]=!1),r=j(r,{enumerable:_(0,!1)})):(i(e,R)||k(e,R,_(1,{})),e[R][t]=!0),L(e,t,r)):k(e,t,r)},U=function(e,t){g(e);for(var r,n=y(t=v(t)),o=0,i=n.length;i>o;)D(e,r=n[o++],t[r]);return e},q=function(e,t){return void 0===t?j(e):U(j(e),t)},F=function(e){var t=P.call(this,e);return t||!i(this,e)||!i(M,e)||i(this,R)&&this[R][e]?t:!0;
},B=function(e,t){var r=w(e=v(e),t);return!r||!i(M,t)||i(e,R)&&e[R][t]||(r.enumerable=!0),r},H=function(e){for(var t,r=$(v(e)),n=[],o=0;r.length>o;)i(M,t=r[o++])||t==R||n.push(t);return n},J=function(e){for(var t,r=$(v(e)),n=[],o=0;r.length>o;)i(M,t=r[o++])&&n.push(M[t]);return n},G=function(e){if(void 0!==e&&!N(e)){for(var t,r,n=[e],o=1,i=arguments;i.length>o;)n.push(i[o++]);return t=n[1],"function"==typeof t&&(r=t),(r||!b(t))&&(t=function(e,t){return r&&(t=r.call(this,e,t)),N(t)?void 0:t}),n[1]=t,E.apply(O,n)}},z=c(function(){var e=x();return"[null]"!=E([e])||"{}"!=E({a:e})||"{}"!=E(Object(e))});C||(x=function(){if(N(this))throw TypeError("Symbol is not a constructor");return I(d(arguments.length>0?arguments[0]:void 0))},u(x.prototype,"toString",function(){return this._k}),N=function(e){return e instanceof x},n.create=q,n.isEnum=F,n.getDesc=B,n.setDesc=D,n.setDescs=U,n.getNames=m.get=H,n.getSymbols=J,a&&!e("./$.library")&&u(A,"propertyIsEnumerable",F,!0));var Y={"for":function(e){return i(T,e+="")?T[e]:T[e]=x(e)},keyFor:function(e){return h(T,e)},useSetter:function(){S=!0},useSimple:function(){S=!1}};n.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(e){var t=p(e);Y[e]=C?t:I(t)}),S=!0,s(s.G+s.W,{Symbol:x}),s(s.S,"Symbol",Y),s(s.S+s.F*!C,"Object",{create:q,defineProperty:D,defineProperties:U,getOwnPropertyDescriptor:B,getOwnPropertyNames:H,getOwnPropertySymbols:J}),O&&s(s.S+s.F*(!C||z),"JSON",{stringify:G}),f(x,"Symbol"),f(Math,"Math",!0),f(o.JSON,"JSON",!0)},{"./$":65,"./$.an-object":34,"./$.descriptors":43,"./$.enum-keys":45,"./$.export":46,"./$.fails":47,"./$.get-names":49,"./$.global":50,"./$.has":51,"./$.is-array":57,"./$.keyof":66,"./$.library":67,"./$.property-desc":71,"./$.redefine":73,"./$.set-to-string-tag":77,"./$.shared":78,"./$.to-iobject":84,"./$.uid":87,"./$.wks":88}],102:[function(e,t,r){var n=e("./$.export");n(n.P,"Map",{toJSON:e("./$.collection-to-json")("Map")})},{"./$.collection-to-json":38,"./$.export":46}],103:[function(e,t,r){var n=e("./$.export");n(n.P,"Set",{toJSON:e("./$.collection-to-json")("Set")})},{"./$.collection-to-json":38,"./$.export":46}],104:[function(e,t,r){e("./es6.array.iterator");var n=e("./$.iterators");n.NodeList=n.HTMLCollection=n.Array},{"./$.iterators":64,"./es6.array.iterator":90}],105:[function(e,t,r){(function(e){Object.create||(Object.create=function(){function e(){}return function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Object.keys||(Object.keys=function(e,t,r){r=[];for(t in e)r.hasOwnProperty.call(e,t)&&r.push(t);return r}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(e){if(void 0===this||null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=arguments.length>=2?arguments[1]:void 0,o=0;r>o;o++)o in t&&e.call(n,t[o],o,t);return this}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var r=[];return this.forEach(function(n,o,i){e.call(t||void 0,n,o,i)&&r.push(n)}),r}),Array.prototype.map||(Array.prototype.map=function(e,t){var r=[];return this.forEach(function(n,o,i){r.push(e.call(t||void 0,n,o,i))}),r}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),"object"!=typeof window||"object"!=typeof window.location||window.location.assign||(window.location.assign=function(e){window.location=e}),Function.prototype.bind||(Function.prototype.bind=function(e){function t(){}if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=[].slice,n=r.call(arguments,1),o=this,i=function(){return o.apply(this instanceof t?this:e||window,n.concat(r.call(arguments)))};return t.prototype=this.prototype,i.prototype=new t,i});var r=function(e){return r.use(e)};r.utils={extend:function(e){return Array.prototype.slice.call(arguments,1).forEach(function(t){if(e instanceof Object&&t instanceof Object&&e!==t)for(var n in t)e[n]=r.utils.extend(e[n],t[n]);else e=t}),e}},r.utils.extend(r,{settings:{redirect_uri:window.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,popup:{resizable:1,scrollbars:1,width:500,height:550},default_service:null,force:null,page_uri:window.location.href},services:{},use:function(e){var t=Object.create(this);return t.settings=Object.create(this.settings),e&&(t.settings.default_service=e),t.utils.Event.call(t),t},init:function(e,t){var r=this.utils;if(!e)return this.services;for(var n in e)e.hasOwnProperty(n)&&"object"!=typeof e[n]&&(e[n]={id:e[n]});r.extend(this.services,e);for(n in this.services)this.services.hasOwnProperty(n)&&(this.services[n].scope=this.services[n].scope||{});return t&&(r.extend(this.settings,t),"redirect_uri"in t&&(this.settings.redirect_uri=r.url(t.redirect_uri).href)),this},login:function(){function e(e,t){r.emit(e,t)}function t(e){return e}function n(e){return!!e}var o,i=this,a=i.utils,s=a.error,u=a.Promise(),c=a.args({network:"s",options:"o",callback:"f"},arguments),l=a.diffKey(c.options,i.settings),f=c.options=a.merge(i.settings,c.options||{});if(f.popup=a.merge(i.settings.popup,c.options.popup||{}),c.network=c.network||i.settings.default_service,u.proxy.then(c.callback,c.callback),u.proxy.then(e.bind(this,"auth.login auth"),e.bind(this,"auth.failed auth")),"string"!=typeof c.network||!(c.network in i.services))return u.reject(s("invalid_network","The provided network was not recognized"));var d=i.services[c.network],p=a.globalEvent(function(e){var t;t=e?JSON.parse(e):s("cancelled","The authentication was not completed"),t.error?u.reject(t):(a.store(t.network,t),u.fulfill({network:t.network,authResponse:t}))}),h=a.url(f.redirect_uri).href,m=d.oauth.response_type||f.response_type;/\bcode\b/.test(m)&&!d.oauth.grant&&(m=m.replace(/\bcode\b/,"token")),c.qs=a.merge(l,{client_id:encodeURIComponent(d.id),response_type:encodeURIComponent(m),redirect_uri:encodeURIComponent(h),display:f.display,state:{client_id:d.id,network:c.network,display:f.display,callback:p,state:f.state,redirect_uri:h}});var y=a.store(c.network),b=/[,\s]+/,g=[];if(f.scope&&g.push(f.scope.toString()),"basic"in d.scope&&g.push("basic"),y&&"scope"in y&&y.scope instanceof String&&g.push(y.scope),g=g.join(",").split(b),g=a.unique(g).filter(n),c.qs.state.scope=g.join(","),g=g.map(function(e){if(e in d.scope)return d.scope[e];for(var t in i.services){var r=i.services[t].scope;if(r&&e in r)return""}return e}),g=g.join(",").split(b),g=a.unique(g).filter(n),c.qs.scope=g.join(d.scope_delim||","),f.force===!1&&y&&"access_token"in y&&y.access_token&&"expires"in y&&y.expires>(new Date).getTime()/1e3){var v=a.diff((y.scope||"").split(b),(c.qs.state.scope||"").split(b));if(0===v.length)return u.fulfill({unchanged:!0,network:c.network,authResponse:y}),u}if("page"===f.display&&f.page_uri&&(c.qs.state.page_uri=a.url(f.page_uri).href),"login"in d&&"function"==typeof d.login&&d.login(c),(!/\btoken\b/.test(m)||parseInt(d.oauth.version,10)<2||"none"===f.display&&d.oauth.grant&&y&&y.refresh_token)&&(c.qs.state.oauth=d.oauth,c.qs.state.oauth_proxy=f.oauth_proxy),c.qs.state=encodeURIComponent(JSON.stringify(c.qs.state)),1===parseInt(d.oauth.version,10)?o=a.qs(f.oauth_proxy,c.qs,t):"none"===f.display&&d.oauth.grant&&y&&y.refresh_token?(c.qs.refresh_token=y.refresh_token,o=a.qs(f.oauth_proxy,c.qs,t)):o=a.qs(d.oauth.auth,c.qs,t),e("auth.init",c),"none"===f.display)a.iframe(o,h);else if("popup"===f.display)var _=a.popup(o,h,f.popup),w=setInterval(function(){if((!_||_.closed)&&(clearInterval(w),!u.state)){var e=s("cancelled","Login has been cancelled");_||(e=s("blocked","Popup was blocked")),e.network=c.network,u.reject(e)}},100);else window.location=o;return u.proxy},logout:function(){function e(e,t){r.emit(e,t)}var t=this,n=t.utils,o=n.error,i=n.Promise(),a=n.args({name:"s",options:"o",callback:"f"},arguments);if(a.options=a.options||{},i.proxy.then(a.callback,a.callback),i.proxy.then(e.bind(this,"auth.logout auth"),e.bind(this,"error")),a.name=a.name||this.settings.default_service,a.authResponse=n.store(a.name),!a.name||a.name in t.services)if(a.name&&a.authResponse){var s=function(e){n.store(a.name,null),i.fulfill(r.utils.merge({network:a.name},e||{}))},u={};if(a.options.force){var c=t.services[a.name].logout;if(c)if("function"==typeof c&&(c=c(s,a)),"string"==typeof c)n.iframe(c),u.force=null,u.message="Logout success on providers site was indeterminate";else if(void 0===c)return i.proxy}s(u)}else i.reject(o("invalid_session","There was no session to remove"));else i.reject(o("invalid_network","The network was unrecognized"));return i.proxy},getAuthResponse:function(e){return e=e||this.settings.default_service,e&&e in this.services?this.utils.store(e)||null:null},events:{}}),r.utils.extend(r.utils,{error:function(e,t){return{error:{code:e,message:t}}},qs:function(e,t,r){if(t){r=r||encodeURIComponent;for(var n in t){var o="([\\?\\&])"+n+"=[^\\&]*",i=new RegExp(o);e.match(i)&&(e=e.replace(i,"$1"+n+"="+r(t[n])),delete t[n])}}return this.isEmpty(t)?e:e+(e.indexOf("?")>-1?"&":"?")+this.param(t,r)},param:function(e,t){var r,n,o={};if("string"==typeof e){if(t=t||decodeURIComponent,n=e.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var i=0;i<n.length;i++)r=n[i].match(/([^=]+)=(.*)/),o[r[1]]=t(r[2]);return o}t=t||encodeURIComponent;var a=e;o=[];for(var s in a)a.hasOwnProperty(s)&&a.hasOwnProperty(s)&&o.push([s,"?"===a[s]?"?":t(a[s])].join("="));return o.join("&")},store:function(){function e(){var e={};try{e=JSON.parse(r.getItem("hello"))||{}}catch(t){}return e}function t(e){r.setItem("hello",JSON.stringify(e))}for(var r,n=["localStorage","sessionStorage"],o=-1,i="test";n[++o];)try{r=window[n[o]],r.setItem(i+o,o),r.removeItem(i+o);break}catch(a){r=null}if(!r){var s=null;r={getItem:function(e){e+="=";for(var t=document.cookie.split(";"),r=0;r<t.length;r++){var n=t[r].replace(/(^\s+|\s+$)/,"");if(n&&0===n.indexOf(e))return n.substr(e.length)}return s},setItem:function(e,t){s=t,document.cookie=e+"="+t}},s=r.getItem("hello")}return function(r,n,o){var i=e();if(r&&void 0===n)return i[r]||null;if(r&&null===n)try{delete i[r]}catch(a){i[r]=null}else{if(!r)return i;i[r]=n}return t(i),i||null}}(),append:function(e,t,r){var n="string"==typeof e?document.createElement(e):e;if("object"==typeof t)if("tagName"in t)r=t;else for(var o in t)if(t.hasOwnProperty(o))if("object"==typeof t[o])for(var i in t[o])t[o].hasOwnProperty(i)&&(n[o][i]=t[o][i]);else"html"===o?n.innerHTML=t[o]:/^on/.test(o)?n[o]=t[o]:n.setAttribute(o,t[o]);return"body"===r?!function a(){document.body?document.body.appendChild(n):setTimeout(a,16)}():"object"==typeof r?r.appendChild(n):"string"==typeof r&&document.getElementsByTagName(r)[0].appendChild(n),n},iframe:function(e){this.append("iframe",{src:e,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")},merge:function(){var e=Array.prototype.slice.call(arguments);return e.unshift({}),this.extend.apply(null,e)},args:function(e,t){var r={},n=0,o=null,i=null;for(i in e)if(e.hasOwnProperty(i))break;if(1===t.length&&"object"==typeof t[0]&&"o!"!=e[i])for(i in t[0])if(e.hasOwnProperty(i)&&i in e)return t[0];for(i in e)if(e.hasOwnProperty(i))if(o=typeof t[n],"function"==typeof e[i]&&e[i].test(t[n])||"string"==typeof e[i]&&(e[i].indexOf("s")>-1&&"string"===o||e[i].indexOf("o")>-1&&"object"===o||e[i].indexOf("i")>-1&&"number"===o||e[i].indexOf("a")>-1&&"object"===o||e[i].indexOf("f")>-1&&"function"===o))r[i]=t[n++];else if("string"==typeof e[i]&&e[i].indexOf("!")>-1)return!1;return r},url:function(e){if(e){if(window.URL&&URL instanceof Function&&0!==URL.length)return new URL(e,window.location);var t=document.createElement("a");return t.href=e,t.cloneNode(!1)}return window.location},diff:function(e,t){return t.filter(function(t){return-1===e.indexOf(t)})},diffKey:function(e,t){if(e||!t){var r={};for(var n in e)n in t||(r[n]=e[n]);return r}return e},unique:function(e){return Array.isArray(e)?e.filter(function(t,r){return e.indexOf(t)===r}):[]},isEmpty:function(e){if(!e)return!0;if(Array.isArray(e))return!e.length;if("object"==typeof e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},Promise:function(){var t=0,r=1,n=2,o=function(e){return this instanceof o?(this.id="Thenable/1.0.6",this.state=t,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},void("function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this)))):new o(e)};o.prototype={fulfill:function(e){return i(this,r,"fulfillValue",e)},reject:function(e){return i(this,n,"rejectReason",e)},then:function(e,t){var r=this,n=new o;return r.onFulfilled.push(u(e,n,"fulfill")),r.onRejected.push(u(t,n,"reject")),a(r),n.proxy}};var i=function(e,r,n,o){return e.state===t&&(e.state=r,e[n]=o,a(e)),e},a=function(e){e.state===r?s(e,"onFulfilled",e.fulfillValue):e.state===n&&s(e,"onRejected",e.rejectReason)},s=function(t,r,n){if(0!==t[r].length){var o=t[r];t[r]=[];var i=function(){for(var e=0;e<o.length;e++)o[e](n)};"object"==typeof e&&"function"==typeof e.nextTick?e.nextTick(i):"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},u=function(e,t,r){return function(n){if("function"!=typeof e)t[r].call(t,n);else{var o;try{o=e(n)}catch(i){return void t.reject(i)}c(t,o)}}},c=function(e,t){if(e===t||e.proxy===t)return void e.reject(new TypeError("cannot resolve promise with itself"));var r;if("object"==typeof t&&null!==t||"function"==typeof t)try{r=t.then}catch(n){return void e.reject(n)}if("function"!=typeof r)e.fulfill(t);else{var o=!1;try{r.call(t,function(r){o||(o=!0,r===t?e.reject(new TypeError("circular thenable chain")):c(e,r))},function(t){o||(o=!0,e.reject(t))})}catch(n){o||e.reject(n)}}};return o}(),Event:function(){var e=/[\s\,]+/;return this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent,utils:this.utils},this.events={},this.on=function(t,r){if(r&&"function"==typeof r)for(var n=t.split(e),o=0;o<n.length;o++)this.events[n[o]]=[r].concat(this.events[n[o]]||[]);return this},this.off=function(e,t){return this.findEvents(e,function(e,r){t&&this.events[e][r]!==t||(this.events[e][r]=null)}),this},this.emit=function(e){var t=Array.prototype.slice.call(arguments,1);t.push(e);for(var r=function(r,n){t[t.length-1]="*"===r?e:r,this.events[r][n].apply(this,t)},n=this;n&&n.findEvents;)n.findEvents(e+",*",r),n=n.parent;return this},this.emitAfter=function(){var e=this,t=arguments;return setTimeout(function(){e.emit.apply(e,t)},0),this},this.findEvents=function(t,r){var n=t.split(e);for(var o in this.events)if(this.events.hasOwnProperty(o)&&n.indexOf(o)>-1)for(var i=0;i<this.events[o].length;i++)this.events[o][i]&&r.call(this,o,i)},this},globalEvent:function(e,t){return t=t||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),window[t]=function(){try{e.apply(this,arguments)&&delete window[t]}catch(r){console.error(r)}},t},popup:function(e,t,n){var o=document.documentElement;if(n.height){var i=void 0!==window.screenTop?window.screenTop:screen.top,a=screen.height||window.innerHeight||o.clientHeight;n.top=parseInt((a-n.height)/2,10)+i}if(n.width){var s=void 0!==window.screenLeft?window.screenLeft:screen.left,u=screen.width||window.innerWidth||o.clientWidth;n.left=parseInt((u-n.width)/2,10)+s}var c=[];Object.keys(n).forEach(function(e){var t=n[e];c.push(e+(null!==t?"="+t:""))});var l=function(e){var n=window.open(e,"_blank",c.join(","));try{if(n&&n.addEventListener){var o=r.utils.url(t),i=o.origin||o.protocol+"//"+o.hostname;n.addEventListener("loadstart",function(e){var t=e.url;if(0===t.indexOf(i)){var o=r.utils.url(t),a={location:{assign:function(e){n.addEventListener("exit",function(){setTimeout(function(){l(e)},1e3)})},search:o.search,hash:o.hash,href:o.href},close:function(){n.close&&n.close()}};r.utils.responseHandler(a,window),a.close()}})}}catch(a){}return n&&n.focus&&n.focus(),n};return-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome")&&(e=t+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(e))),l(e)},responseHandler:function(e,t){function r(e,t,r){var o=e.callback,a=e.network;if(i.store(a,e),!("display"in e&&"page"===e.display)){if(r&&o&&o in r){try{delete e.callback}catch(s){}i.store(a,e);var u=JSON.stringify(e);try{r[o](u)}catch(s){}}n()}}function n(){if(e.frameElement)t.document.body.removeChild(e.frameElement);else{try{e.close()}catch(r){}e.addEventListener&&e.addEventListener("load",function(){e.close()})}}var o,i=this,a=e.location;if(o=i.param(a.search),o&&o.state&&(o.code||o.oauth_token)){var s=JSON.parse(o.state);o.redirect_uri=s.redirect_uri||a.href.replace(/[\?\#].*$/,"");var u=s.oauth_proxy+"?"+i.param(o);return void a.assign(u)}if(o=i.merge(i.param(a.search||""),i.param(a.hash||"")),o&&"state"in o){try{var c=JSON.parse(o.state);i.extend(o,c)}catch(l){console.error("Could not decode state parameter")}if("access_token"in o&&o.access_token&&o.network)o.expires_in&&0!==parseInt(o.expires_in,10)||(o.expires_in=0),o.expires_in=parseInt(o.expires_in,10),o.expires=(new Date).getTime()/1e3+(o.expires_in||31536e3),r(o,e,t);else if("error"in o&&o.error&&o.network)o.error={code:o.error,message:o.error_message||o.error_description},r(o,e,t);else if(o.callback&&o.callback in t){var f="result"in o&&o.result?JSON.parse(o.result):!1;t[o.callback](f),n()}o.page_uri&&a.assign(o.page_uri)}else if("oauth_redirect"in o)return void a.assign(decodeURIComponent(o.oauth_redirect))}}),r.utils.Event.call(r),function(e){var t={},r={};e.on("auth.login, auth.logout",function(r){r&&"object"==typeof r&&r.network&&(t[r.network]=e.utils.store(r.network)||{})}),function n(){var o=(new Date).getTime()/1e3,i=function(t){e.emit("auth."+t,{network:a,authResponse:s})};for(var a in e.services)if(e.services.hasOwnProperty(a)){if(!e.services[a].id)continue;var s=e.utils.store(a)||{},u=e.services[a],c=t[a]||{};if(s&&"callback"in s){var l=s.callback;try{delete s.callback}catch(f){}e.utils.store(a,s);try{window[l](s)}catch(f){}}if(s&&"expires"in s&&s.expires<o){var d=u.refresh||s.refresh_token;!d||a in r&&!(r[a]<o)?d||a in r||(i("expired"),r[a]=!0):(e.emit("notice",a+" has expired trying to resignin"),e.login(a,{display:"none",force:!1}),r[a]=o+600);continue}if(c.access_token===s.access_token&&c.expires===s.expires)continue;!s.access_token&&c.access_token?i("logout"):s.access_token&&!c.access_token?i("login"):s.expires!==c.expires&&i("update"),t[a]=s,a in r&&delete r[a]}setTimeout(n,1e3)}()}(r),r.api=function(){function e(e){e=e.replace(/\@\{([a-z\_\-]+)(\|.*?)?\}/gi,function(e,t,r){var a=r?r.replace(/^\|/,""):"";return t in i.query?(a=i.query[t],delete i.query[t]):i.data&&t in i.data?(a=i.data[t],delete i.data[t]):r||o.reject(n("missing_attribute","The attribute "+t+" is missing from the request")),a}),e.match(/^https?:\/\//)||(e=c.base+e),i.url=e,r.request(i,function(e,t){if(!i.formatResponse)return void(("object"==typeof t?t.statusCode>=400:"object"==typeof e&&"error"in e)?o.reject(e):o.fulfill(e));if(e===!0?e={success:!0}:e||(e={}),"delete"===i.method&&(e=!e||r.isEmpty(e)?{success:!0}:e),c.wrap&&(i.path in c.wrap||"default"in c.wrap)){var n=i.path in c.wrap?i.path:"default",a=((new Date).getTime(),c.wrap[n](e,t,i));a&&(e=a)}e&&"paging"in e&&e.paging.next&&("?"===e.paging.next[0]?e.paging.next=i.path+e.paging.next:e.paging.next+="#"+i.path),!e||"error"in e?o.reject(e):o.fulfill(e)})}var t=this,r=t.utils,n=r.error,o=r.Promise(),i=r.args({path:"s!",query:"o",method:"s",data:"o",timeout:"i",callback:"f"},arguments);i.method=(i.method||"get").toLowerCase(),i.headers=i.headers||{},i.query=i.query||{},("get"===i.method||"delete"===i.method)&&(r.extend(i.query,i.data),i.data={});var a=i.data=i.data||{};if(o.then(i.callback,i.callback),!i.path)return o.reject(n("invalid_path","Missing the path parameter from the request"));i.path=i.path.replace(/^\/+/,"");var s=(i.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(s in t.services){i.network=s;var u=new RegExp("^"+s+":?/?");i.path=i.path.replace(u,"")}i.network=t.settings.default_service=i.network||t.settings.default_service;var c=t.services[i.network];if(!c)return o.reject(n("invalid_network","Could not match the service requested: "+i.network));if(i.method in c&&i.path in c[i.method]&&c[i.method][i.path]===!1)return o.reject(n("invalid_path","The provided path is not available on the selected network"));i.oauth_proxy||(i.oauth_proxy=t.settings.oauth_proxy),"proxy"in i||(i.proxy=i.oauth_proxy&&c.oauth&&1===parseInt(c.oauth.version,10)),"timeout"in i||(i.timeout=t.settings.timeout),"formatResponse"in i||(i.formatResponse=!0),i.authResponse=t.getAuthResponse(i.network),i.authResponse&&i.authResponse.access_token&&(i.query.access_token=i.authResponse.access_token);var l,f=i.path;i.options=r.clone(i.query),i.data=r.clone(a);var d=c[{"delete":"del"}[i.method]||i.method]||{};if("get"===i.method){var p=f.split(/[\?#]/)[1];p&&(r.extend(i.query,r.param(p)),f=f.replace(/\?.*?(#|$)/,"$1"))}return(l=f.match(/#(.+)/,""))?(f=f.split("#")[0],i.path=l[1]):f in d?(i.path=f,f=d[f]):"default"in d&&(f=d["default"]),i.redirect_uri=t.settings.redirect_uri,i.xhr=c.xhr,i.jsonp=c.jsonp,i.form=c.form,"function"==typeof f?f(i,e):e(f),o.proxy},r.utils.extend(r.utils,{request:function(e,t){function r(e,t){var r;e.authResponse&&e.authResponse.oauth&&1===parseInt(e.authResponse.oauth.version,10)&&(r=e.query.access_token,delete e.query.access_token,e.proxy=!0),!e.data||"get"!==e.method&&"delete"!==e.method||(n.extend(e.query,e.data),e.data=null);var o=n.qs(e.url,e.query);e.proxy&&(o=n.qs(e.oauth_proxy,{path:o,access_token:r||"",then:e.proxy_response_type||("get"===e.method.toLowerCase()?"redirect":"proxy"),method:e.method.toLowerCase(),suppress_response_codes:!0})),t(o)}var n=this,o=n.error;n.isEmpty(e.data)||"FileList"in window||!n.hasBinary(e.data)||(e.xhr=!1,e.jsonp=!1);var i=this.request_cors(function(){return void 0===e.xhr||e.xhr&&("function"!=typeof e.xhr||e.xhr(e,e.query))});if(i)return void r(e,function(r){var o=n.xhr(e.method,r,e.headers,e.data,t);o.onprogress=e.onprogress||null,o.upload&&e.onuploadprogress&&(o.upload.onprogress=e.onuploadprogress)});var a=e.query;if(e.query=n.clone(e.query),e.callbackID=n.globalEvent(),e.jsonp!==!1){if(e.query.callback=e.callbackID,"function"==typeof e.jsonp&&e.jsonp(e,e.query),"get"===e.method)return void r(e,function(r){n.jsonp(r,t,e.callbackID,e.timeout)});e.query=a}if(e.form!==!1){e.query.redirect_uri=e.redirect_uri,e.query.state=JSON.stringify({callback:e.callbackID});var s;if("function"==typeof e.form&&(s=e.form(e,e.query)),"post"===e.method&&s!==!1)return void r(e,function(r){n.post(r,e.data,s,t,e.callbackID,e.timeout)})}t(o("invalid_request","There was no mechanism for handling this request"))},request_cors:function(e){return"withCredentials"in new XMLHttpRequest&&e()},domInstance:function(e,t){var r="HTML"+(e||"").replace(/^[a-z]/,function(e){return e.toUpperCase()})+"Element";return t?window[r]?t instanceof window[r]:window.Element?t instanceof window.Element&&(!e||t.tagName&&t.tagName.toLowerCase()===e):!(t instanceof Object||t instanceof Array||t instanceof String||t instanceof Number)&&t.tagName&&t.tagName.toLowerCase()===e:!1},clone:function(e){if(null===e||"object"!=typeof e||e instanceof Date||"nodeName"in e||this.isBinary(e))return e;if(Array.isArray(e))return e.map(this.clone.bind(this));var t={};for(var r in e)t[r]=this.clone(e[r]);return t},xhr:function(e,t,r,n,o){function i(e){for(var t,r={},n=/([a-z\-]+):\s?(.*);?/gi;t=n.exec(e);)r[t[1]]=t[2];return r}var a=new XMLHttpRequest,s=this.error,u=!1;"blob"===e&&(u=e,e="GET"),e=e.toUpperCase(),a.onload=function(t){var r=a.response;try{r=JSON.parse(a.responseText)}catch(n){401===a.status&&(r=s("access_denied",a.statusText))}var u=i(a.getAllResponseHeaders());u.statusCode=a.status,o(r||("GET"===e?s("empty_response","Could not get resource"):{}),u)},a.onerror=function(e){var t=a.responseText;try{t=JSON.parse(a.responseText)}catch(r){}o(t||s("access_denied","Could not get resource"))};var c;if("GET"===e||"DELETE"===e)n=null;else if(n&&"string"!=typeof n&&!(n instanceof FormData)&&!(n instanceof File)&&!(n instanceof Blob)){var l=new FormData;for(c in n)n.hasOwnProperty(c)&&(n[c]instanceof HTMLInputElement?"files"in n[c]&&n[c].files.length>0&&l.append(c,n[c].files[0]):n[c]instanceof Blob?l.append(c,n[c],n.name):l.append(c,n[c]));n=l}if(a.open(e,t,!0),u&&("responseType"in a?a.responseType=u:a.overrideMimeType("text/plain; charset=x-user-defined")),r)for(c in r)a.setRequestHeader(c,r[c]);return a.send(n),a},jsonp:function(e,t,r,n){var o,i=this,a=i.error,s=0,u=document.getElementsByTagName("head")[0],c=a("server_error","server_error"),l=function(){s++||window.setTimeout(function(){t(c),u.removeChild(f)},0)};r=i.globalEvent(function(e){return c=e,!0},r),e=e.replace(new RegExp("=\\?(&|$)"),"="+r+"$1");var f=i.append("script",{id:r,name:r,src:e,async:!0,onload:l,onerror:l,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&l()}});window.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(o=i.append("script",{text:"document.getElementById('"+r+"').onerror();"}),f.async=!1),n&&window.setTimeout(function(){c=a("timeout","timeout"),l()},n),u.appendChild(f),o&&u.appendChild(o)},post:function(e,t,r,n,o,i){var a,s=this,u=s.error,c=document,l=null,f=[],d=0,p=null,h=0,m=function(e){h++||n(e)};s.globalEvent(m,o);var y;try{y=c.createElement('<iframe name="'+o+'">')}catch(b){y=c.createElement("iframe")}if(y.name=o,y.id=o,y.style.display="none",r&&r.callbackonload&&(y.onload=function(){m({response:"posted",message:"Content was posted"})}),i&&setTimeout(function(){m(u("timeout","The post operation timed out"))},i),c.body.appendChild(y),s.domInstance("form",t)){for(l=t.form,d=0;d<l.elements.length;d++)l.elements[d]!==t&&l.elements[d].setAttribute("disabled",!0);t=l}if(s.domInstance("form",t))for(l=t,d=0;d<l.elements.length;d++)l.elements[d].disabled||"file"!==l.elements[d].type||(l.encoding=l.enctype="multipart/form-data",l.elements[d].setAttribute("name","file"));else{for(p in t)t.hasOwnProperty(p)&&s.domInstance("input",t[p])&&"file"===t[p].type&&(l=t[p].form,l.encoding=l.enctype="multipart/form-data");l||(l=c.createElement("form"),c.body.appendChild(l),a=l);var g;for(p in t)if(t.hasOwnProperty(p)){var v=s.domInstance("input",t[p])||s.domInstance("textArea",t[p])||s.domInstance("select",t[p]);if(v&&t[p].form===l)v&&t[p].name!==p&&(t[p].setAttribute("name",p),t[p].name=p);else{var _=l.elements[p];if(g)for(_ instanceof NodeList||(_=[_]),d=0;d<_.length;d++)_[d].parentNode.removeChild(_[d]);g=c.createElement("input"),g.setAttribute("type","hidden"),g.setAttribute("name",p),v?g.value=t[p].value:s.domInstance(null,t[p])?g.value=t[p].innerHTML||t[p].innerText:g.value=t[p],l.appendChild(g)}}for(d=0;d<l.elements.length;d++)g=l.elements[d],g.name in t||g.getAttribute("disabled")===!0||(g.setAttribute("disabled",!0),f.push(g))}l.setAttribute("method","POST"),l.setAttribute("target",o),l.target=o,l.setAttribute("action",e),setTimeout(function(){l.submit(),setTimeout(function(){try{a&&a.parentNode.removeChild(a)}catch(e){try{console.error("HelloJS: could not remove iframe")}catch(t){}}for(var r=0;r<f.length;r++)f[r]&&(f[r].setAttribute("disabled",!1),f[r].disabled=!1)},0)},100)},hasBinary:function(e){for(var t in e)if(e.hasOwnProperty(t)&&this.isBinary(e[t]))return!0;return!1},isBinary:function(e){return e instanceof Object&&(this.domInstance("input",e)&&"file"===e.type||"FileList"in window&&e instanceof window.FileList||"File"in window&&e instanceof window.File||"Blob"in window&&e instanceof window.Blob)},toBlob:function(e){var t=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,r=e.match(t);if(!r)return e;for(var n=atob(e.replace(t,"")),o=[],i=0;i<n.length;i++)o.push(n.charCodeAt(i));return new Blob([new Uint8Array(o)],{type:r[1]})}}),function(e){var t=e.api,r=e.utils;r.extend(r,{dataToJSON:function(e){var t=this,r=window,n=e.data;if(t.domInstance("form",n)?n=t.nodeListToJSON(n.elements):"NodeList"in r&&n instanceof NodeList?n=t.nodeListToJSON(n):t.domInstance("input",n)&&(n=t.nodeListToJSON([n])),("File"in r&&n instanceof r.File||"Blob"in r&&n instanceof r.Blob||"FileList"in r&&n instanceof r.FileList)&&(n={file:n}),!("FormData"in r&&n instanceof r.FormData))for(var o in n)if(n.hasOwnProperty(o))if("FileList"in r&&n[o]instanceof r.FileList)1===n[o].length&&(n[o]=n[o][0]);else{if(t.domInstance("input",n[o])&&"file"===n[o].type)continue;t.domInstance("input",n[o])||t.domInstance("select",n[o])||t.domInstance("textArea",n[o])?n[o]=n[o].value:t.domInstance(null,n[o])&&(n[o]=n[o].innerHTML||n[o].innerText)}return e.data=n,n},nodeListToJSON:function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];!n.disabled&&n.name&&("file"===n.type?t[n.name]=n:t[n.name]=n.value||n.innerHTML)}return t}}),e.api=function(){var e=r.args({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments);return e.data&&r.dataToJSON(e),t.call(this,e)}}(r),r.utils.responseHandler(window,window.opener||window.parent),"object"==typeof chrome&&"object"==typeof chrome.identity&&chrome.identity.launchWebAuthFlow&&!function(){function e(t,n){var o={closed:!1};return chrome.identity.launchWebAuthFlow({url:t,interactive:n},function(t){if(void 0===t)return void(o.closed=!0);var n=r.utils.url(t),i={location:{assign:function(t){e(t,!1)},search:n.search,hash:n.hash,href:n.href},close:function(){}};r.utils.responseHandler(i,window)}),o}r.utils.popup=function(t){return e(t,!0)},r.utils.iframe=function(t){e(t,!1)},r.utils.request_cors=function(e){return e(),!0};var t={};chrome.storage.local.get("hello",function(e){t=e.hello||{}}),r.utils.store=function(e,r){return 0===arguments.length?t:1===arguments.length?t[e]||null:r?(t[e]=r,chrome.storage.local.set({hello:t}),r):null===r?(delete t[e],chrome.storage.local.set({hello:t}),null):void 0}}(),function(e){function t(e){e&&"error"in e&&(e.error={code:"server_error",message:e.error.message||e.error})}function r(t,r,n){if(!("object"!=typeof t||"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"error"in t)){var o=("app_folder"!==t.root?t.root:"")+t.path.replace(/\&/g,"%26");o=o.replace(/^\//,""),t.thumb_exists&&(t.thumbnail=n.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/thumbnails/auto/"+o+"?format=jpeg&size=m")+"&access_token="+n.options.access_token),t.type=t.is_dir?"folder":t.mime_type,t.name=t.path.replace(/.*\//g,""),t.is_dir?t.files=o.replace(/^\//,""):(t.downloadLink=e.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/files/auto/"+o)+"&access_token="+n.options.access_token,t.file="https://api-content.dropbox.com/1/files/auto/"+o),t.id||(t.id=t.path.replace(/^\//,""))}}function n(e){return function(t,r){delete t.query.limit,r(e)}}var o={version:"1.0",auth:"https://www.dropbox.com/1/oauth/authorize",request:"https://api.dropbox.com/1/oauth/request_token",token:"https://api.dropbox.com/1/oauth/access_token"},i={version:2,auth:"https://www.dropbox.com/1/oauth2/authorize",grant:"https://api.dropbox.com/1/oauth2/token"};e.init({dropbox:{name:"Dropbox",oauth:i,login:function(t){t.qs.scope="",delete t.qs.display;var r=decodeURIComponent(t.qs.redirect_uri);0===r.indexOf("http:")&&0!==r.indexOf("http://localhost/")?e.services.dropbox.oauth=o:e.services.dropbox.oauth=i,t.options.popup.width=1e3,t.options.popup.height=1e3},base:"https://api.dropbox.com/1/",root:"sandbox",get:{me:"account/info","me/files":n("metadata/auto/@{parent|}"),"me/folder":n("metadata/auto/@{id}"),"me/folders":n("metadata/auto/"),"default":function(e,t){e.path.match("https://api-content.dropbox.com/1/files/")&&(e.method="blob"),t(e.path)}},post:{"me/files":function(t,r){
var n=t.data.parent,o=t.data.name;t.data={file:t.data.file},"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),r("https://api-content.dropbox.com/1/files_put/auto/"+n+"/"+o)},"me/folders":function(t,r){var n=t.data.name;t.data={},r("fileops/create_folder?root=@{root|sandbox}&"+e.utils.param({path:n}))}},del:{"me/files":"fileops/delete?root=@{root|sandbox}&path=@{id}","me/folder":"fileops/delete?root=@{root|sandbox}&path=@{id}"},wrap:{me:function(e){if(t(e),!e.uid)return e;e.name=e.display_name;var r=e.name.split(" ");return e.first_name=r.shift(),e.last_name=r.join(" "),e.id=e.uid,delete e.uid,delete e.display_name,e},"default":function(e,n,o){return t(e),e.is_dir&&e.contents&&(e.data=e.contents,delete e.contents,e.data.forEach(function(t){t.root=e.root,r(t,n,o)})),r(e,n,o),e.is_deleted&&(e.success=!0),e}},xhr:function(e){if(e.data&&e.data.file){var t=e.data.file;t&&(t.files?e.data=t.files[0]:e.data=t)}return"delete"===e.method&&(e.method="post"),!0},form:function(e,t){delete t.state,delete t.redirect_uri}}})}(r),function(e){function t(e){return e.id&&(e.thumbnail=e.picture="https://graph.facebook.com/"+e.id+"/picture"),e}function r(e){return"data"in e&&e.data.forEach(t),e}function n(e,t,r){if("boolean"==typeof e&&(e={success:e}),e&&"data"in e){var n=r.query.access_token;if(!(e.data instanceof Array)){var i=e.data;delete e.data,e.data=[i]}e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.pictures=(e.images||[]).sort(function(e,t){return e.width-t.width}),e.cover_photo&&e.cover_photo.id&&(e.thumbnail=o+e.cover_photo.id+"/picture?access_token="+n),"album"===e.type&&(e.files=e.photos=o+e.id+"/photos"),e.can_upload&&(e.upload_location=o+e.id+"/photos")})}return e}e.init({facebook:{name:"Facebook",oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/",grant:"https://graph.facebook.com/oauth/access_token"},scope:{basic:"public_profile",email:"email",share:"user_posts",birthday:"user_birthday",events:"user_events",photos:"user_photos",videos:"user_videos",friends:"user_friends",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_actions",publish:"publish_actions",offline_access:"offline_access"},refresh:!0,login:function(e){e.options.force&&(e.qs.auth_type="reauthenticate"),e.options.popup.width=580,e.options.popup.height=400},logout:function(t,r){var n=e.utils.globalEvent(t),o=encodeURIComponent(e.settings.redirect_uri+"?"+e.utils.param({callback:n,result:JSON.stringify({force:!0}),state:"{}"})),i=(r.authResponse||{}).access_token;return e.utils.iframe("https://www.facebook.com/logout.php?next="+o+"&access_token="+i),i?void 0:!1},base:"https://graph.facebook.com/v2.4/",get:{me:"me?fields=email,first_name,last_name,name,timezone,verified","me/friends":"me/friends","me/following":"me/friends","me/followers":"me/friends","me/share":"me/feed","me/like":"me/likes","me/files":"me/albums","me/albums":"me/albums?fields=cover_photo,name","me/album":"@{id}/photos?fields=picture","me/photos":"me/photos","me/photo":"@{id}","friend/albums":"@{id}/albums","friend/photos":"@{id}/photos"},post:{"me/share":"me/feed","me/photo":"@{id}"},wrap:{me:t,"me/friends":r,"me/following":r,"me/followers":r,"me/albums":n,"me/photos":n,"me/files":n,"default":n},xhr:function(t,r){return("get"===t.method||"post"===t.method)&&(r.suppress_response_codes=!0),"post"===t.method&&t.data&&"string"==typeof t.data.file&&(t.data.file=e.utils.toBlob(t.data.file)),!0},jsonp:function(t,r){var n=t.method;"get"===n||e.utils.hasBinary(t.data)?"delete"===t.method&&(r.method="delete",t.method="post"):(t.data.method=n,t.method="get")},form:function(e){return{callbackonload:!0}}}});var o="https://graph.facebook.com/"}(r),function(e){function t(t,r,n){var o=(n?"":"flickr:")+"?method="+t+"&api_key="+e.services.flickr.id+"&format=json";for(var i in r)r.hasOwnProperty(i)&&(o+="&"+i+"="+r[i]);return o}function r(t){var r=e.getAuthResponse("flickr");t(r&&r.user_nsid?r.user_nsid:null)}function n(e,n){return n||(n={}),function(o,i){r(function(r){n.user_id=r,i(t(e,n,!0))})}}function o(e,t){var r="https://www.flickr.com/images/buddyicon.gif";return e.nsid&&e.iconserver&&e.iconfarm&&(r="https://farm"+e.iconfarm+".staticflickr.com/"+e.iconserver+"/buddyicons/"+e.nsid+(t?"_"+t:"")+".jpg"),r}function i(e,t,r,n,o){return o=o?"_"+o:"","https://farm"+t+".staticflickr.com/"+r+"/"+e+"_"+n+o+".jpg"}function a(e){e&&e.stat&&"ok"!=e.stat.toLowerCase()&&(e.error={code:"invalid_request",message:e.message})}function s(e){if(e.photoset||e.photos){var t="photoset"in e?"photoset":"photos";e=c(e,t),f(e),e.data=e.photo,delete e.photo;for(var r=0;r<e.data.length;r++){var n=e.data[r];n.name=n.title,n.picture=i(n.id,n.farm,n.server,n.secret,""),n.pictures=u(n.id,n.farm,n.server,n.secret),n.source=i(n.id,n.farm,n.server,n.secret,"b"),n.thumbnail=i(n.id,n.farm,n.server,n.secret,"m")}}return e}function u(e,t,r,n){var o=2048,a=[{id:"t",max:100},{id:"m",max:240},{id:"n",max:320},{id:"",max:500},{id:"z",max:640},{id:"c",max:800},{id:"b",max:1024},{id:"h",max:1600},{id:"k",max:2048},{id:"o",max:o}];return a.map(function(o){return{source:i(e,t,r,n,o.id),width:o.max,height:o.max}})}function c(e,t){return t in e?e=e[t]:"error"in e||(e.error={code:"invalid_request",message:e.message||"Failed to get data from Flickr"}),e}function l(e){if(a(e),e.contacts){e=c(e,"contacts"),f(e),e.data=e.contact,delete e.contact;for(var t=0;t<e.data.length;t++){var r=e.data[t];r.id=r.nsid,r.name=r.realname||r.username,r.thumbnail=o(r,"m")}}return e}function f(e){e.page&&e.pages&&e.page!==e.pages&&(e.paging={next:"?page="+ ++e.page})}e.init({flickr:{name:"Flickr",oauth:{version:"1.0a",auth:"https://www.flickr.com/services/oauth/authorize?perms=read",request:"https://www.flickr.com/services/oauth/request_token",token:"https://www.flickr.com/services/oauth/access_token"},base:"https://api.flickr.com/services/rest",get:{me:n("flickr.people.getInfo"),"me/friends":n("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/following":n("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/followers":n("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/albums":n("flickr.photosets.getList",{per_page:"@{limit|50}"}),"me/album":n("flickr.photosets.getPhotos",{photoset_id:"@{id}"}),"me/photos":n("flickr.people.getPhotos",{per_page:"@{limit|50}"})},wrap:{me:function(e){if(a(e),e=c(e,"person"),e.id){if(e.realname){e.name=e.realname._content;var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=o(e,"l"),e.picture=o(e,"l")}return e},"me/friends":l,"me/followers":l,"me/following":l,"me/albums":function(e){return a(e),e=c(e,"photosets"),f(e),e.photoset&&(e.data=e.photoset,e.data.forEach(function(e){e.name=e.title._content,e.photos="https://api.flickr.com/services/rest"+t("flickr.photosets.getPhotos",{photoset_id:e.id},!0)}),delete e.photoset),e},"me/photos":function(e){return a(e),s(e)},"default":function(e){return a(e),s(e)}},xhr:!1,jsonp:function(e,t){"get"==e.method&&(delete t.callback,t.jsoncallback=e.callbackID)}}})}(r),function(e){function t(e){!e.meta||400!==e.meta.code&&401!==e.meta.code||(e.error={code:"access_denied",message:e.meta.errorDetail})}function r(e){e&&e.id&&(e.thumbnail=e.photo.prefix+"100x100"+e.photo.suffix,e.name=e.firstName+" "+e.lastName,e.first_name=e.firstName,e.last_name=e.lastName,e.contact&&e.contact.email&&(e.email=e.contact.email))}function n(e,t){var r=t.access_token;return delete t.access_token,t.oauth_token=r,t.v=20121125,!0}e.init({foursquare:{name:"Foursquare",oauth:{version:2,auth:"https://foursquare.com/oauth2/authenticate",grant:"https://foursquare.com/oauth2/access_token"},refresh:!0,base:"https://api.foursquare.com/v2/",get:{me:"users/self","me/friends":"users/self/friends","me/followers":"users/self/friends","me/following":"users/self/friends"},wrap:{me:function(e){return t(e),e&&e.response&&(e=e.response.user,r(e)),e},"default":function(e){return t(e),e&&"response"in e&&"friends"in e.response&&"items"in e.response.friends&&(e.data=e.response.friends.items,e.data.forEach(r),delete e.response),e}},xhr:n,jsonp:n}})}(r),function(e){function t(e,t){var r=t?t.statusCode:e&&"meta"in e&&"status"in e.meta&&e.meta.status;(401===r||403===r)&&(e.error={code:"access_denied",message:e.message||(e.data?e.data.message:"Could not get response")},delete e.message)}function r(e){e.id&&(e.thumbnail=e.picture=e.avatar_url,e.name=e.login)}function n(e,t,r){if(e.data&&e.data.length&&t&&t.Link){var n=t.Link.match(/<(.*?)>;\s*rel=\"next\"/);n&&(e.paging={next:n[1]})}}e.init({github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token",response_type:"code"},scope:{email:"user:email"},base:"https://api.github.com/",get:{me:"user","me/friends":"user/following?per_page=@{limit|100}","me/following":"user/following?per_page=@{limit|100}","me/followers":"user/followers?per_page=@{limit|100}","me/like":"user/starred?per_page=@{limit|100}"},wrap:{me:function(e,n){return t(e,n),r(e),e},"default":function(e,o,i){return t(e,o),Array.isArray(e)&&(e={data:e}),e.data&&(n(e,o,i),e.data.forEach(r)),e}},xhr:function(e){return"get"!==e.method&&e.data&&(e.headers=e.headers||{},e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),!0}}})}(r),function(e){function t(e){return parseInt(e,10)}function r(e){return l(e),e.data=e.items,delete e.items,e}function n(e){return e.error?void 0:(e.name||(e.name=e.title||e.message),e.picture||(e.picture=e.thumbnailLink),e.thumbnail||(e.thumbnail=e.thumbnailLink),"application/vnd.google-apps.folder"===e.mimeType&&(e.type="folder",e.files="https://www.googleapis.com/drive/v2/files?q=%22"+e.id+"%22+in+parents"),e)}function o(e){return{source:e.url,width:e.width,height:e.height}}function i(e){e.data=e.feed.entry.map(c),delete e.feed}function a(e){if(l(e),"feed"in e&&"entry"in e.feed)e.data=e.feed.entry.map(c),delete e.feed;else{if("entry"in e)return c(e.entry);"items"in e?(e.data=e.items.map(n),delete e.items):n(e)}return e}function s(e){e.name=e.displayName||e.name,e.picture=e.picture||(e.image?e.image.url:null),e.thumbnail=e.picture}function u(e,t,r){l(e);if("feed"in e&&"entry"in e.feed){for(var n=r.query.access_token,o=0;o<e.feed.entry.length;o++){var i=e.feed.entry[o];if(i.id=i.id.$t,i.name=i.title.$t,delete i.title,i.gd$email&&(i.email=i.gd$email&&i.gd$email.length>0?i.gd$email[0].address:null,i.emails=i.gd$email,delete i.gd$email),i.updated&&(i.updated=i.updated.$t),i.link){var a=i.link.length>0?i.link[0].href:null;a&&i.link[0].gd$etag&&(a+=(a.indexOf("?")>-1?"&":"?")+"access_token="+n,i.picture=a,i.thumbnail=a),delete i.link}i.category&&delete i.category}e.data=e.feed.entry,delete e.feed}return e}function c(e){var t,r=e.media$group,n=r.media$content.length?r.media$content[0]:{},i=r.media$content||[],a=r.media$thumbnail||[],s=i.concat(a).map(o).sort(function(e,t){return e.width-t.width}),u=0,c={id:e.id.$t,name:e.title.$t,description:e.summary.$t,updated_time:e.updated.$t,created_time:e.published.$t,picture:n?n.url:null,pictures:s,images:[],thumbnail:n?n.url:null,width:n.width,height:n.height};if("link"in e)for(u=0;u<e.link.length;u++){var l=e.link[u];if(l.rel.match(/\#feed$/)){c.upload_location=c.files=c.photos=l.href;break}}if("category"in e&&e.category.length)for(t=e.category,u=0;u<t.length;u++)t[u].scheme&&t[u].scheme.match(/\#kind$/)&&(c.type=t[u].term.replace(/^.*?\#/,""));return"media$thumbnail"in r&&r.media$thumbnail.length&&(t=r.media$thumbnail,c.thumbnail=t[0].url,c.images=t.map(o)),t=r.media$content,t&&t.length&&c.images.push(o(t[0])),c}function l(e){if("feed"in e&&e.feed.openSearch$itemsPerPage){var r=t(e.feed.openSearch$itemsPerPage.$t),n=t(e.feed.openSearch$startIndex.$t),o=t(e.feed.openSearch$totalResults.$t);o>n+r&&(e.paging={next:"?start="+(n+r)})}else"nextPageToken"in e&&(e.paging={next:"?pageToken="+e.nextPageToken})}function f(){function e(e){var r=new FileReader;r.onload=function(r){t(btoa(r.target.result),e.type+i+"Content-Transfer-Encoding: base64")},r.readAsBinaryString(e)}function t(e,t){r.push(i+"Content-Type: "+t+i+i+e),o--,s()}var r=[],n=(1e10*Math.random()).toString(32),o=0,i="\r\n",a=i+"--"+n,s=function(){},u=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i;this.append=function(r,n){"string"!=typeof r&&"length"in Object(r)||(r=[r]);for(var a=0;a<r.length;a++){o++;var s=r[a];if("undefined"!=typeof File&&s instanceof File||"undefined"!=typeof Blob&&s instanceof Blob)e(s);else if("string"==typeof s&&s.match(u)){var c=s.match(u);t(s.replace(u,""),c[1]+i+"Content-Transfer-Encoding: base64")}else t(s,n)}},this.onready=function(e){(s=function(){0===o&&(r.unshift(""),r.push("--"),e(r.join(a),n),r=[])})()}}function d(e,t){var r={};e.data&&"undefined"!=typeof HTMLInputElement&&e.data instanceof HTMLInputElement&&(e.data={file:e.data}),!e.data.name&&Object(Object(e.data.file).files).length&&"post"===e.method&&(e.data.name=e.data.file.files[0].name),"post"===e.method?e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],file:e.data.file}:(r=e.data,e.data={},r.parent&&(e.data.parents=[{id:e.data.parent||"root"}]),r.file&&(e.data.file=r.file),r.name&&(e.data.title=r.name));var n;if("file"in e.data&&(n=e.data.file,delete e.data.file,"object"==typeof n&&"files"in n&&(n=n.files),!n||!n.length))return void t({error:{code:"request_invalid",message:"There were no files attached with this request to upload"}});var o=new f;o.append(JSON.stringify(e.data),"application/json"),n&&o.append(n),o.onready(function(n,o){e.headers["content-type"]='multipart/related; boundary="'+o+'"',e.data=n,t("upload/drive/v2/files"+(r.id?"/"+r.id:"")+"?uploadType=multipart")})}function p(e){if("object"==typeof e.data)try{e.data=JSON.stringify(e.data),e.headers["content-type"]="application/json"}catch(t){}}var h="https://www.google.com/m8/feeds/contacts/default/full?v=3.0&alt=json&max-results=@{limit|1000}&start-index=@{start|1}";e.init({google:{name:"Google Plus",oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth",grant:"https://accounts.google.com/o/oauth2/token"},scope:{basic:"https://www.googleapis.com/auth/plus.me profile",email:"email",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",create_event:"",offline_access:""},scope_delim:" ",login:function(e){"none"===e.qs.display&&(e.qs.display=""),"code"===e.qs.response_type&&(e.qs.access_type="offline"),e.options.force&&(e.qs.approval_prompt="force")},base:"https://www.googleapis.com/",get:{me:"plus/v1/people/me","me/friends":"plus/v1/people/me/people/visible?maxResults=@{limit|100}","me/following":h,"me/followers":h,"me/contacts":h,"me/share":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/feed":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}","me/album":function(e,t){var r=e.query.id;delete e.query.id,t(r.replace("/entry/","/feed/"))},"me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}","me/file":"drive/v2/files/@{id}","me/files":"drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}","me/folders":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}","me/folder":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}"},post:{"me/files":d,"me/folders":function(e,t){e.data={title:e.data.name,parents:[{id:e.data.parent||"root"}],mimeType:"application/vnd.google-apps.folder"},t("drive/v2/files")}},put:{"me/files":d},del:{"me/files":"drive/v2/files/@{id}","me/folder":"drive/v2/files/@{id}"},patch:{"me/file":"drive/v2/files/@{id}"},wrap:{me:function(e){return e.id&&(e.last_name=e.family_name||(e.name?e.name.familyName:null),e.first_name=e.given_name||(e.name?e.name.givenName:null),e.emails&&e.emails.length&&(e.email=e.emails[0].value),s(e)),e},"me/friends":function(e){return e.items&&(l(e),e.data=e.items,e.data.forEach(s),delete e.items),e},"me/contacts":u,"me/followers":u,"me/following":u,"me/share":r,"me/feed":r,"me/albums":a,"me/photos":i,"default":a},xhr:function(t){return"post"===t.method||"put"===t.method?p(t):"patch"===t.method&&(e.utils.extend(t.query,t.data),t.data=null),!0},form:!1}})}(r),function(e){function t(e){return{source:e.url,width:e.width,height:e.height}}function r(e){return"string"==typeof e?{error:{code:"invalid_request",message:e}}:(e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message}),e)}function n(e){return i(e),e&&"data"in e&&e.data.forEach(o),e}function o(e){e.id&&(e.thumbnail=e.profile_picture,e.name=e.full_name||e.username)}function i(e){"pagination"in e&&(e.paging={next:e.pagination.next_url},delete e.pagination)}e.init({instagram:{name:"Instagram",oauth:{version:2,auth:"https://instagram.com/oauth/authorize/",grant:"https://api.instagram.com/oauth/access_token"},refresh:!0,scope:{basic:"basic",photos:"",friends:"relationships",publish:"likes comments"},scope_delim:" ",login:function(e){e.qs.display=""},base:"https://api.instagram.com/v1/",get:{me:"users/self","me/feed":"users/self/feed?count=@{limit|100}","me/photos":"users/self/media/recent?min_id=0&count=@{limit|100}","me/friends":"users/self/follows?count=@{limit|100}","me/following":"users/self/follows?count=@{limit|100}","me/followers":"users/self/followed-by?count=@{limit|100}","friend/photos":"users/@{id}/media/recent?min_id=0&count=@{limit|100}"},post:{"me/like":function(e,t){var r=e.data.id;e.data={},t("media/"+r+"/likes")}},del:{"me/like":"media/@{id}/likes"},wrap:{me:function(e){return r(e),"data"in e&&(e.id=e.data.id,e.thumbnail=e.data.profile_picture,e.name=e.data.full_name||e.data.username),e},"me/friends":n,"me/following":n,"me/followers":n,"me/photos":function(e){return r(e),i(e),"data"in e&&(e.data=e.data.filter(function(e){return"image"===e.type}),e.data.forEach(function(e){e.name=e.caption?e.caption.text:null,e.thumbnail=e.images.thumbnail.url,e.picture=e.images.standard_resolution.url,e.pictures=Object.keys(e.images).map(function(r){var n=e.images[r];return t(n)}).sort(function(e,t){return e.width-t.width})})),e},"default":function(e){return e=r(e),i(e),e}},xhr:function(e,t){var r=e.method,n="get"!==r;return n&&("post"!==r&&"put"!==r||!e.query.access_token||(e.data.access_token=e.query.access_token,delete e.query.access_token),e.proxy=n),n},form:!1}})}(r),function(e){function t(e,t){var r,o;return e&&"Message"in e&&(o=e.Message,delete e.Message,"ErrorCode"in e?(r=e.ErrorCode,delete e.ErrorCode):r=n(t),e.error={code:r,message:o,details:e}),e}function r(e,t){var r=t.access_token;return delete t.access_token,e.headers.Authorization="Bearer "+r,"get"!==e.method&&e.data&&(e.headers["Content-Type"]="application/json","object"==typeof e.data&&(e.data=JSON.stringify(e.data))),"put"===e.method&&(e.method="patch"),!0}function n(e){switch(e.statusCode){case 400:return"invalid_request";case 403:return"stale_token";case 401:return"invalid_token";case 500:return"server_error";default:return"server_error"}}e.init({joinme:{name:"join.me",oauth:{version:2,auth:"https://secure.join.me/api/public/v1/auth/oauth2",grant:"https://secure.join.me/api/public/v1/auth/oauth2"},refresh:!1,scope:{basic:"user_info",user:"user_info",scheduler:"scheduler",start:"start_meeting"},scope_delim:" ",login:function(e){e.options.popup.width=400,e.options.popup.height=700},base:"https://api.join.me/v1/",get:{me:"user",meetings:"meetings","meetings/info":"meetings/@{id}"},post:{"meetings/start/adhoc":function(e,t){t("meetings/start")},"meetings/start/scheduled":function(e,t){var r=e.data.meetingId;e.data={},t("meetings/"+r+"/start")},"meetings/schedule":function(e,t){t("meetings")}},patch:{"meetings/update":function(e,t){t("meetings/"+e.data.meetingId)}},del:{"meetings/delete":"meetings/@{id}"},wrap:{me:function(e,r){return t(e,r),e.email?(e.name=e.fullName,e.first_name=e.name.split(" ")[0],e.last_name=e.name.split(" ")[1],e.id=e.email,e):e},"default":function(e,r){return t(e,r),e}},xhr:r}})}(r),function(e){function t(e){e&&"errorCode"in e&&(e.error={code:e.status,message:e.message})}function r(e){return e.error?void 0:(e.first_name=e.firstName,e.last_name=e.lastName,e.name=e.formattedName||e.first_name+" "+e.last_name,e.thumbnail=e.pictureUrl,e.email=e.emailAddress,e)}function n(e){return t(e),o(e),e.values&&(e.data=e.values.map(r),delete e.values),e}function o(e){"_count"in e&&"_start"in e&&e._count+e._start<e._total&&(e.paging={next:"?start="+(e._start+e._count)+"&count="+e._count})}function i(e,t){"{}"===JSON.stringify(e)&&200===t.statusCode&&(e.success=!0)}function a(e){e.access_token&&(e.oauth2_access_token=e.access_token,delete e.access_token)}function s(e,t){e.headers["x-li-format"]="json";var r=e.data.id;e.data=("delete"!==e.method).toString(),e.method="put",t("people/~/network/updates/key="+r+"/is-liked")}e.init({linkedin:{oauth:{version:2,response_type:"code",auth:"https://www.linkedin.com/uas/oauth2/authorization",grant:"https://www.linkedin.com/uas/oauth2/accessToken"},refresh:!0,scope:{basic:"r_basicprofile",email:"r_emailaddress",friends:"",publish:"w_share"},scope_delim:" ",base:"https://api.linkedin.com/v1/",get:{me:"people/~:(picture-url,first-name,last-name,id,formatted-name,email-address)","me/share":"people/~/network/updates?count=@{limit|250}"},post:{"me/share":function(e,t){var r={visibility:{code:"anyone"}};e.data.id?r.attribution={share:{id:e.data.id}}:(r.comment=e.data.message,e.data.picture&&e.data.link&&(r.content={"submitted-url":e.data.link,"submitted-image-url":e.data.picture})),e.data=JSON.stringify(r),t("people/~/shares?format=json")},"me/like":s},del:{"me/like":s},wrap:{me:function(e){return t(e),r(e),e},"me/friends":n,"me/following":n,"me/followers":n,"me/share":function(e){return t(e),o(e),e.values&&(e.data=e.values.map(r),e.data.forEach(function(e){e.message=e.headline}),delete e.values),e},"default":function(e,r){t(e),i(e,r),o(e)}},jsonp:function(e,t){a(t),"get"===e.method&&(t.format="jsonp",t["error-callback"]=e.callbackID)},xhr:function(e,t){return"get"!==e.method?(a(t),e.headers["Content-Type"]="application/json",e.headers["x-li-format"]="json",e.proxy=!0,!0):!1}}})}(r),function(e){function t(e,t){var r=t.access_token;return delete t.access_token,t.oauth_token=r,t["_status_code_map[302]"]=200,!0}function r(e){return e.id&&(e.picture=e.avatar_url,e.thumbnail=e.avatar_url,e.name=e.username||e.full_name),e}function n(e){"next_href"in e&&(e.paging={next:e.next_href})}e.init({soundcloud:{name:"SoundCloud",oauth:{version:2,auth:"https://soundcloud.com/connect",grant:"https://soundcloud.com/oauth2/token"},base:"https://api.soundcloud.com/",get:{me:"me.json","me/friends":"me/followings.json","me/followers":"me/followers.json","me/following":"me/followings.json","default":function(e,t){t(e.path+".json")}},wrap:{me:function(e){return r(e),e},"default":function(e){return Array.isArray(e)&&(e={data:e.map(r)}),n(e),e}},xhr:t,jsonp:t}})}(r),function(e){function t(e){if(e.id){if(e.name){var t=e.name.split(" ");e.first_name=t.shift(),e.last_name=t.join(" ")}e.thumbnail=e.profile_image_url_https||e.profile_image_url}return e}function r(e){return n(e),o(e),e.users&&(e.data=e.users.map(t),delete e.users),e}function n(e){if(e.errors){var t=e.errors[0];e.error={code:"request_failed",message:t.message}}}function o(e){"next_cursor_str"in e&&(e.paging={next:"?cursor="+e.next_cursor_str})}function i(e){return Array.isArray(e)?{data:e}:e}var a="https://api.twitter.com/";e.init({twitter:{oauth:{version:"1.0a",auth:a+"oauth/authenticate",request:a+"oauth/request_token",token:a+"oauth/access_token"},login:function(e){var t="?force_login=true";this.oauth.auth=this.oauth.auth.replace(t,"")+(e.options.force?t:"")},base:a+"1.1/",get:{me:"account/verify_credentials.json","me/friends":"friends/list.json?count=@{limit|200}","me/following":"friends/list.json?count=@{limit|200}","me/followers":"followers/list.json?count=@{limit|200}","me/share":"statuses/user_timeline.json?count=@{limit|200}","me/like":"favorites/list.json?count=@{limit|200}"},post:{"me/share":function(t,r){var n=t.data;t.data=null;var o=[];n.message&&(o.push(n.message),delete n.message),n.link&&(o.push(n.link),delete n.link),n.picture&&(o.push(n.picture),delete n.picture),o.length&&(n.status=o.join(" ")),n.file?(n["media[]"]=n.file,delete n.file,t.data=n,r("statuses/update_with_media.json")):"id"in n?r("statuses/retweet/"+n.id+".json"):(e.utils.extend(t.query,n),r("statuses/update.json?include_entities=1"))},"me/like":function(e,t){var r=e.data.id;e.data=null,t("favorites/create.json?id="+r)}},del:{"me/like":function(){p.method="post";var e=p.data.id;p.data=null,callback("favorites/destroy.json?id="+e)}},wrap:{me:function(e){return n(e),t(e),e},"me/friends":r,"me/followers":r,"me/following":r,"me/share":function(e){return n(e),o(e),!e.error&&"length"in e?{data:e}:e},"default":function(e){return e=i(e),o(e),e}},xhr:function(e){return"get"!==e.method}}})}(r),function(e){function t(e,t){return null!==e&&"response"in e&&null!==e.response&&e.response.length&&(e=e.response[0],e.id=e.uid,e.thumbnail=e.picture=e.photo_max,e.name=e.first_name+" "+e.last_name,t.authResponse&&null!==t.authResponse.email&&(e.email=t.authResponse.email)),e}function r(e){if(e.error){var t=e.error;e.error={code:t.error_code,message:t.error_msg}}}e.init({vk:{name:"Vk",oauth:{version:2,auth:"https://oauth.vk.com/authorize",grant:"https://oauth.vk.com/access_token"},scope:{email:"email",offline_access:"offline"},refresh:!0,login:function(e){e.qs.display=window.navigator&&window.navigator.userAgent&&/ipad|phone|phone|android/.test(window.navigator.userAgent.toLowerCase())?"mobile":"popup"},base:"https://api.vk.com/method/",get:{me:function(e,t){e.query.fields="id,first_name,last_name,photo_max",t("users.get")}},wrap:{me:function(e,n,o){return r(e),t(e,o)}},xhr:!1,jsonp:!0,form:!1}})}(r),function(e){function t(e){return"data"in e&&e.data.forEach(function(e){e.picture&&(e.thumbnail=e.picture),e.images&&(e.pictures=e.images.map(r).sort(function(e,t){return e.width-t.width}))}),e}function r(e){return{width:e.width,height:e.height,source:e.source}}function n(e){return"data"in e&&e.data.forEach(function(e){e.photos=e.files="https://apis.live.net/v5.0/"+e.id+"/photos"}),e}function o(e,t,r){if(e.id){var n=r.query.access_token;if(e.emails&&(e.email=e.emails.preferred),e.is_friend!==!1){var o=e.user_id||e.id;e.thumbnail=e.picture="https://apis.live.net/v5.0/"+o+"/picture?access_token="+n}}return e}function i(e,t,r){return"data"in e&&e.data.forEach(function(e){o(e,t,r)}),e}e.init({windows:{name:"Windows live",oauth:{version:2,auth:"https://login.live.com/oauth20_authorize.srf",grant:"https://login.live.com/oauth20_token.srf"},refresh:!0,logout:function(){return"http://login.live.com/oauth20_logout.srf?ts="+(new Date).getTime()},scope:{basic:"wl.signin,wl.basic",email:"wl.emails",birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"wl.contacts_emails",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},base:"https://apis.live.net/v5.0/",get:{me:"me","me/friends":"me/friends","me/following":"me/contacts","me/followers":"me/friends","me/contacts":"me/contacts","me/albums":"me/albums","me/album":"@{id}/files","me/photo":"@{id}","me/files":"@{parent|me/skydrive}/files","me/folders":"@{id|me/skydrive}/files","me/folder":"@{id|me/skydrive}/files"},post:{"me/albums":"me/albums","me/album":"@{id}/files/","me/folders":"@{id|me/skydrive/}","me/files":"@{parent|me/skydrive}/files"},del:{"me/album":"@{id}","me/photo":"@{id}","me/folder":"@{id}","me/files":"@{id}"},wrap:{me:o,"me/friends":i,"me/contacts":i,"me/followers":i,"me/following":i,"me/albums":n,"me/photos":t,"default":t},xhr:function(t){return"get"===t.method||"delete"===t.method||e.utils.hasBinary(t.data)||("string"==typeof t.data.file?t.data.file=e.utils.toBlob(t.data.file):(t.data=JSON.stringify(t.data),t.headers={"Content-Type":"application/json"})),!0},jsonp:function(t){"get"===t.method||e.utils.hasBinary(t.data)||(t.data.method=t.method,t.method="get")}}})}(r),function(e){function t(e){e&&"meta"in e&&"error_type"in e.meta&&(e.error={code:e.meta.error_type,message:e.meta.error_message})}function r(e){if(t(e),e.query&&e.query.results&&e.query.results.profile){e=e.query.results.profile,e.id=e.guid,e.last_name=e.familyName,e.first_name=e.givenName||e.nickname;var r=[];e.first_name&&r.push(e.first_name),e.last_name&&r.push(e.last_name),e.name=r.join(" "),e.email=e.emails&&e.emails[0]?e.emails[0].handle:null,e.thumbnail=e.image?e.image.imageUrl:null}return e}function n(e,r,n){t(e),i(e,r,n);return e.query&&e.query.results&&e.query.results.contact&&(e.data=e.query.results.contact,delete e.query,Array.isArray(e.data)||(e.data=[e.data]),e.data.forEach(o)),e}function o(e){e.id=null,!e.fields||e.fields instanceof Array||(e.fields=[e.fields]),(e.fields||[]).forEach(function(t){"email"===t.type&&(e.email=t.value),"name"===t.type&&(e.first_name=t.value.givenName,e.last_name=t.value.familyName,e.name=t.value.givenName+" "+t.value.familyName),"yahooid"===t.type&&(e.id=t.value)})}function i(e,t,r){return e.query&&e.query.count&&r.options&&(e.paging={next:"?start="+(e.query.count+(+r.options.start||1))}),e}function a(e){return"https://query.yahooapis.com/v1/yql?q="+(e+" limit @{limit|100} offset @{start|0}").replace(/\s/g,"%20")+"&format=json"}e.init({yahoo:{oauth:{version:"1.0a",auth:"https://api.login.yahoo.com/oauth/v2/request_auth",request:"https://api.login.yahoo.com/oauth/v2/get_request_token",token:"https://api.login.yahoo.com/oauth/v2/get_token"},login:function(e){e.options.popup.width=560;try{delete e.qs.state.scope}catch(t){}},base:"https://social.yahooapis.com/v1/",get:{me:a("select * from social.profile(0) where guid=me"),"me/friends":a("select * from social.contacts(0) where guid=me"),"me/following":a("select * from social.contacts(0) where guid=me")},wrap:{me:r,"me/friends":n,"me/following":n,"default":i}}})}(r),"function"==typeof define&&define.amd&&define(function(){return r}),"object"==typeof t&&t.exports&&(t.exports=r)}).call(this,e("_process"))},{_process:106}],106:[function(e,t,r){function n(){l=!1,s.length?c=s.concat(c):f=-1,c.length&&o()}function o(){if(!l){var e=setTimeout(n);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function a(){}var s,u=t.exports={},c=[],l=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new i(e,t)),1!==c.length||l||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],107:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/core-js/map")["default"],u=e("babel-runtime/core-js/promise")["default"],c=e("babel-runtime/core-js/set")["default"],l=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{
value:!0});var f=e("./MiniBus"),d=l(f),p=function(e){function t(e){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this._registry=e,this._forwards={}}return o(t,e),i(t,[{key:"addForward",value:function(e,t){var r=this,n=this,o=n._forwards[e];if(!o){var i=n.addListener(e,function(t){o.sandboxToUrls.forEach(function(r,n){console.log("MB-FORWARD: ( "+e+" to "+r.size+" destinations)"),r.forEach(function(e){console.log("SEND-TO: ",e)}),n.postMessage(t)})});o={from:e,fl:i,sandboxToUrls:new s,urlToSandbox:new s,remove:function(e){var t=r.urlToSandbox.get(e);t&&(r.urlToSandbox["delete"](e),r.sandboxToUrls.get(t)["delete"](e))}},n._forwards[e]=o}return new u(function(e){r._registry.getSandbox(t).then(function(r){var n=o.sandboxToUrls.get(r);n||(n=new c,o.sandboxToUrls.set(r,n)),n.add(t),o.urlToSandbox.set(t,r),e(o)})})}},{key:"_publish",value:function(e,t){var r=this,n=r._subscriptions[e];n&&r._publishOn(n,t)}},{key:"_onPostMessage",value:function(e){var t=this;t._registry.resolve(e.to).then(function(r){t._publish(r,e)})["catch"](function(e){console.log("RESOLVE-ERROR: ",e)})}}]),t}(d["default"]);r["default"]=p,t.exports=r["default"]},{"./MiniBus":108,"babel-runtime/core-js/map":1,"babel-runtime/core-js/promise":9,"babel-runtime/core-js/set":10,"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],108:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("./Pipeline"),s=i(a),u=function(){function e(){o(this,e);var t=this;t._msgId=0,t._subscriptions={},t._responseTimeOut=3e3,t._responseCallbacks={},t._pipeline=new s["default"](function(e){console.log("PIPELINE-ERROR: ",JSON.stringify(e))}),t._registerExternalListener()}return n(e,[{key:"addListener",value:function(e,t){var r=this,n=new c(r._subscriptions,e,t),o=r._subscriptions[e];return o||(o=[],r._subscriptions[e]=o),o.push(n),n}},{key:"addResponseListener",value:function(e,t,r){this._responseCallbacks[e+t]=r}},{key:"removeResponseListener",value:function(e,t){delete this._responseCallbacks[e+t]}},{key:"removeAllListenersOf",value:function(e){delete this._subscriptions[e]}},{key:"postMessage",value:function(e,t){var r=this;return e.id&&0!==e.id||(r._msgId++,e.id=r._msgId),r._pipeline.process(e,function(n){if(t&&!function(){var o=n.from+n.id;r._responseCallbacks[o]=t,setTimeout(function(){var t=r._responseCallbacks[o];if(delete r._responseCallbacks[o],t){var i={id:n.id,type:"response",body:{code:408,desc:"Response timeout!",value:e}};t(i)}},r._responseTimeOut)}(),!r._onResponse(n)){var o=r._subscriptions[n.to];o?r._publishOn(o,n):r._onPostMessage(n)}}),e.id}},{key:"bind",value:function(e,t,r){var n=this,o=this,i=o.addListener(e,function(e){r.postMessage(e)}),a=r.addListener(t,function(e){o.postMessage(e)});return{thisListener:i,targetListener:a,unbind:function(){n.thisListener.remove(),n.targetListener.remove()}}}},{key:"_publishOn",value:function(e,t){e.forEach(function(e){e._callback(t)})}},{key:"_onResponse",value:function(e){var t=this;if("response"===e.type){var r=e.to+e.id,n=t._responseCallbacks[r];if(delete t._responseCallbacks[r],n)return n(e),!0}return!1}},{key:"_onMessage",value:function(e){var t=this;if(!t._onResponse(e)){var r=t._subscriptions[e.to];r?t._publishOn(r,e):(r=t._subscriptions["*"],r&&t._publishOn(r,e))}}},{key:"_onPostMessage",value:function(e){}},{key:"_registerExternalListener",value:function(){}},{key:"pipeline",get:function(){return this._pipeline}}]),e}(),c=function(){function e(t,r,n){o(this,e);var i=this;i._subscriptions=t,i._url=r,i._callback=n}return n(e,[{key:"remove",value:function(){var e=this,t=e._subscriptions[e._url];if(t){var r=t.indexOf(e);t.splice(r,1),0===t.length&&delete e._subscriptions[e._url]}}},{key:"url",get:function(){return this._url}}]),e}();r["default"]=u,t.exports=r["default"]},{"./Pipeline":109,"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14,"babel-runtime/helpers/interop-require-default":18}],109:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(t){o(this,e);var r=this;r.handlers=[],r.onFail=t}return n(e,[{key:"process",value:function(e,t){var r=this;if(r.handlers.length>0){var n=new s(r.handlers);n.next(new a(r,n,e,t))}else t(e)}}]),e}(),a=function(){function e(t,r,n,i){o(this,e);var a=this;a._inStop=!1,a._pipeline=t,a._iter=r,a._msg=n,a._onDeliver=i}return n(e,[{key:"next",value:function(){var e=this;e._inStop||(e._iter.hasNext?e._iter.next(e):e._onDeliver(e._msg))}},{key:"deliver",value:function(){var e=this;e._inStop||(e._inStop=!0,e._onDeliver(e._msg))}},{key:"fail",value:function(e){var t=this;t._inStop||(t._inStop=!0,t._pipeline.onFail&&t._pipeline.onFail(e))}},{key:"pipeline",get:function(){return this._pipeline}},{key:"msg",get:function(){return this._msg},set:function(e){this._msg=e}}]),e}(),s=function(){function e(t){o(this,e),this._index=-1,this._array=t}return n(e,[{key:"hasNext",get:function(){return this._index<this._array.length-1}},{key:"next",get:function(){return this._index++,this._array[this._index]}}]),e}();r["default"]=i,t.exports=r["default"]},{"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14}],110:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/core-js/promise")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=e("hellojs"),u=a(s),c=function(){function e(){o(this,e);var t=this;t.identities=[]}return n(e,[{key:"registerIdentity",value:function(){}},{key:"registerWithRP",value:function(){}},{key:"getIdentities",value:function(){var e=this;return e.identities}},{key:"loginWithRP",value:function(e,t){var r=this,n="https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=",o="https://www.googleapis.com/oauth2/v1/userinfo?access_token=",a=void 0,s=void 0;return new i(function(e,t){function i(e){var r=new XMLHttpRequest;r.open("GET",n+e,!0),r.onreadystatechange=function(n){4==r.readyState&&(200==r.status?c(e):t(400==r.status?"There was an error processing the token":"something else other than 200 was returned"))},r.send()}function c(e){var n=new XMLHttpRequest;n.open("GET",o+e,!0),n.onreadystatechange=function(o){if(4===n.readyState)if(200===n.status){s=JSON.parse(n.responseText),r.infoToken=s;var i=s.email,a="user://"+i.substring(i.indexOf("@")+1,i.length)+"/"+i.substring(0,i.indexOf("@")),u={identity:a,token:s,accessToken:e,idToken:{},infoToken:s};l(e,u)}else t(400===n.status?"There was an error processing the token":"something else other than 200 was returned")},n.send()}function l(o,i){var s=new XMLHttpRequest;s.open("GET",n+o,!0),s.onreadystatechange=function(n){4===s.readyState&&(200===s.status?(a=JSON.parse(s.responseText),i.idToken=a,r.identities.push(i),e(i.token)):t(400===s.status?"There was an error processing the token":"something else other than 200 was returned"))},s.send()}return void 0!==r.infoToken?e(r.infoToken):(u["default"].init({google:"808329566012-tqr8qoh111942gd2kg007t0s8f277roi.apps.googleusercontent.com"}),void(0,u["default"])("google").login({scope:"email"}).then(function(e){i(e.authResponse.access_token)},function(e){console.log("errorValidating ",e),t(e)}))})}},{key:"setHypertyIdentity",value:function(){}},{key:"generateAssertion",value:function(e,t,r){}},{key:"validateAssertion",value:function(e){}},{key:"getAssertionTrustLevel",value:function(e){}}]),e}();r["default"]=c,t.exports=r["default"]},{"babel-runtime/core-js/promise":9,"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14,"babel-runtime/helpers/interop-require-default":18,hellojs:105}],111:[function(require,module,exports){"use strict";var _createClass=require("babel-runtime/helpers/create-class")["default"],_classCallCheck=require("babel-runtime/helpers/class-call-check")["default"],_Promise=require("babel-runtime/core-js/promise")["default"];Object.defineProperty(exports,"__esModule",{value:!0});var PolicyEngine=function(){function PolicyEngine(e,t){_classCallCheck(this,PolicyEngine);var r=this;r.idModule=e,r.registry=t,r.policiesTable=new Object,r.blacklist=[]}return _createClass(PolicyEngine,[{key:"addPolicies",value:function(e,t){var r=this;r.policiesTable[e]=t}},{key:"removePolicies",value:function(e){var t=this;delete t.policiesTable[e]}},{key:"authorise",value:function(e){var t=this;return new _Promise(function(r,n){t.idModule.loginWithRP("google identity","scope").then(function(n){var o=t.idModule.getIdentities();e.hasOwnProperty("body")||(e.body={}),e.body.hasOwnProperty("assertedIdentity")||(e.body.assertedIdentity=o[0].identity,e.body.idToken=n,e.body.authorised=!0),r(e)},function(e){n(e)})})}},{key:"checkPolicies",value:function checkPolicies(message){var _this=this,_results=["allow"],_policies=_this.policiesTable[message.body.hypertyURL];if(void 0!=_policies)for(var _numPolicies=_policies.length,i=0;_numPolicies>i;i++){var _policy=_policies[i];console.log(_policy),"blacklist"==_policy.target&&_this.blacklist.indexOf(eval(_policy.subject))>-1&&(console.log("Is in blacklist!"),_results.push(_policy.action)),"whitelist"==_policy.target&&_this.whitelist.indexOf(eval(_policy.subject))>-1&&(console.log("Is in whitelist!"),_results.push(_policy.action))}return console.log(_results),_results.indexOf("deny")>-1?"deny":"allow"}}]),PolicyEngine}();exports["default"]=PolicyEngine,module.exports=exports["default"]},{"babel-runtime/core-js/promise":9,"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14}],112:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/core-js/promise")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(t,r){o(this,e);var n=this;n._url=t,n._bus=r}return n(e,[{key:"create",value:function(e,t){var r=this,n={type:"create",from:r._url,to:"domain://msg-node."+e+"/hyperty-address-allocation",body:{number:t}};return new i(function(e,t){r._bus.postMessage(n,function(r){200===r.body.code?e(r.body.allocated):t(r.body.desc)})})}},{key:"url",get:function(){return this._url}}]),e}();r["default"]=a,t.exports=r["default"]},{"babel-runtime/core-js/promise":9,"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14}],113:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i=e("../utils/utils.js"),a=function(){function e(t,r){o(this,e);var n=this;n.messageBus=t;var a=(0,i.divideURL)(r);n.domain=a.domain,n.discoveryURL="domain://registry."+a.domain,n.domainRegistryListener()}return n(e,[{key:"domainRegistryListener",value:function(){var e=this;e.messageBus.addListener(e.discoveryURL,function(t){"READ"===t.type&&t.body.hasOwnProperty("user")&&!function(){var r=t.body.user,n=t.from,o=t.id,i={type:"READ",from:t.from,to:"domain://registry."+e.domain+"/",body:{user:r}};e.messageBus.postMessage(i,function(t){var i=t.body.last,a=void 0;a=void 0===i?{id:o,type:"response",from:e.discoveryURL,to:n,body:{code:200,hypertyInstances:"not found"}}:{id:o,type:"response",from:e.discoveryURL,to:n,body:{code:200,hypertyInstances:{hypertyInstance:{url:i,user:r,descriptor:t.body.hyperties[i].descriptor}}}},e.messageBus.postMessage(a,function(e){})})}()})}}]),e}();r["default"]=a,t.exports=r["default"]},{"../utils/utils.js":123,"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14}],114:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("./RegistryDataModel"),c=s(u),l=function(e){function t(e,r,o,i,s,u,c,l){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o);var f=this;f._hypertyURL=i,f._user=s,f._guid=u,f._runtime=c,f._context=l}return o(t,e),i(t,[{key:"user",set:function(e){var t=this;t.user=e},get:function(){var e=this;return e._user}},{key:"hypertyURL",get:function(){var e=this;return e._hypertyURL}}]),t}(c["default"]);r["default"]=l,t.exports=r["default"]},{"./RegistryDataModel":116,"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],115:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/core-js/promise")["default"],u=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var c=e("../utils/EventEmitter"),l=u(c),f=e("./AddressAllocation"),d=u(f),p=e("./HypertyInstance"),h=u(p),m=e("./HypertyDiscovery"),y=u(m),b=e("../utils/utils.js"),g=function(e){function t(e,r,o,i){if(a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),!e)throw new Error("runtimeURL is missing.");var s=this;s.registryURL=e+"/registry/123",s.appSandbox=r,s.runtimeURL=e,s.remoteRegistry=i,s.idModule=o,s.identifier=Math.floor(1e4*Math.random()+1),s.hypertiesListToRemove={},s.hypertiesList=[],s.protostubsList={},s.sandboxesList={stub:{},hyperty:{},domain:{}},s.pepList={},s._domain=(0,b.divideURL)(s.registryURL).domain,s.sandboxesList.domain[s._domain]=r}return o(t,e),i(t,[{key:"getAppSandbox",value:function(){var e=this;return e.appSandbox}},{key:"getUserHyperty",value:function(e){var t=this,r="user://"+e.substring(e.indexOf("@")+1,e.length)+"/"+e.substring(0,e.indexOf("@")),n={type:"READ",from:t.registryURL,to:"domain://registry."+t._domain+"/",body:{user:r}};return new s(function(r,o){t._messageBus.postMessage(n,function(t){var n=t.body.last;if(void 0===n)return o("User Hyperty not found");var i={id:e,descriptor:t.body.hyperties[n].descriptor,hypertyURL:n};console.log("===> RegisterHyperty messageBundle: ",i),r(i)})})}},{key:"registerHyperty",value:function(e,t){var r=this,n=(0,b.divideURL)(t).domain,o=r.idModule.getIdentities();return new s(function(i,a){void 0===r._messageBus?a("MessageBus not found on registerStub"):r.resolve("hyperty-runtime://"+n).then(function(){r.registryDomain=n;var a=1;r.addressAllocation.create(n,a).then(function(n){n.forEach(function(e){r._messageBus.addListener(e+"/status",function(t){console.log("Message addListener for : ",e+"/status -> "+t)})});var a=new h["default"](r.identifier,r.registryURL,t,n[0],o[0].identity);r.hypertiesList.push(a),r.sandboxesList.hyperty[n[0]]=e;var s={type:"CREATE",from:r.registryURL,to:"domain://registry."+r.registryDomain+"/",body:{user:o[0].identity,hypertyDescriptorURL:t,hypertyURL:n[0]}};r._messageBus.postMessage(s,function(e){console.log("===> RegisterHyperty Reply: ",e)}),i(n[0])})})["catch"](function(e){console.log("Address Reason: ",e),a(e)})})}},{key:"unregisterHyperty",value:function(e){var t=this;return new s(function(r,n){var o=!1,i=0;for(i=0;i<t.hypertiesList.length;i++){var a=t.hypertiesList[i];if(void 0!==a&&a.hypertyURL===e){o=!0;break}}o===!1?n("Hyperty not found"):(delete t.hypertiesList[i],r("Hyperty successfully deleted"))})}},{key:"discoverProtostub",value:function(e){if(!e)throw new Error("Parameter url needed");var t=this;return new s(function(r,n){var o=t.protostubsList[e];void 0===o?n("requestUpdate couldn' get the ProtostubURL"):r(o)})}},{key:"registerStub",value:function(e,t){var r=this,n=void 0;return new s(function(o,i){void 0===r._messageBus&&i("MessageBus not found on registerStub"),t.indexOf("msg-node.")||(t=t.substring(t.indexOf(".")+1)),n="msg-node."+t+"/protostub/"+Math.floor(1e4*Math.random()+1),r.protostubsList[t]=n,r.sandboxesList.stub[n]=e,o(n),r._messageBus.addListener(n+"/status",function(e){e.resource===e.to+"/status"&&console.log("RuntimeProtostubURL/status message: ",e.body.value)})})}},{key:"unregisterStub",value:function(e){var t=this;return new s(function(r,n){var o=t.protostubsList[e];void 0===o?n("Error on unregisterStub: Hyperty not found"):(delete t.protostubsList[e],r("ProtostubURL removed"))})}},{key:"registerPEP",value:function(e,t){var r=this;return new s(function(n,o){r.pepList[t]=e,n("PEP registered with success")})}},{key:"unregisterPEP",value:function(e){var t=this;return new s(function(r,n){var o=t.pepList[e];void 0===o?n("Pep Not found."):r("PEP successfully removed.")})}},{key:"onEvent",value:function(e){}},{key:"getSandbox",value:function(e){if(!e)throw new Error("Parameter url needed");console.log("getSandbox: "+e);var t=this;return new s(function(r,n){var o=t.sandboxesList.stub[e];if(void 0===o)if(o=t.sandboxesList.hyperty[e],void 0===o)if(o=t.sandboxesList.domain[e],void 0===o){var i=(0,b.divideURL)(e);o=t.sandboxesList.domain[i.domain],void 0===o?n("Sandbox not found"):r(o)}else r(o);else r(o);else r(o)})}},{key:"resolve",value:function(e){console.log("resolve "+e);var t=this,r=(0,b.divideURL)(e).domain;return new s(function(e,n){r.indexOf("msg-node.")&&r.indexOf("registry.")||(r=r.substring(r.indexOf(".")+1));var o=t.protostubsList[r];t.addEventListener("runtime:stubLoaded",function(t){e(t)}),void 0!==o?e(o):t.trigger("runtime:loadStub",r)})}},{key:"messageBus",get:function(){var e=this;return e._messageBus},set:function(e){var t=this;t._messageBus=e;var r=new d["default"](t.registryURL,e);t.addressAllocation=r;var n=new y["default"](e,t.registryURL);t.hypertyDiscovery=n}}]),t}(l["default"]);r["default"]=g,t.exports=r["default"]},{"../utils/EventEmitter":122,"../utils/utils.js":123,"./AddressAllocation":112,"./HypertyDiscovery":113,"./HypertyInstance":114,"babel-runtime/core-js/promise":9,"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14,"babel-runtime/helpers/get":16,"babel-runtime/helpers/inherits":17,"babel-runtime/helpers/interop-require-default":18}],116:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(t,r,n,i,a,s,u,c){o(this,e);var l=this;l._id=t,l._url=r,l._descriptor=n,l._startingTime=i,l._lastModified=a,l._status=s,l._stubs=u,l._stubsConfiguration=c}return n(e,[{key:"id",get:function(){var e=this;return e._id}},{key:"url",get:function(){var e=this;return e._url}},{key:"descriptor",get:function(){var e=this;return e._descriptor}}]),e}();r["default"]=i,t.exports=r["default"]},{"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14}],117:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/core-js/promise")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("../utils/utils"),s=e("service-framework"),u=function(){function e(){o(this,e);var t=this;t._factory=new s.CatalogueFactory(!1,void 0)}return n(e,[{key:"mockupHypertyDescriptor",value:function(){var e=this;e._makeLocalRequest("../resources/descriptors/Hyperties.json").then(function(t){e.Hyperties=JSON.parse(t)})}},{key:"mockupStubDescriptor",value:function(){var e=this;e._makeLocalRequest("../resources/descriptors/ProtoStubs.json").then(function(t){e.ProtoStubs=JSON.parse(t)})}},{key:"getHypertyRuntimeURL",value:function(){var e=this;return e._hypertyRuntimeURL}},{key:"_makeLocalRequest",value:function(e){return new i(function(t,r){var n={"hyperty-catalogue://":"http://","../":"../"},o=!1;for(var i in n)if(e.slice(0,i.length)===i){e=n[i]+e.slice(i.length,e.length),o=!0;break}if(!o)return void r("Invalid protocol of url: "+e);var a=new XMLHttpRequest;a.open("GET",e,!0),a.onreadystatechange=function(e){var n=e.currentTarget;4===n.readyState&&(200===n.status?t(n.responseText):r(n.responseText))},a.send()})}},{key:"_makeExternalRequest",value:function(e){return new i(function(t,r){var n={"hyperty-catalogue://":"http://"},o=!1;for(var i in n)if(e.slice(0,i.length)===i){e=n[i]+e.slice(i.length,e.length),o=!0;break}if(!o)return void r("Invalid protocol of url: "+e);var a=new XMLHttpRequest;a.open("GET",e,!0),a.onreadystatechange=function(e){var n=e.currentTarget;4===n.readyState&&(200===n.status?t(n.responseText):r(n.responseText))},a.send()})}},{key:"getHypertyDescriptor",value:function(e){var t=this;return new i(function(r,n){var o=(0,a.divideURL)(e),i=o.domain,s=o.identity;i||(i=e),s&&(s=s.substring(s.lastIndexOf("/")+1));var u=t.Hyperties[s];if(u.error)n(u);else{var c=t._factory.createHypertyDescriptorObject(u.cguid,u.objectName,u.description,u.language,u.sourcePackageURL,u.type,u.dataObjects),l=u.sourcePackage,f=window.atob(l.sourceCode);l.sourceCode=f,l&&(c.sourcePackage=t._createSourcePackage(t._factory,l)),console.log("hyperty has sourcePackage:",c),r(c)}})}},{key:"getSourcePackageFromURL",value:function(e){var t=this;return new i(function(r,n){"/sourcePackage"===e&&n("sourcePackage is already contained in descriptor, please use it directly"),t._makeExternalRequest(e).then(function(e){if(e.error)n(e);else{e=JSON.parse(e);var o=e.sourcePackage;o?(o=t._createSourcePackage(t._factory,o),r(o)):n("no source package")}})["catch"](function(e){n(e)})})}},{key:"getStubDescriptor",value:function(e){var t=this;return new i(function(r,n){var o=(0,a.divideURL)(e),i=o.domain,s=o.identity;i||(i=e),s=s?s.substring(s.lastIndexOf("/")+1):"default";var u=t.ProtoStubs[s];if(u.error)n(u);else{console.log("creating stub descriptor based on: ",u);var c=t._factory.createProtoStubDescriptorObject(u.cguid,u.objectName,u.description,u.language,u.sourcePackageURL,u.messageSchemas,JSON.stringify(u.configuration),u.constraints),l=u.sourcePackage,f=window.atob(l.sourceCode);l.sourceCode=f,l&&(l=t._createSourcePackage(t._factory,l),c.sourcePackage=l),r(c)}})}},{key:"_createSourcePackage",value:function(e,t){try{t=JSON.parse(t)}catch(r){console.log("parsing sourcePackage failed. already parsed? -> ",t)}var n=e.createSourcePackage(t.sourceCodeClassname,t.sourceCode);return t.hasOwnProperty("encoding")&&(n.encoding=t.encoding),t.hasOwnProperty("signature")&&(n.signature=t.signature),n}},{key:"runtimeURL",set:function(e){var t=this;t._runtimeURL=e,t.mockupHypertyDescriptor(),t.mockupStubDescriptor()},get:function(){var e=this;return e._runtimeURL}}]),e}();r["default"]=u,t.exports=r["default"]},{"../utils/utils":123,"babel-runtime/core-js/promise":9,"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14,"service-framework":124}],118:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/core-js/promise")["default"],a=e("babel-runtime/core-js/object/assign")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("../registry/Registry"),c=s(u),l=e("../identity/IdentityModule"),f=s(l),d=e("../policy/PolicyEngine"),p=s(d),h=e("../bus/MessageBus"),m=s(h),y=e("./RuntimeCatalogue-Local"),b=s(y),g=e("../syncher/SyncherManager"),v=s(g),_=e("../utils/utils"),w=function(){function e(t,r){if(o(this,e),!t)throw new Error("The sandbox factory is a needed parameter");if(!r)throw new Error("You need the domain of runtime");var n=this;n.sandboxFactory=t,n.runtimeCatalogue=new b["default"];var i="runtime://"+r+"/"+Math.floor(1e4*Math.random()+1);n.runtimeURL=i,n.domain=r,n.runtimeCatalogue.runtimeURL=i,n.identityModule=new f["default"];var a=t.createAppSandbox();n.registry=new c["default"](i,a,n.identityModule),n.policyEngine=new p["default"](n.identityModule,n.registry),n.messageBus=new m["default"](n.registry),n.messageBus.pipeline.handlers=[function(e){n.policyEngine.authorise(e.msg).then(function(t){e.msg=t,e.next()})["catch"](function(t){console.error(t),e.fail(t)})}],a.addListener("*",function(e){n.messageBus.postMessage(e)}),n.registry.messageBus=n.messageBus,n.registry.addEventListener("runtime:loadStub",function(e){n.loadStub(e).then(function(){n.registry.trigger("runtime:stubLoaded",e)})["catch"](function(e){console.error(e)})}),t.messageBus=n.messageBus,n.syncherManager=new v["default"](n.runtimeURL,n.messageBus,{})}return n(e,[{key:"discoverHiperty",value:function(e){}},{key:"registerHyperty",value:function(e,t){}},{key:"loadHyperty",value:function(e){var t=this;if(!e)throw new Error("Hyperty descriptor url parameter is needed");return new i(function(r,n){var o=void 0,i=void 0,s=void 0,u=void 0,c=function(e){n(e)};console.info("------------------ Hyperty ------------------------"),console.info("Get hyperty descriptor for :",e),t.runtimeCatalogue.getHypertyDescriptor(e).then(function(e){console.info("1: return hyperty descriptor",e),s=e;var r=e.sourcePackageURL;return"/sourcePackage"===r?e.sourcePackage:t.runtimeCatalogue.getSourcePackageFromURL(r)}).then(function(e){console.info("2: return hyperty source code"),u=e;var t=!0;return t}).then(function(r){console.info("3: return policy engine result: ",r);var n=!0,o=void 0;if(n)o=t.registry.getAppSandbox();else{var i=(0,_.divideURL)(e).domain;o=t.registry.getSandbox(i)}return o}).then(function(e){return console.info("4: return the sandbox",e),e},function(e){console.error("4.1: try to register a new sandbox",e);var r=t.sandboxFactory.createSandbox();return r.addListener("*",function(e){t.messageBus.postMessage(e)}),r}).then(function(r){return console.info("5: return sandbox and register"),i=r,t.registry.registerHyperty(r,e)}).then(function(e){console.info("6: Hyperty url, after register hyperty",e),o=e,console.log(s);var r={};return(0,_.emptyObject)(s.configuration)||(r=a({},JSON.parse(s.configuration))),r.runtimeURL=t.runtimeURL,i.deployComponent(u.sourceCode,o,r)}).then(function(e){console.info("7: Deploy component status for hyperty: ",e),t.messageBus.addListener(o,function(e){i.postMessage(e)});var n={runtimeHypertyURL:o,status:e};r(n),console.log("------------------ END ------------------------")})["catch"](c)})}},{key:"loadStub",value:function(e){var t=this;if(!e)throw new Error("domain parameter is needed");return new i(function(r,n){var o=(0,_.divideURL)(e).domain;o||(o=e);var i=void 0,s=void 0,u=void 0,c=void 0,l=function(e){console.error(e),n(e)};console.info("------------------- ProtoStub ---------------------------\n"),console.info("Discover or Create a new ProtoStub for domain: ",o),t.registry.discoverProtostub(o).then(function(e){return console.info("1. Proto Stub Discovered: ",e),s=e},function(r){return console.info("1. Proto Stub not found:",r),t.runtimeCatalogue.getStubDescriptor(e)}).then(function(e){console.info("2. return the ProtoStub descriptor:",e),s=e;var r=e.sourcePackageURL;return"/sourcePackage"===r?e.sourcePackage:t.runtimeCatalogue.getSourcePackageFromURL(r)}).then(function(e){console.info("3. return the ProtoStub Source Code: ",e),c=e;var t=!0;return t}).then(function(e){return t.registry.getSandbox(o)}).then(function(e){return console.info("4. if the sandbox is registered then return the sandbox",e),i=e,e},function(e){console.info("5. Sandbox was not found, creating a new one",e);var r=t.sandboxFactory.createSandbox();return r.addListener("*",function(e){t.messageBus.postMessage(e)}),r}).then(function(e){return console.info("6. return the sandbox instance and register",e,"to domain ",o),i=e,t.registry.registerStub(i,o)}).then(function(e){console.info("7. return the runtime protostub url: ",e),u=e,console.log(s);var r=a({},JSON.parse(s.configuration));return r.runtimeURL=t.runtimeURL,i.deployComponent(c.sourceCode,e,r)}).then(function(e){console.info("8: return deploy component for sandbox status: ",e),t.messageBus.addListener(u,function(e){i.postMessage(e)});var n={runtimeProtoStubURL:u,status:e};r(n),console.info("------------------- END ---------------------------\n")})["catch"](l)})}},{key:"checkForUpdate",value:function(e){}}]),e}();r["default"]=w,t.exports=r["default"]},{"../bus/MessageBus":107,"../identity/IdentityModule":110,"../policy/PolicyEngine":111,"../registry/Registry":115,"../syncher/SyncherManager":121,"../utils/utils":123,"./RuntimeCatalogue-Local":117,"babel-runtime/core-js/object/assign":2,"babel-runtime/core-js/promise":9,"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14,"babel-runtime/helpers/interop-require-default":18}],119:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var o=e("./runtime/RuntimeUA"),i=n(o);r["default"]=i["default"],t.exports=r["default"]},{"./runtime/RuntimeUA":118,"babel-runtime/helpers/interop-require-default":18}],120:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/core-js/promise")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(t,r){o(this,e);var n=this;n._url=t,n._bus=r}return n(e,[{key:"create",value:function(e,t,r,n){var o=this,a={type:"create",from:o._url,to:"domain://msg-node."+e+"/object-address-allocation",body:{urlScheme:t,resourceChildren:r,number:n}};return new i(function(e,t){o._bus.postMessage(a,function(r){200===r.body.code?e(r.body.allocated):t(r.body.desc)})})}},{key:"url",get:function(){return this._url}}]),e}();r["default"]=a,t.exports=r["default"]},{"babel-runtime/core-js/promise":9,"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14}],121:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("../utils/utils"),s=e("./ObjectAllocation"),u=i(s),c=function(){function e(t,r,n,i){o(this,e);var s=this;s._bus=r,s._registry=n,s._url=t+"/sm",s._objectURL=t+"/object-allocation",s._subscriptions={},s._domain=(0,a.divideURL)(t).domain,i?s._allocator=i:s._allocator=new u["default"](s._objectURL,r),r.addListener(s._url,function(e){switch(console.log("SyncherManager-RCV: ",e),e.type){case"create":s._onCreate(e);break;case"delete":s._onDelete(e);break;case"subscribe":s._onLocalSubscribe(e);break;case"unsubscribe":s._onLocalUnSubscribe(e)}})}return n(e,[{key:"_onCreate",value:function(e){var t=this,r=e.from,n=(0,a.divideURL)(e.from).domain,o="resource",i=["children1","children2"];t._allocator.create(n,o,i,1).then(function(n){var o=n[0],a=o+"/subscription",s=t._bus.addListener(a,function(e){switch(console.log(a+"-RCV: ",e),e.type){case"subscribe":t._onRemoteSubscribe(o,e);break;case"unsubscribe":t._onRemoteUnSubscribe(o,e)}}),u={owner:r,children:i,sl:s,cl:[],subs:[]};t._subscriptions[o]=u;var c=o+"/children/";i.forEach(function(e){var r=c+e,n=t._bus.addListener(r,function(e){console.log("SyncherManager-"+r+"-RCV: ",e)});u.cl.push(n)}),t._bus.postMessage({id:e.id,type:"response",from:e.to,to:r,body:{code:200,resource:o,children:i}}),setTimeout(function(){e.body.authorise.forEach(function(n){t._bus.postMessage({type:"create",from:r,to:n,body:{schema:e.body.schema,resource:o,value:e.body.value}});
})})})["catch"](function(n){t._bus.postMessage({id:e.id,type:"response",from:e.to,to:r,body:{code:500,desc:n}})})}},{key:"_onDelete",value:function(e){var t=this,r="<objURL>";delete t._subscriptions[r],t._bus.removeAllListenersOf(r),t._bus.removeAllListenersOf(r+"/subscription")}},{key:"_onRemoteSubscribe",value:function(e,t){var r=this,n=t.from,o=r._subscriptions[e];if(-1!==o.subs.indexOf(n)){var i={id:t.id,type:"response",from:t.to,to:n,body:{code:500,desc:"Subscription for ("+e+" : "+n+") already exists!"}};return void r._bus.postMessage(i)}var a="sub/pub";if("sub/pub"===a){var s={type:"forward",from:r._url,to:o.owner,body:{type:t.type,from:t.from,to:e}};t.body&&(s.body.body=t.body),r._bus.postMessage(s,function(i){console.log("forward-reply: ",i),200===i.body.code&&(r._bus.addForward(e,n),o.subs.push(n),i.body.children=o.children),r._bus.postMessage({id:t.id,type:"response",from:t.to,to:n,body:i.body})})}}},{key:"_onRemoteUnSubscribe",value:function(e,t){var r=this,n=t.from,o=r._subscriptions[e].subs,i=o.indexOf(n);o.splice(i,1)}},{key:"_onLocalSubscribe",value:function(e){var t=this,r=(0,a.divideURL)(e.from).domain,n=e.body.resource,o=n+"/subscription",i=["children1","children2"],s=n+"/children/",u={type:"subscribe",from:t._url,to:"domain://msg-node."+r+"/sm",body:{resource:e.body.resource,children:i}};t._bus.postMessage(u,function(r){console.log("node-subscribe-response: ",r),200===r.body.code?(t._bus.addForward(n,e.from),i.forEach(function(r){t._bus.addForward(s+r,e.from)}),t._bus.postMessage({id:e.id,type:"subscribe",from:e.from,to:o})):t._bus.postMessage({id:e.id,type:"response",from:e.to,to:e.from,body:r.body})})}},{key:"_onLocalUnSubscribe",value:function(e){}},{key:"url",get:function(){return this._url}}]),e}();r["default"]=c,t.exports=r["default"]},{"../utils/utils":123,"./ObjectAllocation":120,"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14,"babel-runtime/helpers/interop-require-default":18}],122:[function(e,t,r){"use strict";var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(){o(this,e)}return n(e,[{key:"addEventListener",value:function(e,t){var r=this;r[e]=t}},{key:"trigger",value:function(e,t){var r=this;r[e]&&r[e](t)}}]),e}();r["default"]=i,t.exports=r["default"]},{"babel-runtime/helpers/class-call-check":12,"babel-runtime/helpers/create-class":14}],123:[function(e,t,r){"use strict";function n(e){var t=/([a-zA-Z-]*):\/\/(?:\.)?([-a-zA-Z0-9@:%._\+~#=]{2,256})([-a-zA-Z0-9@:%._\+~#=\/]*)/gi,r="$1,$2,$3",n=e.replace(t,r).split(","),o={type:n[0],domain:n[1],identity:n[2]};return o}function o(e){return a(e).length>0?!1:!0}function i(e){return JSON.parse(JSON.stringify(e))}var a=e("babel-runtime/core-js/object/keys")["default"];Object.defineProperty(r,"__esModule",{value:!0}),r.divideURL=n,r.emptyObject=o,r.deepClone=i},{"babel-runtime/core-js/object/keys":7}],124:[function(e,t,r){(function(n){"use strict";var o=e("babel-runtime/core-js/object/get-own-property-names")["default"],i=e("babel-runtime/core-js/array/from")["default"],a=e("babel-runtime/core-js/object/is")["default"],s=e("babel-runtime/core-js/object/set-prototype-of")["default"],u=e("babel-runtime/core-js/object/keys")["default"],c=e("babel-runtime/core-js/object/create")["default"],l=e("babel-runtime/core-js/object/is-frozen")["default"],f=e("babel-runtime/core-js/object/define-property")["default"],d=e("babel-runtime/core-js/promise")["default"];!function(e){if("object"==typeof r&&"undefined"!=typeof t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof n?n:"undefined"!=typeof self?self:this,o.serviceFramework=e()}}(function(){var t;return function r(t,n,o){function i(s,u){if(!n[s]){if(!t[s]){var c="function"==typeof e&&e;if(!u&&c)return c(s,!0);if(a)return a(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var f=n[s]={exports:{}};t[s][0].call(f.exports,function(e){var r=t[s][1][e];return i(r?r:e)},f,f.exports,r,t,n,o)}return n[s].exports}for(var a="function"==typeof e&&e,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/create"),__esModule:!0}},{"core-js/library/fn/object/create":19}],2:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":20}],3:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/get-own-property-descriptor"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-descriptor":21}],4:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/get-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/get-prototype-of":22}],5:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/keys"),__esModule:!0}},{"core-js/library/fn/object/keys":23}],6:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},{"core-js/library/fn/object/set-prototype-of":24}],7:[function(e,t,r){t.exports={"default":e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":25}],8:[function(e,t,r){t.exports={"default":e("core-js/library/fn/symbol"),__esModule:!0}},{"core-js/library/fn/symbol":26}],9:[function(e,t,r){t.exports={"default":e("core-js/library/fn/symbol/iterator"),__esModule:!0}},{"core-js/library/fn/symbol/iterator":27}],10:[function(e,t,r){t.exports=e("./classCallCheck.js")},{"./classCallCheck.js":11}],11:[function(e,t,r){r.__esModule=!0,r["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],12:[function(e,t,r){t.exports=e("./createClass.js")},{"./createClass.js":13}],13:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var o=e("../core-js/object/define-property"),i=n(o);r["default"]=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i["default"])(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},{"../core-js/object/define-property":2}],14:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var o=e("../core-js/object/get-prototype-of"),i=n(o),a=e("../core-js/object/get-own-property-descriptor"),s=n(a);r["default"]=function(e,t,r){for(var n=!0;n;){var o=e,a=t,u=r;n=!1,null===o&&(o=Function.prototype);var c=(0,s["default"])(o,a);if(void 0!==c){if("value"in c)return c.value;var l=c.get;if(void 0!==l)return l.call(u)}else{var f=(0,i["default"])(o);if(null===f)return;e=f,t=a,r=u,n=!0,c=f=void 0}}}},{"../core-js/object/get-own-property-descriptor":3,"../core-js/object/get-prototype-of":4}],15:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var o=e("../core-js/object/set-prototype-of"),i=n(o),a=e("../core-js/object/create"),s=n(a),u=e("../helpers/typeof"),c=n(u);r["default"]=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,c["default"])(t)));e.prototype=(0,s["default"])(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i["default"]?(0,i["default"])(e,t):e.__proto__=t)}},{"../core-js/object/create":1,"../core-js/object/set-prototype-of":6,"../helpers/typeof":18}],16:[function(e,t,r){t.exports=e("./interopRequireDefault.js")},{"./interopRequireDefault.js":17}],17:[function(e,t,r){r.__esModule=!0,r["default"]=function(e){return e&&e.__esModule?e:{"default":e}}},{}],18:[function(e,t,r){function n(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e&&"undefined"!=typeof _Symbol&&e.constructor===_Symbol?"symbol":typeof e}r.__esModule=!0;var i=e("../core-js/symbol"),a=n(i);r["default"]=function(e){return e&&"undefined"!=typeof a["default"]&&e.constructor===a["default"]?"symbol":"undefined"==typeof e?"undefined":o(e)}},{"../core-js/symbol":8}],19:[function(e,t,r){var n=e("../../modules/$");t.exports=function(e,t){return n.create(e,t)}},{"../../modules/$":58}],20:[function(e,t,r){var n=e("../../modules/$");t.exports=function(e,t,r){return n.setDesc(e,t,r)}},{"../../modules/$":58}],21:[function(e,t,r){var n=e("../../modules/$");e("../../modules/es6.object.get-own-property-descriptor"),t.exports=function(e,t){return n.getDesc(e,t)}},{"../../modules/$":58,"../../modules/es6.object.get-own-property-descriptor":83}],22:[function(e,t,r){e("../../modules/es6.object.get-prototype-of"),t.exports=e("../../modules/$.core").Object.getPrototypeOf},{"../../modules/$.core":33,"../../modules/es6.object.get-prototype-of":84}],23:[function(e,t,r){e("../../modules/es6.object.keys"),t.exports=e("../../modules/$.core").Object.keys},{"../../modules/$.core":33,"../../modules/es6.object.keys":85}],24:[function(e,t,r){e("../../modules/es6.object.set-prototype-of"),t.exports=e("../../modules/$.core").Object.setPrototypeOf},{"../../modules/$.core":33,"../../modules/es6.object.set-prototype-of":86}],25:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),t.exports=e("../modules/$.core").Promise},{"../modules/$.core":33,"../modules/es6.object.to-string":87,"../modules/es6.promise":88,"../modules/es6.string.iterator":89,"../modules/web.dom.iterable":91}],26:[function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),t.exports=e("../../modules/$.core").Symbol},{"../../modules/$.core":33,"../../modules/es6.object.to-string":87,"../../modules/es6.symbol":90}],27:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),t.exports=e("../../modules/$.wks")("iterator")},{"../../modules/$.wks":80,"../../modules/es6.string.iterator":89,"../../modules/web.dom.iterable":91}],28:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],29:[function(e,t,r){t.exports=function(){}},{}],30:[function(e,t,r){var n=e("./$.is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./$.is-object":51}],31:[function(e,t,r){var n=e("./$.cof"),o=e("./$.wks")("toStringTag"),i="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=(t=Object(e))[o])?r:i?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},{"./$.cof":32,"./$.wks":80}],32:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],33:[function(e,t,r){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},{}],34:[function(e,t,r){var n=e("./$.a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./$.a-function":28}],35:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],36:[function(e,t,r){t.exports=!e("./$.fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./$.fails":40}],37:[function(e,t,r){var n=e("./$.is-object"),o=e("./$.global").document,i=n(o)&&n(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./$.global":43,"./$.is-object":51}],38:[function(e,t,r){var n=e("./$");t.exports=function(e){var t=n.getKeys(e),r=n.getSymbols;if(r)for(var o,i=r(e),a=n.isEnum,s=0;i.length>s;)a.call(e,o=i[s++])&&t.push(o);return t}},{"./$":58}],39:[function(e,t,r){var n=e("./$.global"),o=e("./$.core"),i=e("./$.ctx"),a="prototype",s=function u(e,t,r){var s,c,l,f=e&u.F,d=e&u.G,p=e&u.S,h=e&u.P,m=e&u.B,y=e&u.W,b=d?o:o[t]||(o[t]={}),g=d?n:p?n[t]:(n[t]||{})[a];d&&(r=t);for(s in r)c=!f&&g&&s in g,c&&s in b||(l=c?g[s]:r[s],b[s]=d&&"function"!=typeof g[s]?r[s]:m&&c?i(l,n):y&&g[s]==l?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[a]=e[a],t}(l):h&&"function"==typeof l?i(Function.call,l):l,h&&((b[a]||(b[a]={}))[s]=l))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,t.exports=s},{"./$.core":33,"./$.ctx":34,"./$.global":43}],40:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],41:[function(e,t,r){var n=e("./$.ctx"),o=e("./$.iter-call"),i=e("./$.is-array-iter"),a=e("./$.an-object"),s=e("./$.to-length"),u=e("./core.get-iterator-method");t.exports=function(e,t,r,c){var l,f,d,p=u(e),h=n(r,c,t?2:1),m=0;if("function"!=typeof p)throw TypeError(e+" is not iterable!");if(i(p))for(l=s(e.length);l>m;m++)t?h(a(f=e[m])[0],f[1]):h(e[m]);else for(d=p.call(e);!(f=d.next()).done;)o(d,h,f.value,t)}},{"./$.an-object":30,"./$.ctx":34,"./$.is-array-iter":49,"./$.iter-call":52,"./$.to-length":77,"./core.get-iterator-method":81}],42:[function(e,t,r){var n=e("./$.to-iobject"),i=e("./$").getNames,a={}.toString,s="object"==typeof window&&o?o(window):[],u=function(e){try{return i(e)}catch(t){return s.slice()}};t.exports.get=function(e){return s&&"[object Window]"==a.call(e)?u(e):i(n(e))}},{"./$":58,"./$.to-iobject":76}],43:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],44:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],45:[function(e,t,r){var n=e("./$"),o=e("./$.property-desc");t.exports=e("./$.descriptors")?function(e,t,r){return n.setDesc(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./$":58,"./$.descriptors":36,"./$.property-desc":63}],46:[function(e,t,r){t.exports=e("./$.global").document&&document.documentElement},{"./$.global":43}],47:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],48:[function(e,t,r){var n=e("./$.cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./$.cof":32}],49:[function(e,t,r){var n=e("./$.iterators"),o=e("./$.wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},{"./$.iterators":57,"./$.wks":80}],50:[function(e,t,r){var n=e("./$.cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./$.cof":32}],51:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],52:[function(e,t,r){var n=e("./$.an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(i){var a=e["return"];throw void 0!==a&&n(a.call(e)),i}}},{"./$.an-object":30}],53:[function(e,t,r){var n=e("./$"),o=e("./$.property-desc"),i=e("./$.set-to-string-tag"),a={};e("./$.hide")(a,e("./$.wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n.create(a,{next:o(1,r)}),i(e,t+" Iterator")}},{"./$":58,"./$.hide":45,"./$.property-desc":63,"./$.set-to-string-tag":69,"./$.wks":80}],54:[function(e,t,r){var n=e("./$.library"),o=e("./$.export"),i=e("./$.redefine"),a=e("./$.hide"),s=e("./$.has"),u=e("./$.iterators"),c=e("./$.iter-create"),l=e("./$.set-to-string-tag"),f=e("./$").getProto,d=e("./$.wks")("iterator"),p=!([].keys&&"next"in[].keys()),h="@@iterator",m="keys",y="values",b=function(){return this};t.exports=function(e,t,r,g,v,_,w){c(r,t,g);var k,j,$=function(e){if(!p&&e in S)return S[e];switch(e){case m:return function(){return new r(this,e)};case y:return function(){return new r(this,e)}}return function(){return new r(this,e)}},x=t+" Iterator",O=v==y,E=!1,S=e.prototype,R=S[d]||S[h]||v&&S[v],P=R||$(v);if(R){var T=f(P.call(new e));l(T,x,!0),!n&&s(S,h)&&a(T,d,b),O&&R.name!==y&&(E=!0,P=function(){return R.call(this)})}if(n&&!w||!p&&!E&&S[d]||a(S,d,P),u[t]=P,u[x]=b,v)if(k={values:O?P:$(y),keys:_?P:$(m),entries:O?$("entries"):P},w)for(j in k)j in S||i(S,j,k[j]);else o(o.P+o.F*(p||E),t,k);return k}},{"./$":58,"./$.export":39,"./$.has":44,"./$.hide":45,"./$.iter-create":53,"./$.iterators":57,"./$.library":60,"./$.redefine":65,"./$.set-to-string-tag":69,"./$.wks":80}],55:[function(e,t,r){var n=e("./$.wks")("iterator"),o=!1;try{var a=[7][n]();a["return"]=function(){o=!0},i(a,function(){throw 2})}catch(s){}t.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){r=!0},i[n]=function(){return a},e(i)}catch(s){}return r}},{"./$.wks":80}],56:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],57:[function(e,t,r){t.exports={}},{}],58:[function(e,t,r){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},{}],59:[function(e,t,r){var n=e("./$"),o=e("./$.to-iobject");t.exports=function(e,t){for(var r,i=o(e),a=n.getKeys(i),s=a.length,u=0;s>u;)if(i[r=a[u++]]===t)return r}},{"./$":58,"./$.to-iobject":76}],60:[function(e,t,r){t.exports=!0},{}],61:[function(e,t,r){var n,o,i,a=e("./$.global"),s=e("./$.task").set,u=a.MutationObserver||a.WebKitMutationObserver,c=a.process,l=a.Promise,f="process"==e("./$.cof")(c),d=function(){var e,t,r;for(f&&(e=c.domain)&&(c.domain=null,e.exit());n;)t=n.domain,r=n.fn,t&&t.enter(),r(),t&&t.exit(),n=n.next;o=void 0,e&&e.enter()};if(f)i=function(){c.nextTick(d)};else if(u){var p=1,h=document.createTextNode("");new u(d).observe(h,{characterData:!0}),i=function(){h.data=p=-p}}else i=l&&l.resolve?function(){l.resolve().then(d)}:function(){s.call(a,d)};t.exports=function(e){var t={fn:e,next:void 0,domain:f&&c.domain};o&&(o.next=t),n||(n=t,i()),o=t}},{"./$.cof":32,"./$.global":43,"./$.task":74}],62:[function(e,t,r){var n=e("./$.export"),o=e("./$.core"),i=e("./$.fails");t.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",a)}},{"./$.core":33,"./$.export":39,"./$.fails":40}],63:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],64:[function(e,t,r){var n=e("./$.redefine");t.exports=function(e,t){for(var r in t)n(e,r,t[r]);return e}},{"./$.redefine":65}],65:[function(e,t,r){t.exports=e("./$.hide")},{"./$.hide":45}],66:[function(e,t,r){t.exports=a||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},{}],67:[function(e,t,r){var n=e("./$").getDesc,o=e("./$.is-object"),i=e("./$.an-object"),a=function(e,t){if(i(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};t.exports={set:s||("__proto__"in{}?function(t,r,o){try{o=e("./$.ctx")(Function.call,n(Object.prototype,"__proto__").set,2),o(t,[]),r=!(t instanceof Array)}catch(i){r=!0}return function(e,t){return a(e,t),r?e.__proto__=t:o(e,t),e}}({},!1):void 0),check:a}},{"./$":58,"./$.an-object":30,"./$.ctx":34,"./$.is-object":51}],68:[function(e,t,r){var n=e("./$.core"),o=e("./$"),i=e("./$.descriptors"),a=e("./$.wks")("species");t.exports=function(e){var t=n[e];i&&t&&!t[a]&&o.setDesc(t,a,{configurable:!0,get:function(){return this}})}},{"./$":58,"./$.core":33,"./$.descriptors":36,"./$.wks":80}],69:[function(e,t,r){var n=e("./$").setDesc,o=e("./$.has"),i=e("./$.wks")("toStringTag");t.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},{"./$":58,"./$.has":44,"./$.wks":80}],70:[function(e,t,r){var n=e("./$.global"),o="__core-js_shared__",i=n[o]||(n[o]={});t.exports=function(e){return i[e]||(i[e]={})}},{"./$.global":43}],71:[function(e,t,r){var n=e("./$.an-object"),o=e("./$.a-function"),i=e("./$.wks")("species");t.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[i])?t:o(r)}},{"./$.a-function":28,"./$.an-object":30,"./$.wks":80}],72:[function(e,t,r){t.exports=function(e,t,r){if(!(e instanceof t))throw TypeError(r+": use the 'new' operator!");return e}},{}],73:[function(e,t,r){var n=e("./$.to-integer"),o=e("./$.defined");t.exports=function(e){return function(t,r){var i,a,s=String(o(t)),u=n(r),c=s.length;return 0>u||u>=c?e?"":void 0:(i=s.charCodeAt(u),55296>i||i>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):i:e?s.slice(u,u+2):(i-55296<<10)+(a-56320)+65536)}}},{"./$.defined":35,"./$.to-integer":75}],74:[function(e,t,r){var n,o,i,a=e("./$.ctx"),s=e("./$.invoke"),u=e("./$.html"),c=e("./$.dom-create"),l=e("./$.global"),f=l.process,d=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,m=0,y={},b="onreadystatechange",g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},v=function(e){g.call(e.data)};d&&p||(d=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++m]=function(){s("function"==typeof e?e:Function(e),t)},n(m),m},p=function(e){delete y[e]},"process"==e("./$.cof")(f)?n=function(e){f.nextTick(a(g,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=v,n=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",v,!1)):n=b in c("script")?function(e){u.appendChild(c("script"))[b]=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),t.exports={set:d,clear:p}},{"./$.cof":32,"./$.ctx":34,"./$.dom-create":37,"./$.global":43,"./$.html":46,"./$.invoke":47}],75:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],76:[function(e,t,r){var n=e("./$.iobject"),o=e("./$.defined");t.exports=function(e){return n(o(e))}},{"./$.defined":35,"./$.iobject":48}],77:[function(e,t,r){var n=e("./$.to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./$.to-integer":75}],78:[function(e,t,r){var n=e("./$.defined");t.exports=function(e){return Object(n(e))}},{"./$.defined":35}],79:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],80:[function(e,t,r){var n=e("./$.shared")("wks"),o=e("./$.uid"),i=e("./$.global").Symbol;t.exports=function(e){return n[e]||(n[e]=i&&i[e]||(i||o)("Symbol."+e))}},{"./$.global":43,"./$.shared":70,"./$.uid":79}],81:[function(e,t,r){var n=e("./$.classof"),o=e("./$.wks")("iterator"),i=e("./$.iterators");t.exports=e("./$.core").getIteratorMethod=function(e){return void 0!=e?e[o]||e["@@iterator"]||i[n(e)]:void 0}},{"./$.classof":31,"./$.core":33,"./$.iterators":57,"./$.wks":80}],82:[function(e,t,r){var n=e("./$.add-to-unscopables"),o=e("./$.iter-step"),i=e("./$.iterators"),a=e("./$.to-iobject");t.exports=e("./$.iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},{"./$.add-to-unscopables":29,"./$.iter-define":54,"./$.iter-step":56,"./$.iterators":57,"./$.to-iobject":76}],83:[function(e,t,r){var n=e("./$.to-iobject");e("./$.object-sap")("getOwnPropertyDescriptor",function(e){return function(t,r){return e(n(t),r)}})},{"./$.object-sap":62,"./$.to-iobject":76}],84:[function(e,t,r){var n=e("./$.to-object");e("./$.object-sap")("getPrototypeOf",function(e){return function(t){return e(n(t))}})},{"./$.object-sap":62,"./$.to-object":78}],85:[function(e,t,r){var n=e("./$.to-object");e("./$.object-sap")("keys",function(e){return function(t){return e(n(t))}})},{"./$.object-sap":62,"./$.to-object":78}],86:[function(e,t,r){var n=e("./$.export");n(n.S,"Object",{setPrototypeOf:e("./$.set-proto").set})},{"./$.export":39,"./$.set-proto":67}],87:[function(e,t,r){},{}],88:[function(e,t,r){var n,o=e("./$"),i=e("./$.library"),a=e("./$.global"),s=e("./$.ctx"),u=e("./$.classof"),c=e("./$.export"),l=e("./$.is-object"),f=e("./$.an-object"),d=e("./$.a-function"),p=e("./$.strict-new"),h=e("./$.for-of"),m=e("./$.set-proto").set,y=e("./$.same-value"),b=e("./$.wks")("species"),g=e("./$.species-constructor"),v=e("./$.microtask"),_="Promise",w=a.process,k="process"==u(w),j=a[_],$=function(e){var t=new j(function(){});return e&&(t.constructor=Object),j.resolve(t)===t},x=function(){function t(e){var r=new j(e);return m(r,t.prototype),r}var r=!1;try{if(r=j&&j.resolve&&$(),m(t,j),t.prototype=o.create(j.prototype,{constructor:{value:t}}),t.resolve(5).then(function(){})instanceof t||(r=!1),r&&e("./$.descriptors")){var n=!1;j.resolve(o.setDesc({},"then",{get:function(){n=!0}})),r=n}}catch(i){r=!1}return r}(),O=function(e,t){return i&&e===j&&t===n?!0:y(e,t)},E=function(e){var t=f(e)[b];return void 0!=t?t:e},S=function(e){var t;return l(e)&&"function"==typeof(t=e.then)?t:!1},R=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=d(t),this.reject=d(r)},P=function(e){try{e()}catch(t){return{error:t}}},T=function(e,t){if(!e.n){e.n=!0;var r=e.c;v(function(){for(var n=e.v,o=1==e.s,i=0,s=function u(t){var r,i,a=o?t.ok:t.fail,u=t.resolve,s=t.reject;try{a?(o||(e.h=!0),r=a===!0?n:a(n),r===t.promise?s(TypeError("Promise-chain cycle")):(i=S(r))?i.call(r,u,s):u(r)):s(n)}catch(c){s(c)}};r.length>i;)s(r[i++]);r.length=0,e.n=!1,t&&setTimeout(function(){var t,r,o=e.p;M(o)&&(k?w.emit("unhandledRejection",n,o):(t=a.onunhandledrejection)?t({promise:o,reason:n}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",n)),e.a=void 0},1)})}},M=function L(e){var t,r=e._d,n=r.a||r.c,o=0;if(r.h)return!1;for(;n.length>o;)if(t=n[o++],t.fail||!L(t.promise))return!1;return!0},C=function(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,t.a=t.c.slice(),T(t,!0))},A=function I(e){var t,r=this;if(!r.d){r.d=!0,r=r.r||r;try{if(r.p===e)throw TypeError("Promise can't be resolved itself");(t=S(e))?v(function(){var n={r:r,d:!1};try{t.call(e,s(I,n,1),s(C,n,1))}catch(o){C.call(n,o)}}):(r.v=e,r.s=1,T(r,!1))}catch(n){C.call({r:r,d:!1},n)}}};x||(j=function(e){d(e);var t=this._d={p:p(this,j,_),c:[],a:void 0,s:0,d:!1,v:void 0,h:!1,n:!1};try{e(s(A,t,1),s(C,t,1))}catch(r){C.call(t,r)}},e("./$.redefine-all")(j.prototype,{then:function(e,t){var r=new R(g(this,j)),n=r.promise,o=this._d;return r.ok="function"==typeof e?e:!0,r.fail="function"==typeof t&&t,o.c.push(r),o.a&&o.a.push(r),o.s&&T(o,!1),n},"catch":function(e){return this.then(void 0,e)}})),c(c.G+c.W+c.F*!x,{Promise:j}),e("./$.set-to-string-tag")(j,_),e("./$.set-species")(_),n=e("./$.core")[_],c(c.S+c.F*!x,_,{reject:function(e){var t=new R(this),r=t.reject;return r(e),t.promise}}),c(c.S+c.F*(!x||$(!0)),_,{resolve:function(e){if(e instanceof j&&O(e.constructor,this))return e;var t=new R(this),r=t.resolve;return r(e),t.promise}}),c(c.S+c.F*!(x&&e("./$.iter-detect")(function(e){j.all(e)["catch"](function(){})})),_,{all:function(e){var t=E(this),r=new R(t),n=r.resolve,i=r.reject,a=[],s=P(function(){h(e,!1,a.push,a);var r=a.length,s=Array(r);r?o.each.call(a,function(e,o){var a=!1;t.resolve(e).then(function(e){a||(a=!0,s[o]=e,--r||n(s))},i)}):n(s)});return s&&i(s.error),r.promise},race:function(e){var t=E(this),r=new R(t),n=r.reject,o=P(function(){h(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o&&n(o.error),r.promise}})},{"./$":58,"./$.a-function":28,"./$.an-object":30,"./$.classof":31,"./$.core":33,"./$.ctx":34,"./$.descriptors":36,"./$.export":39,"./$.for-of":41,"./$.global":43,"./$.is-object":51,"./$.iter-detect":55,"./$.library":60,"./$.microtask":61,"./$.redefine-all":64,"./$.same-value":66,"./$.set-proto":67,"./$.set-species":68,"./$.set-to-string-tag":69,"./$.species-constructor":71,"./$.strict-new":72,"./$.wks":80}],89:[function(e,t,r){var n=e("./$.string-at")(!0);e("./$.iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./$.iter-define":54,"./$.string-at":73}],90:[function(e,t,r){var n=e("./$"),o=e("./$.global"),i=e("./$.has"),a=e("./$.descriptors"),s=e("./$.export"),u=e("./$.redefine"),c=e("./$.fails"),l=e("./$.shared"),f=e("./$.set-to-string-tag"),d=e("./$.uid"),p=e("./$.wks"),h=e("./$.keyof"),m=e("./$.get-names"),y=e("./$.enum-keys"),b=e("./$.is-array"),g=e("./$.an-object"),v=e("./$.to-iobject"),_=e("./$.property-desc"),w=n.getDesc,k=n.setDesc,j=n.create,$=m.get,x=o.Symbol,O=o.JSON,E=O&&O.stringify,S=!1,R=p("_hidden"),P=n.isEnum,T=l("symbol-registry"),M=l("symbols"),C="function"==typeof x,A=Object.prototype,L=a&&c(function(){return 7!=j(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=w(A,t);n&&delete A[t],k(e,t,r),n&&e!==A&&k(A,t,n)}:k,I=function(e){var t=M[e]=j(x.prototype);return t._k=e,a&&S&&L(A,e,{configurable:!0,set:function(t){i(this,R)&&i(this[R],e)&&(this[R][e]=!1),L(this,e,_(1,t))}}),t},N=function(e){return"symbol"==typeof e},D=function(e,t,r){return r&&i(M,t)?(r.enumerable?(i(e,R)&&e[R][t]&&(e[R][t]=!1),r=j(r,{enumerable:_(0,!1)})):(i(e,R)||k(e,R,_(1,{})),e[R][t]=!0),L(e,t,r)):k(e,t,r)},U=function(e,t){g(e);for(var r,n=y(t=v(t)),o=0,i=n.length;i>o;)D(e,r=n[o++],t[r]);return e},q=function(e,t){return void 0===t?j(e):U(j(e),t)},F=function(e){var t=P.call(this,e);return t||!i(this,e)||!i(M,e)||i(this,R)&&this[R][e]?t:!0},B=function(e,t){var r=w(e=v(e),t);return!r||!i(M,t)||i(e,R)&&e[R][t]||(r.enumerable=!0),r},H=function(e){for(var t,r=$(v(e)),n=[],o=0;r.length>o;)i(M,t=r[o++])||t==R||n.push(t);return n},J=function(e){for(var t,r=$(v(e)),n=[],o=0;r.length>o;)i(M,t=r[o++])&&n.push(M[t]);return n},G=function(e){if(void 0!==e&&!N(e)){for(var t,r,n=[e],o=1,i=arguments;i.length>o;)n.push(i[o++]);return t=n[1],"function"==typeof t&&(r=t),(r||!b(t))&&(t=function(e,t){return r&&(t=r.call(this,e,t)),N(t)?void 0:t}),n[1]=t,E.apply(O,n)}},z=c(function(){var e=x();return"[null]"!=E([e])||"{}"!=E({a:e})||"{}"!=E(Object(e))});C||(x=function(){if(N(this))throw TypeError("Symbol is not a constructor");return I(d(arguments.length>0?arguments[0]:void 0))},u(x.prototype,"toString",function(){return this._k}),N=function(e){return e instanceof x},n.create=q,n.isEnum=F,n.getDesc=B,n.setDesc=D,n.setDescs=U,n.getNames=m.get=H,n.getSymbols=J,a&&!e("./$.library")&&u(A,"propertyIsEnumerable",F,!0));var Y={"for":function(e){return i(T,e+="")?T[e]:T[e]=x(e)},keyFor:function(e){return h(T,e)},useSetter:function(){S=!0},useSimple:function(){S=!1}};n.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(e){var t=p(e);Y[e]=C?t:I(t)}),S=!0,s(s.G+s.W,{Symbol:x}),s(s.S,"Symbol",Y),s(s.S+s.F*!C,"Object",{create:q,defineProperty:D,defineProperties:U,getOwnPropertyDescriptor:B,getOwnPropertyNames:H,getOwnPropertySymbols:J}),O&&s(s.S+s.F*(!C||z),"JSON",{stringify:G}),f(x,"Symbol"),f(Math,"Math",!0),f(o.JSON,"JSON",!0)},{"./$":58,"./$.an-object":30,"./$.descriptors":36,"./$.enum-keys":38,"./$.export":39,"./$.fails":40,"./$.get-names":42,"./$.global":43,"./$.has":44,"./$.is-array":50,"./$.keyof":59,"./$.library":60,"./$.property-desc":63,"./$.redefine":65,"./$.set-to-string-tag":69,"./$.shared":70,"./$.to-iobject":76,"./$.uid":79,"./$.wks":80}],91:[function(e,t,r){e("./es6.array.iterator");var n=e("./$.iterators");n.NodeList=n.HTMLCollection=n.Array},{"./$.iterators":57,"./es6.array.iterator":82}],92:[function(e,t,r){(function(r){var n="object"==typeof r?r:"object"==typeof window?window:"object"==typeof self?self:this,i=n.regeneratorRuntime&&o(n).indexOf("regeneratorRuntime")>=0,a=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=e("./runtime"),i)n.regeneratorRuntime=a;else try{delete n.regeneratorRuntime;
}catch(s){n.regeneratorRuntime=void 0}t.exports={"default":t.exports,__esModule:!0}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./runtime":93}],93:[function(e,t,r){(function(r,n){function o(e){return e&&e.__esModule?e:{"default":e}}var i=e("../core-js/promise"),a=o(i),s=e("../core-js/object/set-prototype-of"),u=o(s),c=e("../core-js/object/create"),l=o(c),f=e("../helpers/typeof"),d=o(f),p=e("../core-js/symbol/iterator"),h=o(p),m=e("../core-js/symbol"),y=o(m);!function(e){function n(e,t,r,n){var o=(0,l["default"])((t||i).prototype),a=new _(n||[]);return o._invoke=b(e,r,a),o}function o(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function i(){}function s(){}function c(){}function f(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function p(e){this.arg=e}function m(e){function t(t,r){var n=e[t](r),o=n.value;return o instanceof p?a["default"].resolve(o.arg).then(i,s):a["default"].resolve(o).then(function(e){return n.value=e,n})}function n(e,r){function n(){return t(e,r)}return o=o?o.then(n,n):new a["default"](function(e){e(n())})}"object"===("undefined"==typeof r?"undefined":(0,d["default"])(r))&&r.domain&&(t=r.domain.bind(t));var o,i=t.bind(e,"next"),s=t.bind(e,"throw");t.bind(e,"return"),this._invoke=n}function b(e,t,r){var n=S;return function(i,a){if(n===P)throw new Error("Generator is already running");if(n===T){if("throw"===i)throw a;return k()}for(;;){var s=r.delegate;if(s){if("return"===i||"throw"===i&&s.iterator[i]===j){r.delegate=null;var u=s.iterator["return"];if(u){var c=o(u,s.iterator,a);if("throw"===c.type){i="throw",a=c.arg;continue}}if("return"===i)continue}var c=o(s.iterator[i],s.iterator,a);if("throw"===c.type){r.delegate=null,i="throw",a=c.arg;continue}i="next",a=j;var l=c.arg;if(!l.done)return n=R,l;r[s.resultName]=l.value,r.next=s.nextLoc,r.delegate=null}if("next"===i)r._sent=a,n===R?r.sent=a:r.sent=j;else if("throw"===i){if(n===S)throw n=T,a;r.dispatchException(a)&&(i="next",a=j)}else"return"===i&&r.abrupt("return",a);n=P;var c=o(e,t,r);if("normal"===c.type){n=r.done?T:R;var l={value:c.arg,done:r.done};if(c.arg!==M)return l;r.delegate&&"next"===i&&(a=j)}else"throw"===c.type&&(n=T,i="throw",a=c.arg)}}}function g(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(g,this),this.reset(!0)}function w(e){if(e){var t=e[x];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function o(){for(;++r<e.length;)if($.call(e,r))return o.value=e[r],o.done=!1,o;return o.value=j,o.done=!0,o};return n.next=n}}return{next:k}}function k(){return{value:j,done:!0}}var j,$=Object.prototype.hasOwnProperty,x="function"==typeof y["default"]&&h["default"]||"@@iterator",O="object"===("undefined"==typeof t?"undefined":(0,d["default"])(t)),E=e.regeneratorRuntime;if(E)return void(O&&(t.exports=E));E=e.regeneratorRuntime=O?t.exports:{},E.wrap=n;var S="suspendedStart",R="suspendedYield",P="executing",T="completed",M={},C=c.prototype=i.prototype;s.prototype=C.constructor=c,c.constructor=s,s.displayName="GeneratorFunction",E.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return t?t===s||"GeneratorFunction"===(t.displayName||t.name):!1},E.mark=function(e){return u["default"]?(0,u["default"])(e,c):e.__proto__=c,e.prototype=(0,l["default"])(C),e},E.awrap=function(e){return new p(e)},f(m.prototype),E.async=function(e,t,r,o){var i=new m(n(e,t,r,o));return E.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},f(C),C[x]=function(){return this},C.toString=function(){return"[object Generator]"},E.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},E.values=w,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=j,this.done=!1,this.delegate=null,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&$.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=j)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return i.type="throw",i.arg=e,r.next=t,!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=$.call(o,"catchLoc"),s=$.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&$.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?this.next=o.finallyLoc:this.complete(i),M},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),v(r),M}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;v(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:w(e),resultName:t,nextLoc:r},M}}}("object"===("undefined"==typeof n?"undefined":(0,d["default"])(n))?n:"object"===("undefined"==typeof window?"undefined":(0,d["default"])(window))?window:"object"===("undefined"==typeof self?"undefined":(0,d["default"])(self))?self:void 0)}).call(this,e("_process"),"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../core-js/object/create":1,"../core-js/object/set-prototype-of":6,"../core-js/promise":7,"../core-js/symbol":8,"../core-js/symbol/iterator":9,"../helpers/typeof":18,_process:94}],94:[function(e,t,r){function n(){l=!1,s.length?c=s.concat(c):f=-1,c.length&&o()}function o(){if(!l){var e=setTimeout(n);l=!0;for(var t=c.length;t;){for(s=c,c=[];++f<t;)s&&s[f].run();f=-1,t=c.length}s=null,l=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function a(){}var s,u=t.exports={},c=[],l=!1,f=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new i(e,t)),1!==c.length||l||setTimeout(o,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],95:[function(e,r,n){!function(e,n){"function"==typeof t&&t.amd?t([],n):"undefined"!=typeof r&&r.exports?r.exports=n():e.tv4=n()}(this,function(){function e(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function t(t){var r="";y[t.charAt(0)]&&(r=t.charAt(0),t=t.substring(1));var n="",o="",i=!0,a=!1,s=!1;"+"===r?i=!1:"."===r?(o=".",n="."):"/"===r?(o="/",n="/"):"#"===r?(o="#",i=!1):";"===r?(o=";",n=";",a=!0,s=!0):"?"===r?(o="?",n="&",a=!0):"&"===r&&(o="&",n="&",a=!0);for(var c=[],l=t.split(","),f=[],d={},p=0;p<l.length;p++){var h=l[p],m=null;if(-1!==h.indexOf(":")){var g=h.split(":");h=g[0],m=parseInt(g[1],10)}for(var v={};b[h.charAt(h.length-1)];)v[h.charAt(h.length-1)]=!0,h=h.substring(0,h.length-1);var _={truncate:m,name:h,suffices:v};f.push(_),d[h]=_,c.push(h)}var w=function(t){for(var r="",c=0,l=0;l<f.length;l++){var d=f[l],p=t(d.name);if(null===p||void 0===p||Array.isArray(p)&&0===p.length||"object"==typeof p&&0===u(p).length)c++;else if(r+=l===c?o:n||",",Array.isArray(p)){a&&(r+=d.name+"=");for(var h=0;h<p.length;h++)h>0&&(r+=d.suffices["*"]?n||",":",",d.suffices["*"]&&a&&(r+=d.name+"=")),r+=i?encodeURIComponent(p[h]).replace(/!/g,"%21"):e(p[h])}else if("object"==typeof p){a&&!d.suffices["*"]&&(r+=d.name+"=");var m=!0;for(var y in p)m||(r+=d.suffices["*"]?n||",":","),m=!1,r+=i?encodeURIComponent(y).replace(/!/g,"%21"):e(y),r+=d.suffices["*"]?"=":",",r+=i?encodeURIComponent(p[y]).replace(/!/g,"%21"):e(p[y])}else a&&(r+=d.name,s&&""===p||(r+="=")),null!=d.truncate&&(p=p.substring(0,d.truncate)),r+=i?encodeURIComponent(p).replace(/!/g,"%21"):e(p)}return r};return w.varNames=c,{prefix:o,substitution:w}}function r(e){if(!(this instanceof r))return new r(e);for(var n=e.split("{"),o=[n.shift()],i=[],a=[],s=[];n.length>0;){var u=n.shift(),c=u.split("}")[0],l=u.substring(c.length+1),f=t(c);a.push(f.substitution),i.push(f.prefix),o.push(l),s=s.concat(f.substitution.varNames)}this.fill=function(e){for(var t=o[0],r=0;r<a.length;r++){var n=a[r];t+=n(e),t+=o[r+1]}return t},this.varNames=s,this.template=e}function n(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(Array.isArray(e)!==Array.isArray(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1}else{var o;for(o in e)if(void 0===t[o]&&void 0!==e[o])return!1;for(o in t)if(void 0===e[o]&&void 0!==t[o])return!1;for(o in e)if(!n(e[o],t[o]))return!1}return!0}return!1}function o(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function i(e,t){function r(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return t=o(t||""),e=o(e||""),t&&e?(t.protocol||e.protocol)+(t.protocol||t.authority?t.authority:e.authority)+r(t.protocol||t.authority||"/"===t.pathname.charAt(0)?t.pathname:t.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+t.pathname:e.pathname)+(t.protocol||t.authority||t.pathname?t.search:t.search||e.search)+t.hash:null}function a(e){return e.split("#")[0]}function s(e,t){if(e&&"object"==typeof e)if(void 0===t?t=e.id:"string"==typeof e.id&&(t=i(t,e.id),e.id=t),Array.isArray(e))for(var r=0;r<e.length;r++)s(e[r],t);else{"string"==typeof e.$ref&&(e.$ref=i(t,e.$ref));for(var n in e)"enum"!==n&&s(e[n],t)}}function d(e){e=e||"en";var t=x[e];return function(e){var r=t[e.code]||$[e.code];if("string"!=typeof r)return"Unknown error code "+e.code+": "+JSON.stringify(e.messageParams);var n=e.params;return r.replace(/\{([^{}]*)\}/g,function(e,t){var r=n[t];return"string"==typeof r||"number"==typeof r?r:e})}}function p(e,t,r,n,o){if(Error.call(this),void 0===e)throw new Error("No error code supplied: "+n);this.message="",this.params=t,this.code=e,this.dataPath=r||"",this.schemaPath=n||"",this.subErrors=o||null;var i=new Error(this.message);if(this.stack=i.stack||i.stacktrace,!this.stack)try{throw i}catch(i){this.stack=i.stack||i.stacktrace}}function h(e,t){if(t.substring(0,e.length)===e){var r=t.substring(e.length);if(t.length>0&&"/"===t.charAt(e.length-1)||"#"===r.charAt(0)||"?"===r.charAt(0))return!0}return!1}function m(e){var t,r,n=new g,o={setErrorReporter:function(e){return"string"==typeof e?this.language(e):(r=e,!0)},addFormat:function(){n.addFormat.apply(n,arguments)},language:function(e){return e?(x[e]||(e=e.split("-")[0]),x[e]?(t=e,e):!1):t},addLanguage:function(e,t){var r;for(r in w)t[r]&&!t[w[r]]&&(t[w[r]]=t[r]);var n=e.split("-")[0];if(x[n]){x[e]=c(x[n]);for(r in t)"undefined"==typeof x[n][r]&&(x[n][r]=t[r]),x[e][r]=t[r]}else x[e]=t,x[n]=t;return this},freshApi:function(e){var t=m();return e&&t.language(e),t},validate:function(e,o,i,a){var s=d(t),u=r?function(e,t,n){return r(e,t,n)||s(e,t,n)}:s,c=new g(n,!1,u,i,a);"string"==typeof o&&(o={$ref:o}),c.addSchema("",o);var l=c.validateAll(e,o,null,null,"");return!l&&a&&(l=c.banUnknownProperties(e,o)),this.error=l,this.missing=c.missing,this.valid=null===l,this.valid},validateResult:function(){var e={};return this.validate.apply(e,arguments),e},validateMultiple:function(e,o,i,a){var s=d(t),u=r?function(e,t,n){return r(e,t,n)||s(e,t,n)}:s,c=new g(n,!0,u,i,a);"string"==typeof o&&(o={$ref:o}),c.addSchema("",o),c.validateAll(e,o,null,null,""),a&&c.banUnknownProperties(e,o);var l={};return l.errors=c.errors,l.missing=c.missing,l.valid=0===l.errors.length,l},addSchema:function(){return n.addSchema.apply(n,arguments)},getSchema:function(){return n.getSchema.apply(n,arguments)},getSchemaMap:function(){return n.getSchemaMap.apply(n,arguments)},getSchemaUris:function(){return n.getSchemaUris.apply(n,arguments)},getMissingUris:function(){return n.getMissingUris.apply(n,arguments)},dropSchemas:function(){n.dropSchemas.apply(n,arguments)},defineKeyword:function(){n.defineKeyword.apply(n,arguments)},defineError:function(e,t,r){if("string"!=typeof e||!/^[A-Z]+(_[A-Z]+)*$/.test(e))throw new Error("Code name must be a string in UPPER_CASE_WITH_UNDERSCORES");if("number"!=typeof t||t%1!==0||1e4>t)throw new Error("Code number must be an integer > 10000");if("undefined"!=typeof w[e])throw new Error("Error already defined: "+e+" as "+w[e]);if("undefined"!=typeof k[t])throw new Error("Error code already used: "+k[t]+" as "+t);w[e]=t,k[t]=e,$[e]=$[t]=r;for(var n in x){var o=x[n];o[e]&&(o[t]=o[t]||o[e])}},reset:function(){n.reset(),this.error=null,this.missing=[],this.valid=!0},missing:[],error:null,valid:!0,normSchema:s,resolveUrl:i,getDocumentUri:a,errorCodes:w};return o.language(e||"en"),o}u||(Object.keys=function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=r.length;return function(o){if("object"!=typeof o&&"function"!=typeof o||null===o)throw new TypeError("Object.keys called on non-object");var i=[];for(var a in o)e.call(o,a)&&i.push(a);if(t)for(var s=0;n>s;s++)e.call(o,r[s])&&i.push(r[s]);return i}}()),c||(Object.create=function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),r=t.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var o=n>=0?n:Math.max(r-Math.abs(n),0);r>o;o++)if(o in t&&t[o]===e)return o;return-1}),l||(Object.isFrozen=function(e){for(var t="tv4_test_frozen_key";e.hasOwnProperty(t);)t+=Math.random();try{return e[t]=!0,delete e[t],!1}catch(r){return!0}});var y={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},b={"*":!0};r.prototype={toString:function(){return this.template},fillFromObject:function(e){return this.fill(function(t){return e[t]})}};var g=function(e,t,r,n,o){if(this.missing=[],this.missingMap={},this.formatValidators=e?c(e.formatValidators):{},this.schemas=e?c(e.schemas):{},this.collectMultiple=t,this.errors=[],this.handleError=t?this.collectError:this.returnError,n&&(this.checkRecursive=!0,this.scanned=[],this.scannedFrozen=[],this.scannedFrozenSchemas=[],this.scannedFrozenValidationErrors=[],this.validatedSchemasKey="tv4_validation_id",this.validationErrorsKey="tv4_validation_errors_id"),o&&(this.trackUnknownProperties=!0,this.knownPropertyPaths={},this.unknownPropertyPaths={}),this.errorReporter=r||d("en"),"string"==typeof this.errorReporter)throw new Error("debug");if(this.definedKeywords={},e)for(var i in e.definedKeywords)this.definedKeywords[i]=e.definedKeywords[i].slice(0)};g.prototype.defineKeyword=function(e,t){this.definedKeywords[e]=this.definedKeywords[e]||[],this.definedKeywords[e].push(t)},g.prototype.createError=function(e,t,r,n,o,i,a){var s=new p(e,t,r,n,o);return s.message=this.errorReporter(s,i,a),s},g.prototype.returnError=function(e){return e},g.prototype.collectError=function(e){return e&&this.errors.push(e),null},g.prototype.prefixErrors=function(e,t,r){for(var n=e;n<this.errors.length;n++)this.errors[n]=this.errors[n].prefixWith(t,r);return this},g.prototype.banUnknownProperties=function(e,t){for(var r in this.unknownPropertyPaths){var n=this.createError(w.UNKNOWN_PROPERTY,{path:r},r,"",null,e,t),o=this.handleError(n);if(o)return o}return null},g.prototype.addFormat=function(e,t){if("object"==typeof e){for(var r in e)this.addFormat(r,e[r]);return this}this.formatValidators[e]=t},g.prototype.resolveRefs=function(e,t){if(void 0!==e.$ref){if(t=t||{},t[e.$ref])return this.createError(w.CIRCULAR_REFERENCE,{urls:u(t).join(", ")},"","",null,void 0,e);t[e.$ref]=!0,e=this.getSchema(e.$ref,t)}return e},g.prototype.getSchema=function(e,t){var r;if(void 0!==this.schemas[e])return r=this.schemas[e],this.resolveRefs(r,t);var n=e,o="";if(-1!==e.indexOf("#")&&(o=e.substring(e.indexOf("#")+1),n=e.substring(0,e.indexOf("#"))),"object"==typeof this.schemas[n]){r=this.schemas[n];var i=decodeURIComponent(o);if(""===i)return this.resolveRefs(r,t);if("/"!==i.charAt(0))return;for(var a=i.split("/").slice(1),s=0;s<a.length;s++){var u=a[s].replace(/~1/g,"/").replace(/~0/g,"~");if(void 0===r[u]){r=void 0;break}r=r[u]}if(void 0!==r)return this.resolveRefs(r,t)}void 0===this.missing[n]&&(this.missing.push(n),this.missing[n]=n,this.missingMap[n]=n)},g.prototype.searchSchemas=function(e,t){if(Array.isArray(e))for(var r=0;r<e.length;r++)this.searchSchemas(e[r],t);else if(e&&"object"==typeof e){"string"==typeof e.id&&h(t,e.id)&&void 0===this.schemas[e.id]&&(this.schemas[e.id]=e);for(var n in e)if("enum"!==n)if("object"==typeof e[n])this.searchSchemas(e[n],t);else if("$ref"===n){var o=a(e[n]);o&&void 0===this.schemas[o]&&void 0===this.missingMap[o]&&(this.missingMap[o]=o)}}},g.prototype.addSchema=function(e,t){if("string"!=typeof e||"undefined"==typeof t){if("object"!=typeof e||"string"!=typeof e.id)return;t=e,e=t.id}e===a(e)+"#"&&(e=a(e)),this.schemas[e]=t,delete this.missingMap[e],s(t,e),this.searchSchemas(t,e)},g.prototype.getSchemaMap=function(){var e={};for(var t in this.schemas)e[t]=this.schemas[t];return e},g.prototype.getSchemaUris=function(e){var t=[];for(var r in this.schemas)(!e||e.test(r))&&t.push(r);return t},g.prototype.getMissingUris=function(e){var t=[];for(var r in this.missingMap)(!e||e.test(r))&&t.push(r);return t},g.prototype.dropSchemas=function(){this.schemas={},this.reset()},g.prototype.reset=function(){this.missing=[],this.missingMap={},this.errors=[]},g.prototype.validateAll=function(e,t,r,n,o){var i;if(t=this.resolveRefs(t),!t)return null;if(t instanceof p)return this.errors.push(t),t;var a,s=this.errors.length,u=null,c=null;if(this.checkRecursive&&e&&"object"==typeof e){if(i=!this.scanned.length,e[this.validatedSchemasKey]){var d=e[this.validatedSchemasKey].indexOf(t);if(-1!==d)return this.errors=this.errors.concat(e[this.validationErrorsKey][d]),null}if(l(e)&&(a=this.scannedFrozen.indexOf(e),-1!==a)){var h=this.scannedFrozenSchemas[a].indexOf(t);if(-1!==h)return this.errors=this.errors.concat(this.scannedFrozenValidationErrors[a][h]),null}if(this.scanned.push(e),l(e))-1===a&&(a=this.scannedFrozen.length,this.scannedFrozen.push(e),this.scannedFrozenSchemas.push([])),u=this.scannedFrozenSchemas[a].length,this.scannedFrozenSchemas[a][u]=t,this.scannedFrozenValidationErrors[a][u]=[];else{if(!e[this.validatedSchemasKey])try{f(e,this.validatedSchemasKey,{value:[],configurable:!0}),f(e,this.validationErrorsKey,{value:[],configurable:!0})}catch(m){e[this.validatedSchemasKey]=[],e[this.validationErrorsKey]=[]}c=e[this.validatedSchemasKey].length,e[this.validatedSchemasKey][c]=t,e[this.validationErrorsKey][c]=[]}}var y=this.errors.length,b=this.validateBasic(e,t,o)||this.validateNumeric(e,t,o)||this.validateString(e,t,o)||this.validateArray(e,t,o)||this.validateObject(e,t,o)||this.validateCombinations(e,t,o)||this.validateHypermedia(e,t,o)||this.validateFormat(e,t,o)||this.validateDefinedKeywords(e,t,o)||null;if(i){for(;this.scanned.length;){var g=this.scanned.pop();delete g[this.validatedSchemasKey]}this.scannedFrozen=[],this.scannedFrozenSchemas=[]}if(b||y!==this.errors.length)for(;r&&r.length||n&&n.length;){var v=r&&r.length?""+r.pop():null,_=n&&n.length?""+n.pop():null;b&&(b=b.prefixWith(v,_)),this.prefixErrors(y,v,_)}return null!==u?this.scannedFrozenValidationErrors[a][u]=this.errors.slice(s):null!==c&&(e[this.validationErrorsKey][c]=this.errors.slice(s)),this.handleError(b)},g.prototype.validateFormat=function(e,t){if("string"!=typeof t.format||!this.formatValidators[t.format])return null;var r=this.formatValidators[t.format].call(null,e,t);return"string"==typeof r||"number"==typeof r?this.createError(w.FORMAT_CUSTOM,{message:r},"","/format",null,e,t):r&&"object"==typeof r?this.createError(w.FORMAT_CUSTOM,{message:r.message||"?"},r.dataPath||"",r.schemaPath||"/format",null,e,t):null},g.prototype.validateDefinedKeywords=function(e,t,r){for(var n in this.definedKeywords)if("undefined"!=typeof t[n])for(var o=this.definedKeywords[n],i=0;i<o.length;i++){var a=o[i],s=a(e,t[n],t,r);if("string"==typeof s||"number"==typeof s)return this.createError(w.KEYWORD_CUSTOM,{key:n,message:s},"","",null,e,t).prefixWith(null,n);if(s&&"object"==typeof s){var u=s.code;if("string"==typeof u){if(!w[u])throw new Error("Undefined error code (use defineError): "+u);u=w[u]}else"number"!=typeof u&&(u=w.KEYWORD_CUSTOM);var c="object"==typeof s.message?s.message:{key:n,message:s.message||"?"},l=s.schemaPath||"/"+n.replace(/~/g,"~0").replace(/\//g,"~1");return this.createError(u,c,s.dataPath||null,l,null,e,t)}}return null},g.prototype.validateBasic=function(e,t,r){var n;return(n=this.validateType(e,t,r))?n.prefixWith(null,"type"):(n=this.validateEnum(e,t,r))?n.prefixWith(null,"type"):null},g.prototype.validateType=function(e,t){if(void 0===t.type)return null;var r=typeof e;null===e?r="null":Array.isArray(e)&&(r="array");var n=t.type;Array.isArray(n)||(n=[n]);for(var o=0;o<n.length;o++){var i=n[o];if(i===r||"integer"===i&&"number"===r&&e%1===0)return null}return this.createError(w.INVALID_TYPE,{type:r,expected:n.join("/")},"","",null,e,t)},g.prototype.validateEnum=function(e,t){if(void 0===t["enum"])return null;for(var r=0;r<t["enum"].length;r++){var o=t["enum"][r];if(n(e,o))return null}return this.createError(w.ENUM_MISMATCH,{value:"undefined"!=typeof JSON?JSON.stringify(e):e},"","",null,e,t)},g.prototype.validateNumeric=function(e,t,r){return this.validateMultipleOf(e,t,r)||this.validateMinMax(e,t,r)||this.validateNaN(e,t,r)||null};var v=Math.pow(2,-51),_=1-v;g.prototype.validateMultipleOf=function(e,t){var r=t.multipleOf||t.divisibleBy;if(void 0===r)return null;if("number"==typeof e){var n=e/r%1;if(n>=v&&_>n)return this.createError(w.NUMBER_MULTIPLE_OF,{value:e,multipleOf:r},"","",null,e,t)}return null},g.prototype.validateMinMax=function(e,t){if("number"!=typeof e)return null;if(void 0!==t.minimum){if(e<t.minimum)return this.createError(w.NUMBER_MINIMUM,{value:e,minimum:t.minimum},"","/minimum",null,e,t);if(t.exclusiveMinimum&&e===t.minimum)return this.createError(w.NUMBER_MINIMUM_EXCLUSIVE,{value:e,minimum:t.minimum},"","/exclusiveMinimum",null,e,t)}if(void 0!==t.maximum){if(e>t.maximum)return this.createError(w.NUMBER_MAXIMUM,{value:e,maximum:t.maximum},"","/maximum",null,e,t);if(t.exclusiveMaximum&&e===t.maximum)return this.createError(w.NUMBER_MAXIMUM_EXCLUSIVE,{value:e,maximum:t.maximum},"","/exclusiveMaximum",null,e,t)}return null},g.prototype.validateNaN=function(e,t){return"number"!=typeof e?null:isNaN(e)===!0||e===1/0||e===-(1/0)?this.createError(w.NUMBER_NOT_A_NUMBER,{value:e},"","/type",null,e,t):null},g.prototype.validateString=function(e,t,r){return this.validateStringLength(e,t,r)||this.validateStringPattern(e,t,r)||null},g.prototype.validateStringLength=function(e,t){return"string"!=typeof e?null:void 0!==t.minLength&&e.length<t.minLength?this.createError(w.STRING_LENGTH_SHORT,{length:e.length,minimum:t.minLength},"","/minLength",null,e,t):void 0!==t.maxLength&&e.length>t.maxLength?this.createError(w.STRING_LENGTH_LONG,{length:e.length,maximum:t.maxLength},"","/maxLength",null,e,t):null},g.prototype.validateStringPattern=function(e,t){if("string"!=typeof e||"string"!=typeof t.pattern&&!(t.pattern instanceof RegExp))return null;var r;if(t.pattern instanceof RegExp)r=t.pattern;else{var n,o="",i=t.pattern.match(/^\/(.+)\/([img]*)$/);i?(n=i[1],o=i[2]):n=t.pattern,r=new RegExp(n,o)}return r.test(e)?null:this.createError(w.STRING_PATTERN,{pattern:t.pattern},"","/pattern",null,e,t)},g.prototype.validateArray=function(e,t,r){return Array.isArray(e)?this.validateArrayLength(e,t,r)||this.validateArrayUniqueItems(e,t,r)||this.validateArrayItems(e,t,r)||null:null},g.prototype.validateArrayLength=function(e,t){var r;return void 0!==t.minItems&&e.length<t.minItems&&(r=this.createError(w.ARRAY_LENGTH_SHORT,{length:e.length,minimum:t.minItems},"","/minItems",null,e,t),this.handleError(r))?r:void 0!==t.maxItems&&e.length>t.maxItems&&(r=this.createError(w.ARRAY_LENGTH_LONG,{length:e.length,maximum:t.maxItems},"","/maxItems",null,e,t),this.handleError(r))?r:null},g.prototype.validateArrayUniqueItems=function(e,t){if(t.uniqueItems)for(var r=0;r<e.length;r++)for(var o=r+1;o<e.length;o++)if(n(e[r],e[o])){var i=this.createError(w.ARRAY_UNIQUE,{match1:r,match2:o},"","/uniqueItems",null,e,t);if(this.handleError(i))return i}return null},g.prototype.validateArrayItems=function(e,t,r){if(void 0===t.items)return null;var n,o;if(Array.isArray(t.items)){for(o=0;o<e.length;o++)if(o<t.items.length){if(n=this.validateAll(e[o],t.items[o],[o],["items",o],r+"/"+o))return n}else if(void 0!==t.additionalItems)if("boolean"==typeof t.additionalItems){if(!t.additionalItems&&(n=this.createError(w.ARRAY_ADDITIONAL_ITEMS,{},"/"+o,"/additionalItems",null,e,t),this.handleError(n)))return n}else if(n=this.validateAll(e[o],t.additionalItems,[o],["additionalItems"],r+"/"+o))return n}else for(o=0;o<e.length;o++)if(n=this.validateAll(e[o],t.items,[o],["items"],r+"/"+o))return n;return null},g.prototype.validateObject=function(e,t,r){return"object"!=typeof e||null===e||Array.isArray(e)?null:this.validateObjectMinMaxProperties(e,t,r)||this.validateObjectRequiredProperties(e,t,r)||this.validateObjectProperties(e,t,r)||this.validateObjectDependencies(e,t,r)||null},g.prototype.validateObjectMinMaxProperties=function(e,t){var r,n=u(e);return void 0!==t.minProperties&&n.length<t.minProperties&&(r=this.createError(w.OBJECT_PROPERTIES_MINIMUM,{propertyCount:n.length,minimum:t.minProperties},"","/minProperties",null,e,t),this.handleError(r))?r:void 0!==t.maxProperties&&n.length>t.maxProperties&&(r=this.createError(w.OBJECT_PROPERTIES_MAXIMUM,{propertyCount:n.length,maximum:t.maxProperties},"","/maxProperties",null,e,t),this.handleError(r))?r:null},g.prototype.validateObjectRequiredProperties=function(e,t){if(void 0!==t.required)for(var r=0;r<t.required.length;r++){var n=t.required[r];if(void 0===e[n]){var o=this.createError(w.OBJECT_REQUIRED,{key:n},"","/required/"+r,null,e,t);if(this.handleError(o))return o}}return null},g.prototype.validateObjectProperties=function(e,t,r){var n;for(var o in e){var i=r+"/"+o.replace(/~/g,"~0").replace(/\//g,"~1"),a=!1;if(void 0!==t.properties&&void 0!==t.properties[o]&&(a=!0,n=this.validateAll(e[o],t.properties[o],[o],["properties",o],i)))return n;if(void 0!==t.patternProperties)for(var s in t.patternProperties){var u=new RegExp(s);if(u.test(o)&&(a=!0,n=this.validateAll(e[o],t.patternProperties[s],[o],["patternProperties",s],i)))return n}if(a)this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]);else if(void 0!==t.additionalProperties){if(this.trackUnknownProperties&&(this.knownPropertyPaths[i]=!0,delete this.unknownPropertyPaths[i]),"boolean"==typeof t.additionalProperties){if(!t.additionalProperties&&(n=this.createError(w.OBJECT_ADDITIONAL_PROPERTIES,{key:o},"","/additionalProperties",null,e,t).prefixWith(o,null),this.handleError(n)))return n}else if(n=this.validateAll(e[o],t.additionalProperties,[o],["additionalProperties"],i))return n}else this.trackUnknownProperties&&!this.knownPropertyPaths[i]&&(this.unknownPropertyPaths[i]=!0)}return null},g.prototype.validateObjectDependencies=function(e,t,r){var n;if(void 0!==t.dependencies)for(var o in t.dependencies)if(void 0!==e[o]){var i=t.dependencies[o];if("string"==typeof i){if(void 0===e[i]&&(n=this.createError(w.OBJECT_DEPENDENCY_KEY,{key:o,missing:i},"","",null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(Array.isArray(i))for(var a=0;a<i.length;a++){var s=i[a];if(void 0===e[s]&&(n=this.createError(w.OBJECT_DEPENDENCY_KEY,{key:o,missing:s},"","/"+a,null,e,t).prefixWith(null,o).prefixWith(null,"dependencies"),this.handleError(n)))return n}else if(n=this.validateAll(e,i,[],["dependencies",o],r))return n}return null},g.prototype.validateCombinations=function(e,t,r){return this.validateAllOf(e,t,r)||this.validateAnyOf(e,t,r)||this.validateOneOf(e,t,r)||this.validateNot(e,t,r)||null},g.prototype.validateAllOf=function(e,t,r){if(void 0===t.allOf)return null;for(var n,o=0;o<t.allOf.length;o++){var i=t.allOf[o];if(n=this.validateAll(e,i,[],["allOf",o],r))return n}return null},g.prototype.validateAnyOf=function(e,t,r){if(void 0===t.anyOf)return null;var n,o,i=[],a=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var s=!0,u=0;u<t.anyOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.anyOf[u],l=this.errors.length,f=this.validateAll(e,c,[],["anyOf",u],r);if(null===f&&l===this.errors.length){if(this.errors=this.errors.slice(0,a),this.trackUnknownProperties){for(var d in this.knownPropertyPaths)o[d]=!0,delete n[d];for(var p in this.unknownPropertyPaths)o[p]||(n[p]=!0);s=!1;continue}return null}f&&i.push(f.prefixWith(null,""+u).prefixWith(null,"anyOf"))}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),s?(i=i.concat(this.errors.slice(a)),this.errors=this.errors.slice(0,a),this.createError(w.ANY_OF_MISSING,{},"","/anyOf",i,e,t)):void 0},g.prototype.validateOneOf=function(e,t,r){if(void 0===t.oneOf)return null;var n,o,i=null,a=[],s=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths);for(var u=0;u<t.oneOf.length;u++){this.trackUnknownProperties&&(this.unknownPropertyPaths={},this.knownPropertyPaths={});var c=t.oneOf[u],l=this.errors.length,f=this.validateAll(e,c,[],["oneOf",u],r);if(null===f&&l===this.errors.length){if(null!==i)return this.errors=this.errors.slice(0,s),this.createError(w.ONE_OF_MULTIPLE,{index1:i,index2:u},"","/oneOf",null,e,t);if(i=u,this.trackUnknownProperties){for(var d in this.knownPropertyPaths)o[d]=!0,delete n[d];for(var p in this.unknownPropertyPaths)o[p]||(n[p]=!0)}}else f&&a.push(f)}return this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),
null===i?(a=a.concat(this.errors.slice(s)),this.errors=this.errors.slice(0,s),this.createError(w.ONE_OF_MISSING,{},"","/oneOf",a,e,t)):(this.errors=this.errors.slice(0,s),null)},g.prototype.validateNot=function(e,t,r){if(void 0===t.not)return null;var n,o,i=this.errors.length;this.trackUnknownProperties&&(n=this.unknownPropertyPaths,o=this.knownPropertyPaths,this.unknownPropertyPaths={},this.knownPropertyPaths={});var a=this.validateAll(e,t.not,null,null,r),s=this.errors.slice(i);return this.errors=this.errors.slice(0,i),this.trackUnknownProperties&&(this.unknownPropertyPaths=n,this.knownPropertyPaths=o),null===a&&0===s.length?this.createError(w.NOT_PASSED,{},"","/not",null,e,t):null},g.prototype.validateHypermedia=function(e,t,n){if(!t.links)return null;for(var o,i=0;i<t.links.length;i++){var a=t.links[i];if("describedby"===a.rel){for(var s=new r(a.href),u=!0,c=0;c<s.varNames.length;c++)if(!(s.varNames[c]in e)){u=!1;break}if(u){var l=s.fillFromObject(e),f={$ref:l};if(o=this.validateAll(e,f,[],["links",i],n))return o}}}};var w={INVALID_TYPE:0,ENUM_MISMATCH:1,ANY_OF_MISSING:10,ONE_OF_MISSING:11,ONE_OF_MULTIPLE:12,NOT_PASSED:13,NUMBER_MULTIPLE_OF:100,NUMBER_MINIMUM:101,NUMBER_MINIMUM_EXCLUSIVE:102,NUMBER_MAXIMUM:103,NUMBER_MAXIMUM_EXCLUSIVE:104,NUMBER_NOT_A_NUMBER:105,STRING_LENGTH_SHORT:200,STRING_LENGTH_LONG:201,STRING_PATTERN:202,OBJECT_PROPERTIES_MINIMUM:300,OBJECT_PROPERTIES_MAXIMUM:301,OBJECT_REQUIRED:302,OBJECT_ADDITIONAL_PROPERTIES:303,OBJECT_DEPENDENCY_KEY:304,ARRAY_LENGTH_SHORT:400,ARRAY_LENGTH_LONG:401,ARRAY_UNIQUE:402,ARRAY_ADDITIONAL_ITEMS:403,FORMAT_CUSTOM:500,KEYWORD_CUSTOM:501,CIRCULAR_REFERENCE:600,UNKNOWN_PROPERTY:1e3},k={};for(var j in w)k[w[j]]=j;var $={INVALID_TYPE:"Invalid type: {type} (expected {expected})",ENUM_MISMATCH:"No enum match for: {value}",ANY_OF_MISSING:'Data does not match any schemas from "anyOf"',ONE_OF_MISSING:'Data does not match any schemas from "oneOf"',ONE_OF_MULTIPLE:'Data is valid against more than one schema from "oneOf": indices {index1} and {index2}',NOT_PASSED:'Data matches schema from "not"',NUMBER_MULTIPLE_OF:"Value {value} is not a multiple of {multipleOf}",NUMBER_MINIMUM:"Value {value} is less than minimum {minimum}",NUMBER_MINIMUM_EXCLUSIVE:"Value {value} is equal to exclusive minimum {minimum}",NUMBER_MAXIMUM:"Value {value} is greater than maximum {maximum}",NUMBER_MAXIMUM_EXCLUSIVE:"Value {value} is equal to exclusive maximum {maximum}",NUMBER_NOT_A_NUMBER:"Value {value} is not a valid number",STRING_LENGTH_SHORT:"String is too short ({length} chars), minimum {minimum}",STRING_LENGTH_LONG:"String is too long ({length} chars), maximum {maximum}",STRING_PATTERN:"String does not match pattern: {pattern}",OBJECT_PROPERTIES_MINIMUM:"Too few properties defined ({propertyCount}), minimum {minimum}",OBJECT_PROPERTIES_MAXIMUM:"Too many properties defined ({propertyCount}), maximum {maximum}",OBJECT_REQUIRED:"Missing required property: {key}",OBJECT_ADDITIONAL_PROPERTIES:"Additional properties not allowed",OBJECT_DEPENDENCY_KEY:"Dependency failed - key must exist: {missing} (due to key: {key})",ARRAY_LENGTH_SHORT:"Array is too short ({length}), minimum {minimum}",ARRAY_LENGTH_LONG:"Array is too long ({length}), maximum {maximum}",ARRAY_UNIQUE:"Array items are not unique (indices {match1} and {match2})",ARRAY_ADDITIONAL_ITEMS:"Additional items not allowed",FORMAT_CUSTOM:"Format validation failed ({message})",KEYWORD_CUSTOM:"Keyword failed: {key} ({message})",CIRCULAR_REFERENCE:"Circular $refs: {urls}",UNKNOWN_PROPERTY:"Unknown property (not in schema)"};p.prototype=c(Error.prototype),p.prototype.constructor=p,p.prototype.name="ValidationError",p.prototype.prefixWith=function(e,t){if(null!==e&&(e=e.replace(/~/g,"~0").replace(/\//g,"~1"),this.dataPath="/"+e+this.dataPath),null!==t&&(t=t.replace(/~/g,"~0").replace(/\//g,"~1"),this.schemaPath="/"+t+this.schemaPath),null!==this.subErrors)for(var r=0;r<this.subErrors.length;r++)this.subErrors[r].prefixWith(e,t);return this};var x={},O=m();return O.addLanguage("en-gb",$),O.tv4=O,O})},{}],96:[function(e,r,n){function o(e){return new d(function(t,r){i(e,t,r)})}var i=null,a=null,s=null,c=null,l=null,f=null,p={log:function(){"undefined"!=typeof r||"function"==typeof e&&"function"==typeof t||console.log.apply(console,arguments)},extractVersion:function(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r])}};if("object"==typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return"mozSrcObject"in this?this.mozSrcObject:this._srcObject},set:function(e){"mozSrcObject"in this?this.mozSrcObject=e:(this._srcObject=e,this.src=URL.createObjectURL(e))}}),i=window.navigator&&window.navigator.getUserMedia),a=function(e,t){e.srcObject=t},s=function(e,t){e.srcObject=t.srcObject},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){if(p.log("This appears to be Firefox"),c="firefox",l=p.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),f=31,window.RTCPeerConnection=function(e,t){if(38>l&&e&&e.iceServers){for(var r=[],n=0;n<e.iceServers.length;n++){var o=e.iceServers[n];if(o.hasOwnProperty("urls"))for(var i=0;i<o.urls.length;i++){var a={url:o.urls[i]};0===o.urls[i].indexOf("turn")&&(a.username=o.username,a.credential=o.credential),r.push(a)}else r.push(e.iceServers[n])}e.iceServers=r}return new mozRTCPeerConnection(e,t)},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),i=function(e,t,r){var n=function(e){if("object"!=typeof e||e.require)return e;var t=[];return u(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n=e[r]="object"==typeof e[r]?e[r]:{ideal:e[r]};if((void 0!==n.min||void 0!==n.max||void 0!==n.exact)&&t.push(r),void 0!==n.exact&&("number"==typeof n.exact?n.min=n.max=n.exact:e[r]=n.exact,delete n.exact),void 0!==n.ideal){e.advanced=e.advanced||[];var o={};"number"==typeof n.ideal?o[r]={min:n.ideal,max:n.ideal}:o[r]=n.ideal,e.advanced.push(o),delete n.ideal,u(n).length||delete e[r]}}}),t.length&&(e.require=t),e};return 38>l&&(p.log("spec: "+JSON.stringify(e)),e.audio&&(e.audio=n(e.audio)),e.video&&(e.video=n(e.video)),p.log("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,r)},navigator.getUserMedia=i,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new d(function(e){var t=[{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}];e(t)})},41>l){var h=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return h().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){p.log("This appears to be Chrome"),c="chrome",l=p.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),f=38,window.RTCPeerConnection=function(e,t){e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var r=new webkitRTCPeerConnection(e,t),n=r.getStats.bind(r);return r.getStats=function(e,t,r){var o=this,i=arguments;if(arguments.length>0&&"function"==typeof e)return n(e,t);var a=function(e){var t={},r=e.result();return r.forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t};if(arguments.length>=2){var s=function(e){i[1](a(e))};return n.apply(this,[s,arguments[0]])}return new d(function(t,r){1===i.length&&null===e?n.apply(o,[function(e){t.apply(null,[a(e)])},r]):n.apply(o,[t,r])})},r},["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"==typeof arguments[0]){var r=1===arguments.length?arguments[0]:void 0;return new d(function(n,o){t.apply(e,[n,o,r])})}return t.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,r=this;return new d(function(n,o){t.apply(r,[e[0],function(){n(),e.length>=2&&e[1].apply(null,[])},function(t){o(t),e.length>=3&&e[2].apply(null,[t])}])})}});var m=function(e){if("object"!=typeof e||e.mandatory||e.optional)return e;var t={};return u(e).forEach(function(r){if("require"!==r&&"advanced"!==r&&"mediaSource"!==r){var n="object"==typeof e[r]?e[r]:{ideal:e[r]};void 0!==n.exact&&"number"==typeof n.exact&&(n.min=n.max=n.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==n.ideal){t.optional=t.optional||[];var i={};"number"==typeof n.ideal?(i[o("min",r)]=n.ideal,t.optional.push(i),i={},i[o("max",r)]=n.ideal,t.optional.push(i)):(i[o("",r)]=n.ideal,t.optional.push(i))}void 0!==n.exact&&"number"!=typeof n.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",r)]=n.exact):["min","max"].forEach(function(e){void 0!==n[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,r)]=n[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};if(i=function(e,t,r){return e.audio&&(e.audio=m(e.audio)),e.video&&(e.video=m(e.video)),p.log("chrome: "+JSON.stringify(e)),navigator.webkitGetUserMedia(e,t,r)},navigator.getUserMedia=i,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:o,enumerateDevices:function(){return new d(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(r){e(r.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){var y=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return p.log("spec:   "+JSON.stringify(e)),e.audio=m(e.audio),e.video=m(e.video),p.log("chrome: "+JSON.stringify(e)),y(e)}}else navigator.mediaDevices.getUserMedia=function(e){return o(e)};"undefined"==typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){p.log("Dummy mediaDevices.addEventListener called.")}),"undefined"==typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){p.log("Dummy mediaDevices.removeEventListener called.")}),a=function(e,t){l>=43?e.srcObject=t:"undefined"!=typeof e.src?e.src=URL.createObjectURL(t):p.log("Error attaching stream to element.")},s=function(e,t){l>=43?e.srcObject=t.srcObject:e.src=t.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(p.log("This appears to be Edge"),c="edge",l=p.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),f=12):p.log("Browser does not appear to be WebRTC-capable");else p.log("This does not appear to be a browser"),c="not a browser";var b={};try{Object.defineProperty(b,"version",{set:function(e){l=e}})}catch(g){}if("undefined"!=typeof r){var v;"undefined"!=typeof window&&(v=window.RTCPeerConnection),r.exports={RTCPeerConnection:v,getUserMedia:i,attachMediaStream:a,reattachMediaStream:s,webrtcDetectedBrowser:c,webrtcDetectedVersion:l,webrtcMinimumVersion:f,webrtcTesting:b,webrtcUtils:p}}else"function"==typeof e&&"function"==typeof t&&t([],function(){return{RTCPeerConnection:window.RTCPeerConnection,getUserMedia:i,attachMediaStream:a,reattachMediaStream:s,webrtcDetectedBrowser:c,webrtcDetectedVersion:l,webrtcMinimumVersion:f,webrtcTesting:b,webrtcUtils:p}})},{}],97:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(t,r,n,i,a,s){o(this,e),this._guid=t,this._type=r,this._objectName=n,this._description=i,this._language=a,this._sourcePackageURL=s,this._signature=null,this._sourcePackage=null}return n(e,[{key:"guid",get:function(){return this._guid},set:function(e){e&&(this._guid=e)}},{key:"type",get:function(){return this._type},set:function(e){e&&(this._type=e)}},{key:"objectName",get:function(){return this._objectName},set:function(e){e&&(this._objectName=e)}},{key:"description",get:function(){return this._description},set:function(e){e&&(this._description=e)}},{key:"language",get:function(){return this._language},set:function(e){e&&(this._language=e)}},{key:"signature",get:function(){return this._signature},set:function(e){e&&(this._signature=e)}},{key:"sourcePackage",get:function(){return this._sourcePackage},set:function(e){e&&(this._sourcePackage=e)}},{key:"sourcePackageURL",get:function(){return this._sourcePackageURL},set:function(e){e&&(this._sourcePackageURL=e)}}]),e}(),a={HYPERTY:"hyperty",PROTOSTUB:"protostub",HYPERTY_RUNTIME:"hyperty_runtime",HYPERTY_INTERCEPTOR:"hyperty_inspector",HYPERTY_DATA_OBJECT:"hyperty_data_object",POLICY_ENFORCER:"policy_enforcer",DATA_SCHEMA:"data_schema"};r.CatalogueObjectType=a;var s={JAVASCRIPT_ECMA6:"javascript_ecma6",JAVASCRIPT_ECMA5:"javascript_ecma5",JSON_SCHEMA_V4:"json_schema_v4",PYTHON:"python",TYPESCRIPT:"typescript"};r.DataObjectSourceLanguage=s,r["default"]=i},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12}],98:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("../reTHINKObject/RethinkObject"),c=s(u),l=e("./CatalogueDataObject"),f=s(l),d=e("./SourcePackage"),p=s(d),h=e("./HypertyDescriptor"),m=s(h),y=e("./ProtocolStubDescriptor"),b=s(y),g=e("./HypertyRuntimeDescriptor"),v=s(g),_=e("./PolicyEnforcerDescriptor"),w=s(_),k=e("./DataObjectSchema"),j=s(k),$=function(e){function t(e,r){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r)}return o(t,e),i(t,[{key:"createCatalogueDataObject",value:function(e,t,r,n,o,i){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof r||"undefined"==typeof n||"undefined"==typeof o||"undefined"==typeof i)throw new Error("Invalid parameters!");return new f["default"](e,t,r,n,o,i)}},{key:"createHypertyDescriptorObject",value:function(e,t,r,n,o,i,a){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof r||"undefined"==typeof n||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof a)throw new Error("Invalid parameters!");return new m["default"](e,l.CatalogueObjectType.HYPERTY,t,r,n,o,i,a)}},{key:"createProtoStubDescriptorObject",value:function(e,t,r,n,o,i,a,s){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof r||"undefined"==typeof n||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof a||"undefined"==typeof s)throw new Error("Invalid parameters!");return new b["default"](e,l.CatalogueObjectType.PROTOSTUB,t,r,n,o,i,a,s)}},{key:"createHypertyRuntimeDescriptorObject",value:function(e,t,r,n,o,i,a,s){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof r||"undefined"==typeof n||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof a||"undefined"==typeof s)throw new Error("Invalid parameters!");return new v["default"](e,l.CatalogueObjectType.HYPERTY_RUNTIME,t,r,n,o,i,a,s)}},{key:"createPolicyEnforcerDescriptorObject",value:function(e,t,r,n,o,i,a){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof r||"undefined"==typeof n||"undefined"==typeof o||"undefined"==typeof i||"undefined"==typeof a)throw new Error("Invalid parameters!");return new w["default"](e,l.CatalogueObjectType.POLICY_ENFORCER,t,r,n,o,i,a)}},{key:"createDataObjectSchema",value:function(e,t,r,n,o){if("undefined"==typeof e||"undefined"==typeof t||"undefined"==typeof r||"undefined"==typeof n||"undefined"==typeof o)throw new Error("Invalid parameters!");return new j["default"](e,l.CatalogueObjectType.DATA_SCHEMA,t,r,n,o)}},{key:"createSourcePackage",value:function(e,t){if("undefined"==typeof t||"undefined"==typeof e)throw new Error("Invalid parameters!");return new p["default"](e,t)}}]),t}(c["default"]);r["default"]=$,t.exports=r["default"]},{"../reTHINKObject/RethinkObject":110,"./CatalogueDataObject":97,"./DataObjectSchema":99,"./HypertyDescriptor":100,"./HypertyRuntimeDescriptor":101,"./PolicyEnforcerDescriptor":102,"./ProtocolStubDescriptor":103,"./SourcePackage":104,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":14,"babel-runtime/helpers/inherits":15,"babel-runtime/helpers/interop-require-default":16}],99:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/class-call-check")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=e("./CatalogueDataObject"),u=a(s),c=function(e){function t(e,r,o,a,s,u){i(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,a,s,u)}return o(t,e),t}(u["default"]),l=function(e){function t(e,r,o,a,s,u){i(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,a,s,u)}return o(t,e),t}(c);r.MessageDataObjectSchema=l;var f=function(e){function t(e,r,o,a,s,u,c){i(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,a,s,u),this._accessControlPolicy=c}return o(t,e),t}(c);r.HypertyDataObjectSchema=f;var d=function(e){function t(e,r,o,a,s,u,c){i(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,a,s,u,c)}return o(t,e),t}(f);r.CommunicationDataObjectSchema=d;var p=function(e){function t(e,r,o,a,s,u,c){i(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,a,s,u,c)}return o(t,e),t}(f);r.ConnectionDataObjectSchema=p;var h=function(e){function t(e,r,o,a,s,u,c){i(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,a,s,u,c)}return o(t,e),t}(f);r.IdentifyDataObjectSchema=h;var m=function(e){function t(e,r,o,a,s,u,c){i(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,a,s,u,c)}return o(t,e),t}(f);r.ContextDataObjectSchema=m,r["default"]=c},{"./CatalogueDataObject":97,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/get":14,"babel-runtime/helpers/inherits":15,"babel-runtime/helpers/interop-require-default":16}],100:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("./CatalogueDataObject"),c=s(u),l=function(e){function t(e,r,o,i,s,u,c,l){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,i,s,u),this._configuration={},this._constraints={},this._policies={},this._messageSchema=null,this._hypertyType=c,this._dataObjects=l}return o(t,e),i(t,[{key:"hypertyType",get:function(){return this._hypertyType},set:function(e){e&&(this._hypertyType=e)}},{key:"dataObjects",get:function(){return this._dataObjects},set:function(e){e&&(this._dataObjects=e)}},{key:"configuration",get:function(){return this._configuration},set:function(e){e&&(this._configuration=e)}},{key:"constraints",get:function(){return this._constraints},set:function(e){e&&(this._constraints=e)}},{key:"messageSchema",get:function(){return this._messageSchema},set:function(e){e&&(this._messageSchema=e)}},{key:"policies",get:function(){return this._policies},set:function(e){e&&(this._policies=e)}}]),t}(c["default"]),f={};r.RuntimeHypertyCapabilityType=f;var d={COMMUNICATOR:"communicator",IDENTITY:"identity",CONTEXT:"context"};r.HypertyType=d,r["default"]=l},{"./CatalogueDataObject":97,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":14,"babel-runtime/helpers/inherits":15,"babel-runtime/helpers/interop-require-default":16}],101:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("./CatalogueDataObject"),c=s(u),l=function(e){function t(e,r,o,i,s,u,c,l,f){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,i,s,u),this._runtimeType=c,l?this._hypertyCapabilities=l:this._hypertyCapabilities={},f?this._protocolCapabilities=f:this._protocolCapabilities={}}return o(t,e),i(t,[{key:"runtimeType",get:function(){return this._runtimeType},set:function(e){e&&(this._runtimeType=e)}},{key:"hypertyCapabilities",get:function(){return this._hypertyCapabilities},set:function(e){e&&(this._hypertyCapabilities=e)}},{key:"protocolCapabilities",get:function(){return this._hypertyCapabilities},set:function(e){e&&(this._protocolCapabilities=e)}}]),t}(c["default"]),f={BROWSER:"browser",STANDALONE:"standalone",SERVER:"server",GATEWAY:"gateway"};r.RuntimeType=f;var d={MIC:"mic",CAMERA:"camera",SENSOR:"sensor",WEBRTC:"webrtc",ORTC:"ortc"};r.RuntimeHypertyCapabilityType=d;var p={HTTP:"http",HTTPS:"https",WS:"ws",WSS:"wss",COAP:"coap",DATACHANEL:"datachannel"};r.RuntimeProtocolCapabilityType=p,r["default"]=l},{"./CatalogueDataObject":97,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":14,"babel-runtime/helpers/inherits":15,"babel-runtime/helpers/interop-require-default":16}],102:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("./CatalogueDataObject"),c=s(u),l=function(e){function t(e,r,o,i,s,u,c,l){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,i,s,u),this._configuration=c,this._policies=l}return o(t,e),i(t,[{key:"configuration",get:function(){return this._configuration},set:function(e){this._configuration=e}},{key:"policies",get:function(){return this._policies},set:function(e){this._policies=e}}]),t}(c["default"]);r["default"]=l,t.exports=r["default"]},{"./CatalogueDataObject":97,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":14,"babel-runtime/helpers/inherits":15,"babel-runtime/helpers/interop-require-default":16}],103:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("./CatalogueDataObject"),c=s(u),l=e("./HypertyRuntimeDescriptor"),f=(s(l),function(e){function t(e,r,o,i,s,u,c,l,f){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,i,s,u),this._messageSchemas=c,l?this._configuration=l:this._configuration={},f?this._constraints=f:this._constraints={}}return o(t,e),i(t,[{key:"messageSchemas",get:function(){return this._messageSchemas},set:function(e){e&&(this._messageSchemas=e)}},{key:"constraints",get:function(){return this._constraints},set:function(e){e&&(this._constraints=e)}},{key:"configuration",get:function(){return this._configuration},set:function(e){e&&(this._configuration=e)}}]),t}(c["default"]));r["default"]=f,t.exports=r["default"]},{"./CatalogueDataObject":97,"./HypertyRuntimeDescriptor":101,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":14,"babel-runtime/helpers/inherits":15,"babel-runtime/helpers/interop-require-default":16}],104:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(t,r){o(this,e),this._sourceCode=r,this._sourceCodeClassname=t,this._encoding=null,this._signature=null}return n(e,[{key:"sourceCode",get:function(){return this._sourceCode},set:function(e){e&&(this._sourceCode=e)}},{key:"sourceCodeClassname",get:function(){return this._sourceCodeClassname},set:function(e){e&&(this._sourceCodeClassname=e)}},{key:"encoding",get:function(){return this._encoding},set:function(e){e&&(this._encoding=e)}},{key:"signature",get:function(){return this._signature},set:function(e){e&&(this._signature=e)}}]),e}();r["default"]=i,t.exports=r["default"]},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12}],105:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/core-js/promise")["default"],u=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0}),e("webrtc-adapter-test");var c=e("../utils/EventEmitter"),l=u(c),f=function(e){function t(e){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e);var r=this;r.syncher=e,r.mode="offer",r.mediaConstraints={optional:[],mandatory:{offerToReceiveAudio:!0,offerToReceiveVideo:!0}};var o=new RTCPeerConnection;o.addEventListener("signalingstatechange",function(e){console.info("signalingstatechange",e.currentTarget.signalingState),"have-local-offer"===e.currentTarget.signalingState&&r.trigger("controller:state:change",r.mode),"have-remote-offer"===e.currentTarget.signalingState&&(r.mode="answer",r.trigger("controller:state:change",r.mode))}),o.addEventListener("iceconnectionstatechange",function(e){console.info("iceconnectionstatechange",e.currentTarget.iceConnectionState)}),o.addEventListener("icecandidate",function(e){if(e.candidate){var t=r._dataObjectReporter.data;t.IceCandidates||(t.IceCandidates=[]),t.IceCandidates.push({type:"candidate",candidate:e.candidate.candidate,sdpMid:e.candidate.sdpMid,sdpMLineIndex:e.candidate.sdpMLineIndex})}}),o.addEventListener("addstream",function(e){console.info("add stream from mode: ",r.mode),r.trigger("stream:added",URL.createObjectURL(e.stream),r.dataObjectReporter,r.dataObjectObserver)}),r.peerConnection=o}return o(t,e),i(t,[{key:"getUserMedia",value:function(e){var t=this;return new s(function(r,n){navigator.mediaDevices.getUserMedia(e).then(function(e){t.peerConnection.addStream(e),r(e)})["catch"](function(e){n(e)})})}},{key:"changePeerInformation",value:function(e){var t=this;t.processPeerInformation(e.data),e.onChange("*",function(e){console.debug("message:",e.data),t.processPeerInformation(e.data)})}},{key:"processPeerInformation",value:function(e){var t=this,r=e.ConnectionDescription,n=e.IceCandidates;("offer"===r.type||"answer"===r.type)&&t.peerConnection.setRemoteDescription(new RTCSessionDescription(r),t.remoteDescriptionSuccess,t.remoteDescriptionError),n&&n.forEach(function(e){"candidate"===e.type&&t.peerConnection.addIceCandidate(new RTCIceCandidate({candidate:e.candidate}),t.remoteDescriptionSuccess,t.remoteDescriptionError)})}},{key:"remoteDescriptionSuccess",value:function(){console.info("remote success")}},{key:"remoteDescriptionError",value:function(e){console.error("error: ",e)}},{key:"createOffer",value:function(){var e=this;e.peerConnection.createOffer(function(t){e.onLocalSessionCreated(t)},e.infoError,e.mediaConstraints)}},{key:"createAnswer",value:function(){var e=this;e.peerConnection.createAnswer(function(t){e.onLocalSessionCreated(t)},e.infoError)}},{key:"onLocalSessionCreated",value:function(e){var t=this;t.peerConnection.setLocalDescription(e,function(){var r=t._dataObjectReporter.data;r.ConnectionDescription={sdp:e.sdp,type:e.type}},t.infoError)}},{key:"infoError",value:function(e){console.error(e.toString(),e)}},{key:"accept",value:function(e){var t=this,r=t.syncher;e=e||{video:!0,audio:!0},console.log("Remote Peer Information: ",t._remotePeerInformation);var n=t._remotePeerInformation.from;return new s(function(o,i){try{console.info("------------------------ Syncher Create ---------------------- \n"),t.getUserMedia(e).then(function(e){return console.info("1. Return media constraints ",e),r.create({},[n],{})}).then(function(e){console.info("2. Return the Data Object Reporter ",e),t.dataObjectReporter=e,o("accepted")})["catch"](function(e){i(e)})}catch(a){i("error accepting connection")}})}},{key:"decline",value:function(){var e=this,t=e.syncher;return new s(function(e,r){try{console.log("syncher: ",t),e("Declined")}catch(n){r(n)}})}},{key:"disconnect",value:function(){var e=this;return new s(function(t,r){try{e.peerConnection.close(),t(!0)}catch(n){r("error disconnecting connection")}})}},{key:"addPeer",value:function(){}},{key:"removePeer",value:function(){}},{key:"disableMic",value:function(){var e=this;return new s(function(t,r){try{var n=e.peerConnection.getLocalStreams()[0],o=n.getAudioTracks()[0];o.enabled=o.enabled?!1:!0,t(o.enabled)}catch(i){r(i)}})}},{key:"disableCam",value:function(){var e=this;return new s(function(t,r){try{var n=e.peerConnection.getLocalStreams()[0],o=n.getVideoTracks()[0];o.enabled=o.enabled?!1:!0,t(o.enabled)}catch(i){r(i)}})}},{key:"mute",value:function(){var e=this;return new s(function(t,r){try{var n=e.peerConnection.getRemoteStreams()[0],o=n.getAudioTracks()[0];o.enabled=o.enabled?!1:!0,t(o.enabled)}catch(i){r(i)}})}},{key:"remotePeerInformation",set:function(e){var t=this;t._remotePeerInformation=e},get:function(){var e=this;return e._remotePeerInformation}},{key:"dataObjectReporter",set:function(e){if(!e)throw new Error("The Data Object Reporter is a needed parameter");var t=this;t._dataObjectReporter=e,console.log("Controller Mode: ",t.mode),"offer"===t.mode?t.createOffer():t.createAnswer(),e.onSubscription(function(e){e.accept()}),console.info("Set dataObject Reporter: ",t.dataObjectReporter)},get:function(){var e=this;return e._dataObjectReporter}},{key:"dataObjectObserver",set:function(e){if(!e)throw new Error("The Data Object Observer is a needed parameter");var t=this;t._dataObjectObserver=e,console.info("Set dataObject Observer: ",t._dataObjectObserver),t.changePeerInformation(e)},get:function(){var e=this;return e._dataObjectObserver}}]),t}(l["default"]);r["default"]=f,t.exports=r["default"]},{"../utils/EventEmitter":118,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":14,"babel-runtime/helpers/inherits":15,"babel-runtime/helpers/interop-require-default":16,"webrtc-adapter-test":96}],106:[function(e,t,r){function n(e,t,r){return{name:"HypertyConnector",instance:new y(e,t,r)}}var o=e("babel-runtime/helpers/get")["default"],i=e("babel-runtime/helpers/inherits")["default"],a=e("babel-runtime/helpers/create-class")["default"],s=e("babel-runtime/helpers/class-call-check")["default"],u=e("babel-runtime/core-js/promise")["default"],c=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var l=e("./ConnectionController"),f=c(l),d=e("../utils/EventEmitter"),p=c(d),h=e("../syncher/Syncher"),m=c(h),y=function(e){function t(e,r,n){if(s(this,t),!e)throw new Error("The hypertyURL is a needed parameter");
if(!r)throw new Error("The MiniBus is a needed parameter");if(!n)throw new Error("The configuration is a needed parameter");o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,n);var i=this;i._hypertyURL=e,i._bus=r,i._configuration=n,i._controllers={};var a=new m["default"](e,r,n);a.onNotification(function(e){i._onNotification(e)}),i._syncher=a}return i(t,e),a(t,[{key:"_onNotification",value:function(e){var t=this;console.info("------------ Acknowledges the Reporter ------------ \n"),e.ack(),console.info("------------------------ END ---------------------- \n"),console.log(t._controllers[e.from]),t._controllers[e.from]?t._autoSubscribe(e):t._autoAccept(e)}},{key:"_autoAccept",value:function(e){var t=this,r=t._syncher;console.info("---------------- Syncher Subscribe ---------------- \n"),console.info("Subscribe URL Object ",e,r),r.subscribe(e.url).then(function(n){console.info("1. Return Subscribe Data Object Observer",n);var o=new f["default"](r);o.remotePeerInformation=e,o.dataObjectObserver=n,t.trigger("have:notification",o,e),console.info("------------------------ END ---------------------- \n")})["catch"](function(e){console.error(e)})}},{key:"_autoSubscribe",value:function(e){var t=this,r=t._syncher;console.info("---------------- Syncher Subscribe ---------------- \n"),console.info("Subscribe URL Object ",e,r),r.subscribe(e.url).then(function(r){console.info("1. Return Subscribe Data Object Observer",r),t._controllers[e.from].dataObjectObserver=r})["catch"](function(e){console.error(e)})}},{key:"connect",value:function(e,t){var r=this,n=r._syncher;return t=t||{video:!0,audio:!0},new u(function(o,i){var a=void 0,s=void 0;console.info("------------------------ Syncher Create ---------------------- \n"),n.create({},[e],{}).then(function(e){return console.info("1. Return Create Data Object Reporter",e),s=e,a=new f["default"](n),a.getUserMedia(t)}).then(function(t){console.info("2. Return the media constraints from controller: ",t),a.dataObjectReporter=s,r._controllers[e]=a,o(a),console.info("--------------------------- END --------------------------- \n")})["catch"](function(e){console.error(e),i(e)})})}}]),t}(p["default"]);t.exports=r["default"]},{"../syncher/Syncher":117,"../utils/EventEmitter":118,"./ConnectionController":105,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":14,"babel-runtime/helpers/inherits":15,"babel-runtime/helpers/interop-require-default":16}],107:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(t,r,n,i,a){o(this,e),this._id=t,this._from=r,this._to=n,this._type=i,this._body=a}return n(e,[{key:"id",get:function(){return this._id},set:function(e){e&&(this._id=e)}},{key:"from",get:function(){return this._from},set:function(e){e&&(this._from=e)}},{key:"to",get:function(){return this._to},set:function(e){e&&(this._to=e)}},{key:"type",get:function(){return this._type},set:function(e){e&&(this._type=e)}},{key:"body",get:function(){return this._body},set:function(e){e&&(this._body=e)}}]),e}();r.Message=i;var a={CREATE:"create",READ:"read",UPDATE:"update",DELETE:"delete",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",RESPONSE:"response",FORWARD:"forward"};r.MessageType=a,r["default"]=i},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12}],108:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/helpers/get")["default"],a=e("babel-runtime/helpers/inherits")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(t,r,n,i,a){o(this,e),"undefined"!=typeof t&&(this._idToken=t),"undefined"!=typeof r&&(this._accessToken=r),"undefined"!=typeof n&&(this._resource=n),"undefined"!=typeof i&&(this._schema=i),"undefined"!=typeof a&&(this._assertedIdentity=a)}return n(e,[{key:"idToken",get:function(){return this._idToken},set:function(e){e&&(this._idToken=e)}},{key:"accessToken",get:function(){return this._accessToken},set:function(e){e&&(this._accessToken=e)}},{key:"resource",get:function(){return this._resource},set:function(e){e&&(this._resource=e)}},{key:"schema",get:function(){return this._schema},set:function(e){e&&(this._schema=e)}},{key:"assertedIdentity",get:function(){return this._assertedIdentity},set:function(e){e&&(this._assertedIdentity=e)}}]),e}(),u=function(e){function t(e,r,n,a,s,u,c){if(o(this,t),!e)throw new Error("The value parameter is null");i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n,a,s,u,c,u,c),this._value=e,r&&(this._policy=r)}return a(t,e),n(t,[{key:"value",get:function(){return this._value},set:function(e){e&&(this._value=e)}},{key:"policy",get:function(){return this._policy},set:function(e){e&&(this._policy=e)}}]),t}(s);r.CreateMessageBody=u;var c=function(e){function t(e,r,n,a,s,u,c,l){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,n,a,s),u&&(this._attribute=u),c&&(this._criteriaSyntax=c),l&&(this._criteria=l)}return a(t,e),t}(s);r.ReadMessageBody=c;var l=function(e){function t(e,r,n,a,s,u){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,n,a,s),u&&(this._attribute=u)}return a(t,e),t}(s);r.DeleteMessageBody=l;var f=function(e){function t(e,r,n,a,s,u,c){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,n,a,s),this._attribute=u,this._value=c}return a(t,e),t}(s);r.UpdateMessageBody=f;var d=function(e){function t(e,r,n,a,s,u){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,n,a,s),this._message=u}return a(t,e),t}(s);r.ForwardMessageBody=d;var p=function(e){function t(e,r,n,a,s){o(this,t),i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,n),a&&(this._code=a,this._description=m[a]),s&&(this._value=s)}return a(t,e),t}(s);r.ResponseMessageBody=p;var h={100:"100",101:"101",200:"200",201:"201",202:"202",203:"203",204:"204",205:"205",206:"206",300:"300",301:"301",302:"302",303:"303",304:"304",305:"305",307:"307",400:"400",401:"401",402:"402",403:"403",404:"404",405:"405",406:"406",407:"407",408:"408",409:"409",410:"410",411:"411",412:"412",413:"413",414:"414",415:"415",416:"416",417:"417",426:"426",500:"500",501:"501",502:"502",503:"503",504:"504",505:"505"};r.RESPONS_CODE=h;var m={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported"};r.REASON_PHRASE=m,r["default"]=s},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":14,"babel-runtime/helpers/inherits":15}],109:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/regenerator")["default"],u=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var c=e("../reTHINKObject/RethinkObject.js"),l=u(c),f=e("./Message.js"),d=u(f),p=e("./MessageBody.js"),h=function(e){function t(e,r){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r),this.myGenerator=(new m).idMaker()}return o(t,e),i(t,[{key:"validate",value:function(e){return n(Object.getPrototypeOf(t.prototype),"validate",this).call(this,e)}},{key:"createMessageRequest",value:function(e,t,r,n,o,i,a,s,u){if(!e||!t||!s)throw new Error("from, to, and value of object to be created MUST be specified");var c=this.myGenerator.next().value,l=new p.CreateMessageBody(s,u,r,n,o,i,a),h=new d["default"](c,e,t,f.MessageType.CREATE,l);return h}},{key:"createForwardMessageRequest",value:function(e,t,r,n,o,i,a,s){if(!t||!r||!e)throw new Error("from, to, and message to forward MUST be specified");var u=this.myGenerator.next().value,c=new p.ForwardMessageBody(n,o,i,a,s,e),l=new d["default"](u,t,r,f.MessageType.FORWARD,c);return l}},{key:"createDeleteMessageRequest",value:function(e,t,r,n,o,i,a,s){if(!e||!t)throw new Error("from and to parameters MUST be specified");var u=this.myGenerator.next().value,c=new p.DeleteMessageBody(r,n,o,i,a,s),l=new d["default"](u,e,t,f.MessageType.DELETE,c);return l}},{key:"createUpdateMessageRequest",value:function(e,t,r,n,o,i,a,s,u){if(!e||!t||!u)throw new Error("from, and to and value MUST be specified");var c=this.myGenerator.next().value,l=new p.UpdateMessageBody(r,n,o,i,a,s,u),h=new d["default"](c,e,t,f.MessageType.UPDATE,l);return h}},{key:"createReadMessageRequest",value:function(e,t,r,n,o,i,a,s,u,c){if(!e||!t)throw new Error("from, and to MUST be specified");var l=this.myGenerator.next().value,h=new p.ReadMessageBody(r,n,o,i,a,s,u,c),m=new d["default"](l,e,t,f.MessageType.READ,h);return m}},{key:"createMessageResponse",value:function(e,t,r,n,o,i,a,s,u){if(!e||!t||!s)throw new Error("from, to, and response Code MUST be specified");var c=this.myGenerator.next().value,l=new p.ResponseMessageBody(r,n,o,s,u);return new d["default"](c,e,t,f.MessageType.RESPONSE,l)}},{key:"generateDeleteMessageBody",value:function(e,t){if(!e||!t)throw new Error("message and attribute MUST be specified");var r=e.body,n=r.idToken,o=r.accessToken,i=r.resource,a=r.schema,s=r.assertedIdentity,u=new p.DeleteMessageBody(n,o,i,t,a,s),c=this.myGenerator.next().value;return new d["default"](c,e.from,e.to,f.MessageType.DELETE,u)}},{key:"generateUpdateMessageBody",value:function(e,t,r){if(!e||!t||!r)throw new Error("message attribute and value MUST be specified");var n=e.body,o=n.idToken,i=n.accessToken,a=n.resource,s=n.schema,u=n.assertedIdentity,c=new p.UpdateMessageBody(o,i,a,s,u,t,r),l=this.myGenerator.next().value;return new d["default"](l,e.from,e.to,f.MessageType.UPDATE,c)}},{key:"generateReadMessageBody",value:function(e,t,r,n){if(!e)throw new Error("message MUST be specified");var o=e.body,i=o.idToken,a=o.accessToken,s=o.resource,u=o.schema,c=o.assertedIdentity,l=new p.ReadMessageBody(i,a,s,u,c,t,n,r),h=this.myGenerator.next().value;return new d["default"](h,e.from,e.to,f.MessageType.READ,l)}},{key:"generateMessageResponse",value:function(e,t,r){if(!e||!t)throw new Error("message and response code MUST be specified");var n=e.body,o=n.idToken,i=n.accessToken,a=n.resource,s=new p.ResponseMessageBody(o,i,a,t,r),u=this.myGenerator.next().value;return new d["default"](u,e.to,e.from,f.MessageType.RESPONSE,s)}},{key:"transId",get:function(){return this._transId}}]),t}(l["default"]),m=function(){function e(){a(this,e)}return i(e,[{key:"idMaker",value:s.mark(function t(){var e;return s.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=1;case 1:if(!(1e4>e)){t.next=6;break}return t.next=4,e++;case 4:t.next=1;break;case 6:case"end":return t.stop()}},t,this)})}]),e}();r.IdGenerator=m,r["default"]=h},{"../reTHINKObject/RethinkObject.js":110,"./Message.js":107,"./MessageBody.js":108,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":14,"babel-runtime/helpers/inherits":15,"babel-runtime/helpers/interop-require-default":16,"babel-runtime/regenerator":92}],110:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("tv4"),s=i(a),u=function(){function e(t,r){o(this,e),this.validation=t,this.schema=r}return n(e,[{key:"validate",value:function(e){return this.schema?s["default"].validate(e,this.schema):!1}}]),e}();r.RethinkObject=u,r["default"]=u},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/interop-require-default":16,tv4:95}],111:[function(e,t,r){var n=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var o=e("./catalogue-factory/CatalogueDataObjectFactory"),i=n(o),a=e("./message-factory/MessageFactory"),s=n(a),u=e("./syncher/Syncher"),c=n(u),l=e("./syncher/DataObjectReporter"),f=n(l),d=e("./syncher/DataObjectObserver"),p=n(d),h=e("./hyperty/HypertyConnector"),m=n(h),y=e("./catalogue-factory/HypertyDescriptor"),b=n(y),g=e("./catalogue-factory/ProtocolStubDescriptor"),v=n(g),_=e("./catalogue-factory/SourcePackage"),w=n(_);r.CatalogueFactory=i["default"],r.MessageFactory=s["default"],r.Syncher=c["default"],r.DataObjectReporter=f["default"],r.DataObjectObserver=p["default"],r.HypertyConnector=m["default"],r.HypertyDescriptor=b["default"],r.ProtocolStubDescriptor=v["default"],r.SourcePackage=w["default"]},{"./catalogue-factory/CatalogueDataObjectFactory":98,"./catalogue-factory/HypertyDescriptor":100,"./catalogue-factory/ProtocolStubDescriptor":103,"./catalogue-factory/SourcePackage":104,"./hyperty/HypertyConnector":106,"./message-factory/MessageFactory":109,"./syncher/DataObjectObserver":114,"./syncher/DataObjectReporter":115,"./syncher/Syncher":117,"babel-runtime/helpers/interop-require-default":16}],112:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/core-js/promise")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=e("./SyncObject"),u=a(s),c=e("./DataObjectChild"),l=a(c),f=function(){function e(t,r,n,i,a,s){var c=this;o(this,e);var l=this;l._version=0,l._owner=t,l._url=r,l._schema=n,l._bus=i,l._status=a,l._syncObj=new u["default"](s),l._childId=0,l._children={};var f=["children1","children2"],d=r+"/children/";f.forEach(function(e){var t=d+e;i.addListener(t,function(e){if(e.from!==c._owner)switch(e.type){case"create":l._onChildrenCreate(e);break;case"delete":console.log(e);break;default:l._changeChildren(e)}})})}return n(e,[{key:"pause",value:function(){throw"Not implemented"}},{key:"resume",value:function(){throw"Not implemented"}},{key:"stop",value:function(){throw"Not implemented"}},{key:"addChildren",value:function(e,t){var r=this;r._childId++;var n=r._owner+"#"+r._childId,o=r._url+"/children/"+e,a={type:"create",from:r._owner,to:o,body:{childId:n,value:t}};return new i(function(e){var i=r._bus.postMessage(a);console.log("create-reporter-child( "+r._owner+" ): ",a);var s=new l["default"](r._owner,n,i,r._bus,t);s.onChange(function(e){r._onChange(e,{path:o,childId:n})}),r._children[n]=s,e(s)})}},{key:"onAddChildren",value:function(e){this._onAddChildrenHandler=e}},{key:"_onChildrenCreate",value:function(e){var t=this,r=e.body.childId;console.log("create-observer-child( "+t._owner+" ): ",e);var n=new l["default"](e.from,r,0,t._bus,e.body.value);t._children[r]=n,setTimeout(function(){t._bus.postMessage({id:e.id,type:"response",from:e.to,to:e.from,body:{code:200,source:t._owner}})});var o={type:e.type,from:e.from,url:e.to,value:e.body.value,childId:r};t._onAddChildrenHandler&&t._onAddChildrenHandler(o)}},{key:"_onChange",value:function(e,t){var r=this;if(r._version++,"on"===r._status){var n={type:e.cType,from:r._owner,to:r._url,body:{version:r._version,oType:e.oType,attrib:e.field,value:e.data}};t&&(n.to=t.path,n.body.childId=t.childId),r._bus.postMessage(n)}}},{key:"_changeObject",value:function(e,t){var r=this;if(r._version+1===t.body.version){r._version++;var n=t.body.attrib,o=t.body.value,i=e.findBefore(n);if(t.type===s.ChangeType.UPDATE)i.obj[i.last]=o;else if(t.type===s.ChangeType.ADD)if(t.body.oType===s.ObjectType.OBJECT)i.obj[i.last]=o;else{var a=i.obj,u=i.last;Array.prototype.splice.apply(a,[u,0].concat(o))}else if(t.body.oType===s.ObjectType.OBJECT)delete i.obj[i.last];else{var a=i.obj,u=i.last;a.splice(u,o)}}else console.log("unsynchronized versions")}},{key:"_changeChildren",value:function(e){var t=this;console.log("Change children: ",t._owner,e);var r=e.body.childId,n=t._children[r];n?t._changeObject(n,e):console.log("No children found for: ",r)}},{key:"version",get:function(){return this._version}},{key:"url",get:function(){return this._url}},{key:"schema",get:function(){return this._schema}},{key:"status",get:function(){return this._status}},{key:"data",get:function(){return this._syncObj.data}},{key:"children",get:function(){return this._children}}]),e}();r["default"]=f,t.exports=r["default"]},{"./DataObjectChild":113,"./SyncObject":116,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/interop-require-default":16}],113:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("./SyncObject"),s=i(a),u=function(){function e(t,r,n,i,a){o(this,e);var u=this;u._owner=t,u._childId=r,u._bus=i,u._syncObj=new s["default"](a),i.addListener(t,function(e){"response"===e.type&&e.id===n&&(console.log("DataObjectChild.onResponse:",e),u._onResponse(e))})}return n(e,[{key:"onChange",value:function(e){this._syncObj.observe(function(t){e(t)})}},{key:"onResponse",value:function(e){this._onResponseHandler=e}},{key:"_onResponse",value:function(e){var t=this,r={type:e.type,url:e.body.source,code:e.body.code};t._onResponseHandler&&t._onResponseHandler(r)}},{key:"data",get:function(){return this._syncObj.data}}]),e}();r["default"]=u,t.exports=r["default"]},{"./SyncObject":116,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/interop-require-default":16}],114:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/core-js/object/keys")["default"],u=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var c=e("./DataObject"),l=u(c),f={ANY:"any",START:"start",EXACT:"exact"},d=function(e){function t(e,r,o,i,s,u){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,i,s,u);var c=this;i.addListener(r,function(e){console.log("DataObjectObserver-"+r+"-RCV: ",e),c._changeObject(c._syncObj,e)}),c._syncObj.observe(function(e){c._onFilter(e)}),c._filters={}}return o(t,e),i(t,[{key:"onChange",value:function(e,t){var r=e,n={type:f.EXACT,callback:t},o=e.indexOf("*");o===e.length-1&&(0===o?n.type=f.ANY:(n.type=f.START,r=e.substr(0,e.length-1))),this._filters[r]=n}},{key:"_onFilter",value:function(e){var t=this;s(t._filters).forEach(function(r){var n=t._filters[r];n.type===f.ANY?n.callback(e):n.type===f.START?0===e.field.indexOf(r)&&n.callback(e):n.type===f.EXACT&&e.field===r&&n.callback(e)})}}]),t}(l["default"]);r["default"]=d,t.exports=r["default"]},{"./DataObject":112,"babel-runtime/core-js/object/keys":5,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":14,"babel-runtime/helpers/inherits":15,"babel-runtime/helpers/interop-require-default":16}],115:[function(e,t,r){var n=e("babel-runtime/helpers/get")["default"],o=e("babel-runtime/helpers/inherits")["default"],i=e("babel-runtime/helpers/create-class")["default"],a=e("babel-runtime/helpers/class-call-check")["default"],s=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var u=e("./DataObject"),c=s(u),l=e("../utils/utils.js"),f=function(e){function t(e,r,o,i,s,u){a(this,t),n(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,r,o,i,s,u);var c=this;i.addListener(e,function(e){"response"===e.type&&e.body.source===r&&c._onResponse(e)}),c._syncObj.observe(function(e){c._onChange(e)}),c._subscriptions={}}return o(t,e),i(t,[{key:"onSubscription",value:function(e){this._onSubscriptionHandler=e}},{key:"onResponse",value:function(e){this._onResponseHandler=e}},{key:"_onForward",value:function(e){var t=this;switch(console.log("DataObjectReporter-RCV: ",e),e.body.type){case"subscribe":t._onSubscribe(e);break;case"unsubscribe":t._onUnSubscribe(e)}}},{key:"_onSubscribe",value:function(e){var t=this,r=e.body.from,n={type:e.body.type,url:r,accept:function(){t._subscriptions[r]={status:"on"},t._bus.postMessage({id:e.id,type:"response",from:e.to,to:e.from,body:{code:200,schema:t._schema,version:t._version,value:(0,l.deepClone)(t.data)}})},reject:function(r){t._bus.postMessage({id:e.id,type:"response",from:e.to,to:e.from,body:{code:403,desc:r}})}};t._onSubscriptionHandler&&t._onSubscriptionHandler(n)}},{key:"_onUnSubscribe",value:function(e){var t=this,r=e.body.from,n=t._subscriptions[r];delete t._subscriptions[r];var o={type:e.body.type,url:r,object:n};t._onSubscriptionHandler&&t._onSubscriptionHandler(o)}},{key:"_onResponse",value:function(e){var t=this,r={type:e.type,url:e.from,code:e.body.code};t._onResponseHandler&&t._onResponseHandler(r)}},{key:"subscriptions",get:function(){return this._subscriptions}}]),t}(c["default"]);r["default"]=f,t.exports=r["default"]},{"../utils/utils.js":119,"./DataObject":112,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/get":14,"babel-runtime/helpers/inherits":15,"babel-runtime/helpers/interop-require-default":16}],116:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/core-js/object/keys")["default"];Object.defineProperty(r,"__esModule",{value:!0});var a=e("../utils/utils.js"),s=function(){function e(t){o(this,e);var r=this;r._observers=[],r._filters={},t?r._data=t:r._data={},r._internalObserve(new u,r._data)}return n(e,[{key:"observe",value:function(e){this._observers.push(e)}},{key:"find",value:function(e){var t=e.split(".");return this._findWithSplit(t)}},{key:"findBefore",value:function(e){var t={},r=e.split(".");return t.last=r.pop(),t.obj=this._findWithSplit(r),t}},{key:"_findWithSplit",value:function(e){var t=this._data;return e.forEach(function(e){t=t[e]}),t}},{key:"_fireEvent",value:function(e){this._observers.forEach(function(t){t(e)})}},{key:"_isObservable",value:function(e){return e.constructor===Object||e.constructor===Array?!0:!1}},{key:"_internalObserve",value:function(e,t){var r=this;if(r._isObservable(t)){var n=function(t){r._onChanges(e,t)};if(t.constructor===Object){Object.observe(t,n);for(var o in t)r._isObservable(t[o])&&r._internalObserve(e["new"](o),t[o])}else if(t.constructor===Array){Array.observe(t,n);for(var o in t)if(r._isObservable(t[o])){var i=e["new"](new c(t[o],o));r._internalObserve(i,t[o])}}}}},{key:"_onChanges",value:function(e,t){var r=this;for(var n in t){var o=t[n].object,i=void 0;if(o.constructor===Object&&(i=f.OBJECT),o.constructor===Array&&(i=f.ARRAY),"splice"===t[n].type)!function(){var s=t[n].index,u=e["new"](""+s),f=u.toString(),d=t[n].removed.length;if(0!==d){var p=t[n].removed;p.forEach(function(t,n){r._isObservable(t)&&e.removeIndex(s+n)}),r._fireEvent({cType:l.REMOVE,oType:i,field:f,data:d})}var h=t[n].addedCount;if(0!==h){var m=o.slice(s,s+h);m.forEach(function(t,n){if(r._isObservable(t)){var o=e["new"](new c(t,s+n));r._internalObserve(o,t)}}),r._fireEvent({cType:l.ADD,oType:i,field:f,data:(0,a.deepClone)(m)})}s!==o.length-1&&e.reIndexFrom(o)}();else{var s=e["new"](t[n].name),u=s.toString();if(-1!==u.indexOf("Symbol"))continue;var d=o[t[n].name];"update"===t[n].type&&this._fireEvent({cType:l.UPDATE,oType:i,field:u,data:(0,a.deepClone)(d)}),"add"===t[n].type&&(this._internalObserve(s,d),this._fireEvent({cType:l.ADD,oType:i,field:u,data:(0,a.deepClone)(d)})),"delete"===t[n].type&&this._fireEvent({cType:l.REMOVE,oType:i,field:u})}}}},{key:"data",get:function(){return this._data}}]),e}(),u=function(){function e(){o(this,e),this._path=[],this._observables={}}return n(e,[{key:"removeIndex",value:function(e){delete this._observables[e]}},{key:"reIndexFrom",value:function(e){var t=this;i(this._observables).forEach(function(r){var n=t._observables[r],o=e.indexOf(n.obj);n.idx!=o&&(n.idx=o,delete t._observables[r],t._observables[o]=n)})}},{key:"new",value:function(e){e.constructor==c&&(this._observables[e.idx]=e);var t=this.clone();return t._path.push(e),t}},{key:"clone",value:function(){var t=new e;return this._path.forEach(function(e){t._path.push(e)}),t}},{key:"toString",value:function(){var e="";return this._path.forEach(function(t,r){0===r?e=t.toString():e+="."+t.toString()}),e}}]),e}(),c=function(){function e(t,r){o(this,e),this.obj=t,this.idx=r}return n(e,[{key:"toString",value:function(){return this.idx.toString()}}]),e}(),l={UPDATE:"update",ADD:"add",REMOVE:"remove"};r.ChangeType=l;var f={OBJECT:"object",ARRAY:"array"};r.ObjectType=f,r["default"]=s},{"../utils/utils.js":119,"babel-runtime/core-js/object/keys":5,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12}],117:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"],i=e("babel-runtime/core-js/promise")["default"],a=e("babel-runtime/helpers/interop-require-default")["default"];Object.defineProperty(r,"__esModule",{value:!0});var s=e("./DataObjectReporter"),u=a(s),c=e("./DataObjectObserver"),l=a(c),f=function(){function e(t,r,n){o(this,e);var i=this;i._owner=t,i._bus=r,i._subURL=n.runtimeURL+"/sm",i._reporters={},i._observers={},r.addListener(t,function(e){switch(console.log("Syncher-RCV: ",e),e.type){case"forward":i._onForward(e);break;case"create":i._onRemoteCreate(e)}})}return n(e,[{key:"create",value:function(e,t,r){var n=this,o={type:"create",from:n._owner,to:n._subURL,body:{schema:e,value:r,authorise:t}};return new i(function(t,i){n._bus.postMessage(o,function(o){if(console.log("create-response: ",o),200===o.body.code){var a=o.body.resource,s=new u["default"](n._owner,a,e,n._bus,"on",r);n._reporters[a]=s,t(s)}else i(o.body.desc)})})}},{key:"subscribe",value:function(e){var t=this,r={type:"subscribe",from:t._owner,to:t._subURL,body:{resource:e}};return new i(function(n,o){t._bus.postMessage(r,function(r){if(console.log("subscribe-response: ",r),200===r.body.code){var i=new l["default"](t._owner,e,r.body.schema,t._bus,"on",r.body.value);t._observers[e]=i,n(i)}else o(r.body.desc)})})}},{key:"onNotification",value:function(e){this._onNotificationHandler=e}},{key:"_onForward",value:function(e){var t=this,r=t._reporters[e.body.to];r._onForward(e)}},{key:"_onRemoteCreate",value:function(e){var t=this,r={type:e.type,from:e.from,url:e.body.resource,schema:e.body.schema,value:e.body.value,ack:function(r){var n=200;r&&(n=r),t._bus.postMessage({id:e.id,type:"response",from:e.to,to:e.from,body:{code:n,source:e.body.resource}})}};t._onNotificationHandler&&t._onNotificationHandler(r)}},{key:"owner",get:function(){return this._owner}},{key:"reporters",get:function(){return this._reporters}},{key:"observers",get:function(){return this._observers}}]),e}();r["default"]=f,t.exports=r["default"]},{"./DataObjectObserver":114,"./DataObjectReporter":115,"babel-runtime/core-js/promise":7,"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12,"babel-runtime/helpers/interop-require-default":16}],118:[function(e,t,r){var n=e("babel-runtime/helpers/create-class")["default"],o=e("babel-runtime/helpers/class-call-check")["default"];Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(){o(this,e)}return n(e,[{key:"addEventListener",value:function(e,t){var r=this;r[e]=t}},{key:"trigger",value:function(e,t){var r=this;r[e]&&r[e](t)}}]),e}();r["default"]=i,t.exports=r["default"]},{"babel-runtime/helpers/class-call-check":10,"babel-runtime/helpers/create-class":12}],119:[function(e,t,r){function n(e){var t=/([a-zA-Z-]*):\/\/(?:\.)?([-a-zA-Z0-9@:%._\+~#=]{2,256})([-a-zA-Z0-9@:%._\+~#=\/]*)/gi,r="$1,$2,$3",n=e.replace(t,r).split(","),o={type:n[0],domain:n[1],identity:n[2]};return o}function o(e){return JSON.parse(JSON.stringify(e))}Object.defineProperty(r,"__esModule",{value:!0}),r.divideURL=n,r.deepClone=o},{}]},{},[111])(111)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/core-js/array/from":125,"babel-runtime/core-js/object/create":126,"babel-runtime/core-js/object/define-property":127,"babel-runtime/core-js/object/get-own-property-names":128,"babel-runtime/core-js/object/is":130,"babel-runtime/core-js/object/is-frozen":129,"babel-runtime/core-js/object/keys":131,"babel-runtime/core-js/object/set-prototype-of":132,"babel-runtime/core-js/promise":133}],125:[function(e,t,r){t.exports={"default":e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":134}],126:[function(e,t,r){arguments[4][3][0].apply(r,arguments)},{"core-js/library/fn/object/create":135,dup:3}],127:[function(e,t,r){arguments[4][4][0].apply(r,arguments)},{"core-js/library/fn/object/define-property":136,dup:4}],128:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/get-own-property-names"),__esModule:!0}},{"core-js/library/fn/object/get-own-property-names":137}],129:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/is-frozen"),__esModule:!0}},{"core-js/library/fn/object/is-frozen":138}],130:[function(e,t,r){t.exports={"default":e("core-js/library/fn/object/is"),__esModule:!0}},{"core-js/library/fn/object/is":139}],131:[function(e,t,r){arguments[4][7][0].apply(r,arguments)},{"core-js/library/fn/object/keys":140,dup:7}],132:[function(e,t,r){arguments[4][8][0].apply(r,arguments)},{"core-js/library/fn/object/set-prototype-of":141,dup:8}],133:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{"core-js/library/fn/promise":142,dup:9}],134:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/$.core").Array.from},{"../../modules/$.core":148,"../../modules/es6.array.from":194,"../../modules/es6.string.iterator":203}],135:[function(e,t,r){arguments[4][23][0].apply(r,arguments)},{"../../modules/$":171,dup:23}],136:[function(e,t,r){arguments[4][24][0].apply(r,arguments)},{"../../modules/$":171,dup:24}],137:[function(e,t,r){var n=e("../../modules/$");e("../../modules/es6.object.get-own-property-names"),t.exports=function(e){return n.getNames(e)}},{"../../modules/$":171,"../../modules/es6.object.get-own-property-names":196}],138:[function(e,t,r){e("../../modules/es6.object.is-frozen"),t.exports=e("../../modules/$.core").Object.isFrozen},{"../../modules/$.core":148,"../../modules/es6.object.is-frozen":197}],139:[function(e,t,r){e("../../modules/es6.object.is"),t.exports=e("../../modules/$.core").Object.is},{"../../modules/$.core":148,"../../modules/es6.object.is":198}],140:[function(e,t,r){arguments[4][27][0].apply(r,arguments)},{"../../modules/$.core":148,"../../modules/es6.object.keys":199,dup:27}],141:[function(e,t,r){arguments[4][28][0].apply(r,arguments)},{"../../modules/$.core":148,"../../modules/es6.object.set-prototype-of":200,dup:28}],142:[function(e,t,r){
arguments[4][29][0].apply(r,arguments)},{"../modules/$.core":148,"../modules/es6.object.to-string":201,"../modules/es6.promise":202,"../modules/es6.string.iterator":203,"../modules/web.dom.iterable":204,dup:29}],143:[function(e,t,r){arguments[4][32][0].apply(r,arguments)},{dup:32}],144:[function(e,t,r){arguments[4][33][0].apply(r,arguments)},{dup:33}],145:[function(e,t,r){arguments[4][34][0].apply(r,arguments)},{"./$.is-object":164,dup:34}],146:[function(e,t,r){arguments[4][35][0].apply(r,arguments)},{"./$.cof":147,"./$.wks":192,dup:35}],147:[function(e,t,r){arguments[4][36][0].apply(r,arguments)},{dup:36}],148:[function(e,t,r){arguments[4][40][0].apply(r,arguments)},{dup:40}],149:[function(e,t,r){arguments[4][41][0].apply(r,arguments)},{"./$.a-function":143,dup:41}],150:[function(e,t,r){arguments[4][42][0].apply(r,arguments)},{dup:42}],151:[function(e,t,r){arguments[4][43][0].apply(r,arguments)},{"./$.fails":154,dup:43}],152:[function(e,t,r){arguments[4][44][0].apply(r,arguments)},{"./$.global":157,"./$.is-object":164,dup:44}],153:[function(e,t,r){arguments[4][46][0].apply(r,arguments)},{"./$.core":148,"./$.ctx":149,"./$.global":157,dup:46}],154:[function(e,t,r){arguments[4][47][0].apply(r,arguments)},{dup:47}],155:[function(e,t,r){arguments[4][48][0].apply(r,arguments)},{"./$.an-object":145,"./$.ctx":149,"./$.is-array-iter":163,"./$.iter-call":165,"./$.to-length":189,"./core.get-iterator-method":193,dup:48}],156:[function(e,t,r){arguments[4][49][0].apply(r,arguments)},{"./$":171,"./$.to-iobject":188,dup:49}],157:[function(e,t,r){arguments[4][50][0].apply(r,arguments)},{dup:50}],158:[function(e,t,r){arguments[4][51][0].apply(r,arguments)},{dup:51}],159:[function(e,t,r){arguments[4][52][0].apply(r,arguments)},{"./$":171,"./$.descriptors":151,"./$.property-desc":175,dup:52}],160:[function(e,t,r){arguments[4][53][0].apply(r,arguments)},{"./$.global":157,dup:53}],161:[function(e,t,r){arguments[4][54][0].apply(r,arguments)},{dup:54}],162:[function(e,t,r){arguments[4][55][0].apply(r,arguments)},{"./$.cof":147,dup:55}],163:[function(e,t,r){arguments[4][56][0].apply(r,arguments)},{"./$.iterators":170,"./$.wks":192,dup:56}],164:[function(e,t,r){arguments[4][58][0].apply(r,arguments)},{dup:58}],165:[function(e,t,r){arguments[4][59][0].apply(r,arguments)},{"./$.an-object":145,dup:59}],166:[function(e,t,r){arguments[4][60][0].apply(r,arguments)},{"./$":171,"./$.hide":159,"./$.property-desc":175,"./$.set-to-string-tag":181,"./$.wks":192,dup:60}],167:[function(e,t,r){arguments[4][61][0].apply(r,arguments)},{"./$":171,"./$.export":153,"./$.has":158,"./$.hide":159,"./$.iter-create":166,"./$.iterators":170,"./$.library":172,"./$.redefine":177,"./$.set-to-string-tag":181,"./$.wks":192,dup:61}],168:[function(e,t,r){arguments[4][62][0].apply(r,arguments)},{"./$.wks":192,dup:62}],169:[function(e,t,r){arguments[4][63][0].apply(r,arguments)},{dup:63}],170:[function(e,t,r){arguments[4][64][0].apply(r,arguments)},{dup:64}],171:[function(e,t,r){arguments[4][65][0].apply(r,arguments)},{dup:65}],172:[function(e,t,r){arguments[4][67][0].apply(r,arguments)},{dup:67}],173:[function(e,t,r){arguments[4][68][0].apply(r,arguments)},{"./$.cof":147,"./$.global":157,"./$.task":186,dup:68}],174:[function(e,t,r){arguments[4][70][0].apply(r,arguments)},{"./$.core":148,"./$.export":153,"./$.fails":154,dup:70}],175:[function(e,t,r){arguments[4][71][0].apply(r,arguments)},{dup:71}],176:[function(e,t,r){arguments[4][72][0].apply(r,arguments)},{"./$.redefine":177,dup:72}],177:[function(e,t,r){arguments[4][73][0].apply(r,arguments)},{"./$.hide":159,dup:73}],178:[function(e,t,r){arguments[4][74][0].apply(r,arguments)},{dup:74}],179:[function(e,t,r){arguments[4][75][0].apply(r,arguments)},{"./$":171,"./$.an-object":145,"./$.ctx":149,"./$.is-object":164,dup:75}],180:[function(e,t,r){arguments[4][76][0].apply(r,arguments)},{"./$":171,"./$.core":148,"./$.descriptors":151,"./$.wks":192,dup:76}],181:[function(e,t,r){arguments[4][77][0].apply(r,arguments)},{"./$":171,"./$.has":158,"./$.wks":192,dup:77}],182:[function(e,t,r){arguments[4][78][0].apply(r,arguments)},{"./$.global":157,dup:78}],183:[function(e,t,r){arguments[4][79][0].apply(r,arguments)},{"./$.a-function":143,"./$.an-object":145,"./$.wks":192,dup:79}],184:[function(e,t,r){arguments[4][80][0].apply(r,arguments)},{dup:80}],185:[function(e,t,r){arguments[4][81][0].apply(r,arguments)},{"./$.defined":150,"./$.to-integer":187,dup:81}],186:[function(e,t,r){arguments[4][82][0].apply(r,arguments)},{"./$.cof":147,"./$.ctx":149,"./$.dom-create":152,"./$.global":157,"./$.html":160,"./$.invoke":161,dup:82}],187:[function(e,t,r){arguments[4][83][0].apply(r,arguments)},{dup:83}],188:[function(e,t,r){arguments[4][84][0].apply(r,arguments)},{"./$.defined":150,"./$.iobject":162,dup:84}],189:[function(e,t,r){arguments[4][85][0].apply(r,arguments)},{"./$.to-integer":187,dup:85}],190:[function(e,t,r){arguments[4][86][0].apply(r,arguments)},{"./$.defined":150,dup:86}],191:[function(e,t,r){arguments[4][87][0].apply(r,arguments)},{dup:87}],192:[function(e,t,r){arguments[4][88][0].apply(r,arguments)},{"./$.global":157,"./$.shared":182,"./$.uid":191,dup:88}],193:[function(e,t,r){arguments[4][89][0].apply(r,arguments)},{"./$.classof":146,"./$.core":148,"./$.iterators":170,"./$.wks":192,dup:89}],194:[function(e,t,r){"use strict";var n=e("./$.ctx"),o=e("./$.export"),i=e("./$.to-object"),a=e("./$.iter-call"),s=e("./$.is-array-iter"),u=e("./$.to-length"),c=e("./core.get-iterator-method");o(o.S+o.F*!e("./$.iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,l,f=i(e),d="function"==typeof this?this:Array,p=arguments,h=p.length,m=h>1?p[1]:void 0,y=void 0!==m,b=0,g=c(f);if(y&&(m=n(m,h>2?p[2]:void 0,2)),void 0==g||d==Array&&s(g))for(t=u(f.length),r=new d(t);t>b;b++)r[b]=y?m(f[b],b):f[b];else for(l=g.call(f),r=new d;!(o=l.next()).done;b++)r[b]=y?a(l,m,[o.value,b],!0):o.value;return r.length=b,r}})},{"./$.ctx":149,"./$.export":153,"./$.is-array-iter":163,"./$.iter-call":165,"./$.iter-detect":168,"./$.to-length":189,"./$.to-object":190,"./core.get-iterator-method":193}],195:[function(e,t,r){arguments[4][90][0].apply(r,arguments)},{"./$.add-to-unscopables":144,"./$.iter-define":167,"./$.iter-step":169,"./$.iterators":170,"./$.to-iobject":188,dup:90}],196:[function(e,t,r){e("./$.object-sap")("getOwnPropertyNames",function(){return e("./$.get-names").get})},{"./$.get-names":156,"./$.object-sap":174}],197:[function(e,t,r){var n=e("./$.is-object");e("./$.object-sap")("isFrozen",function(e){return function(t){return n(t)?e?e(t):!1:!0}})},{"./$.is-object":164,"./$.object-sap":174}],198:[function(e,t,r){var n=e("./$.export");n(n.S,"Object",{is:e("./$.same-value")})},{"./$.export":153,"./$.same-value":178}],199:[function(e,t,r){arguments[4][95][0].apply(r,arguments)},{"./$.object-sap":174,"./$.to-object":190,dup:95}],200:[function(e,t,r){arguments[4][96][0].apply(r,arguments)},{"./$.export":153,"./$.set-proto":179,dup:96}],201:[function(e,t,r){arguments[4][97][0].apply(r,arguments)},{dup:97}],202:[function(e,t,r){arguments[4][98][0].apply(r,arguments)},{"./$":171,"./$.a-function":143,"./$.an-object":145,"./$.classof":146,"./$.core":148,"./$.ctx":149,"./$.descriptors":151,"./$.export":153,"./$.for-of":155,"./$.global":157,"./$.is-object":164,"./$.iter-detect":168,"./$.library":172,"./$.microtask":173,"./$.redefine-all":176,"./$.same-value":178,"./$.set-proto":179,"./$.set-species":180,"./$.set-to-string-tag":181,"./$.species-constructor":183,"./$.strict-new":184,"./$.wks":192,dup:98}],203:[function(e,t,r){arguments[4][100][0].apply(r,arguments)},{"./$.iter-define":167,"./$.string-at":185,dup:100}],204:[function(e,t,r){arguments[4][104][0].apply(r,arguments)},{"./$.iterators":170,"./es6.array.iterator":195,dup:104}]},{},[119])(119)});
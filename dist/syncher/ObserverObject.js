"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_utils=require("../utils/utils"),_Subscription=require("./Subscription"),_Subscription2=_interopRequireDefault(_Subscription),ObserverObject=function(){function e(s,r,t){(0,_classCallCheck3.default)(this,e);var u=this;u._parent=s,u._url=r,u._childrens=t,u._bus=s._bus,u._subscriptions={}}return(0,_createClass3.default)(e,[{key:"addSubscription",value:function(e){var s=this;s._subscriptions[e]=new _Subscription2.default(s._bus,e,s._url,s._childrens,(!1))}},{key:"removeSubscription",value:function(e){var s=this,r=(0,_utils.divideURL)(e).domain,t=s._url+"/subscription",u=s._subscriptions[e];u&&(s._bus.postMessage({type:"unsubscribe",from:s._parent._url,to:t,body:{resource:s._url}}),s._bus.postMessage({type:"unsubscribe",from:s._parent._url,to:"domain://msg-node."+r+"/sm",body:{resource:s._url,childrenResources:s._childrens}}),u._releaseListeners(),delete s._subscriptions[e])}}]),e}();exports.default=ObserverObject,module.exports=exports.default;
//# sourceMappingURL=ObserverObject.js.map

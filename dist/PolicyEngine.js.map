{"version":3,"sources":["PolicyEngine.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","PolicyEngine","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","default","__esModule","core-js/library/fn/object/define-property","2","core-js/library/fn/symbol","3","instance","Constructor","TypeError","4","_interopRequireDefault","obj","_defineProperty","_defineProperty2","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","../core-js/object/define-property","5","_Symbol","constructor","babel-runtime/core-js/symbol","6","$","it","desc","setDesc","../../modules/$","7","Symbol","../../modules/$.core","../../modules/es6.object.to-string","../../modules/es6.symbol","8","9","isObject","./$.is-object","10","toString","slice","11","core","version","__e","12","aFunction","fn","that","undefined","b","c","apply","arguments","./$.a-function","13","14","Object","defineProperty","get","./$.fails","15","keys","getKeys","getSymbols","symbols","isEnum","push","./$","16","ctx","PROTOTYPE","$export","type","name","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","C","param","Function","./$.core","./$.ctx","./$.global","17","exec","18","toIObject","getNames","windowNames","getOwnPropertyNames","getWindowNames","./$.to-iobject","19","Math","__g","20","hasOwnProperty","21","createDesc","object","value","./$.descriptors","./$.property-desc","22","cof","propertyIsEnumerable","split","./$.cof","23","Array","isArray","arg","24","25","$Object","create","getProto","getPrototypeOf","getDesc","getOwnPropertyDescriptor","setDescs","getOwnPropertySymbols","each","forEach","26","el","O","index","27","28","bitmap","29","./$.hide","30","def","has","TAG","tag","stat","./$.has","./$.wks","31","SHARED","store","32","IObject","defined","./$.defined","./$.iobject","33","id","px","random","concat","34","uid","./$.shared","./$.uid","35","36","DESCRIPTORS","redefine","$fails","shared","setToStringTag","wks","keyOf","$names","enumKeys","anObject","_create","$Symbol","$JSON","JSON","_stringify","stringify","setter","HIDDEN","SymbolRegistry","AllSymbols","useNative","ObjectProto","setSymbolDesc","D","protoDesc","wrap","sym","_k","set","isSymbol","$defineProperty","$defineProperties","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","names","result","$getOwnPropertySymbols","$stringify","replacer","$replacer","args","$$","buggyJSON","symbolStatics","for","keyFor","useSetter","useSimple","./$.an-object","./$.enum-keys","./$.export","./$.get-names","./$.is-array","./$.keyof","./$.library","./$.redefine","./$.set-to-string-tag","37","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","Operators","_this","operators","setOperators","between","params","isBetween","in","indexOf","equals","or","and","not","start","end","now","parseInt","babel-runtime/helpers/classCallCheck","babel-runtime/helpers/createClass","38","_typeof2","_typeof3","_Operators","_Operators2","PDP","context","message","policies","results","actions","policy","condition","verifiesCondition","verifiesAdvancedCondition","scope","verifiesSimpleCondition","authorise","_i","newAction","method","authDecision","splitCondition","variable","operator","group","destination","to","left","right","resultLeft","resultRight","./Operators","babel-runtime/helpers/typeof","39","PEP","40","_PEP","_PEP2","_PDP","_PDP2","pdp","pep","newPolicies","myPolicies","newPolicy","j","existingPolicy","removePolicies","typeOfCondition","typeOfPolicyCondition","splice","areEqualArrays","array1","array2","numElements","myGroups","groups","groupsNames","groupName","members","addPolicies","shift","groupInPolicy","join","userEmail","createList","user","timeRestrictions","./PDP","./PEP"],"mappings":"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","file":"PolicyEngine.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.PolicyEngine = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n},{\"core-js/library/fn/object/define-property\":6}],2:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n},{\"core-js/library/fn/symbol\":7}],3:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n},{\"../core-js/object/define-property\":1}],5:[function(require,module,exports){\n\"use strict\";\n\nvar _Symbol = require(\"babel-runtime/core-js/symbol\")[\"default\"];\n\nexports[\"default\"] = function (obj) {\n  return obj && obj.constructor === _Symbol ? \"symbol\" : typeof obj;\n};\n\nexports.__esModule = true;\n},{\"babel-runtime/core-js/symbol\":2}],6:[function(require,module,exports){\nvar $ = require('../../modules/$');\nmodule.exports = function defineProperty(it, key, desc){\n  return $.setDesc(it, key, desc);\n};\n},{\"../../modules/$\":25}],7:[function(require,module,exports){\nrequire('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nmodule.exports = require('../../modules/$.core').Symbol;\n},{\"../../modules/$.core\":11,\"../../modules/es6.object.to-string\":35,\"../../modules/es6.symbol\":36}],8:[function(require,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],9:[function(require,module,exports){\nvar isObject = require('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n},{\"./$.is-object\":24}],10:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n},{}],11:[function(require,module,exports){\nvar core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],12:[function(require,module,exports){\n// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"./$.a-function\":8}],13:[function(require,module,exports){\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n},{}],14:[function(require,module,exports){\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./$.fails\":17}],15:[function(require,module,exports){\n// all enumerable object keys, includes symbols\nvar $ = require('./$');\nmodule.exports = function(it){\n  var keys       = $.getKeys(it)\n    , getSymbols = $.getSymbols;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = $.isEnum\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))keys.push(key);\n  }\n  return keys;\n};\n},{\"./$\":25}],16:[function(require,module,exports){\nvar global    = require('./$.global')\n  , core      = require('./$.core')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;\n},{\"./$.core\":11,\"./$.ctx\":12,\"./$.global\":19}],17:[function(require,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],18:[function(require,module,exports){\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./$.to-iobject')\n  , getNames  = require('./$').getNames\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return getNames(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.get = function getOwnPropertyNames(it){\n  if(windowNames && toString.call(it) == '[object Window]')return getWindowNames(it);\n  return getNames(toIObject(it));\n};\n},{\"./$\":25,\"./$.to-iobject\":32}],19:[function(require,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],20:[function(require,module,exports){\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n},{}],21:[function(require,module,exports){\nvar $          = require('./$')\n  , createDesc = require('./$.property-desc');\nmodule.exports = require('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n},{\"./$\":25,\"./$.descriptors\":14,\"./$.property-desc\":28}],22:[function(require,module,exports){\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n},{\"./$.cof\":10}],23:[function(require,module,exports){\n// 7.2.2 IsArray(argument)\nvar cof = require('./$.cof');\nmodule.exports = Array.isArray || function(arg){\n  return cof(arg) == 'Array';\n};\n},{\"./$.cof\":10}],24:[function(require,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],25:[function(require,module,exports){\nvar $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};\n},{}],26:[function(require,module,exports){\nvar $         = require('./$')\n  , toIObject = require('./$.to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = $.getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n},{\"./$\":25,\"./$.to-iobject\":32}],27:[function(require,module,exports){\nmodule.exports = true;\n},{}],28:[function(require,module,exports){\nmodule.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n},{}],29:[function(require,module,exports){\nmodule.exports = require('./$.hide');\n},{\"./$.hide\":21}],30:[function(require,module,exports){\nvar def = require('./$').setDesc\n  , has = require('./$.has')\n  , TAG = require('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n},{\"./$\":25,\"./$.has\":20,\"./$.wks\":34}],31:[function(require,module,exports){\nvar global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n},{\"./$.global\":19}],32:[function(require,module,exports){\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./$.iobject')\n  , defined = require('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n},{\"./$.defined\":13,\"./$.iobject\":22}],33:[function(require,module,exports){\nvar id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n},{}],34:[function(require,module,exports){\nvar store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};\n},{\"./$.global\":19,\"./$.shared\":31,\"./$.uid\":33}],35:[function(require,module,exports){\n\n},{}],36:[function(require,module,exports){\n'use strict';\n// ECMAScript 6 symbols shim\nvar $              = require('./$')\n  , global         = require('./$.global')\n  , has            = require('./$.has')\n  , DESCRIPTORS    = require('./$.descriptors')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , $fails         = require('./$.fails')\n  , shared         = require('./$.shared')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , uid            = require('./$.uid')\n  , wks            = require('./$.wks')\n  , keyOf          = require('./$.keyof')\n  , $names         = require('./$.get-names')\n  , enumKeys       = require('./$.enum-keys')\n  , isArray        = require('./$.is-array')\n  , anObject       = require('./$.an-object')\n  , toIObject      = require('./$.to-iobject')\n  , createDesc     = require('./$.property-desc')\n  , getDesc        = $.getDesc\n  , setDesc        = $.setDesc\n  , _create        = $.create\n  , getNames       = $names.get\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , setter         = false\n  , HIDDEN         = wks('_hidden')\n  , isEnum         = $.isEnum\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , useNative      = typeof $Symbol == 'function'\n  , ObjectProto    = Object.prototype;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(setDesc({}, 'a', {\n    get: function(){ return setDesc(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = getDesc(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  setDesc(it, key, D);\n  if(protoDesc && it !== ObjectProto)setDesc(ObjectProto, key, protoDesc);\n} : setDesc;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol.prototype);\n  sym._k = tag;\n  DESCRIPTORS && setter && setSymbolDesc(ObjectProto, tag, {\n    configurable: true,\n    set: function(value){\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    }\n  });\n  return sym;\n};\n\nvar isSymbol = function(it){\n  return typeof it == 'symbol';\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(D && has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))setDesc(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return setDesc(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key);\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key]\n    ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  var D = getDesc(it = toIObject(it), key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(!has(AllSymbols, key = names[i++]) && key != HIDDEN)result.push(key);\n  return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(has(AllSymbols, key = names[i++]))result.push(AllSymbols[key]);\n  return result;\n};\nvar $stringify = function stringify(it){\n  if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n  var args = [it]\n    , i    = 1\n    , $$   = arguments\n    , replacer, $replacer;\n  while($$.length > i)args.push($$[i++]);\n  replacer = args[1];\n  if(typeof replacer == 'function')$replacer = replacer;\n  if($replacer || !isArray(replacer))replacer = function(key, value){\n    if($replacer)value = $replacer.call(this, key, value);\n    if(!isSymbol(value))return value;\n  };\n  args[1] = replacer;\n  return _stringify.apply($JSON, args);\n};\nvar buggyJSON = $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n});\n\n// 19.4.1.1 Symbol([description])\nif(!useNative){\n  $Symbol = function Symbol(){\n    if(isSymbol(this))throw TypeError('Symbol is not a constructor');\n    return wrap(uid(arguments.length > 0 ? arguments[0] : undefined));\n  };\n  redefine($Symbol.prototype, 'toString', function toString(){\n    return this._k;\n  });\n\n  isSymbol = function(it){\n    return it instanceof $Symbol;\n  };\n\n  $.create     = $create;\n  $.isEnum     = $propertyIsEnumerable;\n  $.getDesc    = $getOwnPropertyDescriptor;\n  $.setDesc    = $defineProperty;\n  $.setDescs   = $defineProperties;\n  $.getNames   = $names.get = $getOwnPropertyNames;\n  $.getSymbols = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./$.library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n}\n\nvar symbolStatics = {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    return keyOf(SymbolRegistry, key);\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n};\n// 19.4.2.2 Symbol.hasInstance\n// 19.4.2.3 Symbol.isConcatSpreadable\n// 19.4.2.4 Symbol.iterator\n// 19.4.2.6 Symbol.match\n// 19.4.2.8 Symbol.replace\n// 19.4.2.9 Symbol.search\n// 19.4.2.10 Symbol.species\n// 19.4.2.11 Symbol.split\n// 19.4.2.12 Symbol.toPrimitive\n// 19.4.2.13 Symbol.toStringTag\n// 19.4.2.14 Symbol.unscopables\n$.each.call((\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,' +\n  'species,split,toPrimitive,toStringTag,unscopables'\n).split(','), function(it){\n  var sym = wks(it);\n  symbolStatics[it] = useNative ? sym : wrap(sym);\n});\n\nsetter = true;\n\n$export($export.G + $export.W, {Symbol: $Symbol});\n\n$export($export.S, 'Symbol', symbolStatics);\n\n$export($export.S + $export.F * !useNative, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!useNative || buggyJSON), 'JSON', {stringify: $stringify});\n\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n},{\"./$\":25,\"./$.an-object\":9,\"./$.descriptors\":14,\"./$.enum-keys\":15,\"./$.export\":16,\"./$.fails\":17,\"./$.get-names\":18,\"./$.global\":19,\"./$.has\":20,\"./$.is-array\":23,\"./$.keyof\":26,\"./$.library\":27,\"./$.property-desc\":28,\"./$.redefine\":29,\"./$.set-to-string-tag\":30,\"./$.shared\":31,\"./$.to-iobject\":32,\"./$.uid\":33,\"./$.wks\":34}],37:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var Operators=function(){function Operators(){(0,_classCallCheck3.default)(this,Operators);var _this=this;_this.operators=_this.setOperators();}(0,_createClass3.default)(Operators,[{key:'setOperators',value:function setOperators(){var _this=this;var operators={between:function between(params){return _this.isBetween(params[0][0],params[0][1],params[1]);},in:function _in(params){return params[0].indexOf(params[1])>-1;},equals:function equals(params){return params[0][0]==='*'||params[0][0]===params[1];},or:function or(params){return params[0]||params[1];},and:function and(params){return params[0]&&params[1];},not:function not(params){return !params[0];}};return operators;} /**\n  * Verifies if the current time is between the given start and end times.\n  * @param {Number}     start\n  * @param {Number}     end\n  * @return {Boolean}   boolean\n  */},{key:'isBetween',value:function isBetween(start,end,now){start=parseInt(start);end=parseInt(end);if(end<start){now=now<start?now+=2400:now;end+=2400;}return now>start&&now<end;}}]);return Operators;}();exports.default=Operators;module.exports=exports['default'];\n\n},{\"babel-runtime/helpers/classCallCheck\":3,\"babel-runtime/helpers/createClass\":4}],38:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _typeof2=require('babel-runtime/helpers/typeof');var _typeof3=_interopRequireDefault(_typeof2);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _Operators=require('./Operators');var _Operators2=_interopRequireDefault(_Operators);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} /**\n* The Policy Decision Point (PDP) decides if a message is to be authorised by checking a set of\n* policies. The resource to be verified is specified in the first word of the 'condition' field of\n* a Policy object. The implementation that verifies if the message is compliant with a policy is\n* specified in a hashtable to allow dynamic definition of the implementation, providing\n* extensibility to the Policy Engine functionalities.\n*/var PDP=function(){ /**\n  * This method is invoked by the Policy Engine and instantiates the Policy Decision Point. It\n  * initialises or loads from the Persistence Manager the object 'myGroups' to store the user's\n  * groups.\n  * @param  {Registry}    muchruntimeRegistry\n  */function PDP(context){(0,_classCallCheck3.default)(this,PDP);var _this=this;_this.context=context;_this.operators=new _Operators2.default(context);} /**\n  * Verifies if the given message is compliant with the given policies. If one of the policies\n  * evaluates to 'false', then the message is not authorised. Returns the final authorisation\n  * decision and a set of actions that policies may require.\n  * @param {Message}  message\n  * @param {URL}      hypertyToVerify\n  * @param {Array}    policies\n  * @return {Array}   [authDecision, actions]\n  */(0,_createClass3.default)(PDP,[{key:'evaluate',value:function evaluate(message,policies){var _this=this;var results=[true];var actions=[];for(var i in policies){var policy=policies[i];var condition=policy.condition;var verifiesCondition=false;if((typeof condition==='undefined'?'undefined':(0,_typeof3.default)(condition))==='object'){verifiesCondition=_this.verifiesAdvancedCondition(condition[0],condition[1],condition[2],policy.scope,message);}else {verifiesCondition=_this.verifiesSimpleCondition(condition,policy.scope,message);}if(verifiesCondition){results.push(policy.authorise);}if(policy.actions!==[]){for(var _i in policy.actions){var newAction={method:policy.actions[_i].method,params:message};actions.push(newAction);}}}var authDecision=results.indexOf(false)===-1;return [authDecision,actions];}},{key:'verifiesSimpleCondition',value:function verifiesSimpleCondition(condition,scope,message){var _this=this;var splitCondition=condition.split(' ');var variable=splitCondition[0];var operator=splitCondition[1];var params=void 0;if(operator==='in'){_this.context.group={scope:scope,group:splitCondition[2],destination:message.to};params=_this.context.group;}else {params=splitCondition.slice(2);}_this.context[variable]={message:message};var value=_this.context[variable];return _this.operators.operators[operator]([params,value]);}},{key:'verifiesAdvancedCondition',value:function verifiesAdvancedCondition(operator,left,right,scope,message){var _this=this;while((typeof left==='undefined'?'undefined':(0,_typeof3.default)(left))==='object'){left=_this.verifiesAdvancedCondition(left[0],left[1],left[2],scope,message);}if(right!==undefined){while((typeof right==='undefined'?'undefined':(0,_typeof3.default)(right))==='object'){right=_this.verifiesAdvancedCondition(right[0],right[1],right[2],scope,message);}}var resultLeft=typeof left==='boolean'?left:_this.verifiesSimpleCondition(left,scope,message);var resultRight=void 0;if(right!==undefined){resultRight=typeof right==='boolean'?right:_this.verifiesSimpleCondition(right,scope,message);}return _this.operators.operators[operator]([resultLeft,resultRight]);}}]);return PDP;}();exports.default=PDP;module.exports=exports['default'];\n\n},{\"./Operators\":37,\"babel-runtime/helpers/classCallCheck\":3,\"babel-runtime/helpers/createClass\":4,\"babel-runtime/helpers/typeof\":5}],39:[function(require,module,exports){\n\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:true});var _classCallCheck2=require(\"babel-runtime/helpers/classCallCheck\");var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require(\"babel-runtime/helpers/createClass\");var _createClass3=_interopRequireDefault(_createClass2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var PEP=function(){function PEP(context){(0,_classCallCheck3.default)(this,PEP);var _this=this;_this.context=context;}(0,_createClass3.default)(PEP,[{key:\"enforce\",value:function enforce(result){var _this=this;var authDecision=result[0];var actions=result[1];for(var i in actions){_this.context[actions[i].method](actions[i].params,authDecision);}} /*sendAutomaticMessage() {}\n\n  forwardToID() {}\n\n  forwardToHyperty() {}*/}]);return PEP;}();exports.default=PEP;module.exports=exports['default'];\n\n},{\"babel-runtime/helpers/classCallCheck\":3,\"babel-runtime/helpers/createClass\":4}],40:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,\"__esModule\",{value:true});var _typeof2=require('babel-runtime/helpers/typeof');var _typeof3=_interopRequireDefault(_typeof2);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _PEP=require('./PEP');var _PEP2=_interopRequireDefault(_PEP);var _PDP=require('./PDP');var _PDP2=_interopRequireDefault(_PDP);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};} /**\n* The Policy Engine intercepts all the messages sent through the Message Bus and applies the\n* policies defined by the service provider and the user.\n*/ //jshint browser:true, jquery: true\n//import persistenceManager from 'service-framework/dist/PersistenceManager';\nvar PolicyEngine=function(){ /**\n  * This method is invoked by the RuntimeUA and instantiates the Policy Engine. A Policy Decision\n  * Point (PDP) and a Policy Enforcement Point (PEP) are initialised for the evaluation of policies\n  * and the enforcement of additional actions, respectively.\n  * @param  {IdentityModule}    identityModule\n  * @param  {Registry}          runtimeRegistry\n  */function PolicyEngine(context){(0,_classCallCheck3.default)(this,PolicyEngine);var _this=this;_this.context=context;_this.context.pdp=new _PDP2.default(context);_this.context.pep=new _PEP2.default(context);} /**\n  * Associates the given policies with a scope. The possible scopes are 'global', 'hyperty' and\n  * 'user'.\n  * @param  {Policy[]}  policies\n  * @param  {String}    scope\n  */(0,_createClass3.default)(PolicyEngine,[{key:'addPolicies',value:function addPolicies(newPolicies){var _this=this;var myPolicies=_this.context.policies;if(myPolicies===undefined){myPolicies={};}for(var i in newPolicies){var newPolicy=newPolicies[i];var scope=newPolicy.scope;if(myPolicies[scope]===undefined){myPolicies[scope]=[];}for(var j in myPolicies[scope]){var existingPolicy=myPolicies[scope][j];if(existingPolicy.condition===newPolicy.condition){_this.removePolicies(newPolicies[i].condition);break;}}myPolicies[scope].push(newPolicies[i]);}_this.context.policies=myPolicies;} /**\n  * Removes the policy with the given ID from the given scope. If policyID is '*', removes all policies associated with the given scope.\n  * @param  {String}  policyID\n  * @param  {String}  scope\n  */},{key:'removePolicies',value:function removePolicies(scope,condition){var _this=this;var myPolicies=_this.context.policies;if(scope!=='*'){if(scope in myPolicies){if(condition!=='*'){var policies=myPolicies[scope];var typeOfCondition=typeof condition==='undefined'?'undefined':(0,_typeof3.default)(condition);for(var i in policies){var typeOfPolicyCondition=(0,_typeof3.default)(policies[i].condition);if(typeOfCondition===typeOfPolicyCondition){if(typeOfCondition==='string'){if(policies[i].condition===condition){policies.splice(i,1);break;}}else { //typeof condition = object (advanced policy)\nif(_this.areEqualArrays(policies[i].condition,condition)){policies.splice(i,1);}}}}}else {delete myPolicies[scope];}_this.context.policies=myPolicies;}}else {_this.context.policies={};}}},{key:'areEqualArrays',value:function areEqualArrays(array1,array2){if(array1.length!==array2.length){return false;}var numElements=array1.length;for(var i=0;i<numElements;i++){if(array1[i] instanceof Array&&array2[i] instanceof Array){if(!array1[i].equals(array2[i])){return false;}}else if(array1[i]!==array2[i]){return false;}}return true;} /**\n  * This method is executed when a message is intercepted in the Message Bus. The first step is the\n  * assignment of the identity associated with the message. The second step is the evaluation of the\n  * applicable policies in order to obtain an authorisation decision: if a policy evaluates to\n  * false, then the message is unauthorised. The third step is the enforcement of the actions that\n  * policies may require. Finally, the message is stamped as authorised or not and is returned to\n  * the Message Bus, where it will be forwarded or blocked.\n  * @param  {Message}  message\n  */},{key:'authorise',value:function authorise(message){var _this=this;return _this.context.authorise(message);}},{key:'getGroupsNames',value:function getGroupsNames(scope){var _this=this;var myGroups=_this.context.groups;var groupsNames=[];if(myGroups[scope]!=={}){for(var groupName in myGroups[scope]){groupsNames.push(groupName);}}return groupsNames;} /**\n  * Retrieves the group with the given group name from the PDP.\n  * @param  {String}  groupName\n  * @return {Array}   group\n  */},{key:'getList',value:function getList(scope,groupName){var _this=this;var myGroups=_this.context.groups;var members=[];if(myGroups[scope]!==undefined&&myGroups[scope][groupName]!==undefined){members=myGroups[scope][groupName];}return members;} /**\n  * Creates a group with the given name.\n  * @param  {String}  groupName\n  */},{key:'createList',value:function createList(scope,type,groupName){var _this=this;var myGroups=_this.context.groups;if(myGroups[scope]===undefined){myGroups[scope]={};}myGroups[scope][groupName]=[];var policy={authorise:false,condition:type+' in '+groupName,scope:scope,actions:[]};_this.addPolicies([policy]);return myGroups;}},{key:'deleteGroup',value:function deleteGroup(scope,groupName){var _this=this;var myGroups=_this.context.groups;delete myGroups[scope][groupName];var myPolicies=_this.context.policies;var policies=myPolicies[scope];for(var i in policies){var condition=policies[i].condition.split(' ');condition.shift();var groupInPolicy=condition.join(' ');if(groupInPolicy===groupName){delete policies[i];break;}}} /**\n  * Adds the given user email to the group with the given name.\n  * @param  {String}  userEmail\n  * @param  {String}  groupName\n  */},{key:'addToList',value:function addToList(scope,type,groupName,userEmail){var _this=this;var myGroups=_this.context.groups;if(myGroups[scope]===undefined){myGroups[scope]={};}if(myGroups[scope][groupName]===undefined){myGroups=_this.createList(scope,type,groupName);}if(myGroups[scope][groupName].indexOf(userEmail)===-1){myGroups[scope][groupName].push(userEmail);}} /**\n  * Removes the given user email from the group with the given name.\n  * @param  {String}  userEmail\n  * @param  {String}  groupName\n  */},{key:'removeFromGroup',value:function removeFromGroup(scope,groupName,userEmail){var _this=this;var myGroups=_this.context.groups;var group=myGroups[scope][groupName];for(var i in group){if(group[i]===userEmail){group.splice(i,1);break;}}}},{key:'getTimeslots',value:function getTimeslots(){var _this=this;var policies=_this.context.policies.user;var timeRestrictions=[];for(var i in policies){if(policies[i].condition.split(' ')[0]==='time'){timeRestrictions.push(policies[i].condition);}}return timeRestrictions;}},{key:'getTimeslotById',value:function getTimeslotById(condition){var _this=this;var policies=_this.context.policies.user;for(var i in policies){if(policies[i].condition===condition){return policies[i];}}}}]);return PolicyEngine;}();exports.default=PolicyEngine;module.exports=exports['default'];\n\n},{\"./PDP\":38,\"./PEP\":39,\"babel-runtime/helpers/classCallCheck\":3,\"babel-runtime/helpers/createClass\":4,\"babel-runtime/helpers/typeof\":5}]},{},[40])(40)\n});"],"sourceRoot":"/source/"}
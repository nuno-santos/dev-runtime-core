{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/babel-runtime/core-js/object/define-property.js","PolicyEngine.js","node_modules/babel-runtime/core-js/symbol.js","node_modules/babel-runtime/helpers/classCallCheck.js","node_modules/babel-runtime/helpers/createClass.js","node_modules/babel-runtime/helpers/typeof.js","node_modules/core-js/library/fn/object/define-property.js","node_modules/core-js/library/fn/symbol/index.js","node_modules/core-js/library/modules/$.a-function.js","node_modules/core-js/library/modules/$.an-object.js","node_modules/core-js/library/modules/$.cof.js","node_modules/core-js/library/modules/$.core.js","node_modules/core-js/library/modules/$.ctx.js","node_modules/core-js/library/modules/$.defined.js","node_modules/core-js/library/modules/$.descriptors.js","node_modules/core-js/library/modules/$.enum-keys.js","node_modules/core-js/library/modules/$.export.js","node_modules/core-js/library/modules/$.fails.js","node_modules/core-js/library/modules/$.get-names.js","node_modules/core-js/library/modules/$.global.js","node_modules/core-js/library/modules/$.has.js","node_modules/core-js/library/modules/$.hide.js","node_modules/core-js/library/modules/$.iobject.js","node_modules/core-js/library/modules/$.is-array.js","node_modules/core-js/library/modules/$.is-object.js","node_modules/core-js/library/modules/$.js","node_modules/core-js/library/modules/$.keyof.js","node_modules/core-js/library/modules/$.library.js","node_modules/core-js/library/modules/$.property-desc.js","node_modules/core-js/library/modules/$.redefine.js","node_modules/core-js/library/modules/$.set-to-string-tag.js","node_modules/core-js/library/modules/$.shared.js","node_modules/core-js/library/modules/$.to-iobject.js","node_modules/core-js/library/modules/$.uid.js","node_modules/core-js/library/modules/$.wks.js","node_modules/core-js/library/modules/es6.symbol.js","src/policy/Operators.js","src/policy/PDP.js","src/policy/PEP.js","src/policy/PolicyEngine.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","PolicyEngine","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","default","__esModule","core-js/library/fn/object/define-property","2","core-js/library/fn/symbol","3","instance","Constructor","TypeError","4","_interopRequireDefault","obj","_defineProperty","_defineProperty2","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","../core-js/object/define-property","5","_Symbol","constructor","babel-runtime/core-js/symbol","6","$","it","desc","setDesc","../../modules/$","7","Symbol","../../modules/$.core","../../modules/es6.object.to-string","../../modules/es6.symbol","8","9","isObject","./$.is-object","10","toString","slice","11","core","version","__e","12","aFunction","fn","that","undefined","b","c","apply","arguments","./$.a-function","13","14","Object","defineProperty","get","./$.fails","15","keys","getKeys","getSymbols","symbols","isEnum","push","./$","16","ctx","PROTOTYPE","$export","type","name","source","own","out","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","S","IS_PROTO","P","IS_BIND","B","IS_WRAP","W","C","param","Function","./$.core","./$.ctx","./$.global","17","exec","18","toIObject","getNames","windowNames","getOwnPropertyNames","getWindowNames","./$.to-iobject","19","Math","__g","20","hasOwnProperty","21","createDesc","object","value","./$.descriptors","./$.property-desc","22","cof","propertyIsEnumerable","split","./$.cof","23","Array","isArray","arg","24","25","$Object","create","getProto","getPrototypeOf","getDesc","getOwnPropertyDescriptor","setDescs","getOwnPropertySymbols","each","forEach","26","el","O","index","27","28","bitmap","29","./$.hide","30","def","has","TAG","tag","stat","./$.has","./$.wks","31","SHARED","store","32","IObject","defined","./$.defined","./$.iobject","33","id","px","random","concat","34","uid","./$.shared","./$.uid","35","36","DESCRIPTORS","redefine","$fails","shared","setToStringTag","wks","keyOf","$names","enumKeys","anObject","_create","$Symbol","$JSON","JSON","_stringify","stringify","setter","HIDDEN","SymbolRegistry","AllSymbols","useNative","ObjectProto","setSymbolDesc","D","protoDesc","wrap","sym","_k","set","isSymbol","$defineProperty","$defineProperties","$create","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","names","result","$getOwnPropertySymbols","$stringify","replacer","$replacer","args","$$","buggyJSON","symbolStatics","for","keyFor","useSetter","useSimple","./$.an-object","./$.enum-keys","./$.export","./$.get-names","./$.is-array","./$.keyof","./$.library","./$.redefine","./$.set-to-string-tag","37","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","Operators","_this","operators","setOperators","between","params","isBetween","in","indexOf","equals","or","and","not","start","end","now","parseInt","babel-runtime/helpers/classCallCheck","babel-runtime/helpers/createClass","38","_typeof2","_typeof3","_Operators","_Operators2","PDP","context","message","policies","results","actions","policy","condition","verifiesCondition","verifiesAdvancedCondition","scope","verifiesSimpleCondition","authorise","_i","newAction","method","authDecision","splitCondition","variable","operator","group","destination","to","left","right","resultLeft","resultRight","./Operators","babel-runtime/helpers/typeof","39","PEP","40","_PEP","_PEP2","_PDP","_PDP2","pdp","pep","newPolicies","myPolicies","newPolicy","j","existingPolicy","removePolicies","typeOfCondition","typeOfPolicyCondition","splice","areEqualArrays","array1","array2","numElements","myGroups","groups","groupsNames","groupName","members","addPolicies","shift","groupInPolicy","join","userEmail","createList","user","timeRestrictions","./PDP","./PEP"],"mappings":"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","file":"PolicyEngine.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.PolicyEngine = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n},{\"core-js/library/fn/object/define-property\":6}],2:[function(require,module,exports){\nmodule.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n},{\"core-js/library/fn/symbol\":7}],3:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n},{\"../core-js/object/define-property\":1}],5:[function(require,module,exports){\n\"use strict\";\n\nvar _Symbol = require(\"babel-runtime/core-js/symbol\")[\"default\"];\n\nexports[\"default\"] = function (obj) {\n  return obj && obj.constructor === _Symbol ? \"symbol\" : typeof obj;\n};\n\nexports.__esModule = true;\n},{\"babel-runtime/core-js/symbol\":2}],6:[function(require,module,exports){\nvar $ = require('../../modules/$');\nmodule.exports = function defineProperty(it, key, desc){\n  return $.setDesc(it, key, desc);\n};\n},{\"../../modules/$\":25}],7:[function(require,module,exports){\nrequire('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nmodule.exports = require('../../modules/$.core').Symbol;\n},{\"../../modules/$.core\":11,\"../../modules/es6.object.to-string\":35,\"../../modules/es6.symbol\":36}],8:[function(require,module,exports){\nmodule.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n},{}],9:[function(require,module,exports){\nvar isObject = require('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n},{\"./$.is-object\":24}],10:[function(require,module,exports){\nvar toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n},{}],11:[function(require,module,exports){\nvar core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n},{}],12:[function(require,module,exports){\n// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n},{\"./$.a-function\":8}],13:[function(require,module,exports){\n// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n},{}],14:[function(require,module,exports){\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n},{\"./$.fails\":17}],15:[function(require,module,exports){\n// all enumerable object keys, includes symbols\nvar $ = require('./$');\nmodule.exports = function(it){\n  var keys       = $.getKeys(it)\n    , getSymbols = $.getSymbols;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = $.isEnum\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))keys.push(key);\n  }\n  return keys;\n};\n},{\"./$\":25}],16:[function(require,module,exports){\nvar global    = require('./$.global')\n  , core      = require('./$.core')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;\n},{\"./$.core\":11,\"./$.ctx\":12,\"./$.global\":19}],17:[function(require,module,exports){\nmodule.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n},{}],18:[function(require,module,exports){\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./$.to-iobject')\n  , getNames  = require('./$').getNames\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return getNames(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.get = function getOwnPropertyNames(it){\n  if(windowNames && toString.call(it) == '[object Window]')return getWindowNames(it);\n  return getNames(toIObject(it));\n};\n},{\"./$\":25,\"./$.to-iobject\":32}],19:[function(require,module,exports){\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n},{}],20:[function(require,module,exports){\nvar hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n},{}],21:[function(require,module,exports){\nvar $          = require('./$')\n  , createDesc = require('./$.property-desc');\nmodule.exports = require('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n},{\"./$\":25,\"./$.descriptors\":14,\"./$.property-desc\":28}],22:[function(require,module,exports){\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n},{\"./$.cof\":10}],23:[function(require,module,exports){\n// 7.2.2 IsArray(argument)\nvar cof = require('./$.cof');\nmodule.exports = Array.isArray || function(arg){\n  return cof(arg) == 'Array';\n};\n},{\"./$.cof\":10}],24:[function(require,module,exports){\nmodule.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n},{}],25:[function(require,module,exports){\nvar $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};\n},{}],26:[function(require,module,exports){\nvar $         = require('./$')\n  , toIObject = require('./$.to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = $.getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n},{\"./$\":25,\"./$.to-iobject\":32}],27:[function(require,module,exports){\nmodule.exports = true;\n},{}],28:[function(require,module,exports){\nmodule.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n},{}],29:[function(require,module,exports){\nmodule.exports = require('./$.hide');\n},{\"./$.hide\":21}],30:[function(require,module,exports){\nvar def = require('./$').setDesc\n  , has = require('./$.has')\n  , TAG = require('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n},{\"./$\":25,\"./$.has\":20,\"./$.wks\":34}],31:[function(require,module,exports){\nvar global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n},{\"./$.global\":19}],32:[function(require,module,exports){\n// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./$.iobject')\n  , defined = require('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n},{\"./$.defined\":13,\"./$.iobject\":22}],33:[function(require,module,exports){\nvar id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n},{}],34:[function(require,module,exports){\nvar store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};\n},{\"./$.global\":19,\"./$.shared\":31,\"./$.uid\":33}],35:[function(require,module,exports){\n\n},{}],36:[function(require,module,exports){\n'use strict';\n// ECMAScript 6 symbols shim\nvar $              = require('./$')\n  , global         = require('./$.global')\n  , has            = require('./$.has')\n  , DESCRIPTORS    = require('./$.descriptors')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , $fails         = require('./$.fails')\n  , shared         = require('./$.shared')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , uid            = require('./$.uid')\n  , wks            = require('./$.wks')\n  , keyOf          = require('./$.keyof')\n  , $names         = require('./$.get-names')\n  , enumKeys       = require('./$.enum-keys')\n  , isArray        = require('./$.is-array')\n  , anObject       = require('./$.an-object')\n  , toIObject      = require('./$.to-iobject')\n  , createDesc     = require('./$.property-desc')\n  , getDesc        = $.getDesc\n  , setDesc        = $.setDesc\n  , _create        = $.create\n  , getNames       = $names.get\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , setter         = false\n  , HIDDEN         = wks('_hidden')\n  , isEnum         = $.isEnum\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , useNative      = typeof $Symbol == 'function'\n  , ObjectProto    = Object.prototype;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(setDesc({}, 'a', {\n    get: function(){ return setDesc(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = getDesc(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  setDesc(it, key, D);\n  if(protoDesc && it !== ObjectProto)setDesc(ObjectProto, key, protoDesc);\n} : setDesc;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol.prototype);\n  sym._k = tag;\n  DESCRIPTORS && setter && setSymbolDesc(ObjectProto, tag, {\n    configurable: true,\n    set: function(value){\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    }\n  });\n  return sym;\n};\n\nvar isSymbol = function(it){\n  return typeof it == 'symbol';\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(D && has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))setDesc(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return setDesc(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key);\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key]\n    ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  var D = getDesc(it = toIObject(it), key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(!has(AllSymbols, key = names[i++]) && key != HIDDEN)result.push(key);\n  return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(has(AllSymbols, key = names[i++]))result.push(AllSymbols[key]);\n  return result;\n};\nvar $stringify = function stringify(it){\n  if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n  var args = [it]\n    , i    = 1\n    , $$   = arguments\n    , replacer, $replacer;\n  while($$.length > i)args.push($$[i++]);\n  replacer = args[1];\n  if(typeof replacer == 'function')$replacer = replacer;\n  if($replacer || !isArray(replacer))replacer = function(key, value){\n    if($replacer)value = $replacer.call(this, key, value);\n    if(!isSymbol(value))return value;\n  };\n  args[1] = replacer;\n  return _stringify.apply($JSON, args);\n};\nvar buggyJSON = $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n});\n\n// 19.4.1.1 Symbol([description])\nif(!useNative){\n  $Symbol = function Symbol(){\n    if(isSymbol(this))throw TypeError('Symbol is not a constructor');\n    return wrap(uid(arguments.length > 0 ? arguments[0] : undefined));\n  };\n  redefine($Symbol.prototype, 'toString', function toString(){\n    return this._k;\n  });\n\n  isSymbol = function(it){\n    return it instanceof $Symbol;\n  };\n\n  $.create     = $create;\n  $.isEnum     = $propertyIsEnumerable;\n  $.getDesc    = $getOwnPropertyDescriptor;\n  $.setDesc    = $defineProperty;\n  $.setDescs   = $defineProperties;\n  $.getNames   = $names.get = $getOwnPropertyNames;\n  $.getSymbols = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./$.library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n}\n\nvar symbolStatics = {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    return keyOf(SymbolRegistry, key);\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n};\n// 19.4.2.2 Symbol.hasInstance\n// 19.4.2.3 Symbol.isConcatSpreadable\n// 19.4.2.4 Symbol.iterator\n// 19.4.2.6 Symbol.match\n// 19.4.2.8 Symbol.replace\n// 19.4.2.9 Symbol.search\n// 19.4.2.10 Symbol.species\n// 19.4.2.11 Symbol.split\n// 19.4.2.12 Symbol.toPrimitive\n// 19.4.2.13 Symbol.toStringTag\n// 19.4.2.14 Symbol.unscopables\n$.each.call((\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,' +\n  'species,split,toPrimitive,toStringTag,unscopables'\n).split(','), function(it){\n  var sym = wks(it);\n  symbolStatics[it] = useNative ? sym : wrap(sym);\n});\n\nsetter = true;\n\n$export($export.G + $export.W, {Symbol: $Symbol});\n\n$export($export.S, 'Symbol', symbolStatics);\n\n$export($export.S + $export.F * !useNative, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!useNative || buggyJSON), 'JSON', {stringify: $stringify});\n\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n},{\"./$\":25,\"./$.an-object\":9,\"./$.descriptors\":14,\"./$.enum-keys\":15,\"./$.export\":16,\"./$.fails\":17,\"./$.get-names\":18,\"./$.global\":19,\"./$.has\":20,\"./$.is-array\":23,\"./$.keyof\":26,\"./$.library\":27,\"./$.property-desc\":28,\"./$.redefine\":29,\"./$.set-to-string-tag\":30,\"./$.shared\":31,\"./$.to-iobject\":32,\"./$.uid\":33,\"./$.wks\":34}],37:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Operators = function () {\n  function Operators() {\n    (0, _classCallCheck3.default)(this, Operators);\n\n    var _this = this;\n    _this.operators = _this.setOperators();\n  }\n\n  (0, _createClass3.default)(Operators, [{\n    key: 'setOperators',\n    value: function setOperators() {\n      var _this = this;\n      var operators = {\n        between: function between(params) {\n          return _this.isBetween(params[0][0], params[0][1], params[1]);\n        },\n        in: function _in(params) {\n          return params[0].indexOf(params[1]) > -1;\n        },\n        equals: function equals(params) {\n          return params[0][0] === '*' || params[0][0] === params[1];\n        },\n\n        or: function or(params) {\n          return params[0] || params[1];\n        },\n        and: function and(params) {\n          return params[0] && params[1];\n        },\n        not: function not(params) {\n          return !params[0];\n        }\n      };\n      return operators;\n    }\n\n    /**\n    * Verifies if the current time is between the given start and end times.\n    * @param {Number}     start\n    * @param {Number}     end\n    * @return {Boolean}   boolean\n    */\n\n  }, {\n    key: 'isBetween',\n    value: function isBetween(start, end, now) {\n      start = parseInt(start);\n      end = parseInt(end);\n\n      if (end < start) {\n        now = now < start ? now += 2400 : now;\n        end += 2400;\n      }\n\n      return now > start && now < end;\n    }\n  }]);\n  return Operators;\n}();\n\nexports.default = Operators;\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/helpers/classCallCheck\":3,\"babel-runtime/helpers/createClass\":4}],38:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _Operators = require('./Operators');\n\nvar _Operators2 = _interopRequireDefault(_Operators);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n* The Policy Decision Point (PDP) decides if a message is to be authorised by checking a set of\n* policies. The resource to be verified is specified in the first word of the 'condition' field of\n* a Policy object. The implementation that verifies if the message is compliant with a policy is\n* specified in a hashtable to allow dynamic definition of the implementation, providing\n* extensibility to the Policy Engine functionalities.\n*/\n\nvar PDP = function () {\n\n  /**\n  * This method is invoked by the Policy Engine and instantiates the Policy Decision Point. It\n  * initialises or loads from the Persistence Manager the object 'myGroups' to store the user's\n  * groups.\n  * @param  {Registry}    muchruntimeRegistry\n  */\n\n  function PDP(context) {\n    (0, _classCallCheck3.default)(this, PDP);\n\n    var _this = this;\n    _this.context = context;\n    _this.operators = new _Operators2.default(context);\n  }\n\n  /**\n  * Verifies if the given message is compliant with the given policies. If one of the policies\n  * evaluates to 'false', then the message is not authorised. Returns the final authorisation\n  * decision and a set of actions that policies may require.\n  * @param {Message}  message\n  * @param {URL}      hypertyToVerify\n  * @param {Array}    policies\n  * @return {Array}   [authDecision, actions]\n  */\n\n\n  (0, _createClass3.default)(PDP, [{\n    key: 'evaluate',\n    value: function evaluate(message, policies) {\n      var _this = this;\n      var results = [true];\n      var actions = [];\n      for (var i in policies) {\n        var policy = policies[i];\n        var condition = policy.condition;\n        var verifiesCondition = false;\n        if ((typeof condition === 'undefined' ? 'undefined' : (0, _typeof3.default)(condition)) === 'object') {\n          verifiesCondition = _this.verifiesAdvancedCondition(condition[0], condition[1], condition[2], policy.scope, message);\n        } else {\n          verifiesCondition = _this.verifiesSimpleCondition(condition, policy.scope, message);\n        }\n\n        if (verifiesCondition) {\n          results.push(policy.authorise);\n        }\n        if (policy.actions !== []) {\n          for (var _i in policy.actions) {\n            var newAction = {\n              method: policy.actions[_i].method,\n              params: message\n            };\n            actions.push(newAction);\n          }\n        }\n      }\n\n      var authDecision = results.indexOf(false) === -1;\n      return [authDecision, actions];\n    }\n  }, {\n    key: 'verifiesSimpleCondition',\n    value: function verifiesSimpleCondition(condition, scope, message) {\n      var _this = this;\n      var splitCondition = condition.split(' ');\n      var variable = splitCondition[0];\n      var operator = splitCondition[1];\n\n      var params = void 0;\n      if (operator === 'in') {\n        _this.context.group = { scope: scope, group: splitCondition[2], destination: message.to };\n        params = _this.context.group;\n      } else {\n        params = splitCondition.slice(2);\n      }\n      _this.context[variable] = { message: message };\n      var value = _this.context[variable];\n      return _this.operators.operators[operator]([params, value]);\n    }\n  }, {\n    key: 'verifiesAdvancedCondition',\n    value: function verifiesAdvancedCondition(operator, left, right, scope, message) {\n      var _this = this;\n      while ((typeof left === 'undefined' ? 'undefined' : (0, _typeof3.default)(left)) === 'object') {\n        left = _this.verifiesAdvancedCondition(left[0], left[1], left[2], scope, message);\n      }\n      if (right !== undefined) {\n        while ((typeof right === 'undefined' ? 'undefined' : (0, _typeof3.default)(right)) === 'object') {\n          right = _this.verifiesAdvancedCondition(right[0], right[1], right[2], scope, message);\n        }\n      }\n\n      var resultLeft = typeof left === 'boolean' ? left : _this.verifiesSimpleCondition(left, scope, message);\n\n      var resultRight = void 0;\n      if (right !== undefined) {\n        resultRight = typeof right === 'boolean' ? right : _this.verifiesSimpleCondition(right, scope, message);\n      }\n\n      return _this.operators.operators[operator]([resultLeft, resultRight]);\n    }\n  }]);\n  return PDP;\n}();\n\nexports.default = PDP;\nmodule.exports = exports['default'];\n\n},{\"./Operators\":37,\"babel-runtime/helpers/classCallCheck\":3,\"babel-runtime/helpers/createClass\":4,\"babel-runtime/helpers/typeof\":5}],39:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar PEP = function () {\n  function PEP(context) {\n    (0, _classCallCheck3.default)(this, PEP);\n\n    var _this = this;\n    _this.context = context;\n  }\n\n  (0, _createClass3.default)(PEP, [{\n    key: \"enforce\",\n    value: function enforce(result) {\n      var _this = this;\n      var authDecision = result[0];\n      var actions = result[1];\n\n      for (var i in actions) {\n        _this.context[actions[i].method](actions[i].params, authDecision);\n      }\n    }\n\n    /*sendAutomaticMessage() {}\n     forwardToID() {}\n     forwardToHyperty() {}*/\n\n  }]);\n  return PEP;\n}();\n\nexports.default = PEP;\nmodule.exports = exports['default'];\n\n},{\"babel-runtime/helpers/classCallCheck\":3,\"babel-runtime/helpers/createClass\":4}],40:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof2 = require('babel-runtime/helpers/typeof');\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _PEP = require('./PEP');\n\nvar _PEP2 = _interopRequireDefault(_PEP);\n\nvar _PDP = require('./PDP');\n\nvar _PDP2 = _interopRequireDefault(_PDP);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n* The Policy Engine intercepts all the messages sent through the Message Bus and applies the\n* policies defined by the service provider and the user.\n*/\n//jshint browser:true, jquery: true\n\n//import persistenceManager from 'service-framework/dist/PersistenceManager';\n\nvar PolicyEngine = function () {\n\n  /**\n  * This method is invoked by the RuntimeUA and instantiates the Policy Engine. A Policy Decision\n  * Point (PDP) and a Policy Enforcement Point (PEP) are initialised for the evaluation of policies\n  * and the enforcement of additional actions, respectively.\n  * @param  {IdentityModule}    identityModule\n  * @param  {Registry}          runtimeRegistry\n  */\n\n  function PolicyEngine(context) {\n    (0, _classCallCheck3.default)(this, PolicyEngine);\n\n    var _this = this;\n    _this.context = context;\n    _this.context.pdp = new _PDP2.default(context);\n    _this.context.pep = new _PEP2.default(context);\n  }\n\n  /**\n  * Associates the given policies with a scope. The possible scopes are 'global', 'hyperty' and\n  * 'user'.\n  * @param  {Policy[]}  policies\n  * @param  {String}    scope\n  */\n\n\n  (0, _createClass3.default)(PolicyEngine, [{\n    key: 'addPolicies',\n    value: function addPolicies(newPolicies) {\n      var _this = this;\n\n      var myPolicies = _this.context.policies;\n      if (myPolicies === undefined) {\n        myPolicies = {};\n      }\n\n      for (var i in newPolicies) {\n        var newPolicy = newPolicies[i];\n        var scope = newPolicy.scope;\n        if (myPolicies[scope] === undefined) {\n          myPolicies[scope] = [];\n        }\n        for (var j in myPolicies[scope]) {\n          var existingPolicy = myPolicies[scope][j];\n          if (existingPolicy.condition === newPolicy.condition) {\n            _this.removePolicies(newPolicies[i].condition);\n            break;\n          }\n        }\n        myPolicies[scope].push(newPolicies[i]);\n      }\n\n      _this.context.policies = myPolicies;\n    }\n\n    /**\n    * Removes the policy with the given ID from the given scope. If policyID is '*', removes all policies associated with the given scope.\n    * @param  {String}  policyID\n    * @param  {String}  scope\n    */\n\n  }, {\n    key: 'removePolicies',\n    value: function removePolicies(scope, condition) {\n      var _this = this;\n      var myPolicies = _this.context.policies;\n\n      if (scope !== '*') {\n\n        if (scope in myPolicies) {\n          if (condition !== '*') {\n            var policies = myPolicies[scope];\n            var typeOfCondition = typeof condition === 'undefined' ? 'undefined' : (0, _typeof3.default)(condition);\n            for (var i in policies) {\n              var typeOfPolicyCondition = (0, _typeof3.default)(policies[i].condition);\n              if (typeOfCondition === typeOfPolicyCondition) {\n                if (typeOfCondition === 'string') {\n                  if (policies[i].condition === condition) {\n                    policies.splice(i, 1);\n                    break;\n                  }\n                } else {\n                  //typeof condition = object (advanced policy)\n                  if (_this.areEqualArrays(policies[i].condition, condition)) {\n                    policies.splice(i, 1);\n                  }\n                }\n              }\n            }\n          } else {\n            delete myPolicies[scope];\n          }\n\n          _this.context.policies = myPolicies;\n        }\n      } else {\n        _this.context.policies = {};\n      }\n    }\n  }, {\n    key: 'areEqualArrays',\n    value: function areEqualArrays(array1, array2) {\n      if (array1.length !== array2.length) {\n        return false;\n      }\n\n      var numElements = array1.length;\n      for (var i = 0; i < numElements; i++) {\n        if (array1[i] instanceof Array && array2[i] instanceof Array) {\n          if (!array1[i].equals(array2[i])) {\n            return false;\n          }\n        } else if (array1[i] !== array2[i]) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n    * This method is executed when a message is intercepted in the Message Bus. The first step is the\n    * assignment of the identity associated with the message. The second step is the evaluation of the\n    * applicable policies in order to obtain an authorisation decision: if a policy evaluates to\n    * false, then the message is unauthorised. The third step is the enforcement of the actions that\n    * policies may require. Finally, the message is stamped as authorised or not and is returned to\n    * the Message Bus, where it will be forwarded or blocked.\n    * @param  {Message}  message\n    */\n\n  }, {\n    key: 'authorise',\n    value: function authorise(message) {\n      var _this = this;\n      return _this.context.authorise(message);\n    }\n  }, {\n    key: 'getGroupsNames',\n    value: function getGroupsNames(scope) {\n      var _this = this;\n      var myGroups = _this.context.groups;\n      var groupsNames = [];\n      if (myGroups[scope] !== {}) {\n        for (var groupName in myGroups[scope]) {\n          groupsNames.push(groupName);\n        }\n      }\n      return groupsNames;\n    }\n\n    /**\n    * Retrieves the group with the given group name from the PDP.\n    * @param  {String}  groupName\n    * @return {Array}   group\n    */\n\n  }, {\n    key: 'getList',\n    value: function getList(scope, groupName) {\n      var _this = this;\n      var myGroups = _this.context.groups;\n      var members = [];\n      if (myGroups[scope] !== undefined && myGroups[scope][groupName] !== undefined) {\n        members = myGroups[scope][groupName];\n      }\n      return members;\n    }\n\n    /**\n    * Creates a group with the given name.\n    * @param  {String}  groupName\n    */\n\n  }, {\n    key: 'createList',\n    value: function createList(scope, type, groupName) {\n      var _this = this;\n\n      var myGroups = _this.context.groups;\n      if (myGroups[scope] === undefined) {\n        myGroups[scope] = {};\n      }\n      myGroups[scope][groupName] = [];\n\n      var policy = {\n        authorise: false,\n        condition: type + ' in ' + groupName,\n        scope: scope,\n        actions: []\n      };\n      _this.addPolicies([policy]);\n\n      return myGroups;\n    }\n  }, {\n    key: 'deleteGroup',\n    value: function deleteGroup(scope, groupName) {\n      var _this = this;\n\n      var myGroups = _this.context.groups;\n      delete myGroups[scope][groupName];\n\n      var myPolicies = _this.context.policies;\n\n      var policies = myPolicies[scope];\n      for (var i in policies) {\n        var condition = policies[i].condition.split(' ');\n        condition.shift();\n        var groupInPolicy = condition.join(' ');\n        if (groupInPolicy === groupName) {\n          delete policies[i];\n          break;\n        }\n      }\n    }\n\n    /**\n    * Adds the given user email to the group with the given name.\n    * @param  {String}  userEmail\n    * @param  {String}  groupName\n    */\n\n  }, {\n    key: 'addToList',\n    value: function addToList(scope, type, groupName, userEmail) {\n      var _this = this;\n\n      var myGroups = _this.context.groups;\n      if (myGroups[scope] === undefined) {\n        myGroups[scope] = {};\n      }\n      if (myGroups[scope][groupName] === undefined) {\n        myGroups = _this.createList(scope, type, groupName);\n      }\n      if (myGroups[scope][groupName].indexOf(userEmail) === -1) {\n        myGroups[scope][groupName].push(userEmail);\n      }\n    }\n\n    /**\n    * Removes the given user email from the group with the given name.\n    * @param  {String}  userEmail\n    * @param  {String}  groupName\n    */\n\n  }, {\n    key: 'removeFromGroup',\n    value: function removeFromGroup(scope, groupName, userEmail) {\n      var _this = this;\n\n      var myGroups = _this.context.groups;\n      var group = myGroups[scope][groupName];\n\n      for (var i in group) {\n        if (group[i] === userEmail) {\n          group.splice(i, 1);\n          break;\n        }\n      }\n    }\n  }, {\n    key: 'getTimeslots',\n    value: function getTimeslots() {\n      var _this = this;\n      var policies = _this.context.policies.user;\n      var timeRestrictions = [];\n      for (var i in policies) {\n        if (policies[i].condition.split(' ')[0] === 'time') {\n          timeRestrictions.push(policies[i].condition);\n        }\n      }\n      return timeRestrictions;\n    }\n  }, {\n    key: 'getTimeslotById',\n    value: function getTimeslotById(condition) {\n      var _this = this;\n      var policies = _this.context.policies.user;\n      for (var i in policies) {\n        if (policies[i].condition === condition) {\n          return policies[i];\n        }\n      }\n    }\n  }]);\n  return PolicyEngine;\n}();\n\nexports.default = PolicyEngine;\nmodule.exports = exports['default'];\n\n},{\"./PDP\":38,\"./PEP\":39,\"babel-runtime/helpers/classCallCheck\":3,\"babel-runtime/helpers/createClass\":4,\"babel-runtime/helpers/typeof\":5}]},{},[40])(40)\n});\n\n","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","\"use strict\";\n\nvar _Symbol = require(\"babel-runtime/core-js/symbol\")[\"default\"];\n\nexports[\"default\"] = function (obj) {\n  return obj && obj.constructor === _Symbol ? \"symbol\" : typeof obj;\n};\n\nexports.__esModule = true;","var $ = require('../../modules/$');\nmodule.exports = function defineProperty(it, key, desc){\n  return $.setDesc(it, key, desc);\n};","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nmodule.exports = require('../../modules/$.core').Symbol;","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};","var isObject = require('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};","var core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef","// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});","// all enumerable object keys, includes symbols\nvar $ = require('./$');\nmodule.exports = function(it){\n  var keys       = $.getKeys(it)\n    , getSymbols = $.getSymbols;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = $.isEnum\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))keys.push(key);\n  }\n  return keys;\n};","var global    = require('./$.global')\n  , core      = require('./$.core')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./$.to-iobject')\n  , getNames  = require('./$').getNames\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return getNames(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.get = function getOwnPropertyNames(it){\n  if(windowNames && toString.call(it) == '[object Window]')return getWindowNames(it);\n  return getNames(toIObject(it));\n};","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};","var $          = require('./$')\n  , createDesc = require('./$.property-desc');\nmodule.exports = require('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};","// 7.2.2 IsArray(argument)\nvar cof = require('./$.cof');\nmodule.exports = Array.isArray || function(arg){\n  return cof(arg) == 'Array';\n};","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};","var $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};","var $         = require('./$')\n  , toIObject = require('./$.to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = $.getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};","module.exports = true;","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};","module.exports = require('./$.hide');","var def = require('./$').setDesc\n  , has = require('./$.has')\n  , TAG = require('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};","var global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./$.iobject')\n  , defined = require('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};","var store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};","'use strict';\n// ECMAScript 6 symbols shim\nvar $              = require('./$')\n  , global         = require('./$.global')\n  , has            = require('./$.has')\n  , DESCRIPTORS    = require('./$.descriptors')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , $fails         = require('./$.fails')\n  , shared         = require('./$.shared')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , uid            = require('./$.uid')\n  , wks            = require('./$.wks')\n  , keyOf          = require('./$.keyof')\n  , $names         = require('./$.get-names')\n  , enumKeys       = require('./$.enum-keys')\n  , isArray        = require('./$.is-array')\n  , anObject       = require('./$.an-object')\n  , toIObject      = require('./$.to-iobject')\n  , createDesc     = require('./$.property-desc')\n  , getDesc        = $.getDesc\n  , setDesc        = $.setDesc\n  , _create        = $.create\n  , getNames       = $names.get\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , setter         = false\n  , HIDDEN         = wks('_hidden')\n  , isEnum         = $.isEnum\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , useNative      = typeof $Symbol == 'function'\n  , ObjectProto    = Object.prototype;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(setDesc({}, 'a', {\n    get: function(){ return setDesc(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = getDesc(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  setDesc(it, key, D);\n  if(protoDesc && it !== ObjectProto)setDesc(ObjectProto, key, protoDesc);\n} : setDesc;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol.prototype);\n  sym._k = tag;\n  DESCRIPTORS && setter && setSymbolDesc(ObjectProto, tag, {\n    configurable: true,\n    set: function(value){\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    }\n  });\n  return sym;\n};\n\nvar isSymbol = function(it){\n  return typeof it == 'symbol';\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(D && has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))setDesc(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return setDesc(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key);\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key]\n    ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  var D = getDesc(it = toIObject(it), key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(!has(AllSymbols, key = names[i++]) && key != HIDDEN)result.push(key);\n  return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(has(AllSymbols, key = names[i++]))result.push(AllSymbols[key]);\n  return result;\n};\nvar $stringify = function stringify(it){\n  if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n  var args = [it]\n    , i    = 1\n    , $$   = arguments\n    , replacer, $replacer;\n  while($$.length > i)args.push($$[i++]);\n  replacer = args[1];\n  if(typeof replacer == 'function')$replacer = replacer;\n  if($replacer || !isArray(replacer))replacer = function(key, value){\n    if($replacer)value = $replacer.call(this, key, value);\n    if(!isSymbol(value))return value;\n  };\n  args[1] = replacer;\n  return _stringify.apply($JSON, args);\n};\nvar buggyJSON = $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n});\n\n// 19.4.1.1 Symbol([description])\nif(!useNative){\n  $Symbol = function Symbol(){\n    if(isSymbol(this))throw TypeError('Symbol is not a constructor');\n    return wrap(uid(arguments.length > 0 ? arguments[0] : undefined));\n  };\n  redefine($Symbol.prototype, 'toString', function toString(){\n    return this._k;\n  });\n\n  isSymbol = function(it){\n    return it instanceof $Symbol;\n  };\n\n  $.create     = $create;\n  $.isEnum     = $propertyIsEnumerable;\n  $.getDesc    = $getOwnPropertyDescriptor;\n  $.setDesc    = $defineProperty;\n  $.setDescs   = $defineProperties;\n  $.getNames   = $names.get = $getOwnPropertyNames;\n  $.getSymbols = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./$.library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n}\n\nvar symbolStatics = {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    return keyOf(SymbolRegistry, key);\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n};\n// 19.4.2.2 Symbol.hasInstance\n// 19.4.2.3 Symbol.isConcatSpreadable\n// 19.4.2.4 Symbol.iterator\n// 19.4.2.6 Symbol.match\n// 19.4.2.8 Symbol.replace\n// 19.4.2.9 Symbol.search\n// 19.4.2.10 Symbol.species\n// 19.4.2.11 Symbol.split\n// 19.4.2.12 Symbol.toPrimitive\n// 19.4.2.13 Symbol.toStringTag\n// 19.4.2.14 Symbol.unscopables\n$.each.call((\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,' +\n  'species,split,toPrimitive,toStringTag,unscopables'\n).split(','), function(it){\n  var sym = wks(it);\n  symbolStatics[it] = useNative ? sym : wrap(sym);\n});\n\nsetter = true;\n\n$export($export.G + $export.W, {Symbol: $Symbol});\n\n$export($export.S, 'Symbol', symbolStatics);\n\n$export($export.S + $export.F * !useNative, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!useNative || buggyJSON), 'JSON', {stringify: $stringify});\n\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);","class Operators {\n\n  constructor() {\n    let _this = this;\n    _this.operators = _this.setOperators();\n  }\n\n  setOperators() {\n    let _this = this;\n    let operators = {\n      between: (params) => { return _this.isBetween(params[0][0], params[0][1], params[1]); },\n      in: (params) => { return params[0].indexOf(params[1]) > -1; },\n      equals: (params) => { return params[0][0] === '*' || params[0][0] === params[1]; },\n\n      or: (params) => { return params[0] || params[1]; },\n      and: (params) => { return params[0] && params[1]; },\n      not: (params) => { return !params[0]; }\n    };\n    return operators;\n  }\n\n  /**\n  * Verifies if the current time is between the given start and end times.\n  * @param {Number}     start\n  * @param {Number}     end\n  * @return {Boolean}   boolean\n  */\n  isBetween(start, end, now) {\n    start = parseInt(start);\n    end = parseInt(end);\n\n    if (end < start) {\n      now = (now < start) ? now += 2400 : now;\n      end += 2400;\n    }\n\n    return (now > start && now < end);\n  }\n\n}\n\nexport default Operators;\n","import Operators from './Operators';\n\n/**\n* The Policy Decision Point (PDP) decides if a message is to be authorised by checking a set of\n* policies. The resource to be verified is specified in the first word of the 'condition' field of\n* a Policy object. The implementation that verifies if the message is compliant with a policy is\n* specified in a hashtable to allow dynamic definition of the implementation, providing\n* extensibility to the Policy Engine functionalities.\n*/\nclass PDP {\n\n  /**\n  * This method is invoked by the Policy Engine and instantiates the Policy Decision Point. It\n  * initialises or loads from the Persistence Manager the object 'myGroups' to store the user's\n  * groups.\n  * @param  {Registry}    muchruntimeRegistry\n  */\n  constructor(context) {\n    let _this = this;\n    _this.context = context;\n    _this.operators = new Operators(context);\n  }\n\n  /**\n  * Verifies if the given message is compliant with the given policies. If one of the policies\n  * evaluates to 'false', then the message is not authorised. Returns the final authorisation\n  * decision and a set of actions that policies may require.\n  * @param {Message}  message\n  * @param {URL}      hypertyToVerify\n  * @param {Array}    policies\n  * @return {Array}   [authDecision, actions]\n  */\n  evaluate(message, policies) {\n    let _this = this;\n    let results = [true];\n    let actions = [];\n    for (let i in policies) {\n      let policy = policies[i];\n      let condition = policy.condition;\n      let verifiesCondition = false;\n      if (typeof condition === 'object') {\n        verifiesCondition = _this.verifiesAdvancedCondition(condition[0], condition[1], condition[2], policy.scope, message);\n      } else {\n        verifiesCondition = _this.verifiesSimpleCondition(condition, policy.scope, message);\n      }\n\n      if (verifiesCondition) {\n        results.push(policy.authorise);\n      }\n      if (policy.actions !== []) {\n        for (let i in policy.actions) {\n          let newAction = {\n            method: policy.actions[i].method,\n            params: message\n          };\n          actions.push(newAction);\n        }\n      }\n    }\n\n    let authDecision = results.indexOf(false) === -1;\n    return [authDecision, actions];\n  }\n\n  verifiesSimpleCondition(condition, scope, message) {\n    let _this = this;\n    let splitCondition = condition.split(' ');\n    let variable = splitCondition[0];\n    let operator = splitCondition[1];\n\n    let params;\n    if (operator === 'in') {\n      _this.context.group = {scope: scope, group: splitCondition[2], destination: message.to};\n      params = _this.context.group;\n    } else {\n      params = splitCondition.slice(2);\n    }\n    _this.context[variable] = {message: message};\n    let value = _this.context[variable];\n    return _this.operators.operators[operator]([params, value]);\n  }\n\n  verifiesAdvancedCondition(operator, left, right, scope, message) {\n    let _this = this;\n    while (typeof left === 'object') {\n      left = _this.verifiesAdvancedCondition(left[0], left[1], left[2], scope, message);\n    }\n    if (right !== undefined) {\n      while (typeof right === 'object') {\n        right = _this.verifiesAdvancedCondition(right[0], right[1], right[2], scope, message);\n      }\n    }\n\n    let resultLeft = (typeof left === 'boolean') ? left : _this.verifiesSimpleCondition(left, scope, message);\n\n    let resultRight;\n    if (right !== undefined) {\n      resultRight = (typeof right === 'boolean') ? right : _this.verifiesSimpleCondition(right, scope, message);\n    }\n\n    return _this.operators.operators[operator]([resultLeft, resultRight]);\n  }\n}\n\nexport default PDP;\n","class PEP {\n\n  constructor(context) {\n    let _this = this;\n    _this.context = context;\n  }\n\n  enforce(result) {\n    let _this = this;\n    let authDecision = result[0];\n    let actions = result[1];\n\n    for (let i in actions) {\n      _this.context[actions[i].method](actions[i].params, authDecision);\n    }\n  }\n\n  /*sendAutomaticMessage() {}\n\n  forwardToID() {}\n\n  forwardToHyperty() {}*/\n\n}\n\nexport default PEP;\n","//jshint browser:true, jquery: true\n\n//import persistenceManager from 'service-framework/dist/PersistenceManager';\n\nimport PEP from './PEP';\nimport PDP from './PDP';\n\n/**\n* The Policy Engine intercepts all the messages sent through the Message Bus and applies the\n* policies defined by the service provider and the user.\n*/\nclass PolicyEngine {\n\n  /**\n  * This method is invoked by the RuntimeUA and instantiates the Policy Engine. A Policy Decision\n  * Point (PDP) and a Policy Enforcement Point (PEP) are initialised for the evaluation of policies\n  * and the enforcement of additional actions, respectively.\n  * @param  {IdentityModule}    identityModule\n  * @param  {Registry}          runtimeRegistry\n  */\n  constructor(context) {\n    let _this = this;\n    _this.context = context;\n    _this.context.pdp = new PDP(context);\n    _this.context.pep = new PEP(context);\n  }\n\n  /**\n  * Associates the given policies with a scope. The possible scopes are 'global', 'hyperty' and\n  * 'user'.\n  * @param  {Policy[]}  policies\n  * @param  {String}    scope\n  */\n  addPolicies(newPolicies) {\n    let _this = this;\n\n    let myPolicies = _this.context.policies;\n    if (myPolicies === undefined) {\n      myPolicies = {};\n    }\n\n    for (let i in newPolicies) {\n      let newPolicy = newPolicies[i];\n      let scope = newPolicy.scope;\n      if (myPolicies[scope] === undefined) {\n        myPolicies[scope] = [];\n      }\n      for (let j in myPolicies[scope]) {\n        let existingPolicy = myPolicies[scope][j];\n        if (existingPolicy.condition === newPolicy.condition) {\n          _this.removePolicies(newPolicies[i].condition);\n          break;\n        }\n      }\n      myPolicies[scope].push(newPolicies[i]);\n    }\n\n    _this.context.policies = myPolicies;\n  }\n\n  /**\n  * Removes the policy with the given ID from the given scope. If policyID is '*', removes all policies associated with the given scope.\n  * @param  {String}  policyID\n  * @param  {String}  scope\n  */\n  removePolicies(scope, condition) {\n    let _this = this;\n    let myPolicies = _this.context.policies;\n\n    if (scope !== '*') {\n\n      if (scope in myPolicies) {\n        if (condition !== '*') {\n          let policies = myPolicies[scope];\n          let typeOfCondition = typeof condition;\n          for (let i in policies) {\n            let typeOfPolicyCondition = typeof policies[i].condition;\n            if (typeOfCondition === typeOfPolicyCondition) {\n              if (typeOfCondition === 'string') {\n                if (policies[i].condition === condition) {\n                  policies.splice(i, 1);\n                  break;\n                }\n              } else { //typeof condition = object (advanced policy)\n                if (_this.areEqualArrays(policies[i].condition, condition)) {\n                  policies.splice(i, 1);\n                }\n              }\n            }\n          }\n        } else {\n          delete myPolicies[scope];\n        }\n\n        _this.context.policies = myPolicies;\n      }\n\n    } else {\n      _this.context.policies = {};\n    }\n  }\n\n  areEqualArrays(array1, array2) {\n    if (array1.length !== array2.length) {\n      return false;\n    }\n\n    let numElements = array1.length;\n    for (let i = 0; i < numElements; i++) {\n      if (array1[i] instanceof Array && array2[i] instanceof Array) {\n        if (!array1[i].equals(array2[i])) {\n          return false;\n        }\n      } else if (array1[i] !== array2[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n  * This method is executed when a message is intercepted in the Message Bus. The first step is the\n  * assignment of the identity associated with the message. The second step is the evaluation of the\n  * applicable policies in order to obtain an authorisation decision: if a policy evaluates to\n  * false, then the message is unauthorised. The third step is the enforcement of the actions that\n  * policies may require. Finally, the message is stamped as authorised or not and is returned to\n  * the Message Bus, where it will be forwarded or blocked.\n  * @param  {Message}  message\n  */\n  authorise(message) {\n    let _this = this;\n    return _this.context.authorise(message);\n  }\n\n  getGroupsNames(scope) {\n    let _this = this;\n    let myGroups = _this.context.groups;\n    let groupsNames = [];\n    if (myGroups[scope] !== {}) {\n      for (let groupName in myGroups[scope]) {\n        groupsNames.push(groupName);\n      }\n    }\n    return groupsNames;\n  }\n\n  /**\n  * Retrieves the group with the given group name from the PDP.\n  * @param  {String}  groupName\n  * @return {Array}   group\n  */\n  getList(scope, groupName) {\n    let _this = this;\n    let myGroups = _this.context.groups;\n    let members = [];\n    if (myGroups[scope] !== undefined && myGroups[scope][groupName] !== undefined) {\n      members = myGroups[scope][groupName];\n    }\n    return members;\n  }\n\n  /**\n  * Creates a group with the given name.\n  * @param  {String}  groupName\n  */\n  createList(scope, type, groupName) {\n    let _this = this;\n\n    let myGroups = _this.context.groups;\n    if (myGroups[scope] === undefined) {\n      myGroups[scope] = {};\n    }\n    myGroups[scope][groupName] = [];\n\n    let policy = {\n      authorise: false,\n      condition: type + ' in ' + groupName,\n      scope: scope,\n      actions: []\n    };\n    _this.addPolicies([policy]);\n\n    return myGroups;\n  }\n\n  deleteGroup(scope, groupName) {\n    let _this = this;\n\n    let myGroups = _this.context.groups;\n    delete myGroups[scope][groupName];\n\n    let myPolicies = _this.context.policies;\n\n    let policies = myPolicies[scope];\n    for (let i in policies) {\n      let condition = policies[i].condition.split(' ');\n      condition.shift();\n      let groupInPolicy = condition.join(' ');\n      if (groupInPolicy === groupName) {\n        delete policies[i];\n        break;\n      }\n    }\n  }\n\n  /**\n  * Adds the given user email to the group with the given name.\n  * @param  {String}  userEmail\n  * @param  {String}  groupName\n  */\n  addToList(scope, type, groupName, userEmail) {\n    let _this = this;\n\n    let myGroups = _this.context.groups;\n    if (myGroups[scope] === undefined) {\n      myGroups[scope] = {};\n    }\n    if (myGroups[scope][groupName] === undefined) {\n      myGroups = _this.createList(scope, type, groupName);\n    }\n    if (myGroups[scope][groupName].indexOf(userEmail) === -1) {\n      myGroups[scope][groupName].push(userEmail);\n    }\n\n  }\n\n  /**\n  * Removes the given user email from the group with the given name.\n  * @param  {String}  userEmail\n  * @param  {String}  groupName\n  */\n  removeFromGroup(scope, groupName, userEmail) {\n    let _this = this;\n\n    let myGroups = _this.context.groups;\n    let group = myGroups[scope][groupName];\n\n    for (let i in group) {\n      if (group[i] === userEmail) {\n        group.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  getTimeslots() {\n    let _this = this;\n    let policies = _this.context.policies.user;\n    let timeRestrictions = [];\n    for (let i in policies) {\n      if (policies[i].condition.split(' ')[0] === 'time') {\n        timeRestrictions.push(policies[i].condition);\n      }\n    }\n    return timeRestrictions;\n  }\n\n  getTimeslotById(condition) {\n    let _this = this;\n    let policies = _this.context.policies.user;\n    for (let i in policies) {\n      if (policies[i].condition === condition) {\n        return policies[i];\n      }\n    }\n  }\n\n}\n\nexport default PolicyEngine;\n"],"sourceRoot":"/source/"}
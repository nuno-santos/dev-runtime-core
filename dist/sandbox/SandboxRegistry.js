"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),SandboxRegistry=function(){function e(s){(0,_classCallCheck3.default)(this,e);var t=this;t._bus=s,t._components={},s.addListener(e.InternalDeployAddress,function(e){switch(e.type){case"create":t._onDeploy(e);break;case"delete":t._onRemove(e)}})}return(0,_createClass3.default)(e,[{key:"_responseMsg",value:function(s,t,r){var n={id:s.id,type:"response",from:e.InternalDeployAddress,to:e.ExternalDeployAddress},o={};return t&&(o.code=t),r&&(o.desc=r),n.body=o,n}},{key:"_onDeploy",value:function(e){var s=this,t=e.body.config,r=e.body.url,n=e.body.sourceCode,o=void 0,a=void 0;if(s._components.hasOwnProperty(r))o=500,a="Instance "+r+" already exist!";else try{s._components[r]=s._create(r,n,t),o=200}catch(e){o=500,a=e}var l=s._responseMsg(e,o,a);s._bus.postMessage(l)}},{key:"_onRemove",value:function(e){var s=this,t=e.body.url,r=void 0,n=void 0;s._components.hasOwnProperty(t)?(delete s._components[t],s._bus.removeAllListenersOf(t),r=200):(r=500,n="Instance "+t+" doesn't exist!");var o=s._responseMsg(e,r,n);s._bus.postMessage(o)}},{key:"_create",value:function(e,s,t){}},{key:"components",get:function(){return this._components}}]),e}();SandboxRegistry.ExternalDeployAddress="hyperty-runtime://sandbox/external",SandboxRegistry.InternalDeployAddress="hyperty-runtime://sandbox/internal",exports.default=SandboxRegistry,module.exports=exports.default;
//# sourceMappingURL=SandboxRegistry.js.map

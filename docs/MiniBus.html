<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: MiniBus</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: MiniBus</h1>

    




<section>

<header>
    
        <h2>MiniBus</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    <h4 class="name" id="MiniBus"><span class="type-signature"></span>new MiniBus<span class="signature">()</span><span class="type-signature"></span></h4>

    















<dl class="details">

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>micaelpedrosa@gmail.com
Minimal interface and implementation to send and receive messages. It can be reused in many type of components.
Components that need a message system should receive this class as a dependency or extend it.
Extensions should implement the following private methods: _onPostMessage and _registerExternalListener</li>
        </ul>
    </dd>
    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="bus_MiniBus.js.html">bus/MiniBus.js</a>, <a href="bus_MiniBus.js.html#line7">line 7</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="_onPostMessage"><span class="type-signature"></span>_onPostMessage<span class="signature">(msg)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Not public available, used by the class extension implementation, to process messages from the public "postMessage" without a registered listener.
Used to send the message to an external interface, like a WebWorker, IFrame, etc.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>msg</code></td>
            

            <td class="type">
            
                
<span class="param-type">Message.Message</span>


            
            </td>

            

            

            <td class="description last">Message</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="bus_MiniBus.js.html">bus/MiniBus.js</a>, <a href="bus_MiniBus.js.html#line206">line 206</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="_registerExternalListener"><span class="type-signature"></span>_registerExternalListener<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    Not public available, used by the class extension implementation, to process all messages that enter the MiniBus from an external interface, like a WebWorker, IFrame, etc.
This method is called one time in the constructor to register external listeners.
The implementation will probably call the "_onMessage" method to publish in the local listeners.
DO NOT call "postMessage", there is a danger that the message enters in a cycle!
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="bus_MiniBus.js.html">bus/MiniBus.js</a>, <a href="bus_MiniBus.js.html#line214">line 214</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="addListener"><span class="type-signature"></span>addListener<span class="signature">(url, listener)</span><span class="type-signature"> &rarr; {MsgListener}</span></h4>

    



<div class="description">
    Register listener to receive message when "msg.to === url".
Special url "*" for default listener is accepted to intercept all messages.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">URL</span>


            
            </td>

            

            

            <td class="description last">Address to intercept, tha is in the message "to"</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>listener</code></td>
            

            <td class="type">
            
                
<span class="param-type">Listener</span>


            
            </td>

            

            

            <td class="description last">listener</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="bus_MiniBus.js.html">bus/MiniBus.js</a>, <a href="bus_MiniBus.js.html#line34">line 34</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    instance of MsgListener
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">MsgListener</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="addResponseListener"><span class="type-signature"></span>addResponseListener<span class="signature">(url, msgId, responseListener)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Manually add a response listener. Only one listener per message ID should exist.
ATENTION, there is no timeout for this listener.
The listener should be removed with a removeResponseListener, failing to do this will result in a unreleased memory problem.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">URL</span>


            
            </td>

            

            

            <td class="description last">Origin address of the message sent, "msg.from".</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>msgId</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Message ID that is returned from the postMessage.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>responseListener</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">Callback function for the response</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="bus_MiniBus.js.html">bus/MiniBus.js</a>, <a href="bus_MiniBus.js.html#line56">line 56</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="bind"><span class="type-signature"></span>bind<span class="signature">(outUrl, inUrl, target)</span><span class="type-signature"> &rarr; {Bound}</span></h4>

    



<div class="description">
    Helper method to bind listeners (in both directions) into other MiniBus target.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>outUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">URL</span>


            
            </td>

            

            

            <td class="description last">Outbound URL, register listener for url in direction "this -> target"</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>inUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">URL</span>


            
            </td>

            

            

            <td class="description last">Inbound URL, register listener for url in direction "target -> this"</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>target</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="MiniBus.html">MiniBus</a></span>


            
            </td>

            

            

            <td class="description last">The other target MiniBus</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="bus_MiniBus.js.html">bus/MiniBus.js</a>, <a href="bus_MiniBus.js.html#line138">line 138</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    an object that contains the properties [thisListener, targetListener] and the unbind method.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Bound</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="postMessage"><span class="type-signature"></span>postMessage<span class="signature">(msg, responseCallback)</span><span class="type-signature"> &rarr; {number}</span></h4>

    



<div class="description">
    Send messages to local listeners, or if not exists to external listeners.
It's has an optional mechanism for automatic management of response handlers.
The response handler will be unregistered after receiving the response, or after response timeout (default to 3s).
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>msg</code></td>
            

            <td class="type">
            
                
<span class="param-type">Message</span>


            
            </td>

            

            

            <td class="description last">Message to send. Message ID is automatically added to the message.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>responseCallback</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last">Optional parameter, if the developer what's automatic response management.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="bus_MiniBus.js.html">bus/MiniBus.js</a>, <a href="bus_MiniBus.js.html#line85">line 85</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    Returns the message ID, in case it should be needed for manual management of the response handler.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="removeAllListenersOf"><span class="type-signature"></span>removeAllListenersOf<span class="signature">(url)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Remove all existent listeners for the URL
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">URL</span>


            
            </td>

            

            

            <td class="description last">Address registered</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="bus_MiniBus.js.html">bus/MiniBus.js</a>, <a href="bus_MiniBus.js.html#line73">line 73</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
            

    

    <h4 class="name" id="removeResponseListener"><span class="type-signature"></span>removeResponseListener<span class="signature">(url, msgId)</span><span class="type-signature"></span></h4>

    



<div class="description">
    Remove the response listener.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>url</code></td>
            

            <td class="type">
            
                
<span class="param-type">URL</span>


            
            </td>

            

            

            <td class="description last">Origin address of the message sent, "msg.from".</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>msgId</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Message ID that is returned from the postMessage</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="bus_MiniBus.js.html">bus/MiniBus.js</a>, <a href="bus_MiniBus.js.html#line65">line 65</a>
    </li></ul></dd>
    

    

    

    
</dl>
















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-utils.html">utils</a></li></ul><h3>Classes</h3><ul><li><a href="AddressAllocation.html">AddressAllocation</a></li><li><a href="EventEmitter.html">EventEmitter</a></li><li><a href="IdentityModule.html">IdentityModule</a></li><li><a href="MessageBus.html">MessageBus</a></li><li><a href="MiniBus.html">MiniBus</a></li><li><a href="Pipeline.html">Pipeline</a></li><li><a href="PolicyEngine.html">PolicyEngine</a></li><li><a href="ProtoStub.html">ProtoStub</a></li><li><a href="QoSUA.html">QoSUA</a></li><li><a href="Registry.html">Registry</a></li><li><a href="RuntimeUA.html">RuntimeUA</a></li><li><a href="Sandbox.html">Sandbox</a></li><li><a href="SyncherManager.html">SyncherManager</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Nov 24 2015 16:47:08 GMT+0000 (WET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>